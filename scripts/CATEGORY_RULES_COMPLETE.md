# โ ููุงุนุฏ ุงูุชุตููู - ููุชููุฉ

## ๐ ุงูููุฎุต

### โ ูุง ุชู ุฅูุฌุงุฒู:

1. **ุงุณุชูุฑุงุฏ ููุงุนุฏ ุงูุชุตููู ูู D365**
   - ุงูููู: `category2026.xlsx`
   - ุงูุณุฌูุงุช: **46 ูุงุนุฏุฉ ุชุตููู**
   - ุงูุฌุฏูู: `product_category_rules`
   - ุงูุญุงูุฉ: โ **ููุชูู**

2. **ุฅูุดุงุก API Endpoint**
   - ุงูููู: `api/get-category-rules.ts`
   - ุงููุธููุฉ: ุฌูุจ ููุงุนุฏ ุงูุชุตููู ูู PostgreSQL
   - ุงูุญุงูุฉ: โ **ุฌุงูุฒ**

3. **ุฅูุดุงุก Helper Functions**
   - ุงูููู: `src/utils/categoryHelper.ts`
   - ุงูุฏูุงู:
     - `getCategoryFromD365()` - ุชุตููู ูู item_code
     - `getCategoryFromLegacy()` - ุชุตููู ูู item_alias
     - `getCategoryUnified()` - ุฏุงูุฉ ููุญุฏุฉ ุชุฏุนู ููุง ุงููุธุงููู
   - ุงูุญุงูุฉ: โ **ุฌุงูุฒ**

4. **ุชุญุฏูุซ calculator.ts**
   - ุชุญุฏูุซ `getCategory()` ูุน ุชุนูููุงุช ุชูุถุญ ุงููุธุงููู
   - ุงูุญุงูุฉ: โ **ูุญุฏุซ**

## ๐ ููู ุงููุธุงููู

### ุงููุธุงู ุงููุฏูู (2024-2025):
- **ุงููุนุชูุฏ**: `item_alias` (ูู gofrugal)
- **ูุซุงู**: `item_alias = "4xxxx"` โ Category = "Duvets"
- **ุงูููุงุนุฏ**: Hardcoded ูู `calculator.ts`
  - `item_alias` ูุจุฏุฃ ุจู "4" โ "Duvets"
  - `item_alias` ูุจุฏุฃ ุจู "2" โ "Duvets Full"
  - ุงุณู ุงูููุชุฌ ูุญุชูู "mattresspad" โ "Toppers"
  - ุงุณู ุงูููุชุฌ ูุญุชูู "pillow" โ "Pillows"

### ุงููุธุงู ุงูุฌุฏูุฏ (2026+):
- **ุงููุนุชูุฏ**: `item_code` (ูู D365)
- **ูุซุงู**: `item_code = "10001"` โ Category = "ูุญุงูุงุช ูููุบ"
- **ุงูููุงุนุฏ**: ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (`product_category_rules`)
- **ุงูุขููุฉ**: ูุทุงุจูุฉ `item_code` ูุน `prefix_pattern` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุงูุฃููููุฉ**: ุฃุทูู prefix ุฃููุงู (ูุซู "10001" ูุจู "1000")

## ๐ ุฃูุซูุฉ ุนูู ุงูููุงุนุฏ ุงููุณุชูุฑุฏุฉ

| Prefix Pattern | Category Name |
|----------------|---------------|
| 10001 | ูุญุงูุงุช ูููุบ |
| 10002 | ูุญุงูุงุช ูููู |
| 10003 | ูุญุงูุงุช ูู |
| 10004 | ูุญุงูุงุช ุชููู |
| 11001 | ุฃุทูู ุบุทุงุก ุณุฑูุฑ (ููููุชุงุช) - ูููุบ |
| 12001 | ุดุฑุงุดู ูููุบ |
| 15001 | ูุฎุฏุงุช ูููุบ |
| 1501 | ูุฎุฏุงุช ุณุชุงูุฏุฑุฏ |
| 1600 | ููุณ ูุฎุฏุฉ - ูููุบ |

**ุฅุฌูุงูู**: 46 ูุงุนุฏุฉ ุชุตููู

## ๐ ุงูุงุณุชุฎุฏุงู

### ููุจูุงูุงุช ุงููุฏููุฉ (2024-2025):
```typescript
import { getCategory } from '../utils/calculator';
const category = getCategory({ name: 'Pillow Standard', alias: '4xxxx' });
// Returns: "Duvets"
```

### ููุจูุงูุงุช ุงูุฌุฏูุฏุฉ (2026+):
```typescript
import { getCategoryUnified } from '../utils/categoryHelper';
const category = await getCategoryUnified(
  { item_code: '10001', name: 'Comforter King' }, 
  2026
);
// Returns: "ูุญุงูุงุช ูููุบ" (ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)
```

## ๐ก API Endpoint

**GET** `/api/get-category-rules`

**Response**:
```json
{
  "success": true,
  "rules": [
    { "prefix_pattern": "10001", "category_name": "ูุญุงูุงุช ูููุบ" },
    { "prefix_pattern": "10002", "category_name": "ูุญุงูุงุช ูููู" },
    ...
  ],
  "count": 46
}
```

## โ ุงูุฎูุงุตุฉ

- โ ููุงุนุฏ ุงูุชุตููู ูุณุชูุฑุฏุฉ ูู `category2026.xlsx` (46 ูุงุนุฏุฉ)
- โ API endpoint ุฌุงูุฒ (`/api/get-category-rules`)
- โ Helper functions ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู
- โ ุงููุธุงู ูุฏุนู ููุง ุงููุธุงููู (ุงููุฏูู ูุงูุฌุฏูุฏ)
- โ ุงูููุฏ ูุญุฏุซ ููุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู

**ุงูุฎุทูุฉ ุงูุชุงููุฉ**: ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ูููู ุชุญุฏูุซ `ProductsPage` ู `useDataProcessing` ูุงุณุชุฎุฏุงู `getCategoryUnified` ุนูุฏ ุงูุญุงุฌุฉ.
