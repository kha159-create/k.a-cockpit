(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function NO(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hI={exports:{}},Kd={},fI={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec=Symbol.for("react.element"),EO=Symbol.for("react.portal"),IO=Symbol.for("react.fragment"),TO=Symbol.for("react.strict_mode"),jO=Symbol.for("react.profiler"),kO=Symbol.for("react.provider"),CO=Symbol.for("react.context"),AO=Symbol.for("react.forward_ref"),DO=Symbol.for("react.suspense"),RO=Symbol.for("react.memo"),MO=Symbol.for("react.lazy"),a_=Symbol.iterator;function OO(e){return e===null||typeof e!="object"?null:(e=a_&&e[a_]||e["@@iterator"],typeof e=="function"?e:null)}var dI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pI=Object.assign,mI={};function du(e,t,n){this.props=e,this.context=t,this.refs=mI,this.updater=n||dI}du.prototype.isReactComponent={};du.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};du.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gI(){}gI.prototype=du.prototype;function S0(e,t,n){this.props=e,this.context=t,this.refs=mI,this.updater=n||dI}var _0=S0.prototype=new gI;_0.constructor=S0;pI(_0,du.prototype);_0.isPureReactComponent=!0;var u_=Array.isArray,vI=Object.prototype.hasOwnProperty,N0={current:null},yI={key:!0,ref:!0,__self:!0,__source:!0};function wI(e,t,n){var r,o={},s=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(s=""+t.key),t)vI.call(t,r)&&!yI.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var f=Array(c),p=0;p<c;p++)f[p]=arguments[p+2];o.children=f}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)o[r]===void 0&&(o[r]=c[r]);return{$$typeof:Ec,type:e,key:s,ref:u,props:o,_owner:N0.current}}function LO(e,t){return{$$typeof:Ec,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function E0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ec}function PO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var l_=/\/+/g;function fv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PO(""+e.key):t.toString(36)}function Tf(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case Ec:case EO:u=!0}}if(u)return u=e,o=o(u),e=r===""?"."+fv(u,0):r,u_(o)?(n="",e!=null&&(n=e.replace(l_,"$&/")+"/"),Tf(o,t,n,"",function(p){return p})):o!=null&&(E0(o)&&(o=LO(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(l_,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=r===""?".":r+":",u_(e))for(var c=0;c<e.length;c++){s=e[c];var f=r+fv(s,c);u+=Tf(s,t,n,f,o)}else if(f=OO(e),typeof f=="function")for(e=f.call(e),c=0;!(s=e.next()).done;)s=s.value,f=r+fv(s,c++),u+=Tf(s,t,n,f,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Qh(e,t,n){if(e==null)return e;var r=[],o=0;return Tf(e,r,"","",function(s){return t.call(n,s,o++)}),r}function FO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cn={current:null},jf={transition:null},UO={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:jf,ReactCurrentOwner:N0};function xI(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Qh,forEach:function(e,t,n){Qh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qh(e,function(){t++}),t},toArray:function(e){return Qh(e,function(t){return t})||[]},only:function(e){if(!E0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=du;Me.Fragment=IO;Me.Profiler=jO;Me.PureComponent=S0;Me.StrictMode=TO;Me.Suspense=DO;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UO;Me.act=xI;Me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pI({},e.props),o=e.key,s=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,u=N0.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(f in t)vI.call(t,f)&&!yI.hasOwnProperty(f)&&(r[f]=t[f]===void 0&&c!==void 0?c[f]:t[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){c=Array(f);for(var p=0;p<f;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:Ec,type:e.type,key:o,ref:s,props:r,_owner:u}};Me.createContext=function(e){return e={$$typeof:CO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kO,_context:e},e.Consumer=e};Me.createElement=wI;Me.createFactory=function(e){var t=wI.bind(null,e);return t.type=e,t};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:AO,render:e}};Me.isValidElement=E0;Me.lazy=function(e){return{$$typeof:MO,_payload:{_status:-1,_result:e},_init:FO}};Me.memo=function(e,t){return{$$typeof:RO,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=jf.transition;jf.transition={};try{e()}finally{jf.transition=t}};Me.unstable_act=xI;Me.useCallback=function(e,t){return Cn.current.useCallback(e,t)};Me.useContext=function(e){return Cn.current.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e){return Cn.current.useDeferredValue(e)};Me.useEffect=function(e,t){return Cn.current.useEffect(e,t)};Me.useId=function(){return Cn.current.useId()};Me.useImperativeHandle=function(e,t,n){return Cn.current.useImperativeHandle(e,t,n)};Me.useInsertionEffect=function(e,t){return Cn.current.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return Cn.current.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return Cn.current.useMemo(e,t)};Me.useReducer=function(e,t,n){return Cn.current.useReducer(e,t,n)};Me.useRef=function(e){return Cn.current.useRef(e)};Me.useState=function(e){return Cn.current.useState(e)};Me.useSyncExternalStore=function(e,t,n){return Cn.current.useSyncExternalStore(e,t,n)};Me.useTransition=function(){return Cn.current.useTransition()};Me.version="18.3.1";fI.exports=Me;var R=fI.exports;const $l=NO(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $O=R,VO=Symbol.for("react.element"),BO=Symbol.for("react.fragment"),zO=Object.prototype.hasOwnProperty,qO=$O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KO={key:!0,ref:!0,__self:!0,__source:!0};function bI(e,t,n){var r,o={},s=null,u=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)zO.call(t,r)&&!KO.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:VO,type:e,key:s,ref:u,props:o,_owner:qO.current}}Kd.Fragment=BO;Kd.jsx=bI;Kd.jsxs=bI;hI.exports=Kd;var h=hI.exports,Zv={},SI={exports:{}},ar={},_I={exports:{}},NI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,X){var B=P.length;P.push(X);e:for(;0<B;){var ae=B-1>>>1,Q=P[ae];if(0<o(Q,X))P[ae]=X,P[B]=Q,B=ae;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var X=P[0],B=P.pop();if(B!==X){P[0]=B;e:for(var ae=0,Q=P.length,we=Q>>>1;ae<we;){var De=2*(ae+1)-1,xe=P[De],Ve=De+1,re=P[Ve];if(0>o(xe,B))Ve<Q&&0>o(re,xe)?(P[ae]=re,P[Ve]=B,ae=Ve):(P[ae]=xe,P[De]=B,ae=De);else if(Ve<Q&&0>o(re,B))P[ae]=re,P[Ve]=B,ae=Ve;else break e}}return X}function o(P,X){var B=P.sortIndex-X.sortIndex;return B!==0?B:P.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,y=3,w=!1,_=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var X=n(p);X!==null;){if(X.callback===null)r(p);else if(X.startTime<=P)r(p),X.sortIndex=X.expirationTime,t(f,X);else break;X=n(p)}}function j(P){if(S=!1,x(P),!_)if(n(f)!==null)_=!0,te(k);else{var X=n(p);X!==null&&V(j,X.startTime-P)}}function k(P,X){_=!1,S&&(S=!1,N(L),L=-1),w=!0;var B=y;try{for(x(X),v=n(f);v!==null&&(!(v.expirationTime>X)||P&&!z());){var ae=v.callback;if(typeof ae=="function"){v.callback=null,y=v.priorityLevel;var Q=ae(v.expirationTime<=X);X=e.unstable_now(),typeof Q=="function"?v.callback=Q:v===n(f)&&r(f),x(X)}else r(f);v=n(f)}if(v!==null)var we=!0;else{var De=n(p);De!==null&&V(j,De.startTime-X),we=!1}return we}finally{v=null,y=B,w=!1}}var A=!1,T=null,L=-1,F=5,q=-1;function z(){return!(e.unstable_now()-q<F)}function O(){if(T!==null){var P=e.unstable_now();q=P;var X=!0;try{X=T(!0,P)}finally{X?M():(A=!1,T=null)}}else A=!1}var M;if(typeof E=="function")M=function(){E(O)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,H=ee.port2;ee.port1.onmessage=O,M=function(){H.postMessage(null)}}else M=function(){C(O,0)};function te(P){T=P,A||(A=!0,M())}function V(P,X){L=C(function(){P(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){_||w||(_=!0,te(k))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(P){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var B=y;y=X;try{return P()}finally{y=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=y;y=P;try{return X()}finally{y=B}},e.unstable_scheduleCallback=function(P,X,B){var ae=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ae+B:ae):B=ae,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=B+Q,P={id:m++,callback:X,priorityLevel:P,startTime:B,expirationTime:Q,sortIndex:-1},B>ae?(P.sortIndex=B,t(p,P),n(f)===null&&P===n(p)&&(S?(N(L),L=-1):S=!0,V(j,B-ae))):(P.sortIndex=Q,t(f,P),_||w||(_=!0,te(k))),P},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(P){var X=y;return function(){var B=y;y=X;try{return P.apply(this,arguments)}finally{y=B}}}})(NI);_I.exports=NI;var HO=_I.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GO=R,or=HO;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EI=new Set,Vl={};function Cs(e,t){Va(e,t),Va(e+"Capture",t)}function Va(e,t){for(Vl[e]=t,e=0;e<t.length;e++)EI.add(t[e])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ey=Object.prototype.hasOwnProperty,WO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c_={},h_={};function YO(e){return ey.call(h_,e)?!0:ey.call(c_,e)?!1:WO.test(e)?h_[e]=!0:(c_[e]=!0,!1)}function QO(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XO(e,t,n,r){if(t===null||typeof t>"u"||QO(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function An(e,t,n,r,o,s,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=u}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rn[e]=new An(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rn[t]=new An(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rn[e]=new An(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rn[e]=new An(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rn[e]=new An(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rn[e]=new An(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rn[e]=new An(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rn[e]=new An(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rn[e]=new An(e,5,!1,e.toLowerCase(),null,!1,!1)});var I0=/[\-:]([a-z])/g;function T0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(I0,T0);rn[t]=new An(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(I0,T0);rn[t]=new An(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(I0,T0);rn[t]=new An(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rn[e]=new An(e,1,!1,e.toLowerCase(),null,!1,!1)});rn.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rn[e]=new An(e,1,!1,e.toLowerCase(),null,!0,!0)});function j0(e,t,n,r){var o=rn.hasOwnProperty(t)?rn[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XO(t,n,o,r)&&(n=null),r||o===null?YO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ri=GO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xh=Symbol.for("react.element"),xa=Symbol.for("react.portal"),ba=Symbol.for("react.fragment"),k0=Symbol.for("react.strict_mode"),ty=Symbol.for("react.profiler"),II=Symbol.for("react.provider"),TI=Symbol.for("react.context"),C0=Symbol.for("react.forward_ref"),ny=Symbol.for("react.suspense"),ry=Symbol.for("react.suspense_list"),A0=Symbol.for("react.memo"),Qi=Symbol.for("react.lazy"),jI=Symbol.for("react.offscreen"),f_=Symbol.iterator;function ul(e){return e===null||typeof e!="object"?null:(e=f_&&e[f_]||e["@@iterator"],typeof e=="function"?e:null)}var yt=Object.assign,dv;function wl(e){if(dv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);dv=t&&t[1]||""}return`
`+dv+e}var pv=!1;function mv(e,t){if(!e||pv)return"";pv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),s=r.stack.split(`
`),u=o.length-1,c=s.length-1;1<=u&&0<=c&&o[u]!==s[c];)c--;for(;1<=u&&0<=c;u--,c--)if(o[u]!==s[c]){if(u!==1||c!==1)do if(u--,c--,0>c||o[u]!==s[c]){var f=`
`+o[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=u&&0<=c);break}}}finally{pv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wl(e):""}function JO(e){switch(e.tag){case 5:return wl(e.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return e=mv(e.type,!1),e;case 11:return e=mv(e.type.render,!1),e;case 1:return e=mv(e.type,!0),e;default:return""}}function iy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ba:return"Fragment";case xa:return"Portal";case ty:return"Profiler";case k0:return"StrictMode";case ny:return"Suspense";case ry:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case TI:return(e.displayName||"Context")+".Consumer";case II:return(e._context.displayName||"Context")+".Provider";case C0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case A0:return t=e.displayName||null,t!==null?t:iy(e.type)||"Memo";case Qi:t=e._payload,e=e._init;try{return iy(e(t))}catch{}}return null}function ZO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iy(t);case 8:return t===k0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eL(e){var t=kI(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(u){r=""+u,s.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jh(e){e._valueTracker||(e._valueTracker=eL(e))}function CI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kI(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oy(e,t){var n=t.checked;return yt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function d_(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function AI(e,t){t=t.checked,t!=null&&j0(e,"checked",t,!1)}function sy(e,t){AI(e,t);var n=xo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ay(e,t.type,n):t.hasOwnProperty("defaultValue")&&ay(e,t.type,xo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function p_(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ay(e,t,n){(t!=="number"||Gf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xl=Array.isArray;function Ma(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xo(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function uy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return yt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function m_(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Z(92));if(xl(n)){if(1<n.length)throw Error(Z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xo(n)}}function DI(e,t){var n=xo(t.value),r=xo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function g_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function RI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ly(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?RI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zh,MI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zh=Zh||document.createElement("div"),Zh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tL=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(e){tL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),El[t]=El[e]})});function OI(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||El.hasOwnProperty(e)&&El[e]?(""+t).trim():t+"px"}function LI(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=OI(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var nL=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cy(e,t){if(t){if(nL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function hy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fy=null;function D0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dy=null,Oa=null,La=null;function v_(e){if(e=jc(e)){if(typeof dy!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=Qd(t),dy(e.stateNode,e.type,t))}}function PI(e){Oa?La?La.push(e):La=[e]:Oa=e}function FI(){if(Oa){var e=Oa,t=La;if(La=Oa=null,v_(e),t)for(e=0;e<t.length;e++)v_(t[e])}}function UI(e,t){return e(t)}function $I(){}var gv=!1;function VI(e,t,n){if(gv)return e(t,n);gv=!0;try{return UI(e,t,n)}finally{gv=!1,(Oa!==null||La!==null)&&($I(),FI())}}function zl(e,t){var n=e.stateNode;if(n===null)return null;var r=Qd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var py=!1;if(Ti)try{var ll={};Object.defineProperty(ll,"passive",{get:function(){py=!0}}),window.addEventListener("test",ll,ll),window.removeEventListener("test",ll,ll)}catch{py=!1}function rL(e,t,n,r,o,s,u,c,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(m){this.onError(m)}}var Il=!1,Wf=null,Yf=!1,my=null,iL={onError:function(e){Il=!0,Wf=e}};function oL(e,t,n,r,o,s,u,c,f){Il=!1,Wf=null,rL.apply(iL,arguments)}function sL(e,t,n,r,o,s,u,c,f){if(oL.apply(this,arguments),Il){if(Il){var p=Wf;Il=!1,Wf=null}else throw Error(Z(198));Yf||(Yf=!0,my=p)}}function As(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function BI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y_(e){if(As(e)!==e)throw Error(Z(188))}function aL(e){var t=e.alternate;if(!t){if(t=As(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return y_(o),e;if(s===r)return y_(o),t;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=o,r=s;else{for(var u=!1,c=o.child;c;){if(c===n){u=!0,n=o,r=s;break}if(c===r){u=!0,r=o,n=s;break}c=c.sibling}if(!u){for(c=s.child;c;){if(c===n){u=!0,n=s,r=o;break}if(c===r){u=!0,r=s,n=o;break}c=c.sibling}if(!u)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function zI(e){return e=aL(e),e!==null?qI(e):null}function qI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qI(e);if(t!==null)return t;e=e.sibling}return null}var KI=or.unstable_scheduleCallback,w_=or.unstable_cancelCallback,uL=or.unstable_shouldYield,lL=or.unstable_requestPaint,kt=or.unstable_now,cL=or.unstable_getCurrentPriorityLevel,R0=or.unstable_ImmediatePriority,HI=or.unstable_UserBlockingPriority,Qf=or.unstable_NormalPriority,hL=or.unstable_LowPriority,GI=or.unstable_IdlePriority,Hd=null,ii=null;function fL(e){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Hd,e,void 0,(e.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:mL,dL=Math.log,pL=Math.LN2;function mL(e){return e>>>=0,e===0?32:31-(dL(e)/pL|0)|0}var ef=64,tf=4194304;function bl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,u=n&268435455;if(u!==0){var c=u&~o;c!==0?r=bl(c):(s&=u,s!==0&&(r=bl(s)))}else u=n&~o,u!==0?r=bl(u):s!==0&&(r=bl(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lr(t),o=1<<n,r|=e[n],t&=~o;return r}function gL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vL(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Lr(s),c=1<<u,f=o[u];f===-1?(!(c&n)||c&r)&&(o[u]=gL(c,t)):f<=t&&(e.expiredLanes|=c),s&=~c}}function gy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WI(){var e=ef;return ef<<=1,!(ef&4194240)&&(ef=64),e}function vv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ic(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lr(t),e[t]=n}function yL(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Lr(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function M0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Qe=0;function YI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QI,O0,XI,JI,ZI,vy=!1,nf=[],uo=null,lo=null,co=null,ql=new Map,Kl=new Map,eo=[],wL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x_(e,t){switch(e){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(t.pointerId)}}function cl(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=jc(t),t!==null&&O0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function xL(e,t,n,r,o){switch(t){case"focusin":return uo=cl(uo,e,t,n,r,o),!0;case"dragenter":return lo=cl(lo,e,t,n,r,o),!0;case"mouseover":return co=cl(co,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return ql.set(s,cl(ql.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Kl.set(s,cl(Kl.get(s)||null,e,t,n,r,o)),!0}return!1}function eT(e){var t=rs(e.target);if(t!==null){var n=As(t);if(n!==null){if(t=n.tag,t===13){if(t=BI(n),t!==null){e.blockedOn=t,ZI(e.priority,function(){XI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fy=r,n.target.dispatchEvent(r),fy=null}else return t=jc(n),t!==null&&O0(t),e.blockedOn=n,!1;t.shift()}return!0}function b_(e,t,n){kf(e)&&n.delete(t)}function bL(){vy=!1,uo!==null&&kf(uo)&&(uo=null),lo!==null&&kf(lo)&&(lo=null),co!==null&&kf(co)&&(co=null),ql.forEach(b_),Kl.forEach(b_)}function hl(e,t){e.blockedOn===t&&(e.blockedOn=null,vy||(vy=!0,or.unstable_scheduleCallback(or.unstable_NormalPriority,bL)))}function Hl(e){function t(o){return hl(o,e)}if(0<nf.length){hl(nf[0],e);for(var n=1;n<nf.length;n++){var r=nf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(uo!==null&&hl(uo,e),lo!==null&&hl(lo,e),co!==null&&hl(co,e),ql.forEach(t),Kl.forEach(t),n=0;n<eo.length;n++)r=eo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<eo.length&&(n=eo[0],n.blockedOn===null);)eT(n),n.blockedOn===null&&eo.shift()}var Pa=Ri.ReactCurrentBatchConfig,Jf=!0;function SL(e,t,n,r){var o=Qe,s=Pa.transition;Pa.transition=null;try{Qe=1,L0(e,t,n,r)}finally{Qe=o,Pa.transition=s}}function _L(e,t,n,r){var o=Qe,s=Pa.transition;Pa.transition=null;try{Qe=4,L0(e,t,n,r)}finally{Qe=o,Pa.transition=s}}function L0(e,t,n,r){if(Jf){var o=yy(e,t,n,r);if(o===null)Tv(e,t,r,Zf,n),x_(e,r);else if(xL(o,e,t,n,r))r.stopPropagation();else if(x_(e,r),t&4&&-1<wL.indexOf(e)){for(;o!==null;){var s=jc(o);if(s!==null&&QI(s),s=yy(e,t,n,r),s===null&&Tv(e,t,r,Zf,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Tv(e,t,r,null,n)}}var Zf=null;function yy(e,t,n,r){if(Zf=null,e=D0(r),e=rs(e),e!==null)if(t=As(e),t===null)e=null;else if(n=t.tag,n===13){if(e=BI(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zf=e,null}function tT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cL()){case R0:return 1;case HI:return 4;case Qf:case hL:return 16;case GI:return 536870912;default:return 16}default:return 16}}var so=null,P0=null,Cf=null;function nT(){if(Cf)return Cf;var e,t=P0,n=t.length,r,o="value"in so?so.value:so.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===o[s-r];r++);return Cf=o.slice(e,1<r?1-r:void 0)}function Af(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rf(){return!0}function S_(){return!1}function ur(e){function t(n,r,o,s,u){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=u,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rf:S_,this.isPropagationStopped=S_,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rf)},persist:function(){},isPersistent:rf}),t}var pu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F0=ur(pu),Tc=yt({},pu,{view:0,detail:0}),NL=ur(Tc),yv,wv,fl,Gd=yt({},Tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fl&&(fl&&e.type==="mousemove"?(yv=e.screenX-fl.screenX,wv=e.screenY-fl.screenY):wv=yv=0,fl=e),yv)},movementY:function(e){return"movementY"in e?e.movementY:wv}}),__=ur(Gd),EL=yt({},Gd,{dataTransfer:0}),IL=ur(EL),TL=yt({},Tc,{relatedTarget:0}),xv=ur(TL),jL=yt({},pu,{animationName:0,elapsedTime:0,pseudoElement:0}),kL=ur(jL),CL=yt({},pu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AL=ur(CL),DL=yt({},pu,{data:0}),N_=ur(DL),RL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ML={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=OL[e])?!!t[e]:!1}function U0(){return LL}var PL=yt({},Tc,{key:function(e){if(e.key){var t=RL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Af(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ML[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U0,charCode:function(e){return e.type==="keypress"?Af(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Af(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FL=ur(PL),UL=yt({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E_=ur(UL),$L=yt({},Tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U0}),VL=ur($L),BL=yt({},pu,{propertyName:0,elapsedTime:0,pseudoElement:0}),zL=ur(BL),qL=yt({},Gd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KL=ur(qL),HL=[9,13,27,32],$0=Ti&&"CompositionEvent"in window,Tl=null;Ti&&"documentMode"in document&&(Tl=document.documentMode);var GL=Ti&&"TextEvent"in window&&!Tl,rT=Ti&&(!$0||Tl&&8<Tl&&11>=Tl),I_=" ",T_=!1;function iT(e,t){switch(e){case"keyup":return HL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sa=!1;function WL(e,t){switch(e){case"compositionend":return oT(t);case"keypress":return t.which!==32?null:(T_=!0,I_);case"textInput":return e=t.data,e===I_&&T_?null:e;default:return null}}function YL(e,t){if(Sa)return e==="compositionend"||!$0&&iT(e,t)?(e=nT(),Cf=P0=so=null,Sa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rT&&t.locale!=="ko"?null:t.data;default:return null}}var QL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QL[e.type]:t==="textarea"}function sT(e,t,n,r){PI(r),t=ed(t,"onChange"),0<t.length&&(n=new F0("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jl=null,Gl=null;function XL(e){vT(e,0)}function Wd(e){var t=Ea(e);if(CI(t))return e}function JL(e,t){if(e==="change")return t}var aT=!1;if(Ti){var bv;if(Ti){var Sv="oninput"in document;if(!Sv){var k_=document.createElement("div");k_.setAttribute("oninput","return;"),Sv=typeof k_.oninput=="function"}bv=Sv}else bv=!1;aT=bv&&(!document.documentMode||9<document.documentMode)}function C_(){jl&&(jl.detachEvent("onpropertychange",uT),Gl=jl=null)}function uT(e){if(e.propertyName==="value"&&Wd(Gl)){var t=[];sT(t,Gl,e,D0(e)),VI(XL,t)}}function ZL(e,t,n){e==="focusin"?(C_(),jl=t,Gl=n,jl.attachEvent("onpropertychange",uT)):e==="focusout"&&C_()}function eP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wd(Gl)}function tP(e,t){if(e==="click")return Wd(t)}function nP(e,t){if(e==="input"||e==="change")return Wd(t)}function rP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vr=typeof Object.is=="function"?Object.is:rP;function Wl(e,t){if(Vr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ey.call(t,o)||!Vr(e[o],t[o]))return!1}return!0}function A_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function D_(e,t){var n=A_(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=A_(n)}}function lT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cT(){for(var e=window,t=Gf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gf(e.document)}return t}function V0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iP(e){var t=cT(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lT(n.ownerDocument.documentElement,n)){if(r!==null&&V0(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=D_(n,s);var u=D_(n,r);o&&u&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oP=Ti&&"documentMode"in document&&11>=document.documentMode,_a=null,wy=null,kl=null,xy=!1;function R_(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xy||_a==null||_a!==Gf(r)||(r=_a,"selectionStart"in r&&V0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kl&&Wl(kl,r)||(kl=r,r=ed(wy,"onSelect"),0<r.length&&(t=new F0("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_a)))}function of(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Na={animationend:of("Animation","AnimationEnd"),animationiteration:of("Animation","AnimationIteration"),animationstart:of("Animation","AnimationStart"),transitionend:of("Transition","TransitionEnd")},_v={},hT={};Ti&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function Yd(e){if(_v[e])return _v[e];if(!Na[e])return e;var t=Na[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hT)return _v[e]=t[n];return e}var fT=Yd("animationend"),dT=Yd("animationiteration"),pT=Yd("animationstart"),mT=Yd("transitionend"),gT=new Map,M_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(e,t){gT.set(e,t),Cs(t,[e])}for(var Nv=0;Nv<M_.length;Nv++){var Ev=M_[Nv],sP=Ev.toLowerCase(),aP=Ev[0].toUpperCase()+Ev.slice(1);No(sP,"on"+aP)}No(fT,"onAnimationEnd");No(dT,"onAnimationIteration");No(pT,"onAnimationStart");No("dblclick","onDoubleClick");No("focusin","onFocus");No("focusout","onBlur");No(mT,"onTransitionEnd");Va("onMouseEnter",["mouseout","mouseover"]);Va("onMouseLeave",["mouseout","mouseover"]);Va("onPointerEnter",["pointerout","pointerover"]);Va("onPointerLeave",["pointerout","pointerover"]);Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function O_(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sL(r,t,void 0,e),e.currentTarget=null}function vT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var u=r.length-1;0<=u;u--){var c=r[u],f=c.instance,p=c.currentTarget;if(c=c.listener,f!==s&&o.isPropagationStopped())break e;O_(o,c,p),s=f}else for(u=0;u<r.length;u++){if(c=r[u],f=c.instance,p=c.currentTarget,c=c.listener,f!==s&&o.isPropagationStopped())break e;O_(o,c,p),s=f}}}if(Yf)throw e=my,Yf=!1,my=null,e}function nt(e,t){var n=t[Ey];n===void 0&&(n=t[Ey]=new Set);var r=e+"__bubble";n.has(r)||(yT(t,e,2,!1),n.add(r))}function Iv(e,t,n){var r=0;t&&(r|=4),yT(n,e,r,t)}var sf="_reactListening"+Math.random().toString(36).slice(2);function Yl(e){if(!e[sf]){e[sf]=!0,EI.forEach(function(n){n!=="selectionchange"&&(uP.has(n)||Iv(n,!1,e),Iv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sf]||(t[sf]=!0,Iv("selectionchange",!1,t))}}function yT(e,t,n,r){switch(tT(t)){case 1:var o=SL;break;case 4:o=_L;break;default:o=L0}n=o.bind(null,t,n,e),o=void 0,!py||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Tv(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var c=r.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(u===4)for(u=r.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===o||f.nodeType===8&&f.parentNode===o))return;u=u.return}for(;c!==null;){if(u=rs(c),u===null)return;if(f=u.tag,f===5||f===6){r=s=u;continue e}c=c.parentNode}}r=r.return}VI(function(){var p=s,m=D0(n),v=[];e:{var y=gT.get(e);if(y!==void 0){var w=F0,_=e;switch(e){case"keypress":if(Af(n)===0)break e;case"keydown":case"keyup":w=FL;break;case"focusin":_="focus",w=xv;break;case"focusout":_="blur",w=xv;break;case"beforeblur":case"afterblur":w=xv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=__;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=IL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=VL;break;case fT:case dT:case pT:w=kL;break;case mT:w=zL;break;case"scroll":w=NL;break;case"wheel":w=KL;break;case"copy":case"cut":case"paste":w=AL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=E_}var S=(t&4)!==0,C=!S&&e==="scroll",N=S?y!==null?y+"Capture":null:y;S=[];for(var E=p,x;E!==null;){x=E;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,N!==null&&(j=zl(E,N),j!=null&&S.push(Ql(E,j,x)))),C)break;E=E.return}0<S.length&&(y=new w(y,_,null,n,m),v.push({event:y,listeners:S}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",y&&n!==fy&&(_=n.relatedTarget||n.fromElement)&&(rs(_)||_[ji]))break e;if((w||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,w?(_=n.relatedTarget||n.toElement,w=p,_=_?rs(_):null,_!==null&&(C=As(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(w=null,_=p),w!==_)){if(S=__,j="onMouseLeave",N="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(S=E_,j="onPointerLeave",N="onPointerEnter",E="pointer"),C=w==null?y:Ea(w),x=_==null?y:Ea(_),y=new S(j,E+"leave",w,n,m),y.target=C,y.relatedTarget=x,j=null,rs(m)===p&&(S=new S(N,E+"enter",_,n,m),S.target=x,S.relatedTarget=C,j=S),C=j,w&&_)t:{for(S=w,N=_,E=0,x=S;x;x=fa(x))E++;for(x=0,j=N;j;j=fa(j))x++;for(;0<E-x;)S=fa(S),E--;for(;0<x-E;)N=fa(N),x--;for(;E--;){if(S===N||N!==null&&S===N.alternate)break t;S=fa(S),N=fa(N)}S=null}else S=null;w!==null&&L_(v,y,w,S,!1),_!==null&&C!==null&&L_(v,C,_,S,!0)}}e:{if(y=p?Ea(p):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var k=JL;else if(j_(y))if(aT)k=nP;else{k=eP;var A=ZL}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(k=tP);if(k&&(k=k(e,p))){sT(v,k,n,m);break e}A&&A(e,y,p),e==="focusout"&&(A=y._wrapperState)&&A.controlled&&y.type==="number"&&ay(y,"number",y.value)}switch(A=p?Ea(p):window,e){case"focusin":(j_(A)||A.contentEditable==="true")&&(_a=A,wy=p,kl=null);break;case"focusout":kl=wy=_a=null;break;case"mousedown":xy=!0;break;case"contextmenu":case"mouseup":case"dragend":xy=!1,R_(v,n,m);break;case"selectionchange":if(oP)break;case"keydown":case"keyup":R_(v,n,m)}var T;if($0)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Sa?iT(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(rT&&n.locale!=="ko"&&(Sa||L!=="onCompositionStart"?L==="onCompositionEnd"&&Sa&&(T=nT()):(so=m,P0="value"in so?so.value:so.textContent,Sa=!0)),A=ed(p,L),0<A.length&&(L=new N_(L,e,null,n,m),v.push({event:L,listeners:A}),T?L.data=T:(T=oT(n),T!==null&&(L.data=T)))),(T=GL?WL(e,n):YL(e,n))&&(p=ed(p,"onBeforeInput"),0<p.length&&(m=new N_("onBeforeInput","beforeinput",null,n,m),v.push({event:m,listeners:p}),m.data=T))}vT(v,t)})}function Ql(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ed(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=zl(e,n),s!=null&&r.unshift(Ql(e,s,o)),s=zl(e,t),s!=null&&r.push(Ql(e,s,o))),e=e.return}return r}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function L_(e,t,n,r,o){for(var s=t._reactName,u=[];n!==null&&n!==r;){var c=n,f=c.alternate,p=c.stateNode;if(f!==null&&f===r)break;c.tag===5&&p!==null&&(c=p,o?(f=zl(n,s),f!=null&&u.unshift(Ql(n,f,c))):o||(f=zl(n,s),f!=null&&u.push(Ql(n,f,c)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var lP=/\r\n?/g,cP=/\u0000|\uFFFD/g;function P_(e){return(typeof e=="string"?e:""+e).replace(lP,`
`).replace(cP,"")}function af(e,t,n){if(t=P_(t),P_(e)!==t&&n)throw Error(Z(425))}function td(){}var by=null,Sy=null;function _y(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ny=typeof setTimeout=="function"?setTimeout:void 0,hP=typeof clearTimeout=="function"?clearTimeout:void 0,F_=typeof Promise=="function"?Promise:void 0,fP=typeof queueMicrotask=="function"?queueMicrotask:typeof F_<"u"?function(e){return F_.resolve(null).then(e).catch(dP)}:Ny;function dP(e){setTimeout(function(){throw e})}function jv(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Hl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Hl(t)}function ho(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function U_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mu=Math.random().toString(36).slice(2),ni="__reactFiber$"+mu,Xl="__reactProps$"+mu,ji="__reactContainer$"+mu,Ey="__reactEvents$"+mu,pP="__reactListeners$"+mu,mP="__reactHandles$"+mu;function rs(e){var t=e[ni];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ji]||n[ni]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=U_(e);e!==null;){if(n=e[ni])return n;e=U_(e)}return t}e=n,n=e.parentNode}return null}function jc(e){return e=e[ni]||e[ji],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ea(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Qd(e){return e[Xl]||null}var Iy=[],Ia=-1;function Eo(e){return{current:e}}function it(e){0>Ia||(e.current=Iy[Ia],Iy[Ia]=null,Ia--)}function et(e,t){Ia++,Iy[Ia]=e.current,e.current=t}var bo={},yn=Eo(bo),Un=Eo(!1),vs=bo;function Ba(e,t){var n=e.type.contextTypes;if(!n)return bo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function $n(e){return e=e.childContextTypes,e!=null}function nd(){it(Un),it(yn)}function $_(e,t,n){if(yn.current!==bo)throw Error(Z(168));et(yn,t),et(Un,n)}function wT(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Z(108,ZO(e)||"Unknown",o));return yt({},n,r)}function rd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bo,vs=yn.current,et(yn,e),et(Un,Un.current),!0}function V_(e,t,n){var r=e.stateNode;if(!r)throw Error(Z(169));n?(e=wT(e,t,vs),r.__reactInternalMemoizedMergedChildContext=e,it(Un),it(yn),et(yn,e)):it(Un),et(Un,n)}var yi=null,Xd=!1,kv=!1;function xT(e){yi===null?yi=[e]:yi.push(e)}function gP(e){Xd=!0,xT(e)}function Io(){if(!kv&&yi!==null){kv=!0;var e=0,t=Qe;try{var n=yi;for(Qe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yi=null,Xd=!1}catch(o){throw yi!==null&&(yi=yi.slice(e+1)),KI(R0,Io),o}finally{Qe=t,kv=!1}}return null}var Ta=[],ja=0,id=null,od=0,gr=[],vr=0,ys=null,wi=1,xi="";function Zo(e,t){Ta[ja++]=od,Ta[ja++]=id,id=e,od=t}function bT(e,t,n){gr[vr++]=wi,gr[vr++]=xi,gr[vr++]=ys,ys=e;var r=wi;e=xi;var o=32-Lr(r)-1;r&=~(1<<o),n+=1;var s=32-Lr(t)+o;if(30<s){var u=o-o%5;s=(r&(1<<u)-1).toString(32),r>>=u,o-=u,wi=1<<32-Lr(t)+o|n<<o|r,xi=s+e}else wi=1<<s|n<<o|r,xi=e}function B0(e){e.return!==null&&(Zo(e,1),bT(e,1,0))}function z0(e){for(;e===id;)id=Ta[--ja],Ta[ja]=null,od=Ta[--ja],Ta[ja]=null;for(;e===ys;)ys=gr[--vr],gr[vr]=null,xi=gr[--vr],gr[vr]=null,wi=gr[--vr],gr[vr]=null}var rr=null,er=null,ct=!1,Or=null;function ST(e,t){var n=yr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function B_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rr=e,er=ho(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rr=e,er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ys!==null?{id:wi,overflow:xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rr=e,er=null,!0):!1;default:return!1}}function Ty(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jy(e){if(ct){var t=er;if(t){var n=t;if(!B_(e,t)){if(Ty(e))throw Error(Z(418));t=ho(n.nextSibling);var r=rr;t&&B_(e,t)?ST(r,n):(e.flags=e.flags&-4097|2,ct=!1,rr=e)}}else{if(Ty(e))throw Error(Z(418));e.flags=e.flags&-4097|2,ct=!1,rr=e}}}function z_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rr=e}function uf(e){if(e!==rr)return!1;if(!ct)return z_(e),ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_y(e.type,e.memoizedProps)),t&&(t=er)){if(Ty(e))throw _T(),Error(Z(418));for(;t;)ST(e,t),t=ho(t.nextSibling)}if(z_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){er=ho(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}er=null}}else er=rr?ho(e.stateNode.nextSibling):null;return!0}function _T(){for(var e=er;e;)e=ho(e.nextSibling)}function za(){er=rr=null,ct=!1}function q0(e){Or===null?Or=[e]:Or.push(e)}var vP=Ri.ReactCurrentBatchConfig;function dl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(u){var c=o.refs;u===null?delete c[s]:c[s]=u},t._stringRef=s,t)}if(typeof e!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,e))}return e}function lf(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function q_(e){var t=e._init;return t(e._payload)}function NT(e){function t(N,E){if(e){var x=N.deletions;x===null?(N.deletions=[E],N.flags|=16):x.push(E)}}function n(N,E){if(!e)return null;for(;E!==null;)t(N,E),E=E.sibling;return null}function r(N,E){for(N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function o(N,E){return N=go(N,E),N.index=0,N.sibling=null,N}function s(N,E,x){return N.index=x,e?(x=N.alternate,x!==null?(x=x.index,x<E?(N.flags|=2,E):x):(N.flags|=2,E)):(N.flags|=1048576,E)}function u(N){return e&&N.alternate===null&&(N.flags|=2),N}function c(N,E,x,j){return E===null||E.tag!==6?(E=Lv(x,N.mode,j),E.return=N,E):(E=o(E,x),E.return=N,E)}function f(N,E,x,j){var k=x.type;return k===ba?m(N,E,x.props.children,j,x.key):E!==null&&(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qi&&q_(k)===E.type)?(j=o(E,x.props),j.ref=dl(N,E,x),j.return=N,j):(j=Ff(x.type,x.key,x.props,null,N.mode,j),j.ref=dl(N,E,x),j.return=N,j)}function p(N,E,x,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=Pv(x,N.mode,j),E.return=N,E):(E=o(E,x.children||[]),E.return=N,E)}function m(N,E,x,j,k){return E===null||E.tag!==7?(E=hs(x,N.mode,j,k),E.return=N,E):(E=o(E,x),E.return=N,E)}function v(N,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Lv(""+E,N.mode,x),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Xh:return x=Ff(E.type,E.key,E.props,null,N.mode,x),x.ref=dl(N,null,E),x.return=N,x;case xa:return E=Pv(E,N.mode,x),E.return=N,E;case Qi:var j=E._init;return v(N,j(E._payload),x)}if(xl(E)||ul(E))return E=hs(E,N.mode,x,null),E.return=N,E;lf(N,E)}return null}function y(N,E,x,j){var k=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:c(N,E,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xh:return x.key===k?f(N,E,x,j):null;case xa:return x.key===k?p(N,E,x,j):null;case Qi:return k=x._init,y(N,E,k(x._payload),j)}if(xl(x)||ul(x))return k!==null?null:m(N,E,x,j,null);lf(N,x)}return null}function w(N,E,x,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return N=N.get(x)||null,c(E,N,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Xh:return N=N.get(j.key===null?x:j.key)||null,f(E,N,j,k);case xa:return N=N.get(j.key===null?x:j.key)||null,p(E,N,j,k);case Qi:var A=j._init;return w(N,E,x,A(j._payload),k)}if(xl(j)||ul(j))return N=N.get(x)||null,m(E,N,j,k,null);lf(E,j)}return null}function _(N,E,x,j){for(var k=null,A=null,T=E,L=E=0,F=null;T!==null&&L<x.length;L++){T.index>L?(F=T,T=null):F=T.sibling;var q=y(N,T,x[L],j);if(q===null){T===null&&(T=F);break}e&&T&&q.alternate===null&&t(N,T),E=s(q,E,L),A===null?k=q:A.sibling=q,A=q,T=F}if(L===x.length)return n(N,T),ct&&Zo(N,L),k;if(T===null){for(;L<x.length;L++)T=v(N,x[L],j),T!==null&&(E=s(T,E,L),A===null?k=T:A.sibling=T,A=T);return ct&&Zo(N,L),k}for(T=r(N,T);L<x.length;L++)F=w(T,N,L,x[L],j),F!==null&&(e&&F.alternate!==null&&T.delete(F.key===null?L:F.key),E=s(F,E,L),A===null?k=F:A.sibling=F,A=F);return e&&T.forEach(function(z){return t(N,z)}),ct&&Zo(N,L),k}function S(N,E,x,j){var k=ul(x);if(typeof k!="function")throw Error(Z(150));if(x=k.call(x),x==null)throw Error(Z(151));for(var A=k=null,T=E,L=E=0,F=null,q=x.next();T!==null&&!q.done;L++,q=x.next()){T.index>L?(F=T,T=null):F=T.sibling;var z=y(N,T,q.value,j);if(z===null){T===null&&(T=F);break}e&&T&&z.alternate===null&&t(N,T),E=s(z,E,L),A===null?k=z:A.sibling=z,A=z,T=F}if(q.done)return n(N,T),ct&&Zo(N,L),k;if(T===null){for(;!q.done;L++,q=x.next())q=v(N,q.value,j),q!==null&&(E=s(q,E,L),A===null?k=q:A.sibling=q,A=q);return ct&&Zo(N,L),k}for(T=r(N,T);!q.done;L++,q=x.next())q=w(T,N,L,q.value,j),q!==null&&(e&&q.alternate!==null&&T.delete(q.key===null?L:q.key),E=s(q,E,L),A===null?k=q:A.sibling=q,A=q);return e&&T.forEach(function(O){return t(N,O)}),ct&&Zo(N,L),k}function C(N,E,x,j){if(typeof x=="object"&&x!==null&&x.type===ba&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Xh:e:{for(var k=x.key,A=E;A!==null;){if(A.key===k){if(k=x.type,k===ba){if(A.tag===7){n(N,A.sibling),E=o(A,x.props.children),E.return=N,N=E;break e}}else if(A.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qi&&q_(k)===A.type){n(N,A.sibling),E=o(A,x.props),E.ref=dl(N,A,x),E.return=N,N=E;break e}n(N,A);break}else t(N,A);A=A.sibling}x.type===ba?(E=hs(x.props.children,N.mode,j,x.key),E.return=N,N=E):(j=Ff(x.type,x.key,x.props,null,N.mode,j),j.ref=dl(N,E,x),j.return=N,N=j)}return u(N);case xa:e:{for(A=x.key;E!==null;){if(E.key===A)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(N,E.sibling),E=o(E,x.children||[]),E.return=N,N=E;break e}else{n(N,E);break}else t(N,E);E=E.sibling}E=Pv(x,N.mode,j),E.return=N,N=E}return u(N);case Qi:return A=x._init,C(N,E,A(x._payload),j)}if(xl(x))return _(N,E,x,j);if(ul(x))return S(N,E,x,j);lf(N,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,E!==null&&E.tag===6?(n(N,E.sibling),E=o(E,x),E.return=N,N=E):(n(N,E),E=Lv(x,N.mode,j),E.return=N,N=E),u(N)):n(N,E)}return C}var qa=NT(!0),ET=NT(!1),sd=Eo(null),ad=null,ka=null,K0=null;function H0(){K0=ka=ad=null}function G0(e){var t=sd.current;it(sd),e._currentValue=t}function ky(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fa(e,t){ad=e,K0=ka=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pn=!0),e.firstContext=null)}function xr(e){var t=e._currentValue;if(K0!==e)if(e={context:e,memoizedValue:t,next:null},ka===null){if(ad===null)throw Error(Z(308));ka=e,ad.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var is=null;function W0(e){is===null?is=[e]:is.push(e)}function IT(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,W0(t)):(n.next=o.next,o.next=n),t.interleaved=n,ki(e,r)}function ki(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xi=!1;function Y0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,ki(e,n)}return o=r.interleaved,o===null?(t.next=t,W0(r)):(t.next=o.next,o.next=t),r.interleaved=t,ki(e,n)}function Df(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,M0(e,n)}}function K_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=u:s=s.next=u,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ud(e,t,n,r){var o=e.updateQueue;Xi=!1;var s=o.firstBaseUpdate,u=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var f=c,p=f.next;f.next=null,u===null?s=p:u.next=p,u=f;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==u&&(c===null?m.firstBaseUpdate=p:c.next=p,m.lastBaseUpdate=f))}if(s!==null){var v=o.baseState;u=0,m=p=f=null,c=s;do{var y=c.lane,w=c.eventTime;if((r&y)===y){m!==null&&(m=m.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var _=e,S=c;switch(y=t,w=n,S.tag){case 1:if(_=S.payload,typeof _=="function"){v=_.call(w,v,y);break e}v=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=S.payload,y=typeof _=="function"?_.call(w,v,y):_,y==null)break e;v=yt({},v,y);break e;case 2:Xi=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,y=o.effects,y===null?o.effects=[c]:y.push(c))}else w={eventTime:w,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(p=m=w,f=v):m=m.next=w,u|=y;if(c=c.next,c===null){if(c=o.shared.pending,c===null)break;y=c,c=y.next,y.next=null,o.lastBaseUpdate=y,o.shared.pending=null}}while(!0);if(m===null&&(f=v),o.baseState=f,o.firstBaseUpdate=p,o.lastBaseUpdate=m,t=o.shared.interleaved,t!==null){o=t;do u|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);xs|=u,e.lanes=u,e.memoizedState=v}}function H_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Z(191,o));o.call(r)}}}var kc={},oi=Eo(kc),Jl=Eo(kc),Zl=Eo(kc);function os(e){if(e===kc)throw Error(Z(174));return e}function Q0(e,t){switch(et(Zl,t),et(Jl,e),et(oi,kc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ly(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ly(t,e)}it(oi),et(oi,t)}function Ka(){it(oi),it(Jl),it(Zl)}function jT(e){os(Zl.current);var t=os(oi.current),n=ly(t,e.type);t!==n&&(et(Jl,e),et(oi,n))}function X0(e){Jl.current===e&&(it(oi),it(Jl))}var mt=Eo(0);function ld(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cv=[];function J0(){for(var e=0;e<Cv.length;e++)Cv[e]._workInProgressVersionPrimary=null;Cv.length=0}var Rf=Ri.ReactCurrentDispatcher,Av=Ri.ReactCurrentBatchConfig,ws=0,vt=null,$t=null,Ht=null,cd=!1,Cl=!1,ec=0,yP=0;function un(){throw Error(Z(321))}function Z0(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vr(e[n],t[n]))return!1;return!0}function ew(e,t,n,r,o,s){if(ws=s,vt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rf.current=e===null||e.memoizedState===null?SP:_P,e=n(r,o),Cl){s=0;do{if(Cl=!1,ec=0,25<=s)throw Error(Z(301));s+=1,Ht=$t=null,t.updateQueue=null,Rf.current=NP,e=n(r,o)}while(Cl)}if(Rf.current=hd,t=$t!==null&&$t.next!==null,ws=0,Ht=$t=vt=null,cd=!1,t)throw Error(Z(300));return e}function tw(){var e=ec!==0;return ec=0,e}function ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?vt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function br(){if($t===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var t=Ht===null?vt.memoizedState:Ht.next;if(t!==null)Ht=t,$t=e;else{if(e===null)throw Error(Z(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Ht===null?vt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function tc(e,t){return typeof t=="function"?t(e):t}function Dv(e){var t=br(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=$t,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var u=o.next;o.next=s.next,s.next=u}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var c=u=null,f=null,p=s;do{var m=p.lane;if((ws&m)===m)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var v={lane:m,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(c=f=v,u=r):f=f.next=v,vt.lanes|=m,xs|=m}p=p.next}while(p!==null&&p!==s);f===null?u=r:f.next=c,Vr(r,t.memoizedState)||(Pn=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,vt.lanes|=s,xs|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Rv(e){var t=br(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var u=o=o.next;do s=e(s,u.action),u=u.next;while(u!==o);Vr(s,t.memoizedState)||(Pn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function kT(){}function CT(e,t){var n=vt,r=br(),o=t(),s=!Vr(r.memoizedState,o);if(s&&(r.memoizedState=o,Pn=!0),r=r.queue,nw(RT.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,nc(9,DT.bind(null,n,r,o,t),void 0,null),Gt===null)throw Error(Z(349));ws&30||AT(n,t,o)}return o}function AT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function DT(e,t,n,r){t.value=n,t.getSnapshot=r,MT(t)&&OT(e)}function RT(e,t,n){return n(function(){MT(t)&&OT(e)})}function MT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vr(e,n)}catch{return!0}}function OT(e){var t=ki(e,1);t!==null&&Pr(t,e,1,-1)}function G_(e){var t=ei();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:e},t.queue=e,e=e.dispatch=bP.bind(null,vt,e),[t.memoizedState,e]}function nc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function LT(){return br().memoizedState}function Mf(e,t,n,r){var o=ei();vt.flags|=e,o.memoizedState=nc(1|t,n,void 0,r===void 0?null:r)}function Jd(e,t,n,r){var o=br();r=r===void 0?null:r;var s=void 0;if($t!==null){var u=$t.memoizedState;if(s=u.destroy,r!==null&&Z0(r,u.deps)){o.memoizedState=nc(t,n,s,r);return}}vt.flags|=e,o.memoizedState=nc(1|t,n,s,r)}function W_(e,t){return Mf(8390656,8,e,t)}function nw(e,t){return Jd(2048,8,e,t)}function PT(e,t){return Jd(4,2,e,t)}function FT(e,t){return Jd(4,4,e,t)}function UT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $T(e,t,n){return n=n!=null?n.concat([e]):null,Jd(4,4,UT.bind(null,t,e),n)}function rw(){}function VT(e,t){var n=br();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Z0(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function BT(e,t){var n=br();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Z0(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zT(e,t,n){return ws&21?(Vr(n,t)||(n=WI(),vt.lanes|=n,xs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pn=!0),e.memoizedState=n)}function wP(e,t){var n=Qe;Qe=n!==0&&4>n?n:4,e(!0);var r=Av.transition;Av.transition={};try{e(!1),t()}finally{Qe=n,Av.transition=r}}function qT(){return br().memoizedState}function xP(e,t,n){var r=mo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KT(e))HT(t,n);else if(n=IT(e,t,n,r),n!==null){var o=kn();Pr(n,e,r,o),GT(n,t,r)}}function bP(e,t,n){var r=mo(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KT(e))HT(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var u=t.lastRenderedState,c=s(u,n);if(o.hasEagerState=!0,o.eagerState=c,Vr(c,u)){var f=t.interleaved;f===null?(o.next=o,W0(t)):(o.next=f.next,f.next=o),t.interleaved=o;return}}catch{}finally{}n=IT(e,t,o,r),n!==null&&(o=kn(),Pr(n,e,r,o),GT(n,t,r))}}function KT(e){var t=e.alternate;return e===vt||t!==null&&t===vt}function HT(e,t){Cl=cd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function GT(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,M0(e,n)}}var hd={readContext:xr,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},SP={readContext:xr,useCallback:function(e,t){return ei().memoizedState=[e,t===void 0?null:t],e},useContext:xr,useEffect:W_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Mf(4194308,4,UT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mf(4,2,e,t)},useMemo:function(e,t){var n=ei();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ei();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xP.bind(null,vt,e),[r.memoizedState,e]},useRef:function(e){var t=ei();return e={current:e},t.memoizedState=e},useState:G_,useDebugValue:rw,useDeferredValue:function(e){return ei().memoizedState=e},useTransition:function(){var e=G_(!1),t=e[0];return e=wP.bind(null,e[1]),ei().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vt,o=ei();if(ct){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),Gt===null)throw Error(Z(349));ws&30||AT(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,W_(RT.bind(null,r,s,e),[e]),r.flags|=2048,nc(9,DT.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ei(),t=Gt.identifierPrefix;if(ct){var n=xi,r=wi;n=(r&~(1<<32-Lr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ec++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_P={readContext:xr,useCallback:VT,useContext:xr,useEffect:nw,useImperativeHandle:$T,useInsertionEffect:PT,useLayoutEffect:FT,useMemo:BT,useReducer:Dv,useRef:LT,useState:function(){return Dv(tc)},useDebugValue:rw,useDeferredValue:function(e){var t=br();return zT(t,$t.memoizedState,e)},useTransition:function(){var e=Dv(tc)[0],t=br().memoizedState;return[e,t]},useMutableSource:kT,useSyncExternalStore:CT,useId:qT,unstable_isNewReconciler:!1},NP={readContext:xr,useCallback:VT,useContext:xr,useEffect:nw,useImperativeHandle:$T,useInsertionEffect:PT,useLayoutEffect:FT,useMemo:BT,useReducer:Rv,useRef:LT,useState:function(){return Rv(tc)},useDebugValue:rw,useDeferredValue:function(e){var t=br();return $t===null?t.memoizedState=e:zT(t,$t.memoizedState,e)},useTransition:function(){var e=Rv(tc)[0],t=br().memoizedState;return[e,t]},useMutableSource:kT,useSyncExternalStore:CT,useId:qT,unstable_isNewReconciler:!1};function Rr(e,t){if(e&&e.defaultProps){t=yt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Cy(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zd={isMounted:function(e){return(e=e._reactInternals)?As(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kn(),o=mo(e),s=_i(r,o);s.payload=t,n!=null&&(s.callback=n),t=fo(e,s,o),t!==null&&(Pr(t,e,o,r),Df(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kn(),o=mo(e),s=_i(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=fo(e,s,o),t!==null&&(Pr(t,e,o,r),Df(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),r=mo(e),o=_i(n,r);o.tag=2,t!=null&&(o.callback=t),t=fo(e,o,r),t!==null&&(Pr(t,e,r,n),Df(t,e,r))}};function Y_(e,t,n,r,o,s,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,u):t.prototype&&t.prototype.isPureReactComponent?!Wl(n,r)||!Wl(o,s):!0}function WT(e,t,n){var r=!1,o=bo,s=t.contextType;return typeof s=="object"&&s!==null?s=xr(s):(o=$n(t)?vs:yn.current,r=t.contextTypes,s=(r=r!=null)?Ba(e,o):bo),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Q_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zd.enqueueReplaceState(t,t.state,null)}function Ay(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Y0(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=xr(s):(s=$n(t)?vs:yn.current,o.context=Ba(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Cy(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Zd.enqueueReplaceState(o,o.state,null),ud(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ha(e,t){try{var n="",r=t;do n+=JO(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function Mv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dy(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var EP=typeof WeakMap=="function"?WeakMap:Map;function YT(e,t,n){n=_i(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){dd||(dd=!0,By=r),Dy(e,t)},n}function QT(e,t,n){n=_i(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Dy(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dy(e,t),typeof r!="function"&&(po===null?po=new Set([this]):po.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function X_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new EP;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=UP.bind(null,e,t,n),t.then(e,e))}function J_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Z_(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_i(-1,1),t.tag=2,fo(n,t,1))),n.lanes|=1),e)}var IP=Ri.ReactCurrentOwner,Pn=!1;function _n(e,t,n,r){t.child=e===null?ET(t,null,n,r):qa(t,e.child,n,r)}function eN(e,t,n,r,o){n=n.render;var s=t.ref;return Fa(t,o),r=ew(e,t,n,r,s,o),n=tw(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ci(e,t,o)):(ct&&n&&B0(t),t.flags|=1,_n(e,t,r,o),t.child)}function tN(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!hw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,XT(e,t,s,r,o)):(e=Ff(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var u=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wl,n(u,r)&&e.ref===t.ref)return Ci(e,t,o)}return t.flags|=1,e=go(s,r),e.ref=t.ref,e.return=t,t.child=e}function XT(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(Wl(s,r)&&e.ref===t.ref)if(Pn=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Pn=!0);else return t.lanes=e.lanes,Ci(e,t,o)}return Ry(e,t,n,r,o)}function JT(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Aa,Yn),Yn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(Aa,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,et(Aa,Yn),Yn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,et(Aa,Yn),Yn|=r;return _n(e,t,o,n),t.child}function ZT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ry(e,t,n,r,o){var s=$n(n)?vs:yn.current;return s=Ba(t,s),Fa(t,o),n=ew(e,t,n,r,s,o),r=tw(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ci(e,t,o)):(ct&&r&&B0(t),t.flags|=1,_n(e,t,n,o),t.child)}function nN(e,t,n,r,o){if($n(n)){var s=!0;rd(t)}else s=!1;if(Fa(t,o),t.stateNode===null)Of(e,t),WT(t,n,r),Ay(t,n,r,o),r=!0;else if(e===null){var u=t.stateNode,c=t.memoizedProps;u.props=c;var f=u.context,p=n.contextType;typeof p=="object"&&p!==null?p=xr(p):(p=$n(n)?vs:yn.current,p=Ba(t,p));var m=n.getDerivedStateFromProps,v=typeof m=="function"||typeof u.getSnapshotBeforeUpdate=="function";v||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==r||f!==p)&&Q_(t,u,r,p),Xi=!1;var y=t.memoizedState;u.state=y,ud(t,r,u,o),f=t.memoizedState,c!==r||y!==f||Un.current||Xi?(typeof m=="function"&&(Cy(t,n,m,r),f=t.memoizedState),(c=Xi||Y_(t,n,c,r,y,f,p))?(v||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),u.props=r,u.state=f,u.context=p,r=c):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,TT(e,t),c=t.memoizedProps,p=t.type===t.elementType?c:Rr(t.type,c),u.props=p,v=t.pendingProps,y=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=xr(f):(f=$n(n)?vs:yn.current,f=Ba(t,f));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==v||y!==f)&&Q_(t,u,r,f),Xi=!1,y=t.memoizedState,u.state=y,ud(t,r,u,o);var _=t.memoizedState;c!==v||y!==_||Un.current||Xi?(typeof w=="function"&&(Cy(t,n,w,r),_=t.memoizedState),(p=Xi||Y_(t,n,p,r,y,_,f)||!1)?(m||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,_,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,_,f)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),u.props=r,u.state=_,u.context=f,r=p):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return My(e,t,n,r,s,o)}function My(e,t,n,r,o,s){ZT(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return o&&V_(t,n,!1),Ci(e,t,s);r=t.stateNode,IP.current=t;var c=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=qa(t,e.child,null,s),t.child=qa(t,null,c,s)):_n(e,t,c,s),t.memoizedState=r.state,o&&V_(t,n,!0),t.child}function ej(e){var t=e.stateNode;t.pendingContext?$_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$_(e,t.context,!1),Q0(e,t.containerInfo)}function rN(e,t,n,r,o){return za(),q0(o),t.flags|=256,_n(e,t,n,r),t.child}var Oy={dehydrated:null,treeContext:null,retryLane:0};function Ly(e){return{baseLanes:e,cachePool:null,transitions:null}}function tj(e,t,n){var r=t.pendingProps,o=mt.current,s=!1,u=(t.flags&128)!==0,c;if((c=u)||(c=e!==null&&e.memoizedState===null?!1:(o&2)!==0),c?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),et(mt,o&1),e===null)return jy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,s?(r=t.mode,s=t.child,u={mode:"hidden",children:u},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=u):s=np(u,r,0,null),e=hs(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ly(n),t.memoizedState=Oy,e):iw(t,u));if(o=e.memoizedState,o!==null&&(c=o.dehydrated,c!==null))return TP(e,t,u,r,c,o,n);if(s){s=r.fallback,u=t.mode,o=e.child,c=o.sibling;var f={mode:"hidden",children:r.children};return!(u&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=go(o,f),r.subtreeFlags=o.subtreeFlags&14680064),c!==null?s=go(c,s):(s=hs(s,u,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,u=e.child.memoizedState,u=u===null?Ly(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Oy,r}return s=e.child,e=s.sibling,r=go(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function iw(e,t){return t=np({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cf(e,t,n,r){return r!==null&&q0(r),qa(t,e.child,null,n),e=iw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TP(e,t,n,r,o,s,u){if(n)return t.flags&256?(t.flags&=-257,r=Mv(Error(Z(422))),cf(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=np({mode:"visible",children:r.children},o,0,null),s=hs(s,o,u,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&qa(t,e.child,null,u),t.child.memoizedState=Ly(u),t.memoizedState=Oy,s);if(!(t.mode&1))return cf(e,t,u,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(Z(419)),r=Mv(s,r,void 0),cf(e,t,u,r)}if(c=(u&e.childLanes)!==0,Pn||c){if(r=Gt,r!==null){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|u)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ki(e,o),Pr(r,e,o,-1))}return cw(),r=Mv(Error(Z(421))),cf(e,t,u,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=$P.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,er=ho(o.nextSibling),rr=t,ct=!0,Or=null,e!==null&&(gr[vr++]=wi,gr[vr++]=xi,gr[vr++]=ys,wi=e.id,xi=e.overflow,ys=t),t=iw(t,r.children),t.flags|=4096,t)}function iN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ky(e.return,t,n)}function Ov(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function nj(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(_n(e,t,r.children,n),r=mt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iN(e,n,t);else if(e.tag===19)iN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(et(mt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ld(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ov(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ld(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ov(t,!0,n,null,s);break;case"together":Ov(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Of(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=go(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=go(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jP(e,t,n){switch(t.tag){case 3:ej(t),za();break;case 5:jT(t);break;case 1:$n(t.type)&&rd(t);break;case 4:Q0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;et(sd,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(et(mt,mt.current&1),t.flags|=128,null):n&t.child.childLanes?tj(e,t,n):(et(mt,mt.current&1),e=Ci(e,t,n),e!==null?e.sibling:null);et(mt,mt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return nj(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),et(mt,mt.current),r)break;return null;case 22:case 23:return t.lanes=0,JT(e,t,n)}return Ci(e,t,n)}var rj,Py,ij,oj;rj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Py=function(){};ij=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,os(oi.current);var s=null;switch(n){case"input":o=oy(e,o),r=oy(e,r),s=[];break;case"select":o=yt({},o,{value:void 0}),r=yt({},r,{value:void 0}),s=[];break;case"textarea":o=uy(e,o),r=uy(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=td)}cy(n,r);var u;n=null;for(p in o)if(!r.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var c=o[p];for(u in c)c.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Vl.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var f=r[p];if(c=o!=null?o[p]:void 0,r.hasOwnProperty(p)&&f!==c&&(f!=null||c!=null))if(p==="style")if(c){for(u in c)!c.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&c[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(s||(s=[]),s.push(p,n)),n=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,c=c?c.__html:void 0,f!=null&&c!==f&&(s=s||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(s=s||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Vl.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&nt("scroll",e),s||c===f||(s=[])):(s=s||[]).push(p,f))}n&&(s=s||[]).push("style",n);var p=s;(t.updateQueue=p)&&(t.flags|=4)}};oj=function(e,t,n,r){n!==r&&(t.flags|=4)};function pl(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ln(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function kP(e,t,n){var r=t.pendingProps;switch(z0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(t),null;case 1:return $n(t.type)&&nd(),ln(t),null;case 3:return r=t.stateNode,Ka(),it(Un),it(yn),J0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(uf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Or!==null&&(Ky(Or),Or=null))),Py(e,t),ln(t),null;case 5:X0(t);var o=os(Zl.current);if(n=t.type,e!==null&&t.stateNode!=null)ij(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return ln(t),null}if(e=os(oi.current),uf(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ni]=t,r[Xl]=s,e=(t.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(o=0;o<Sl.length;o++)nt(Sl[o],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":d_(r,s),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nt("invalid",r);break;case"textarea":m_(r,s),nt("invalid",r)}cy(n,s),o=null;for(var u in s)if(s.hasOwnProperty(u)){var c=s[u];u==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&af(r.textContent,c,e),o=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&af(r.textContent,c,e),o=["children",""+c]):Vl.hasOwnProperty(u)&&c!=null&&u==="onScroll"&&nt("scroll",r)}switch(n){case"input":Jh(r),p_(r,s,!0);break;case"textarea":Jh(r),g_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=td)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=RI(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ni]=t,e[Xl]=r,rj(e,t,!1,!1),t.stateNode=e;e:{switch(u=hy(n,r),n){case"dialog":nt("cancel",e),nt("close",e),o=r;break;case"iframe":case"object":case"embed":nt("load",e),o=r;break;case"video":case"audio":for(o=0;o<Sl.length;o++)nt(Sl[o],e);o=r;break;case"source":nt("error",e),o=r;break;case"img":case"image":case"link":nt("error",e),nt("load",e),o=r;break;case"details":nt("toggle",e),o=r;break;case"input":d_(e,r),o=oy(e,r),nt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=yt({},r,{value:void 0}),nt("invalid",e);break;case"textarea":m_(e,r),o=uy(e,r),nt("invalid",e);break;default:o=r}cy(n,o),c=o;for(s in c)if(c.hasOwnProperty(s)){var f=c[s];s==="style"?LI(e,f):s==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&MI(e,f)):s==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Bl(e,f):typeof f=="number"&&Bl(e,""+f):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Vl.hasOwnProperty(s)?f!=null&&s==="onScroll"&&nt("scroll",e):f!=null&&j0(e,s,f,u))}switch(n){case"input":Jh(e),p_(e,r,!1);break;case"textarea":Jh(e),g_(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xo(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ma(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ma(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=td)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ln(t),null;case 6:if(e&&t.stateNode!=null)oj(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Z(166));if(n=os(Zl.current),os(oi.current),uf(t)){if(r=t.stateNode,n=t.memoizedProps,r[ni]=t,(s=r.nodeValue!==n)&&(e=rr,e!==null))switch(e.tag){case 3:af(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&af(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ni]=t,t.stateNode=r}return ln(t),null;case 13:if(it(mt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&er!==null&&t.mode&1&&!(t.flags&128))_T(),za(),t.flags|=98560,s=!1;else if(s=uf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Z(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[ni]=t}else za(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ln(t),s=!1}else Or!==null&&(Ky(Or),Or=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||mt.current&1?Vt===0&&(Vt=3):cw())),t.updateQueue!==null&&(t.flags|=4),ln(t),null);case 4:return Ka(),Py(e,t),e===null&&Yl(t.stateNode.containerInfo),ln(t),null;case 10:return G0(t.type._context),ln(t),null;case 17:return $n(t.type)&&nd(),ln(t),null;case 19:if(it(mt),s=t.memoizedState,s===null)return ln(t),null;if(r=(t.flags&128)!==0,u=s.rendering,u===null)if(r)pl(s,!1);else{if(Vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=ld(e),u!==null){for(t.flags|=128,pl(s,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,u=s.alternate,u===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return et(mt,mt.current&1|2),t.child}e=e.sibling}s.tail!==null&&kt()>Ga&&(t.flags|=128,r=!0,pl(s,!1),t.lanes=4194304)}else{if(!r)if(e=ld(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!ct)return ln(t),null}else 2*kt()-s.renderingStartTime>Ga&&n!==1073741824&&(t.flags|=128,r=!0,pl(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(n=s.last,n!==null?n.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=kt(),t.sibling=null,n=mt.current,et(mt,r?n&1|2:n&1),t):(ln(t),null);case 22:case 23:return lw(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yn&1073741824&&(ln(t),t.subtreeFlags&6&&(t.flags|=8192)):ln(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function CP(e,t){switch(z0(t),t.tag){case 1:return $n(t.type)&&nd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ka(),it(Un),it(yn),J0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return X0(t),null;case 13:if(it(mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));za()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return it(mt),null;case 4:return Ka(),null;case 10:return G0(t.type._context),null;case 22:case 23:return lw(),null;case 24:return null;default:return null}}var hf=!1,hn=!1,AP=typeof WeakSet=="function"?WeakSet:Set,le=null;function Ca(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(e,t,r)}else n.current=null}function Fy(e,t,n){try{n()}catch(r){bt(e,t,r)}}var oN=!1;function DP(e,t){if(by=Jf,e=cT(),V0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var u=0,c=-1,f=-1,p=0,m=0,v=e,y=null;t:for(;;){for(var w;v!==n||o!==0&&v.nodeType!==3||(c=u+o),v!==s||r!==0&&v.nodeType!==3||(f=u+r),v.nodeType===3&&(u+=v.nodeValue.length),(w=v.firstChild)!==null;)y=v,v=w;for(;;){if(v===e)break t;if(y===n&&++p===o&&(c=u),y===s&&++m===r&&(f=u),(w=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=w}n=c===-1||f===-1?null:{start:c,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sy={focusedElem:e,selectionRange:n},Jf=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var S=_.memoizedProps,C=_.memoizedState,N=t.stateNode,E=N.getSnapshotBeforeUpdate(t.elementType===t.type?S:Rr(t.type,S),C);N.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(j){bt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return _=oN,oN=!1,_}function Al(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Fy(t,n,s)}o=o.next}while(o!==r)}}function ep(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Uy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sj(e){var t=e.alternate;t!==null&&(e.alternate=null,sj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ni],delete t[Xl],delete t[Ey],delete t[pP],delete t[mP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aj(e){return e.tag===5||e.tag===3||e.tag===4}function sN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||aj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $y(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=td));else if(r!==4&&(e=e.child,e!==null))for($y(e,t,n),e=e.sibling;e!==null;)$y(e,t,n),e=e.sibling}function Vy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vy(e,t,n),e=e.sibling;e!==null;)Vy(e,t,n),e=e.sibling}var Xt=null,Mr=!1;function Hi(e,t,n){for(n=n.child;n!==null;)uj(e,t,n),n=n.sibling}function uj(e,t,n){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Hd,n)}catch{}switch(n.tag){case 5:hn||Ca(n,t);case 6:var r=Xt,o=Mr;Xt=null,Hi(e,t,n),Xt=r,Mr=o,Xt!==null&&(Mr?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(Mr?(e=Xt,n=n.stateNode,e.nodeType===8?jv(e.parentNode,n):e.nodeType===1&&jv(e,n),Hl(e)):jv(Xt,n.stateNode));break;case 4:r=Xt,o=Mr,Xt=n.stateNode.containerInfo,Mr=!0,Hi(e,t,n),Xt=r,Mr=o;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,u=s.destroy;s=s.tag,u!==void 0&&(s&2||s&4)&&Fy(n,t,u),o=o.next}while(o!==r)}Hi(e,t,n);break;case 1:if(!hn&&(Ca(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){bt(n,t,c)}Hi(e,t,n);break;case 21:Hi(e,t,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,Hi(e,t,n),hn=r):Hi(e,t,n);break;default:Hi(e,t,n)}}function aN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new AP),t.forEach(function(r){var o=VP.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ar(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,u=t,c=u;e:for(;c!==null;){switch(c.tag){case 5:Xt=c.stateNode,Mr=!1;break e;case 3:Xt=c.stateNode.containerInfo,Mr=!0;break e;case 4:Xt=c.stateNode.containerInfo,Mr=!0;break e}c=c.return}if(Xt===null)throw Error(Z(160));uj(s,u,o),Xt=null,Mr=!1;var f=o.alternate;f!==null&&(f.return=null),o.return=null}catch(p){bt(o,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lj(t,e),t=t.sibling}function lj(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ar(t,e),Jr(e),r&4){try{Al(3,e,e.return),ep(3,e)}catch(S){bt(e,e.return,S)}try{Al(5,e,e.return)}catch(S){bt(e,e.return,S)}}break;case 1:Ar(t,e),Jr(e),r&512&&n!==null&&Ca(n,n.return);break;case 5:if(Ar(t,e),Jr(e),r&512&&n!==null&&Ca(n,n.return),e.flags&32){var o=e.stateNode;try{Bl(o,"")}catch(S){bt(e,e.return,S)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,u=n!==null?n.memoizedProps:s,c=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&AI(o,s),hy(c,u);var p=hy(c,s);for(u=0;u<f.length;u+=2){var m=f[u],v=f[u+1];m==="style"?LI(o,v):m==="dangerouslySetInnerHTML"?MI(o,v):m==="children"?Bl(o,v):j0(o,m,v,p)}switch(c){case"input":sy(o,s);break;case"textarea":DI(o,s);break;case"select":var y=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Ma(o,!!s.multiple,w,!1):y!==!!s.multiple&&(s.defaultValue!=null?Ma(o,!!s.multiple,s.defaultValue,!0):Ma(o,!!s.multiple,s.multiple?[]:"",!1))}o[Xl]=s}catch(S){bt(e,e.return,S)}}break;case 6:if(Ar(t,e),Jr(e),r&4){if(e.stateNode===null)throw Error(Z(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(S){bt(e,e.return,S)}}break;case 3:if(Ar(t,e),Jr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hl(t.containerInfo)}catch(S){bt(e,e.return,S)}break;case 4:Ar(t,e),Jr(e);break;case 13:Ar(t,e),Jr(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(aw=kt())),r&4&&aN(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(hn=(p=hn)||m,Ar(t,e),hn=p):Ar(t,e),Jr(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!m&&e.mode&1)for(le=e,m=e.child;m!==null;){for(v=le=m;le!==null;){switch(y=le,w=y.child,y.tag){case 0:case 11:case 14:case 15:Al(4,y,y.return);break;case 1:Ca(y,y.return);var _=y.stateNode;if(typeof _.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(S){bt(r,n,S)}}break;case 5:Ca(y,y.return);break;case 22:if(y.memoizedState!==null){lN(v);continue}}w!==null?(w.return=y,le=w):lN(v)}m=m.sibling}e:for(m=null,v=e;;){if(v.tag===5){if(m===null){m=v;try{o=v.stateNode,p?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=v.stateNode,f=v.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,c.style.display=OI("display",u))}catch(S){bt(e,e.return,S)}}}else if(v.tag===6){if(m===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(S){bt(e,e.return,S)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Ar(t,e),Jr(e),r&4&&aN(e);break;case 21:break;default:Ar(t,e),Jr(e)}}function Jr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(aj(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Bl(o,""),r.flags&=-33);var s=sN(e);Vy(e,s,o);break;case 3:case 4:var u=r.stateNode.containerInfo,c=sN(e);$y(e,c,u);break;default:throw Error(Z(161))}}catch(f){bt(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RP(e,t,n){le=e,cj(e)}function cj(e,t,n){for(var r=(e.mode&1)!==0;le!==null;){var o=le,s=o.child;if(o.tag===22&&r){var u=o.memoizedState!==null||hf;if(!u){var c=o.alternate,f=c!==null&&c.memoizedState!==null||hn;c=hf;var p=hn;if(hf=u,(hn=f)&&!p)for(le=o;le!==null;)u=le,f=u.child,u.tag===22&&u.memoizedState!==null?cN(o):f!==null?(f.return=u,le=f):cN(o);for(;s!==null;)le=s,cj(s),s=s.sibling;le=o,hf=c,hn=p}uN(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,le=s):uN(e)}}function uN(e){for(;le!==null;){var t=le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||ep(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!hn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Rr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&H_(t,s,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}H_(t,u,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var m=p.memoizedState;if(m!==null){var v=m.dehydrated;v!==null&&Hl(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}hn||t.flags&512&&Uy(t)}catch(y){bt(t,t.return,y)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function lN(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function cN(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ep(4,t)}catch(f){bt(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(f){bt(t,o,f)}}var s=t.return;try{Uy(t)}catch(f){bt(t,s,f)}break;case 5:var u=t.return;try{Uy(t)}catch(f){bt(t,u,f)}}}catch(f){bt(t,t.return,f)}if(t===e){le=null;break}var c=t.sibling;if(c!==null){c.return=t.return,le=c;break}le=t.return}}var MP=Math.ceil,fd=Ri.ReactCurrentDispatcher,ow=Ri.ReactCurrentOwner,wr=Ri.ReactCurrentBatchConfig,Be=0,Gt=null,Ot=null,en=0,Yn=0,Aa=Eo(0),Vt=0,rc=null,xs=0,tp=0,sw=0,Dl=null,Ln=null,aw=0,Ga=1/0,vi=null,dd=!1,By=null,po=null,ff=!1,ao=null,pd=0,Rl=0,zy=null,Lf=-1,Pf=0;function kn(){return Be&6?kt():Lf!==-1?Lf:Lf=kt()}function mo(e){return e.mode&1?Be&2&&en!==0?en&-en:vP.transition!==null?(Pf===0&&(Pf=WI()),Pf):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:tT(e.type)),e):1}function Pr(e,t,n,r){if(50<Rl)throw Rl=0,zy=null,Error(Z(185));Ic(e,n,r),(!(Be&2)||e!==Gt)&&(e===Gt&&(!(Be&2)&&(tp|=n),Vt===4&&to(e,en)),Vn(e,r),n===1&&Be===0&&!(t.mode&1)&&(Ga=kt()+500,Xd&&Io()))}function Vn(e,t){var n=e.callbackNode;vL(e,t);var r=Xf(e,e===Gt?en:0);if(r===0)n!==null&&w_(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&w_(n),t===1)e.tag===0?gP(hN.bind(null,e)):xT(hN.bind(null,e)),fP(function(){!(Be&6)&&Io()}),n=null;else{switch(YI(r)){case 1:n=R0;break;case 4:n=HI;break;case 16:n=Qf;break;case 536870912:n=GI;break;default:n=Qf}n=yj(n,hj.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hj(e,t){if(Lf=-1,Pf=0,Be&6)throw Error(Z(327));var n=e.callbackNode;if(Ua()&&e.callbackNode!==n)return null;var r=Xf(e,e===Gt?en:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=md(e,r);else{t=r;var o=Be;Be|=2;var s=dj();(Gt!==e||en!==t)&&(vi=null,Ga=kt()+500,cs(e,t));do try{PP();break}catch(c){fj(e,c)}while(!0);H0(),fd.current=s,Be=o,Ot!==null?t=0:(Gt=null,en=0,t=Vt)}if(t!==0){if(t===2&&(o=gy(e),o!==0&&(r=o,t=qy(e,o))),t===1)throw n=rc,cs(e,0),to(e,r),Vn(e,kt()),n;if(t===6)to(e,r);else{if(o=e.current.alternate,!(r&30)&&!OP(o)&&(t=md(e,r),t===2&&(s=gy(e),s!==0&&(r=s,t=qy(e,s))),t===1))throw n=rc,cs(e,0),to(e,r),Vn(e,kt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Z(345));case 2:es(e,Ln,vi);break;case 3:if(to(e,r),(r&130023424)===r&&(t=aw+500-kt(),10<t)){if(Xf(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){kn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ny(es.bind(null,e,Ln,vi),t);break}es(e,Ln,vi);break;case 4:if(to(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var u=31-Lr(r);s=1<<u,u=t[u],u>o&&(o=u),r&=~s}if(r=o,r=kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MP(r/1960))-r,10<r){e.timeoutHandle=Ny(es.bind(null,e,Ln,vi),r);break}es(e,Ln,vi);break;case 5:es(e,Ln,vi);break;default:throw Error(Z(329))}}}return Vn(e,kt()),e.callbackNode===n?hj.bind(null,e):null}function qy(e,t){var n=Dl;return e.current.memoizedState.isDehydrated&&(cs(e,t).flags|=256),e=md(e,t),e!==2&&(t=Ln,Ln=n,t!==null&&Ky(t)),e}function Ky(e){Ln===null?Ln=e:Ln.push.apply(Ln,e)}function OP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Vr(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function to(e,t){for(t&=~sw,t&=~tp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lr(t),r=1<<n;e[n]=-1,t&=~r}}function hN(e){if(Be&6)throw Error(Z(327));Ua();var t=Xf(e,0);if(!(t&1))return Vn(e,kt()),null;var n=md(e,t);if(e.tag!==0&&n===2){var r=gy(e);r!==0&&(t=r,n=qy(e,r))}if(n===1)throw n=rc,cs(e,0),to(e,t),Vn(e,kt()),n;if(n===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,es(e,Ln,vi),Vn(e,kt()),null}function uw(e,t){var n=Be;Be|=1;try{return e(t)}finally{Be=n,Be===0&&(Ga=kt()+500,Xd&&Io())}}function bs(e){ao!==null&&ao.tag===0&&!(Be&6)&&Ua();var t=Be;Be|=1;var n=wr.transition,r=Qe;try{if(wr.transition=null,Qe=1,e)return e()}finally{Qe=r,wr.transition=n,Be=t,!(Be&6)&&Io()}}function lw(){Yn=Aa.current,it(Aa)}function cs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hP(n)),Ot!==null)for(n=Ot.return;n!==null;){var r=n;switch(z0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nd();break;case 3:Ka(),it(Un),it(yn),J0();break;case 5:X0(r);break;case 4:Ka();break;case 13:it(mt);break;case 19:it(mt);break;case 10:G0(r.type._context);break;case 22:case 23:lw()}n=n.return}if(Gt=e,Ot=e=go(e.current,null),en=Yn=t,Vt=0,rc=null,sw=tp=xs=0,Ln=Dl=null,is!==null){for(t=0;t<is.length;t++)if(n=is[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var u=s.next;s.next=o,r.next=u}n.pending=r}is=null}return e}function fj(e,t){do{var n=Ot;try{if(H0(),Rf.current=hd,cd){for(var r=vt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}cd=!1}if(ws=0,Ht=$t=vt=null,Cl=!1,ec=0,ow.current=null,n===null||n.return===null){Vt=1,rc=t,Ot=null;break}e:{var s=e,u=n.return,c=n,f=t;if(t=en,c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,m=c,v=m.tag;if(!(m.mode&1)&&(v===0||v===11||v===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=J_(u);if(w!==null){w.flags&=-257,Z_(w,u,c,s,t),w.mode&1&&X_(s,p,t),t=w,f=p;var _=t.updateQueue;if(_===null){var S=new Set;S.add(f),t.updateQueue=S}else _.add(f);break e}else{if(!(t&1)){X_(s,p,t),cw();break e}f=Error(Z(426))}}else if(ct&&c.mode&1){var C=J_(u);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Z_(C,u,c,s,t),q0(Ha(f,c));break e}}s=f=Ha(f,c),Vt!==4&&(Vt=2),Dl===null?Dl=[s]:Dl.push(s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var N=YT(s,f,t);K_(s,N);break e;case 1:c=f;var E=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(po===null||!po.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=QT(s,c,t);K_(s,j);break e}}s=s.return}while(s!==null)}mj(n)}catch(k){t=k,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(!0)}function dj(){var e=fd.current;return fd.current=hd,e===null?hd:e}function cw(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Gt===null||!(xs&268435455)&&!(tp&268435455)||to(Gt,en)}function md(e,t){var n=Be;Be|=2;var r=dj();(Gt!==e||en!==t)&&(vi=null,cs(e,t));do try{LP();break}catch(o){fj(e,o)}while(!0);if(H0(),Be=n,fd.current=r,Ot!==null)throw Error(Z(261));return Gt=null,en=0,Vt}function LP(){for(;Ot!==null;)pj(Ot)}function PP(){for(;Ot!==null&&!uL();)pj(Ot)}function pj(e){var t=vj(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?mj(e):Ot=t,ow.current=null}function mj(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=CP(n,t),n!==null){n.flags&=32767,Ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vt=6,Ot=null;return}}else if(n=kP(n,t,Yn),n!==null){Ot=n;return}if(t=t.sibling,t!==null){Ot=t;return}Ot=t=e}while(t!==null);Vt===0&&(Vt=5)}function es(e,t,n){var r=Qe,o=wr.transition;try{wr.transition=null,Qe=1,FP(e,t,n,r)}finally{wr.transition=o,Qe=r}return null}function FP(e,t,n,r){do Ua();while(ao!==null);if(Be&6)throw Error(Z(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(yL(e,s),e===Gt&&(Ot=Gt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ff||(ff=!0,yj(Qf,function(){return Ua(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wr.transition,wr.transition=null;var u=Qe;Qe=1;var c=Be;Be|=4,ow.current=null,DP(e,n),lj(n,e),iP(Sy),Jf=!!by,Sy=by=null,e.current=n,RP(n),lL(),Be=c,Qe=u,wr.transition=s}else e.current=n;if(ff&&(ff=!1,ao=e,pd=o),s=e.pendingLanes,s===0&&(po=null),fL(n.stateNode),Vn(e,kt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(dd)throw dd=!1,e=By,By=null,e;return pd&1&&e.tag!==0&&Ua(),s=e.pendingLanes,s&1?e===zy?Rl++:(Rl=0,zy=e):Rl=0,Io(),null}function Ua(){if(ao!==null){var e=YI(pd),t=wr.transition,n=Qe;try{if(wr.transition=null,Qe=16>e?16:e,ao===null)var r=!1;else{if(e=ao,ao=null,pd=0,Be&6)throw Error(Z(331));var o=Be;for(Be|=4,le=e.current;le!==null;){var s=le,u=s.child;if(le.flags&16){var c=s.deletions;if(c!==null){for(var f=0;f<c.length;f++){var p=c[f];for(le=p;le!==null;){var m=le;switch(m.tag){case 0:case 11:case 15:Al(8,m,s)}var v=m.child;if(v!==null)v.return=m,le=v;else for(;le!==null;){m=le;var y=m.sibling,w=m.return;if(sj(m),m===p){le=null;break}if(y!==null){y.return=w,le=y;break}le=w}}}var _=s.alternate;if(_!==null){var S=_.child;if(S!==null){_.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}le=s}}if(s.subtreeFlags&2064&&u!==null)u.return=s,le=u;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Al(9,s,s.return)}var N=s.sibling;if(N!==null){N.return=s.return,le=N;break e}le=s.return}}var E=e.current;for(le=E;le!==null;){u=le;var x=u.child;if(u.subtreeFlags&2064&&x!==null)x.return=u,le=x;else e:for(u=E;le!==null;){if(c=le,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ep(9,c)}}catch(k){bt(c,c.return,k)}if(c===u){le=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,le=j;break e}le=c.return}}if(Be=o,Io(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Hd,e)}catch{}r=!0}return r}finally{Qe=n,wr.transition=t}}return!1}function fN(e,t,n){t=Ha(n,t),t=YT(e,t,1),e=fo(e,t,1),t=kn(),e!==null&&(Ic(e,1,t),Vn(e,t))}function bt(e,t,n){if(e.tag===3)fN(e,e,n);else for(;t!==null;){if(t.tag===3){fN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(po===null||!po.has(r))){e=Ha(n,e),e=QT(t,e,1),t=fo(t,e,1),e=kn(),t!==null&&(Ic(t,1,e),Vn(t,e));break}}t=t.return}}function UP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kn(),e.pingedLanes|=e.suspendedLanes&n,Gt===e&&(en&n)===n&&(Vt===4||Vt===3&&(en&130023424)===en&&500>kt()-aw?cs(e,0):sw|=n),Vn(e,t)}function gj(e,t){t===0&&(e.mode&1?(t=tf,tf<<=1,!(tf&130023424)&&(tf=4194304)):t=1);var n=kn();e=ki(e,t),e!==null&&(Ic(e,t,n),Vn(e,n))}function $P(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gj(e,n)}function VP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(t),gj(e,n)}var vj;vj=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Un.current)Pn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pn=!1,jP(e,t,n);Pn=!!(e.flags&131072)}else Pn=!1,ct&&t.flags&1048576&&bT(t,od,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Of(e,t),e=t.pendingProps;var o=Ba(t,yn.current);Fa(t,n),o=ew(null,t,r,e,o,n);var s=tw();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$n(r)?(s=!0,rd(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Y0(t),o.updater=Zd,t.stateNode=o,o._reactInternals=t,Ay(t,r,e,n),t=My(null,t,r,!0,s,n)):(t.tag=0,ct&&s&&B0(t),_n(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Of(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=zP(r),e=Rr(r,e),o){case 0:t=Ry(null,t,r,e,n);break e;case 1:t=nN(null,t,r,e,n);break e;case 11:t=eN(null,t,r,e,n);break e;case 14:t=tN(null,t,r,Rr(r.type,e),n);break e}throw Error(Z(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rr(r,o),Ry(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rr(r,o),nN(e,t,r,o,n);case 3:e:{if(ej(t),e===null)throw Error(Z(387));r=t.pendingProps,s=t.memoizedState,o=s.element,TT(e,t),ud(t,r,null,n);var u=t.memoizedState;if(r=u.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Ha(Error(Z(423)),t),t=rN(e,t,r,n,o);break e}else if(r!==o){o=Ha(Error(Z(424)),t),t=rN(e,t,r,n,o);break e}else for(er=ho(t.stateNode.containerInfo.firstChild),rr=t,ct=!0,Or=null,n=ET(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(za(),r===o){t=Ci(e,t,n);break e}_n(e,t,r,n)}t=t.child}return t;case 5:return jT(t),e===null&&jy(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,u=o.children,_y(r,o)?u=null:s!==null&&_y(r,s)&&(t.flags|=32),ZT(e,t),_n(e,t,u,n),t.child;case 6:return e===null&&jy(t),null;case 13:return tj(e,t,n);case 4:return Q0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qa(t,null,r,n):_n(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rr(r,o),eN(e,t,r,o,n);case 7:return _n(e,t,t.pendingProps,n),t.child;case 8:return _n(e,t,t.pendingProps.children,n),t.child;case 12:return _n(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,u=o.value,et(sd,r._currentValue),r._currentValue=u,s!==null)if(Vr(s.value,u)){if(s.children===o.children&&!Un.current){t=Ci(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var c=s.dependencies;if(c!==null){u=s.child;for(var f=c.firstContext;f!==null;){if(f.context===r){if(s.tag===1){f=_i(-1,n&-n),f.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var m=p.pending;m===null?f.next=f:(f.next=m.next,m.next=f),p.pending=f}}s.lanes|=n,f=s.alternate,f!==null&&(f.lanes|=n),ky(s.return,n,t),c.lanes|=n;break}f=f.next}}else if(s.tag===10)u=s.type===t.type?null:s.child;else if(s.tag===18){if(u=s.return,u===null)throw Error(Z(341));u.lanes|=n,c=u.alternate,c!==null&&(c.lanes|=n),ky(u,n,t),u=s.sibling}else u=s.child;if(u!==null)u.return=s;else for(u=s;u!==null;){if(u===t){u=null;break}if(s=u.sibling,s!==null){s.return=u.return,u=s;break}u=u.return}s=u}_n(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Fa(t,n),o=xr(o),r=r(o),t.flags|=1,_n(e,t,r,n),t.child;case 14:return r=t.type,o=Rr(r,t.pendingProps),o=Rr(r.type,o),tN(e,t,r,o,n);case 15:return XT(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rr(r,o),Of(e,t),t.tag=1,$n(r)?(e=!0,rd(t)):e=!1,Fa(t,n),WT(t,r,o),Ay(t,r,o,n),My(null,t,r,!0,e,n);case 19:return nj(e,t,n);case 22:return JT(e,t,n)}throw Error(Z(156,t.tag))};function yj(e,t){return KI(e,t)}function BP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(e,t,n,r){return new BP(e,t,n,r)}function hw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zP(e){if(typeof e=="function")return hw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===C0)return 11;if(e===A0)return 14}return 2}function go(e,t){var n=e.alternate;return n===null?(n=yr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ff(e,t,n,r,o,s){var u=2;if(r=e,typeof e=="function")hw(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case ba:return hs(n.children,o,s,t);case k0:u=8,o|=8;break;case ty:return e=yr(12,n,t,o|2),e.elementType=ty,e.lanes=s,e;case ny:return e=yr(13,n,t,o),e.elementType=ny,e.lanes=s,e;case ry:return e=yr(19,n,t,o),e.elementType=ry,e.lanes=s,e;case jI:return np(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case II:u=10;break e;case TI:u=9;break e;case C0:u=11;break e;case A0:u=14;break e;case Qi:u=16,r=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=yr(u,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function hs(e,t,n,r){return e=yr(7,e,r,t),e.lanes=n,e}function np(e,t,n,r){return e=yr(22,e,r,t),e.elementType=jI,e.lanes=n,e.stateNode={isHidden:!1},e}function Lv(e,t,n){return e=yr(6,e,null,t),e.lanes=n,e}function Pv(e,t,n){return t=yr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qP(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vv(0),this.expirationTimes=vv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vv(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function fw(e,t,n,r,o,s,u,c,f){return e=new qP(e,t,n,c,f),t===1?(t=1,s===!0&&(t|=8)):t=0,s=yr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Y0(s),e}function KP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xa,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wj(e){if(!e)return bo;e=e._reactInternals;e:{if(As(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($n(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var n=e.type;if($n(n))return wT(e,n,t)}return t}function xj(e,t,n,r,o,s,u,c,f){return e=fw(n,r,!0,e,o,s,u,c,f),e.context=wj(null),n=e.current,r=kn(),o=mo(n),s=_i(r,o),s.callback=t??null,fo(n,s,o),e.current.lanes=o,Ic(e,o,r),Vn(e,r),e}function rp(e,t,n,r){var o=t.current,s=kn(),u=mo(o);return n=wj(n),t.context===null?t.context=n:t.pendingContext=n,t=_i(s,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fo(o,t,u),e!==null&&(Pr(e,o,u,s),Df(e,o,u)),u}function gd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function dw(e,t){dN(e,t),(e=e.alternate)&&dN(e,t)}function HP(){return null}var bj=typeof reportError=="function"?reportError:function(e){console.error(e)};function pw(e){this._internalRoot=e}ip.prototype.render=pw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));rp(e,t,null,null)};ip.prototype.unmount=pw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bs(function(){rp(null,e,null,null)}),t[ji]=null}};function ip(e){this._internalRoot=e}ip.prototype.unstable_scheduleHydration=function(e){if(e){var t=JI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<eo.length&&t!==0&&t<eo[n].priority;n++);eo.splice(n,0,e),n===0&&eT(e)}};function mw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function op(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pN(){}function GP(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var p=gd(u);s.call(p)}}var u=xj(t,r,e,0,null,!1,!1,"",pN);return e._reactRootContainer=u,e[ji]=u.current,Yl(e.nodeType===8?e.parentNode:e),bs(),u}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var c=r;r=function(){var p=gd(f);c.call(p)}}var f=fw(e,0,!1,null,null,!1,!1,"",pN);return e._reactRootContainer=f,e[ji]=f.current,Yl(e.nodeType===8?e.parentNode:e),bs(function(){rp(t,f,n,r)}),f}function sp(e,t,n,r,o){var s=n._reactRootContainer;if(s){var u=s;if(typeof o=="function"){var c=o;o=function(){var f=gd(u);c.call(f)}}rp(t,u,e,o)}else u=GP(n,t,e,o,r);return gd(u)}QI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bl(t.pendingLanes);n!==0&&(M0(t,n|1),Vn(t,kt()),!(Be&6)&&(Ga=kt()+500,Io()))}break;case 13:bs(function(){var r=ki(e,1);if(r!==null){var o=kn();Pr(r,e,1,o)}}),dw(e,1)}};O0=function(e){if(e.tag===13){var t=ki(e,134217728);if(t!==null){var n=kn();Pr(t,e,134217728,n)}dw(e,134217728)}};XI=function(e){if(e.tag===13){var t=mo(e),n=ki(e,t);if(n!==null){var r=kn();Pr(n,e,t,r)}dw(e,t)}};JI=function(){return Qe};ZI=function(e,t){var n=Qe;try{return Qe=e,t()}finally{Qe=n}};dy=function(e,t,n){switch(t){case"input":if(sy(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Qd(r);if(!o)throw Error(Z(90));CI(r),sy(r,o)}}}break;case"textarea":DI(e,n);break;case"select":t=n.value,t!=null&&Ma(e,!!n.multiple,t,!1)}};UI=uw;$I=bs;var WP={usingClientEntryPoint:!1,Events:[jc,Ea,Qd,PI,FI,uw]},ml={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YP={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zI(e),e===null?null:e.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||HP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{Hd=df.inject(YP),ii=df}catch{}}ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WP;ar.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mw(t))throw Error(Z(200));return KP(e,t,null,n)};ar.createRoot=function(e,t){if(!mw(e))throw Error(Z(299));var n=!1,r="",o=bj;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=fw(e,1,!1,null,null,n,!1,r,o),e[ji]=t.current,Yl(e.nodeType===8?e.parentNode:e),new pw(t)};ar.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=zI(t),e=e===null?null:e.stateNode,e};ar.flushSync=function(e){return bs(e)};ar.hydrate=function(e,t,n){if(!op(t))throw Error(Z(200));return sp(null,e,t,!0,n)};ar.hydrateRoot=function(e,t,n){if(!mw(e))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",u=bj;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=xj(t,null,e,1,n??null,o,!1,s,u),e[ji]=t.current,Yl(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ip(t)};ar.render=function(e,t,n){if(!op(t))throw Error(Z(200));return sp(null,e,t,!1,n)};ar.unmountComponentAtNode=function(e){if(!op(e))throw Error(Z(40));return e._reactRootContainer?(bs(function(){sp(null,null,e,!1,function(){e._reactRootContainer=null,e[ji]=null})}),!0):!1};ar.unstable_batchedUpdates=uw;ar.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!op(n))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return sp(e,t,n,!1,r)};ar.version="18.3.1-next-f1338f8080-20240426";function Sj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sj)}catch(e){console.error(e)}}Sj(),SI.exports=ar;var QP=SI.exports,mN=QP;Zv.createRoot=mN.createRoot,Zv.hydrateRoot=mN.hydrateRoot;var Hy=function(e,t){return Hy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Hy(e,t)};function be(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Hy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ic=function(){return ic=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ic.apply(this,arguments)};function W(e,t,n,r){function o(s){return s instanceof n?s:new n(function(u){u(s)})}return new(n||(n=Promise))(function(s,u){function c(m){try{p(r.next(m))}catch(v){u(v)}}function f(m){try{p(r.throw(m))}catch(v){u(v)}}function p(m){m.done?s(m.value):o(m.value).then(c,f)}p((r=r.apply(e,t||[])).next())})}function K(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=c(0),u.throw=c(1),u.return=c(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(p){return function(m){return f([p,m])}}function f(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,o&&(s=p[0]&2?o.return:p[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,p[1])).done)return s;switch(o=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){n.label=p[1];break}if(p[0]===6&&n.label<s[1]){n.label=s[1],s=p;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(p);break}s[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(m){p=[6,m],o=0}finally{r=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Fv(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pf(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],u;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(c){u={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return s}function _t(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _j=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},XP=function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var s=e[n++];t[r++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){var s=e[n++],u=e[n++],c=e[n++],f=((o&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(f>>10)),t[r++]=String.fromCharCode(56320+(f&1023))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((o&15)<<12|(s&63)<<6|u&63)}}return t.join("")},JP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var s=e[o],u=o+1<e.length,c=u?e[o+1]:0,f=o+2<e.length,p=f?e[o+2]:0,m=s>>2,v=(s&3)<<4|c>>4,y=(c&15)<<2|p>>6,w=p&63;f||(w=64,u||(y=64)),r.push(n[m],n[v],n[y],n[w])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_j(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):XP(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<e.length;){var s=n[e.charAt(o++)],u=o<e.length,c=u?n[e.charAt(o)]:0;++o;var f=o<e.length,p=f?n[e.charAt(o)]:64;++o;var m=o<e.length,v=m?n[e.charAt(o)]:64;if(++o,s==null||c==null||p==null||v==null)throw Error();var y=s<<2|c>>4;if(r.push(y),p!==64){var w=c<<4&240|p>>2;if(r.push(w),v!==64){var _=p<<6&192|v;r.push(_)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ZP=function(e){var t=_j(e);return JP.encodeByteArray(t,!0)},gN=function(e){return ZP(e).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(e){return oc(void 0,e)}function oc(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!tF(r)||(e[r]=oc(e[r],t[r]));return e}function tF(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nF=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,o){r?n.reject(r):n.resolve(o),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,o))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",o=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var u=ic({iss:"https://securetoken.google.com/"+r,aud:r,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[gN(JSON.stringify(n)),gN(JSON.stringify(u)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ss())}function Nj(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oF(){return typeof self=="object"&&self.self===self}function sF(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function aF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uF(){return Ss().indexOf("Electron/")>=0}function lF(){var e=Ss();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function cF(){return Ss().indexOf("MSAppHost/")>=0}function hF(){return!Nj()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fF="FirebaseError",dF=function(e){be(t,e);function t(n,r,o){var s=e.call(this,r)||this;return s.code=n,s.customData=o,s.name=fF,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,gw.prototype.create),s}return t}(Error),gw=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=n[0]||{},s=this.service+"/"+t,u=this.errors[t],c=u?pF(u,o):"Error",f=this.serviceName+": "+c+" ("+s+").",p=new dF(s,f,o);return p},e}();function pF(e,t){return e.replace(mF,function(n,r){var o=t[r];return o!=null?String(o):"<"+r+"?>"})}var mF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gF(e,t){var n=new vF(e,t);return n.subscribe.bind(n)}var vF=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(o){r.error(o)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var o=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yF(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=Uv),s.error===void 0&&(s.error=Uv),s.complete===void 0&&(s.complete=Uv);var u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?s.error(o.finalError):s.complete()}catch{}}),this.observers.push(s),u},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function yF(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o in e&&typeof e[o]=="function")return!0}return!1}function Uv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(e){return e&&e._delegate?e._delegate:e}var ap=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wF=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new nF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(bF(t))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}try{for(var o=Fv(this.instancesDeferred.entries()),s=o.next();!s.done;s=o.next()){var u=pf(s.value,2),c=u[0],f=u[1],p=this.normalizeInstanceIdentifier(c);try{var m=this.getOrInitializeService({instanceIdentifier:p});f.resolve(m)}catch{}}}catch(v){n={error:v}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=ts),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return W(this,void 0,void 0,function(){var t;return K(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(_t(_t([],pf(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),pf(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=ts),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=ts),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var o=t.options,s=o===void 0?{}:o,u=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var f=Fv(this.instancesDeferred.entries()),p=f.next();!p.done;p=f.next()){var m=pf(p.value,2),v=m[0],y=m[1],w=this.normalizeInstanceIdentifier(v);u===w&&y.resolve(c)}}catch(_){n={error:_}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return c},e.prototype.onInit=function(t,n){var r,o=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(o,s);var u=this.instances.get(o);return u&&t(u,o),function(){s.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,o,s=this.onInitCallbacks.get(n);if(s)try{for(var u=Fv(s),c=u.next();!c.done;c=u.next()){var f=c.value;try{f(t,n)}catch{}}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,o=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xF(n),options:o}),this.instances.set(n,s),this.instancesOptions.set(n,o),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch{}return s||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=ts),this.component?this.component.multipleInstances?t:ts:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function xF(e){return e===ts?void 0:e}function bF(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SF=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new wF(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Dr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var s=arguments[t],u=0,c=s.length;u<c;u++,o++)r[o]=s[u];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xo,vw=[],qe;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(qe||(qe={}));var Ej={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},_F=qe.INFO,NF=(Xo={},Xo[qe.DEBUG]="log",Xo[qe.VERBOSE]="log",Xo[qe.INFO]="info",Xo[qe.WARN]="warn",Xo[qe.ERROR]="error",Xo),EF=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=new Date().toISOString(),s=NF[t];if(s)console[s].apply(console,Dr(["["+o+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Ij=function(){function e(t){this.name=t,this._logLevel=_F,this._logHandler=EF,this._userLogHandler=null,vw.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in qe))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?Ej[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Dr([this,qe.DEBUG],t)),this._logHandler.apply(this,Dr([this,qe.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Dr([this,qe.VERBOSE],t)),this._logHandler.apply(this,Dr([this,qe.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Dr([this,qe.INFO],t)),this._logHandler.apply(this,Dr([this,qe.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Dr([this,qe.WARN],t)),this._logHandler.apply(this,Dr([this,qe.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Dr([this,qe.ERROR],t)),this._logHandler.apply(this,Dr([this,qe.ERROR],t))},e}();function IF(e){vw.forEach(function(t){t.setLogLevel(e)})}function TF(e,t){for(var n=function(u){var c=null;t&&t.level&&(c=Ej[t.level]),e===null?u.userLogHandler=null:u.userLogHandler=function(f,p){for(var m=[],v=2;v<arguments.length;v++)m[v-2]=arguments[v];var y=m.map(function(w){if(w==null)return null;if(typeof w=="string")return w;if(typeof w=="number"||typeof w=="boolean")return w.toString();if(w instanceof Error)return w.message;try{return JSON.stringify(w)}catch{return null}}).filter(function(w){return w}).join(" ");p>=(c??f.logLevel)&&e({level:qe[p].toLowerCase(),message:y,args:m,type:f.name})}},r=0,o=vw;r<o.length;r++){var s=o[r];n(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gi,jF=(Gi={},Gi["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Gi["bad-app-name"]="Illegal App name: '{$appName}",Gi["duplicate-app"]="Firebase App named '{$appName}' already exists",Gi["app-deleted"]="Firebase App named '{$appName}' already deleted",Gi["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Gi["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Gi),va=new gw("app","Firebase",jF),Tj="@firebase/app",kF="0.6.30",CF="@firebase/analytics",AF="@firebase/app-check",DF="@firebase/auth",RF="@firebase/database",MF="@firebase/functions",OF="@firebase/installations",LF="@firebase/messaging",PF="@firebase/performance",FF="@firebase/remote-config",UF="@firebase/storage",$F="@firebase/firestore",VF="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,vd="[DEFAULT]",BF=(cn={},cn[Tj]="fire-core",cn[CF]="fire-analytics",cn[AF]="fire-app-check",cn[DF]="fire-auth",cn[RF]="fire-rtdb",cn[MF]="fire-fn",cn[OF]="fire-iid",cn[LF]="fire-fcm",cn[PF]="fire-perf",cn[FF]="fire-rc",cn[UF]="fire-gcs",cn[$F]="fire-fst",cn["fire-js"]="fire-js",cn[VF]="fire-js-all",cn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wa=new Ij("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uf=function(){function e(t,n,r){var o=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=eF(t),this.container=new SF(n.name),this._addComponent(new ap("app",function(){return o},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return o._addComponent(s)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=vd),this.checkDestroyed_();var o=this.container.getProvider(t);return!o.isInitialized()&&((r=o.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=vd),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){Wa.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw va.create("app-deleted",{appName:this.name_})},e}();Uf.prototype.name&&Uf.prototype.options||Uf.prototype.delete||console.log("dc");var zF="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(e){var t={},n=new Map,r={__esModule:!0,initializeApp:u,app:s,registerVersion:p,setLogLevel:IF,onLog:m,apps:null,SDK_VERSION:zF,INTERNAL:{registerComponent:f,removeApp:o,components:n,useAsService:v}};r.default=r,Object.defineProperty(r,"apps",{get:c});function o(y){delete t[y]}function s(y){if(y=y||vd,!vN(t,y))throw va.create("no-app",{appName:y});return t[y]}s.App=e;function u(y,w){if(w===void 0&&(w={}),typeof w!="object"||w===null){var _=w;w={name:_}}var S=w;S.name===void 0&&(S.name=vd);var C=S.name;if(typeof C!="string"||!C)throw va.create("bad-app-name",{appName:String(C)});if(vN(t,C))throw va.create("duplicate-app",{appName:C});var N=new e(y,S,r);return t[C]=N,N}function c(){return Object.keys(t).map(function(y){return t[y]})}function f(y){var w=y.name;if(n.has(w))return Wa.debug("There were multiple attempts to register component "+w+"."),y.type==="PUBLIC"?r[w]:null;if(n.set(w,y),y.type==="PUBLIC"){var _=function(E){if(E===void 0&&(E=s()),typeof E[w]!="function")throw va.create("invalid-app-argument",{appName:w});return E[w]()};y.serviceProps!==void 0&&oc(_,y.serviceProps),r[w]=_,e.prototype[w]=function(){for(var E=[],x=0;x<arguments.length;x++)E[x]=arguments[x];var j=this._getService.bind(this,w);return j.apply(this,y.multipleInstances?E:[])}}for(var S=0,C=Object.keys(t);S<C.length;S++){var N=C[S];t[N]._addComponent(y)}return y.type==="PUBLIC"?r[w]:null}function p(y,w,_){var S,C=(S=BF[y])!==null&&S!==void 0?S:y;_&&(C+="-"+_);var N=C.match(/\s|\//),E=w.match(/\s|\//);if(N||E){var x=['Unable to register library "'+C+'" with version "'+w+'":'];N&&x.push('library name "'+C+'" contains illegal characters (whitespace or "/")'),N&&E&&x.push("and"),E&&x.push('version name "'+w+'" contains illegal characters (whitespace or "/")'),Wa.warn(x.join(" "));return}f(new ap(C+"-version",function(){return{library:C,version:w}},"VERSION"))}function m(y,w){if(y!==null&&typeof y!="function")throw va.create("invalid-log-argument");TF(y,w)}function v(y,w){if(w==="serverAuth")return null;var _=w;return _}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(){var e=qF(Uf);e.INTERNAL=ic(ic({},e.INTERNAL),{createFirebaseNamespace:jj,extendNamespace:t,createSubscribe:gF,ErrorFactory:gw,deepExtend:oc});function t(n){oc(e,n)}return e}var yw=jj();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KF=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(HF(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function HF(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(e,t){e.INTERNAL.registerComponent(new ap("platform-logger",function(n){return new KF(n)},"PRIVATE")),e.registerVersion(Tj,kF,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(oF()&&self.firebase!==void 0){Wa.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var yN=self.firebase.SDK_VERSION;yN&&yN.indexOf("LITE")>=0&&Wa.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var WF=yw.initializeApp;yw.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Nj()&&Wa.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),WF.apply(void 0,e)};var de=yw;GF(de);var YF="firebase",kj="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */de.registerVersion(YF,kj,"app");de.SDK_VERSION=kj;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,a,l){i!=Array.prototype&&i!=Object.prototype&&(i[a]=l.value)};function n(i){i=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,i];for(var a=0;a<i.length;++a){var l=i[a];if(l&&l.Math==Math)return l}return globalThis}var r=n(this);function o(i,a){if(a){var l=r;i=i.split(".");for(var d=0;d<i.length-1;d++){var g=i[d];g in l||(l[g]={}),l=l[g]}i=i[i.length-1],d=l[i],a=a(d),a!=d&&a!=null&&t(l,i,{configurable:!0,writable:!0,value:a})}}function s(i){var a=0;return function(){return a<i.length?{done:!1,value:i[a++]}:{done:!0}}}function u(i){var a=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return a?a.call(i):{next:s(i)}}o("Promise",function(i){function a(I){this.b=0,this.c=void 0,this.a=[];var D=this.f();try{I(D.resolve,D.reject)}catch($){D.reject($)}}function l(){this.a=null}function d(I){return I instanceof a?I:new a(function(D){D(I)})}if(i)return i;l.prototype.b=function(I){if(this.a==null){this.a=[];var D=this;this.c(function(){D.g()})}this.a.push(I)};var g=r.setTimeout;l.prototype.c=function(I){g(I,0)},l.prototype.g=function(){for(;this.a&&this.a.length;){var I=this.a;this.a=[];for(var D=0;D<I.length;++D){var $=I[D];I[D]=null;try{$()}catch(G){this.f(G)}}}this.a=null},l.prototype.f=function(I){this.c(function(){throw I})},a.prototype.f=function(){function I(G){return function(Ee){$||($=!0,G.call(D,Ee))}}var D=this,$=!1;return{resolve:I(this.m),reject:I(this.g)}},a.prototype.m=function(I){if(I===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(I instanceof a)this.s(I);else{e:switch(typeof I){case"object":var D=I!=null;break e;case"function":D=!0;break e;default:D=!1}D?this.v(I):this.h(I)}},a.prototype.v=function(I){var D=void 0;try{D=I.then}catch($){this.g($);return}typeof D=="function"?this.u(D,I):this.h(I)},a.prototype.g=function(I){this.i(2,I)},a.prototype.h=function(I){this.i(1,I)},a.prototype.i=function(I,D){if(this.b!=0)throw Error("Cannot settle("+I+", "+D+"): Promise already settled in state"+this.b);this.b=I,this.c=D,this.l()},a.prototype.l=function(){if(this.a!=null){for(var I=0;I<this.a.length;++I)b.b(this.a[I]);this.a=null}};var b=new l;return a.prototype.s=function(I){var D=this.f();I.Ra(D.resolve,D.reject)},a.prototype.u=function(I,D){var $=this.f();try{I.call(D,$.resolve,$.reject)}catch(G){$.reject(G)}},a.prototype.then=function(I,D){function $(ze,qt){return typeof ze=="function"?function(gi){try{G(ze(gi))}catch(hv){Ee(hv)}}:qt}var G,Ee,Ye=new a(function(ze,qt){G=ze,Ee=qt});return this.Ra($(I,G),$(D,Ee)),Ye},a.prototype.catch=function(I){return this.then(void 0,I)},a.prototype.Ra=function(I,D){function $(){switch(G.b){case 1:I(G.c);break;case 2:D(G.c);break;default:throw Error("Unexpected state: "+G.b)}}var G=this;this.a==null?b.b($):this.a.push($)},a.resolve=d,a.reject=function(I){return new a(function(D,$){$(I)})},a.race=function(I){return new a(function(D,$){for(var G=u(I),Ee=G.next();!Ee.done;Ee=G.next())d(Ee.value).Ra(D,$)})},a.all=function(I){var D=u(I),$=D.next();return $.done?d([]):new a(function(G,Ee){function Ye(gi){return function(hv){ze[gi]=hv,qt--,qt==0&&G(ze)}}var ze=[],qt=0;do ze.push(void 0),qt++,d($.value).Ra(Ye(ze.length-1),Ee),$=D.next();while(!$.done)})},a});var c=c||{},f=this||self,p=/^[\w+/_-]+[=]{0,2}$/,m=null;function v(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&p.test(i)?i:""}function y(){}function w(i){var a=typeof i;return a!="object"?a:i?Array.isArray(i)?"array":a:"null"}function _(i){var a=w(i);return a=="array"||a=="object"&&typeof i.length=="number"}function S(i){return w(i)=="function"}function C(i){var a=typeof i;return a=="object"&&i!=null||a=="function"}function N(i,a,l){return i.call.apply(i.bind,arguments)}function E(i,a,l){if(!i)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,d),i.apply(a,g)}}return function(){return i.apply(a,arguments)}}function x(i,a,l){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x=N:x=E,x.apply(null,arguments)}function j(i,a){var l=Array.prototype.slice.call(arguments,1);return function(){var d=l.slice();return d.push.apply(d,arguments),i.apply(this,d)}}function k(i,a){function l(){}l.prototype=a.prototype,i.bb=a.prototype,i.prototype=new l,i.prototype.constructor=i}function A(i){return i}function T(i,a,l){this.code=F+i,this.message=a||q[i]||"",this.a=l||null}k(T,Error),T.prototype.w=function(){var i={code:this.code,message:this.message};return this.a&&(i.serverResponse=this.a),i},T.prototype.toJSON=function(){return this.w()};function L(i){var a=i&&i.code;return a?new T(a.substring(F.length),i.message,i.serverResponse):null}var F="auth/",q={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},z={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(i){for(var a in z)if(z[a].id===i)return i=z[a],{firebaseEndpoint:i.Ua,secureTokenEndpoint:i.$a,identityPlatformEndpoint:i.Xa};return null}var M;M=O("__EID__")?"__EID__":void 0;function ee(i){if(!i)return!1;try{return!!i.$goog_Thenable}catch{return!1}}function H(i){if(Error.captureStackTrace)Error.captureStackTrace(this,H);else{var a=Error().stack;a&&(this.stack=a)}i&&(this.message=String(i))}k(H,Error),H.prototype.name="CustomError";function te(i,a){i=i.split("%s");for(var l="",d=i.length-1,g=0;g<d;g++)l+=i[g]+(g<a.length?a[g]:"%s");H.call(this,l+i[d])}k(te,H),te.prototype.name="AssertionError";function V(i,a){throw new te("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1))}function P(i,a){this.c=i,this.f=a,this.b=0,this.a=null}P.prototype.get=function(){if(0<this.b){this.b--;var i=this.a;this.a=i.next,i.next=null}else i=this.c();return i};function X(i,a){i.f(a),100>i.b&&(i.b++,a.next=i.a,i.a=a)}function B(){this.b=this.a=null}var ae=new P(function(){return new we},function(i){i.reset()});B.prototype.add=function(i,a){var l=ae.get();l.set(i,a),this.b?this.b.next=l:this.a=l,this.b=l};function Q(){var i=Hx,a=null;return i.a&&(a=i.a,i.a=i.a.next,i.a||(i.b=null),a.next=null),a}function we(){this.next=this.b=this.a=null}we.prototype.set=function(i,a){this.a=i,this.b=a,this.next=null},we.prototype.reset=function(){this.next=this.b=this.a=null};var De=Array.prototype.indexOf?function(i,a){return Array.prototype.indexOf.call(i,a,void 0)}:function(i,a){if(typeof i=="string")return typeof a!="string"||a.length!=1?-1:i.indexOf(a,0);for(var l=0;l<i.length;l++)if(l in i&&i[l]===a)return l;return-1},xe=Array.prototype.forEach?function(i,a,l){Array.prototype.forEach.call(i,a,l)}:function(i,a,l){for(var d=i.length,g=typeof i=="string"?i.split(""):i,b=0;b<d;b++)b in g&&a.call(l,g[b],b,i)};function Ve(i,a){for(var l=typeof i=="string"?i.split(""):i,d=i.length-1;0<=d;--d)d in l&&a.call(void 0,l[d],d,i)}var re=Array.prototype.filter?function(i,a){return Array.prototype.filter.call(i,a,void 0)}:function(i,a){for(var l=i.length,d=[],g=0,b=typeof i=="string"?i.split(""):i,I=0;I<l;I++)if(I in b){var D=b[I];a.call(void 0,D,I,i)&&(d[g++]=D)}return d},Te=Array.prototype.map?function(i,a){return Array.prototype.map.call(i,a,void 0)}:function(i,a){for(var l=i.length,d=Array(l),g=typeof i=="string"?i.split(""):i,b=0;b<l;b++)b in g&&(d[b]=a.call(void 0,g[b],b,i));return d},Ze=Array.prototype.some?function(i,a){return Array.prototype.some.call(i,a,void 0)}:function(i,a){for(var l=i.length,d=typeof i=="string"?i.split(""):i,g=0;g<l;g++)if(g in d&&a.call(void 0,d[g],g,i))return!0;return!1};function ft(i){e:{for(var a=rR,l=i.length,d=typeof i=="string"?i.split(""):i,g=0;g<l;g++)if(g in d&&a.call(void 0,d[g],g,i)){a=g;break e}a=-1}return 0>a?null:typeof i=="string"?i.charAt(a):i[a]}function Ce(i,a){return 0<=De(i,a)}function ot(i,a){a=De(i,a);var l;return(l=0<=a)&&Array.prototype.splice.call(i,a,1),l}function Je(i,a){var l=0;Ve(i,function(d,g){a.call(void 0,d,g,i)&&Array.prototype.splice.call(i,g,1).length==1&&l++})}function st(i){return Array.prototype.concat.apply([],arguments)}function dt(i){var a=i.length;if(0<a){for(var l=Array(a),d=0;d<a;d++)l[d]=i[d];return l}return[]}var Dn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},zr=/&/g,Sr=/</g,Bs=/>/g,ve=/"/g,Fe=/'/g,oe=/\x00/g,ye=/[\x00&<>"']/;function je(i,a){return i.indexOf(a)!=-1}function sn(i,a){return i<a?-1:i>a?1:0}var an;e:{var Oi=f.navigator;if(Oi){var _r=Oi.userAgent;if(_r){an=_r;break e}}an=""}function at(i){return je(an,i)}function Yc(i,a){for(var l in i)a.call(void 0,i[l],l,i)}function ci(i){for(var a in i)return!1;return!0}function qr(i){var a={},l;for(l in i)a[l]=i[l];return a}var Qc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yt(i,a){for(var l,d,g=1;g<arguments.length;g++){d=arguments[g];for(l in d)i[l]=d[l];for(var b=0;b<Qc.length;b++)l=Qc[b],Object.prototype.hasOwnProperty.call(d,l)&&(i[l]=d[l])}}function Eu(i,a){e:{try{var l=i&&i.ownerDocument,d=l&&(l.defaultView||l.parentWindow);if(d=d||f,d.Element&&d.Location){var g=d;break e}}catch{}g=null}if(g&&typeof g[a]<"u"&&(!i||!(i instanceof g[a])&&(i instanceof g.Location||i instanceof g.Element))){if(C(i))try{var b=i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch{b="<object could not be stringified>"}else b=i===void 0?"undefined":i===null?"null":typeof i;V("Argument is not a %s (or a non-Element, non-Location mock); got: %s",a,b)}}function se(i,a){this.a=i===Ge&&a||"",this.b=Ne}se.prototype.ta=!0,se.prototype.sa=function(){return this.a},se.prototype.toString=function(){return"Const{"+this.a+"}"};function ie(i){return i instanceof se&&i.constructor===se&&i.b===Ne?i.a:(V("expected object of type Const, got '"+i+"'"),"type_error:Const")}var Ne={},Ge={},Ct;function wt(){if(Ct===void 0){var i=null,a=f.trustedTypes;if(a&&a.createPolicy){try{i=a.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(l){f.console&&f.console.error(l.message)}Ct=i}else Ct=i}return Ct}function Ue(i,a){this.a=a===Li?i:""}Ue.prototype.ta=!0,Ue.prototype.sa=function(){return this.a.toString()},Ue.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function Nt(i){return i instanceof Ue&&i.constructor===Ue?i.a:(V("expected object of type TrustedResourceUrl, got '"+i+"' of type "+w(i)),"type_error:TrustedResourceUrl")}function Et(i,a){var l=ie(i);if(!lr.test(l))throw Error("Invalid TrustedResourceUrl format: "+l);return i=l.replace(Nr,function(d,g){if(!Object.prototype.hasOwnProperty.call(a,g))throw Error('Found marker, "'+g+'", in format string, "'+l+'", but no valid label mapping found in args: '+JSON.stringify(a));return d=a[g],d instanceof se?ie(d):encodeURIComponent(String(d))}),hi(i)}var Nr=/%{(\w+)}/g,lr=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Li={};function hi(i){var a=wt();return i=a?a.createScriptURL(i):i,new Ue(i,Li)}function At(i,a){this.a=a===Iu?i:""}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Pi(i){return i instanceof At&&i.constructor===At?i.a:(V("expected object of type SafeUrl, got '"+i+"' of type "+w(i)),"type_error:SafeUrl")}var zs=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,cr=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Xc=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dx(i){if(i instanceof At)return i;if(i=typeof i=="object"&&i.ta?i.sa():String(i),Xc.test(i))i=new At(i,Iu);else{i=String(i),i=i.replace(/(%0A|%0D)/g,"");var a=i.match(cr);i=a&&zs.test(a[1])?new At(i,Iu):null}return i}function Rx(i){return i instanceof At?i:(i=typeof i=="object"&&i.ta?i.sa():String(i),Xc.test(i)||(i="about:invalid#zClosurez"),new At(i,Iu))}var Iu={},Mx=new At("about:invalid#zClosurez",Iu);function qs(i,a,l){this.a=l===Ox?i:""}qs.prototype.ta=!0,qs.prototype.sa=function(){return this.a.toString()},qs.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function PA(i){return i instanceof qs&&i.constructor===qs?i.a:(V("expected object of type SafeHtml, got '"+i+"' of type "+w(i)),"type_error:SafeHtml")}var Ox={};function FA(i,a){Eu(i,"HTMLScriptElement"),i.src=Nt(a),(a=i.ownerDocument&&i.ownerDocument.defaultView)&&a!=f?a=v(a.document):(m===null&&(m=v(f.document)),a=m),a&&i.setAttribute("nonce",a)}function Lx(i,a,l,d){return i=i instanceof At?i:Rx(i),a=a||f,l=l instanceof se?ie(l):l||"",a.open(Pi(i),l,d,void 0)}function Px(i,a){for(var l=i.split("%s"),d="",g=Array.prototype.slice.call(arguments,1);g.length&&1<l.length;)d+=l.shift()+g.shift();return d+l.join("%s")}function $p(i){return ye.test(i)&&(i.indexOf("&")!=-1&&(i=i.replace(zr,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace(Sr,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(Bs,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(ve,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(Fe,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(oe,"&#0;"))),i}function Vp(i){return Vp[" "](i),i}Vp[" "]=y;function UA(i,a){var l=zA;return Object.prototype.hasOwnProperty.call(l,i)?l[i]:l[i]=a(i)}var $A=at("Opera"),Er=at("Trident")||at("MSIE"),Fx=at("Edge"),VA=Fx||Er,Ux=at("Gecko")&&!(je(an.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),BA=je(an.toLowerCase(),"webkit")&&!at("Edge");function $x(){var i=f.document;return i?i.documentMode:void 0}var Jc;e:{var Bp="",zp=function(){var i=an;if(Ux)return/rv:([^\);]+)(\)|;)/.exec(i);if(Fx)return/Edge\/([\d\.]+)/.exec(i);if(Er)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(BA)return/WebKit\/(\S+)/.exec(i);if($A)return/(?:Version)[ \/]?(\S+)/.exec(i)}();if(zp&&(Bp=zp?zp[1]:""),Er){var qp=$x();if(qp!=null&&qp>parseFloat(Bp)){Jc=String(qp);break e}}Jc=Bp}var zA={};function Vx(i){return UA(i,function(){for(var a=0,l=Dn(String(Jc)).split("."),d=Dn(String(i)).split("."),g=Math.max(l.length,d.length),b=0;a==0&&b<g;b++){var I=l[b]||"",D=d[b]||"";do{if(I=/(\d*)(\D*)(.*)/.exec(I)||["","","",""],D=/(\d*)(\D*)(.*)/.exec(D)||["","","",""],I[0].length==0&&D[0].length==0)break;a=sn(I[1].length==0?0:parseInt(I[1],10),D[1].length==0?0:parseInt(D[1],10))||sn(I[2].length==0,D[2].length==0)||sn(I[2],D[2]),I=I[3],D=D[3]}while(a==0)}return 0<=a})}var Kp;if(f.document&&Er){var Bx=$x();Kp=Bx||parseInt(Jc,10)||void 0}else Kp=void 0;var Fi=Kp;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var qA=!Er||9<=Number(Fi);function Tu(i){var a=document;return typeof i=="string"?a.getElementById(i):i}function zx(i,a){Yc(a,function(l,d){l&&typeof l=="object"&&l.ta&&(l=l.sa()),d=="style"?i.style.cssText=l:d=="class"?i.className=l:d=="for"?i.htmlFor=l:qx.hasOwnProperty(d)?i.setAttribute(qx[d],l):d.lastIndexOf("aria-",0)==0||d.lastIndexOf("data-",0)==0?i.setAttribute(d,l):i[d]=l})}var qx={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function KA(i,a,l){var d=arguments,g=document,b=String(d[0]),I=d[1];if(!qA&&I&&(I.name||I.type)){if(b=["<",b],I.name&&b.push(' name="',$p(I.name),'"'),I.type){b.push(' type="',$p(I.type),'"');var D={};Yt(D,I),delete D.type,I=D}b.push(">"),b=b.join("")}return b=Zc(g,b),I&&(typeof I=="string"?b.className=I:Array.isArray(I)?b.className=I.join(" "):zx(b,I)),2<d.length&&HA(g,b,d),b}function HA(i,a,l){function d(D){D&&a.appendChild(typeof D=="string"?i.createTextNode(D):D)}for(var g=2;g<l.length;g++){var b=l[g];if(!_(b)||C(b)&&0<b.nodeType)d(b);else{e:{if(b&&typeof b.length=="number"){if(C(b)){var I=typeof b.item=="function"||typeof b.item=="string";break e}if(S(b)){I=typeof b.item=="function";break e}}I=!1}xe(I?dt(b):b,d)}}}function Zc(i,a){return a=String(a),i.contentType==="application/xhtml+xml"&&(a=a.toLowerCase()),i.createElement(a)}function Kx(i){f.setTimeout(function(){throw i},0)}var Hp;function GA(){var i=f.MessageChannel;if(typeof i>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!at("Presto")&&(i=function(){var g=Zc(document,"IFRAME");g.style.display="none",document.documentElement.appendChild(g);var b=g.contentWindow;g=b.document,g.open(),g.close();var I="callImmediate"+Math.random(),D=b.location.protocol=="file:"?"*":b.location.protocol+"//"+b.location.host;g=x(function($){(D=="*"||$.origin==D)&&$.data==I&&this.port1.onmessage()},this),b.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){b.postMessage(I,D)}}}),typeof i<"u"&&!at("Trident")&&!at("MSIE")){var a=new i,l={},d=l;return a.port1.onmessage=function(){if(l.next!==void 0){l=l.next;var g=l.Hb;l.Hb=null,g()}},function(g){d.next={Hb:g},d=d.next,a.port2.postMessage(0)}}return function(g){f.setTimeout(g,0)}}function eh(i,a){th||WA(),Gp||(th(),Gp=!0),Hx.add(i,a)}var th;function WA(){if(f.Promise&&f.Promise.resolve){var i=f.Promise.resolve(void 0);th=function(){i.then(Gx)}}else th=function(){var a=Gx;!S(f.setImmediate)||f.Window&&f.Window.prototype&&!at("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(Hp||(Hp=GA()),Hp(a)):f.setImmediate(a)}}var Gp=!1,Hx=new B;function Gx(){for(var i;i=Q();){try{i.a.call(i.b)}catch(a){Kx(a)}X(ae,i)}Gp=!1}function Re(i,a){if(this.a=Do,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,i!=y)try{var l=this;i.call(a,function(d){Ro(l,ju,d)},function(d){if(!(d instanceof Ks))try{throw d instanceof Error?d:Error("Promise rejected.")}catch{}Ro(l,fi,d)})}catch(d){Ro(this,fi,d)}}var Do=0,ju=2,fi=3;function Wx(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Wx.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Yx=new P(function(){return new Wx},function(i){i.reset()});function Wp(i,a,l){var d=Yx.get();return d.g=i,d.b=a,d.f=l,d}function ge(i){if(i instanceof Re)return i;var a=new Re(y);return Ro(a,ju,i),a}function ut(i){return new Re(function(a,l){l(i)})}function Qx(i,a,l){eb(i,a,l,null)||eh(j(a,i))}function YA(i){return new Re(function(a,l){var d=i.length,g=[];if(d)for(var b=function(G,Ee){d--,g[G]=Ee,d==0&&a(g)},I=function(G){l(G)},D=0,$;D<i.length;D++)$=i[D],Qx($,j(b,D),I);else a(g)})}function Xx(i){return new Re(function(a){var l=i.length,d=[];if(l)for(var g=function(D,$,G){l--,d[D]=$?{Qb:!0,value:G}:{Qb:!1,reason:G},l==0&&a(d)},b=0,I;b<i.length;b++)I=i[b],Qx(I,j(g,b,!0),j(g,b,!1));else a(d)})}Re.prototype.then=function(i,a,l){return Zx(this,S(i)?i:null,S(a)?a:null,l)},Re.prototype.$goog_Thenable=!0,e=Re.prototype,e.oa=function(i,a){return i=Wp(i,i,a),i.c=!0,Yp(this,i),this},e.o=function(i,a){return Zx(this,null,i,a)},e.cancel=function(i){if(this.a==Do){var a=new Ks(i);eh(function(){Jx(this,a)},this)}};function Jx(i,a){if(i.a==Do)if(i.c){var l=i.c;if(l.b){for(var d=0,g=null,b=null,I=l.b;I&&(I.c||(d++,I.a==i&&(g=I),!(g&&1<d)));I=I.next)g||(b=I);g&&(l.a==Do&&d==1?Jx(l,a):(b?(d=b,d.next==l.f&&(l.f=d),d.next=d.next.next):nb(l),rb(l,g,fi,a)))}i.c=null}else Ro(i,fi,a)}function Yp(i,a){i.b||i.a!=ju&&i.a!=fi||tb(i),i.f?i.f.next=a:i.b=a,i.f=a}function Zx(i,a,l,d){var g=Wp(null,null,null);return g.a=new Re(function(b,I){g.g=a?function(D){try{var $=a.call(d,D);b($)}catch(G){I(G)}}:b,g.b=l?function(D){try{var $=l.call(d,D);$===void 0&&D instanceof Ks?I(D):b($)}catch(G){I(G)}}:I}),g.a.c=i,Yp(i,g),g.a}e.$c=function(i){this.a=Do,Ro(this,ju,i)},e.ad=function(i){this.a=Do,Ro(this,fi,i)};function Ro(i,a,l){i.a==Do&&(i===l&&(a=fi,l=new TypeError("Promise cannot resolve to itself")),i.a=1,eb(l,i.$c,i.ad,i)||(i.i=l,i.a=a,i.c=null,tb(i),a!=fi||l instanceof Ks||XA(i,l)))}function eb(i,a,l,d){if(i instanceof Re)return Yp(i,Wp(a||y,l||null,d)),!0;if(ee(i))return i.then(a,l,d),!0;if(C(i))try{var g=i.then;if(S(g))return QA(i,g,a,l,d),!0}catch(b){return l.call(d,b),!0}return!1}function QA(i,a,l,d,g){function b($){D||(D=!0,d.call(g,$))}function I($){D||(D=!0,l.call(g,$))}var D=!1;try{a.call(i,I,b)}catch($){b($)}}function tb(i){i.h||(i.h=!0,eh(i.gc,i))}function nb(i){var a=null;return i.b&&(a=i.b,i.b=a.next,a.next=null),i.b||(i.f=null),a}e.gc=function(){for(var i;i=nb(this);)rb(this,i,this.a,this.i);this.h=!1};function rb(i,a,l,d){if(l==fi&&a.b&&!a.c)for(;i&&i.g;i=i.c)i.g=!1;if(a.a)a.a.c=null,ib(a,l,d);else try{a.c?a.g.call(a.f):ib(a,l,d)}catch(g){ob.call(null,g)}X(Yx,a)}function ib(i,a,l){a==ju?i.g.call(i.f,l):i.b&&i.b.call(i.f,l)}function XA(i,a){i.g=!0,eh(function(){i.g&&ob.call(null,a)})}var ob=Kx;function Ks(i){H.call(this,i)}k(Ks,H),Ks.prototype.name="cancel";function nh(){this.ya=this.ya,this.pa=this.pa}var JA=0;nh.prototype.ya=!1;function sb(i){!i.ya&&(i.ya=!0,i.Da(),JA!=0)}nh.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var ZA=Object.freeze||function(i){return i},ab=!Er||9<=Number(Fi),eD=Er&&!Vx("9"),tD=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var i=!1,a=Object.defineProperty({},"passive",{get:function(){i=!0}});try{f.addEventListener("test",y,a),f.removeEventListener("test",y,a)}catch{}return i}();function Rn(i,a){this.type=i,this.b=this.target=a,this.defaultPrevented=!1}Rn.prototype.preventDefault=function(){this.defaultPrevented=!0};function Mo(i,a){if(Rn.call(this,i?i.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,i){var l=this.type=i.type,d=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.b=a,a=i.relatedTarget){if(Ux){e:{try{Vp(a.nodeName);var g=!0;break e}catch{}g=!1}g||(a=null)}}else l=="mouseover"?a=i.fromElement:l=="mouseout"&&(a=i.toElement);this.relatedTarget=a,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:nD[i.pointerType]||"",this.a=i,i.defaultPrevented&&this.preventDefault()}}k(Mo,Rn);var nD=ZA({2:"touch",3:"pen",4:"mouse"});Mo.prototype.preventDefault=function(){Mo.bb.preventDefault.call(this);var i=this.a;if(i.preventDefault)i.preventDefault();else if(i.returnValue=!1,eD)try{(i.ctrlKey||112<=i.keyCode&&123>=i.keyCode)&&(i.keyCode=-1)}catch{}},Mo.prototype.g=function(){return this.a};var ku="closure_listenable_"+(1e6*Math.random()|0),rD=0;function iD(i,a,l,d,g){this.listener=i,this.proxy=null,this.src=a,this.type=l,this.capture=!!d,this.Wa=g,this.key=++rD,this.wa=this.Qa=!1}function rh(i){i.wa=!0,i.listener=null,i.proxy=null,i.src=null,i.Wa=null}function ih(i){this.src=i,this.a={},this.b=0}ih.prototype.add=function(i,a,l,d,g){var b=i.toString();i=this.a[b],i||(i=this.a[b]=[],this.b++);var I=Xp(i,a,d,g);return-1<I?(a=i[I],l||(a.Qa=!1)):(a=new iD(a,this.src,b,!!d,g),a.Qa=l,i.push(a)),a};function Qp(i,a){var l=a.type;l in i.a&&ot(i.a[l],a)&&(rh(a),i.a[l].length==0&&(delete i.a[l],i.b--))}function Xp(i,a,l,d){for(var g=0;g<i.length;++g){var b=i[g];if(!b.wa&&b.listener==a&&b.capture==!!l&&b.Wa==d)return g}return-1}var Jp="closure_lm_"+(1e6*Math.random()|0),Zp={};function hr(i,a,l,d,g){if(d&&d.once)em(i,a,l,d,g);else if(Array.isArray(a))for(var b=0;b<a.length;b++)hr(i,a[b],l,d,g);else l=nm(l),i&&i[ku]?db(i,a,l,C(d)?!!d.capture:!!d,g):ub(i,a,l,!1,d,g)}function ub(i,a,l,d,g,b){if(!a)throw Error("Invalid event type");var I=C(g)?!!g.capture:!!g,D=oh(i);if(D||(i[Jp]=D=new ih(i)),l=D.add(a,l,d,I,b),!l.proxy)if(d=oD(),l.proxy=d,d.src=i,d.listener=l,i.addEventListener)tD||(g=I),g===void 0&&(g=!1),i.addEventListener(a.toString(),d,g);else if(i.attachEvent)i.attachEvent(cb(a.toString()),d);else if(i.addListener&&i.removeListener)i.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.")}function oD(){var i=sD,a=ab?function(l){return i.call(a.src,a.listener,l)}:function(l){if(l=i.call(a.src,a.listener,l),!l)return l};return a}function em(i,a,l,d,g){if(Array.isArray(a))for(var b=0;b<a.length;b++)em(i,a[b],l,d,g);else l=nm(l),i&&i[ku]?rm(i,a,l,C(d)?!!d.capture:!!d,g):ub(i,a,l,!0,d,g)}function Hn(i,a,l,d,g){if(Array.isArray(a))for(var b=0;b<a.length;b++)Hn(i,a[b],l,d,g);else d=C(d)?!!d.capture:!!d,l=nm(l),i&&i[ku]?(i=i.v,a=String(a).toString(),a in i.a&&(b=i.a[a],l=Xp(b,l,d,g),-1<l&&(rh(b[l]),Array.prototype.splice.call(b,l,1),b.length==0&&(delete i.a[a],i.b--)))):i&&(i=oh(i))&&(a=i.a[a.toString()],i=-1,a&&(i=Xp(a,l,d,g)),(l=-1<i?a[i]:null)&&lb(l))}function lb(i){if(typeof i!="number"&&i&&!i.wa){var a=i.src;if(a&&a[ku])Qp(a.v,i);else{var l=i.type,d=i.proxy;a.removeEventListener?a.removeEventListener(l,d,i.capture):a.detachEvent?a.detachEvent(cb(l),d):a.addListener&&a.removeListener&&a.removeListener(d),(l=oh(a))?(Qp(l,i),l.b==0&&(l.src=null,a[Jp]=null)):rh(i)}}}function cb(i){return i in Zp?Zp[i]:Zp[i]="on"+i}function hb(i,a,l,d){var g=!0;if((i=oh(i))&&(a=i.a[a.toString()]))for(a=a.concat(),i=0;i<a.length;i++){var b=a[i];b&&b.capture==l&&!b.wa&&(b=fb(b,d),g=g&&b!==!1)}return g}function fb(i,a){var l=i.listener,d=i.Wa||i.src;return i.Qa&&lb(i),l.call(d,a)}function sD(i,a){if(i.wa)return!0;if(!ab){if(!a)e:{a=["window","event"];for(var l=f,d=0;d<a.length;d++)if(l=l[a[d]],l==null){a=null;break e}a=l}if(d=a,a=new Mo(d,this),l=!0,!(0>d.keyCode||d.returnValue!=null)){e:{var g=!1;if(d.keyCode==0)try{d.keyCode=-1;break e}catch{g=!0}(g||d.returnValue==null)&&(d.returnValue=!0)}for(d=[],g=a.b;g;g=g.parentNode)d.push(g);for(i=i.type,g=d.length-1;0<=g;g--){a.b=d[g];var b=hb(d[g],i,!0,a);l=l&&b}for(g=0;g<d.length;g++)a.b=d[g],b=hb(d[g],i,!1,a),l=l&&b}return l}return fb(i,new Mo(a,this))}function oh(i){return i=i[Jp],i instanceof ih?i:null}var tm="__closure_events_fn_"+(1e9*Math.random()>>>0);function nm(i){return S(i)?i:(i[tm]||(i[tm]=function(a){return i.handleEvent(a)}),i[tm])}function bn(){nh.call(this),this.v=new ih(this),this.bc=this,this.hb=null}k(bn,nh),bn.prototype[ku]=!0,bn.prototype.addEventListener=function(i,a,l,d){hr(this,i,a,l,d)},bn.prototype.removeEventListener=function(i,a,l,d){Hn(this,i,a,l,d)},bn.prototype.dispatchEvent=function(i){var a,l=this.hb;if(l)for(a=[];l;l=l.hb)a.push(l);l=this.bc;var d=i.type||i;if(typeof i=="string")i=new Rn(i,l);else if(i instanceof Rn)i.target=i.target||l;else{var g=i;i=new Rn(d,l),Yt(i,g)}if(g=!0,a)for(var b=a.length-1;0<=b;b--){var I=i.b=a[b];g=sh(I,d,!0,i)&&g}if(I=i.b=l,g=sh(I,d,!0,i)&&g,g=sh(I,d,!1,i)&&g,a)for(b=0;b<a.length;b++)I=i.b=a[b],g=sh(I,d,!1,i)&&g;return g},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var i=this.v,a;for(a in i.a){for(var l=i.a[a],d=0;d<l.length;d++)rh(l[d]);delete i.a[a],i.b--}}this.hb=null};function db(i,a,l,d,g){i.v.add(String(a),l,!1,d,g)}function rm(i,a,l,d,g){i.v.add(String(a),l,!0,d,g)}function sh(i,a,l,d){if(a=i.v.a[String(a)],!a)return!0;a=a.concat();for(var g=!0,b=0;b<a.length;++b){var I=a[b];if(I&&!I.wa&&I.capture==l){var D=I.listener,$=I.Wa||I.src;I.Qa&&Qp(i.v,I),g=D.call($,d)!==!1&&g}}return g&&!d.defaultPrevented}function im(i,a,l){if(S(i))l&&(i=x(i,l));else if(i&&typeof i.handleEvent=="function")i=x(i.handleEvent,i);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:f.setTimeout(i,a||0)}function Hs(i){var a=null;return new Re(function(l,d){a=im(function(){l(void 0)},i),a==-1&&d(Error("Failed to schedule timer."))}).o(function(l){throw f.clearTimeout(a),l})}function pb(i){if(i.X&&typeof i.X=="function")return i.X();if(typeof i=="string")return i.split("");if(_(i)){for(var a=[],l=i.length,d=0;d<l;d++)a.push(i[d]);return a}a=[],l=0;for(d in i)a[l++]=i[d];return a}function mb(i){if(i.Y&&typeof i.Y=="function")return i.Y();if(!i.X||typeof i.X!="function"){if(_(i)||typeof i=="string"){var a=[];i=i.length;for(var l=0;l<i;l++)a.push(l);return a}a=[],l=0;for(var d in i)a[l++]=d;return a}}function aD(i,a){if(i.forEach&&typeof i.forEach=="function")i.forEach(a,void 0);else if(_(i)||typeof i=="string")xe(i,a,void 0);else for(var l=mb(i),d=pb(i),g=d.length,b=0;b<g;b++)a.call(void 0,d[b],l&&l[b],i)}function Gs(i,a){this.b={},this.a=[],this.c=0;var l=arguments.length;if(1<l){if(l%2)throw Error("Uneven number of arguments");for(var d=0;d<l;d+=2)this.set(arguments[d],arguments[d+1])}else if(i)if(i instanceof Gs)for(l=i.Y(),d=0;d<l.length;d++)this.set(l[d],i.get(l[d]));else for(d in i)this.set(d,i[d])}e=Gs.prototype,e.X=function(){om(this);for(var i=[],a=0;a<this.a.length;a++)i.push(this.b[this.a[a]]);return i},e.Y=function(){return om(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function om(i){if(i.c!=i.a.length){for(var a=0,l=0;a<i.a.length;){var d=i.a[a];Oo(i.b,d)&&(i.a[l++]=d),a++}i.a.length=l}if(i.c!=i.a.length){var g={};for(l=a=0;a<i.a.length;)d=i.a[a],Oo(g,d)||(i.a[l++]=d,g[d]=1),a++;i.a.length=l}}e.get=function(i,a){return Oo(this.b,i)?this.b[i]:a},e.set=function(i,a){Oo(this.b,i)||(this.c++,this.a.push(i)),this.b[i]=a},e.forEach=function(i,a){for(var l=this.Y(),d=0;d<l.length;d++){var g=l[d],b=this.get(g);i.call(a,b,g,this)}};function Oo(i,a){return Object.prototype.hasOwnProperty.call(i,a)}var gb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uD(i,a){if(i){i=i.split("&");for(var l=0;l<i.length;l++){var d=i[l].indexOf("="),g=null;if(0<=d){var b=i[l].substring(0,d);g=i[l].substring(d+1)}else b=i[l];a(b,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function Ui(i,a){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var l;i instanceof Ui?(this.i=a!==void 0?a:i.i,Cu(this,i.c),this.l=i.l,this.a=i.a,Au(this,i.g),this.f=i.f,sm(this,xb(i.b)),this.h=i.h):i&&(l=String(i).match(gb))?(this.i=!!a,Cu(this,l[1]||"",!0),this.l=Du(l[2]||""),this.a=Du(l[3]||"",!0),Au(this,l[4]),this.f=Du(l[5]||"",!0),sm(this,l[6]||"",!0),this.h=Du(l[7]||"")):(this.i=!!a,this.b=new Lo(null,this.i))}Ui.prototype.toString=function(){var i=[],a=this.c;a&&i.push(Ru(a,vb,!0),":");var l=this.a;return(l||a=="file")&&(i.push("//"),(a=this.l)&&i.push(Ru(a,vb,!0),"@"),i.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.g,l!=null&&i.push(":",String(l))),(l=this.f)&&(this.a&&l.charAt(0)!="/"&&i.push("/"),i.push(Ru(l,l.charAt(0)=="/"?hD:cD,!0))),(l=this.b.toString())&&i.push("?",l),(l=this.h)&&i.push("#",Ru(l,dD)),i.join("")},Ui.prototype.resolve=function(i){var a=new Ui(this),l=!!i.c;l?Cu(a,i.c):l=!!i.l,l?a.l=i.l:l=!!i.a,l?a.a=i.a:l=i.g!=null;var d=i.f;if(l)Au(a,i.g);else if(l=!!i.f){if(d.charAt(0)!="/")if(this.a&&!this.f)d="/"+d;else{var g=a.f.lastIndexOf("/");g!=-1&&(d=a.f.substr(0,g+1)+d)}if(g=d,g==".."||g==".")d="";else if(je(g,"./")||je(g,"/.")){d=g.lastIndexOf("/",0)==0,g=g.split("/");for(var b=[],I=0;I<g.length;){var D=g[I++];D=="."?d&&I==g.length&&b.push(""):D==".."?((1<b.length||b.length==1&&b[0]!="")&&b.pop(),d&&I==g.length&&b.push("")):(b.push(D),d=!0)}d=b.join("/")}else d=g}return l?a.f=d:l=i.b.toString()!=="",l?sm(a,xb(i.b)):l=!!i.h,l&&(a.h=i.h),a};function Cu(i,a,l){i.c=l?Du(a,!0):a,i.c&&(i.c=i.c.replace(/:$/,""))}function Au(i,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);i.g=a}else i.g=null}function sm(i,a,l){a instanceof Lo?(i.b=a,pD(i.b,i.i)):(l||(a=Ru(a,fD)),i.b=new Lo(a,i.i))}function It(i,a,l){i.b.set(a,l)}function fr(i,a){return i.b.get(a)}function Mn(i){return i instanceof Ui?new Ui(i):new Ui(i,void 0)}function ah(i,a,l,d){var g=new Ui(null,void 0);return i&&Cu(g,i),a&&(g.a=a),l&&Au(g,l),d&&(g.f=d),g}function Du(i,a){return i?a?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ru(i,a,l){return typeof i=="string"?(i=encodeURI(i).replace(a,lD),l&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function lD(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var vb=/[#\/\?@]/g,cD=/[#\?:]/g,hD=/[#\?]/g,fD=/[#\?@]/g,dD=/#/g;function Lo(i,a){this.b=this.a=null,this.c=i||null,this.f=!!a}function $i(i){i.a||(i.a=new Gs,i.b=0,i.c&&uD(i.c,function(a,l){i.add(decodeURIComponent(a.replace(/\+/g," ")),l)}))}function yb(i){var a=mb(i);if(typeof a>"u")throw Error("Keys are undefined");var l=new Lo(null,void 0);i=pb(i);for(var d=0;d<a.length;d++){var g=a[d],b=i[d];Array.isArray(b)?wb(l,g,b):l.add(g,b)}return l}e=Lo.prototype,e.add=function(i,a){$i(this),this.c=null,i=Ws(this,i);var l=this.a.get(i);return l||this.a.set(i,l=[]),l.push(a),this.b+=1,this};function Kr(i,a){$i(i),a=Ws(i,a),Oo(i.a.b,a)&&(i.c=null,i.b-=i.a.get(a).length,i=i.a,Oo(i.b,a)&&(delete i.b[a],i.c--,i.a.length>2*i.c&&om(i)))}e.clear=function(){this.a=this.c=null,this.b=0};function am(i,a){return $i(i),a=Ws(i,a),Oo(i.a.b,a)}e.forEach=function(i,a){$i(this),this.a.forEach(function(l,d){xe(l,function(g){i.call(a,g,d,this)},this)},this)},e.Y=function(){$i(this);for(var i=this.a.X(),a=this.a.Y(),l=[],d=0;d<a.length;d++)for(var g=i[d],b=0;b<g.length;b++)l.push(a[d]);return l},e.X=function(i){$i(this);var a=[];if(typeof i=="string")am(this,i)&&(a=st(a,this.a.get(Ws(this,i))));else{i=this.a.X();for(var l=0;l<i.length;l++)a=st(a,i[l])}return a},e.set=function(i,a){return $i(this),this.c=null,i=Ws(this,i),am(this,i)&&(this.b-=this.a.get(i).length),this.a.set(i,[a]),this.b+=1,this},e.get=function(i,a){return i?(i=this.X(i),0<i.length?String(i[0]):a):a};function wb(i,a,l){Kr(i,a),0<l.length&&(i.c=null,i.a.set(Ws(i,a),dt(l)),i.b+=l.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var i=[],a=this.a.Y(),l=0;l<a.length;l++){var d=a[l],g=encodeURIComponent(String(d));d=this.X(d);for(var b=0;b<d.length;b++){var I=g;d[b]!==""&&(I+="="+encodeURIComponent(String(d[b]))),i.push(I)}}return this.c=i.join("&")};function xb(i){var a=new Lo;return a.c=i.c,i.a&&(a.a=new Gs(i.a),a.b=i.b),a}function Ws(i,a){return a=String(a),i.f&&(a=a.toLowerCase()),a}function pD(i,a){a&&!i.f&&($i(i),i.c=null,i.a.forEach(function(l,d){var g=d.toLowerCase();d!=g&&(Kr(this,d),wb(this,g,l))},i)),i.f=a}function bb(i){var a=[];return um(new mD,i,a),a.join("")}function mD(){}function um(i,a,l){if(a==null)l.push("null");else{if(typeof a=="object"){if(Array.isArray(a)){var d=a;a=d.length,l.push("[");for(var g="",b=0;b<a;b++)l.push(g),um(i,d[b],l),g=",";l.push("]");return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{l.push("{"),g="";for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b=a[d],typeof b!="function"&&(l.push(g),_b(d,l),l.push(":"),um(i,b,l),g=","));l.push("}");return}}switch(typeof a){case"string":_b(a,l);break;case"number":l.push(isFinite(a)&&!isNaN(a)?String(a):"null");break;case"boolean":l.push(String(a));break;case"function":l.push("null");break;default:throw Error("Unknown type: "+typeof a)}}}var Sb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},gD=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function _b(i,a){a.push('"',i.replace(gD,function(l){var d=Sb[l];return d||(d="\\u"+(l.charCodeAt(0)|65536).toString(16).substr(1),Sb[l]=d),d}),'"')}function lm(){var i=Qt();return Er&&!!Fi&&Fi==11||/Edge\/\d+/.test(i)}function Mu(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function Nb(i,a){a=a||f.window;var l="about:blank";i&&(l=Pi(Dx(i)||Mx)),a.location.href=l}function Eb(i,a){var l=[],d;for(d in i)d in a?typeof i[d]!=typeof a[d]?l.push(d):typeof i[d]=="object"&&i[d]!=null&&a[d]!=null?0<Eb(i[d],a[d]).length&&l.push(d):i[d]!==a[d]&&l.push(d):l.push(d);for(d in a)d in i||l.push(d);return l}function vD(){var i=Qt();return i=Ys(i)!=kb?null:(i=i.match(/\sChrome\/(\d+)/i))&&i.length==2?parseInt(i[1],10):null,i&&30>i?!1:!Er||!Fi||9<Fi}function Ib(i){return i=(i||Qt()).toLowerCase(),!!(i.match(/android/)||i.match(/webos/)||i.match(/iphone|ipad|ipod/)||i.match(/blackberry/)||i.match(/windows phone/)||i.match(/iemobile/))}function Po(i){i=i||f.window;try{i.close()}catch{}}function Tb(i,a,l){var d=Math.floor(1e9*Math.random()).toString();a=a||500,l=l||600;var g=(window.screen.availHeight-l)/2,b=(window.screen.availWidth-a)/2;a={width:a,height:l,top:0<g?g:0,left:0<b?b:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},l=Qt().toLowerCase(),d&&(a.target=d,je(l,"crios/")&&(a.target="_blank")),Ys(Qt())==fm&&(i=i||"http://localhost",a.scrollbars=!0),l=i||"",(i=a)||(i={}),d=window,a=l instanceof At?l:Dx(typeof l.href<"u"?l.href:String(l))||Mx,l=i.target||l.target,g=[];for(I in i)switch(I){case"width":case"height":case"top":case"left":g.push(I+"="+i[I]);break;case"target":case"noopener":case"noreferrer":break;default:g.push(I+"="+(i[I]?1:0))}var I=g.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&d.navigator&&d.navigator.standalone&&l&&l!="_self"?(I=Zc(document,"A"),Eu(I,"HTMLAnchorElement"),a=a instanceof At?a:Rx(a),I.href=Pi(a),I.setAttribute("target",l),i.noreferrer&&I.setAttribute("rel","noreferrer"),i=document.createEvent("MouseEvent"),i.initMouseEvent("click",!0,!0,d,1),I.dispatchEvent(i),I={}):i.noreferrer?(I=Lx("",d,l,I),i=Pi(a),I&&(VA&&je(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),I.opener=null,i='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+$p(i)+'">',i=(d=wt())?d.createHTML(i):i,i=new qs(i,null,Ox),d=I.document)&&(d.write(PA(i)),d.close())):(I=Lx(a,d,l,I))&&i.noopener&&(I.opener=null),I)try{I.focus()}catch{}return I}function yD(i){return new Re(function(a){function l(){Hs(2e3).then(function(){if(!i||i.closed)a();else return l()})}return l()})}var wD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xD=/^[^@]+@[^@]+$/;function uh(){var i=null;return new Re(function(a){f.document.readyState=="complete"?a():(i=function(){a()},em(window,"load",i))}).o(function(a){throw Hn(window,"load",i),a})}function bD(){return cm(void 0)?uh().then(function(){return new Re(function(i,a){var l=f.document,d=setTimeout(function(){a(Error("Cordova framework is not ready."))},1e3);l.addEventListener("deviceready",function(){clearTimeout(d),i()},!1)})}):ut(Error("Cordova must run in an Android or iOS file scheme."))}function cm(i){return i=i||Qt(),!(Xs()!=="file:"&&Xs()!=="ionic:"||!i.toLowerCase().match(/iphone|ipad|ipod|android/))}function hm(){var i=f.window;try{return!(!i||i==i.top)}catch{return!1}}function Ir(){return typeof f.WorkerGlobalScope<"u"&&typeof f.importScripts=="function"}function Hr(){return de.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":de.INTERNAL.hasOwnProperty("node")?"Node":Ir()?"Worker":"Browser"}function jb(){var i=Hr();return i==="ReactNative"||i==="Node"}function SD(){for(var i=50,a=[];0<i;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),i--;return a.join("")}var fm="Firefox",kb="Chrome";function Ys(i){var a=i.toLowerCase();if(je(a,"opera/")||je(a,"opr/")||je(a,"opios/"))return"Opera";if(je(a,"iemobile"))return"IEMobile";if(je(a,"msie")||je(a,"trident/"))return"IE";if(je(a,"edge/"))return"Edge";if(je(a,"firefox/"))return fm;if(je(a,"silk/"))return"Silk";if(je(a,"blackberry"))return"Blackberry";if(je(a,"webos"))return"Webos";if(!je(a,"safari/")||je(a,"chrome/")||je(a,"crios/")||je(a,"android"))if(!je(a,"chrome/")&&!je(a,"crios/")||je(a,"edge/")){if(je(a,"android"))return"Android";if((i=i.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&i.length==2)return i[1]}else return kb;else return"Safari";return"Other"}var Cb={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Qs(i,a){a=a||[];var l=[],d={},g;for(g in Cb)d[Cb[g]]=!0;for(g=0;g<a.length;g++)typeof d[a[g]]<"u"&&(delete d[a[g]],l.push(a[g]));return l.sort(),a=l,a.length||(a=["FirebaseCore-web"]),l=Hr(),l==="Browser"?(d=Qt(),l=Ys(d)):l==="Worker"&&(d=Qt(),l=Ys(d)+"-"+l),l+"/JsCore/"+i+"/"+a.join(",")}function Qt(){return f.navigator&&f.navigator.userAgent||""}function lt(i,a){i=i.split("."),a=a||f;for(var l=0;l<i.length&&typeof a=="object"&&a!=null;l++)a=a[i[l]];return l!=i.length&&(a=void 0),a}function dm(){try{var i=f.localStorage,a=Uo();if(i)return i.setItem(a,"1"),i.removeItem(a),lm()?!!f.indexedDB:!0}catch{return Ir()&&!!f.indexedDB}return!1}function Fo(){return(lh()||Xs()==="chrome-extension:"||cm())&&!jb()&&dm()&&!Ir()}function lh(){return Xs()==="http:"||Xs()==="https:"}function Xs(){return f.location&&f.location.protocol||null}function Ou(i){return i=i||Qt(),!(Ib(i)||Ys(i)==fm)}function Lu(i){return typeof i>"u"?null:bb(i)}function Ab(i){var a={},l;for(l in i)i.hasOwnProperty(l)&&i[l]!==null&&i[l]!==void 0&&(a[l]=i[l]);return a}function Js(i){if(i!==null)return JSON.parse(i)}function Uo(i){return i||Math.floor(1e9*Math.random()).toString()}function Db(i){return i=i||Qt(),!(Ys(i)=="Safari"||i.toLowerCase().match(/iphone|ipad|ipod/))}function Rb(){var i=f.___jsl;if(i&&i.H){for(var a in i.H)if(i.H[a].r=i.H[a].r||[],i.H[a].L=i.H[a].L||[],i.H[a].r=i.H[a].L.concat(),i.CP)for(var l=0;l<i.CP.length;l++)i.CP[l]=null}}function Vi(i,a){if(i>a)throw Error("Short delay should be less than long delay!");this.a=i,this.c=a,i=Qt(),a=Hr(),this.b=Ib(i)||a==="ReactNative"}Vi.prototype.get=function(){var i=f.navigator;return!(i&&typeof i.onLine=="boolean"&&(lh()||Xs()==="chrome-extension:"||typeof i.connection<"u"))||i.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function pm(){var i=f.document;return i&&typeof i.visibilityState<"u"?i.visibilityState=="visible":!0}function _D(){var i=f.document,a=null;return pm()||!i?ge():new Re(function(l){a=function(){pm()&&(i.removeEventListener("visibilitychange",a,!1),l())},i.addEventListener("visibilitychange",a,!1)}).o(function(l){throw i.removeEventListener("visibilitychange",a,!1),l})}function Pu(i){try{var a=new Date(parseInt(i,10));if(!isNaN(a.getTime())&&!/[^0-9]/.test(i))return a.toUTCString()}catch{}return null}function Mb(){return!(!lt("fireauth.oauthhelper",f)&&!lt("fireauth.iframe",f))}function ND(){var i=f.navigator;return i&&i.serviceWorker&&i.serviceWorker.controller||null}function ED(){var i=f.navigator;return i&&i.serviceWorker?ge().then(function(){return i.serviceWorker.ready}).then(function(a){return a.active||null}).o(function(){return null}):ge(null)}var Ob={};function mm(i){Ob[i]||(Ob[i]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(i))}var gm;try{var vm={};Object.defineProperty(vm,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(vm,"abcd",{configurable:!0,enumerable:!0,value:2}),gm=vm.abcd==2}catch{gm=!1}function fe(i,a,l){gm?Object.defineProperty(i,a,{configurable:!0,enumerable:!0,value:l}):i[a]=l}function Sn(i,a){if(a)for(var l in a)a.hasOwnProperty(l)&&fe(i,l,a[l])}function Gr(i){var a={};return Sn(a,i),a}function ID(i){var a={},l;for(l in i)i.hasOwnProperty(l)&&(a[l]=i[l]);return a}function TD(i,a){if(!a||!a.length)return!0;if(!i)return!1;for(var l=0;l<a.length;l++){var d=i[a[l]];if(d==null||d==="")return!1}return!0}function ym(i){var a=i;if(typeof i=="object"&&i!=null){a="length"in i?[]:{};for(var l in i)fe(a,l,ym(i[l]))}return a}function wm(i){var a=i&&(i[_m]?"phone":null);if(a&&i&&i[Sm]){fe(this,"uid",i[Sm]),fe(this,"displayName",i[Lb]||null);var l=null;i[bm]&&(l=new Date(i[bm]).toUTCString()),fe(this,"enrollmentTime",l),fe(this,"factorId",a)}else throw new T("internal-error","Internal assert: invalid MultiFactorInfo object")}wm.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function xm(i){try{var a=new Fu(i)}catch{a=null}return a}var Lb="displayName",bm="enrolledAt",Sm="mfaEnrollmentId",_m="phoneInfo";function Fu(i){wm.call(this,i),fe(this,"phoneNumber",i[_m])}k(Fu,wm),Fu.prototype.w=function(){var i=Fu.bb.w.call(this);return i.phoneNumber=this.phoneNumber,i};function jD(i){var a={},l=i[kD],d=i[AD],g=i[DD];if(i=xm(i[CD]),!g||g!=ch&&g!=Uu&&!l||g==Uu&&!d||g==Nm&&!i)throw Error("Invalid checkActionCode response!");g==Uu?(a[Fb]=l||null,a[Ub]=l||null,a[Pb]=d):(a[Fb]=d||null,a[Ub]=d||null,a[Pb]=l||null),a[RD]=i||null,fe(this,OD,g),fe(this,MD,ym(a))}var Nm="REVERT_SECOND_FACTOR_ADDITION",ch="EMAIL_SIGNIN",Uu="VERIFY_AND_CHANGE_EMAIL",kD="email",CD="mfaInfo",AD="newEmail",DD="requestType",Pb="email",Fb="fromEmail",RD="multiFactorInfo",Ub="previousEmail",MD="data",OD="operation";function Em(i){i=Mn(i);var a=fr(i,$b)||null,l=fr(i,Vb)||null,d=fr(i,Bb)||null;if(d=d&&UD[d]||null,!a||!l||!d)throw new T("argument-error",$b+", "+Vb+"and "+Bb+" are required in a valid action code URL.");Sn(this,{apiKey:a,operation:d,code:l,continueUrl:fr(i,LD)||null,languageCode:fr(i,PD)||null,tenantId:fr(i,FD)||null})}var $b="apiKey",Vb="oobCode",LD="continueUrl",PD="languageCode",Bb="mode",FD="tenantId",UD={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Nm,signIn:ch,verifyAndChangeEmail:Uu,verifyEmail:"VERIFY_EMAIL"};function zb(i){try{return new Em(i)}catch{return null}}function hh(i){var a=i[$D];if(typeof a>"u")throw new T("missing-continue-uri");if(typeof a!="string"||typeof a=="string"&&!a.length)throw new T("invalid-continue-uri");this.h=a,this.b=this.a=null,this.g=!1;var l=i[qb];if(l&&typeof l=="object"){a=l[Yb];var d=l[Gb];if(l=l[Wb],typeof a=="string"&&a.length){if(this.a=a,typeof d<"u"&&typeof d!="boolean")throw new T("argument-error",Gb+" property must be a boolean when specified.");if(this.g=!!d,typeof l<"u"&&(typeof l!="string"||typeof l=="string"&&!l.length))throw new T("argument-error",Wb+" property must be a non empty string when specified.");this.b=l||null}else{if(typeof a<"u")throw new T("argument-error",Yb+" property must be a non empty string when specified.");if(typeof d<"u"||typeof l<"u")throw new T("missing-android-pkg-name")}}else if(typeof l<"u")throw new T("argument-error",qb+" property must be a non null object when specified.");if(this.f=null,(a=i[Hb])&&typeof a=="object"){if(a=a[Qb],typeof a=="string"&&a.length)this.f=a;else if(typeof a<"u")throw new T("argument-error",Qb+" property must be a non empty string when specified.")}else if(typeof a<"u")throw new T("argument-error",Hb+" property must be a non null object when specified.");if(a=i[Im],typeof a<"u"&&typeof a!="boolean")throw new T("argument-error",Im+" property must be a boolean when specified.");if(this.c=!!a,i=i[Kb],typeof i<"u"&&(typeof i!="string"||typeof i=="string"&&!i.length))throw new T("argument-error",Kb+" property must be a non empty string when specified.");this.i=i||null}var qb="android",Kb="dynamicLinkDomain",Im="handleCodeInApp",Hb="iOS",$D="url",Gb="installApp",Wb="minimumVersion",Yb="packageName",Qb="bundleId";function fh(i){var a={};a.continueUrl=i.h,a.canHandleCodeInApp=i.c,(a.androidPackageName=i.a)&&(a.androidMinimumVersion=i.b,a.androidInstallApp=i.g),a.iOSBundleId=i.f,a.dynamicLinkDomain=i.i;for(var l in a)a[l]===null&&delete a[l];return a}function VD(i){return Te(i,function(a){return a=a.toString(16),1<a.length?a:"0"+a}).join("")}var $u=null;function BD(i){var a=[];return zD(i,function(l){a.push(l)}),a}function zD(i,a){function l($){for(;d<i.length;){var G=i.charAt(d++),Ee=$u[G];if(Ee!=null)return Ee;if(!/^[\s\xa0]*$/.test(G))throw Error("Unknown base64 encoding at char: "+G)}return $}qD();for(var d=0;;){var g=l(-1),b=l(0),I=l(64),D=l(64);if(D===64&&g===-1)break;a(g<<2|b>>4),I!=64&&(a(b<<4&240|I>>2),D!=64&&a(I<<6&192|D))}}function qD(){if(!$u){$u={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],l=0;5>l;l++)for(var d=i.concat(a[l].split("")),g=0;g<d.length;g++){var b=d[g];$u[b]===void 0&&($u[b]=g)}}}function dh(i){var a=Xb(i);if(!(a&&a.sub&&a.iss&&a.aud&&a.exp))throw Error("Invalid JWT");this.h=i,this.a=a.exp,this.i=a.sub,i=Date.now()/1e3,this.g=a.iat||(i>this.a?this.a:i),this.b=a.provider_id||a.firebase&&a.firebase.sign_in_provider||null,this.f=a.firebase&&a.firebase.tenant||null,this.c=!!a.is_anonymous||this.b=="anonymous"}dh.prototype.T=function(){return this.f},dh.prototype.l=function(){return this.c},dh.prototype.toString=function(){return this.h};function ph(i){try{return new dh(i)}catch{return null}}function Xb(i){if(!i||(i=i.split("."),i.length!=3))return null;i=i[1];for(var a=(4-i.length%4)%4,l=0;l<a;l++)i+=".";try{var d=BD(i);for(i=[],l=a=0;a<d.length;){var g=d[a++];if(128>g)i[l++]=String.fromCharCode(g);else if(191<g&&224>g){var b=d[a++];i[l++]=String.fromCharCode((g&31)<<6|b&63)}else if(239<g&&365>g){b=d[a++];var I=d[a++],D=d[a++],$=((g&7)<<18|(b&63)<<12|(I&63)<<6|D&63)-65536;i[l++]=String.fromCharCode(55296+($>>10)),i[l++]=String.fromCharCode(56320+($&1023))}else b=d[a++],I=d[a++],i[l++]=String.fromCharCode((g&15)<<12|(b&63)<<6|I&63)}return JSON.parse(i.join(""))}catch{}return null}var Jb="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),mh=["client_id","response_type","scope","redirect_uri","state"],Tm={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:mh},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:mh},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:mh},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Jb},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function jm(i){for(var a in Tm)if(Tm[a].fa==i)return Tm[a];return null}function Zb(i){var a={};a["facebook.com"]=tS,a["google.com"]=rS,a["github.com"]=nS,a["twitter.com"]=iS;var l=i&&i[eS];try{if(l)return a[l]?new a[l](i):new Wr(i);if(typeof i[km]<"u")return new Cm(i)}catch{}return null}var km="idToken",eS="providerId";function Cm(i){var a=i[eS];if(!a&&i[km]){var l=ph(i[km]);l&&l.b&&(a=l.b)}if(!a)throw Error("Invalid additional user info!");(a=="anonymous"||a=="custom")&&(a=null),l=!1,typeof i.isNewUser<"u"?l=!!i.isNewUser:i.kind==="identitytoolkit#SignupNewUserResponse"&&(l=!0),fe(this,"providerId",a),fe(this,"isNewUser",l)}function Wr(i){Cm.call(this,i),i=Js(i.rawUserInfo||"{}"),fe(this,"profile",ym(i||{}))}k(Wr,Cm);function tS(i){if(Wr.call(this,i),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}k(tS,Wr);function nS(i){if(Wr.call(this,i),this.providerId!="github.com")throw Error("Invalid provider ID!");fe(this,"username",this.profile&&this.profile.login||null)}k(nS,Wr);function rS(i){if(Wr.call(this,i),this.providerId!="google.com")throw Error("Invalid provider ID!")}k(rS,Wr);function iS(i){if(Wr.call(this,i),this.providerId!="twitter.com")throw Error("Invalid provider ID!");fe(this,"username",i.screenName||null)}k(iS,Wr);function oS(i){var a=Mn(i),l=fr(a,"link"),d=fr(Mn(l),"link");return a=fr(a,"deep_link_id"),fr(Mn(a),"link")||a||d||l||i}function gh(i,a){if(!i&&!a)throw new T("internal-error","Internal assert: no raw session string available");if(i&&a)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=i||null,this.b=a||null,this.type=this.a?Vu:vh}var Vu="enroll",vh="signin";gh.prototype.Ha=function(){return this.a?ge(this.a):ge(this.b)},gh.prototype.w=function(){return this.type==Vu?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function Zs(){}Zs.prototype.ka=function(){},Zs.prototype.b=function(){},Zs.prototype.c=function(){},Zs.prototype.w=function(){};function ea(i,a){return i.then(function(l){if(l[kr]){var d=ph(l[kr]);if(!d||a!=d.i)throw new T("user-mismatch");return l}throw new T("user-mismatch")}).o(function(l){throw l&&l.code&&l.code==F+"user-not-found"?new T("user-mismatch"):l})}function $o(i,a){if(a)this.a=a;else throw new T("internal-error","failed to construct a credential");fe(this,"providerId",i),fe(this,"signInMethod",i)}$o.prototype.ka=function(i){return eg(i,Am(this))},$o.prototype.b=function(i,a){var l=Am(this);return l.idToken=a,tg(i,l)},$o.prototype.c=function(i,a){return ea(ng(i,Am(this)),a)};function Am(i){return{pendingToken:i.a,requestUri:"http://localhost"}}$o.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function KD(i){if(i&&i.providerId&&i.signInMethod&&i.providerId.indexOf("saml.")==0&&i.pendingToken)try{return new $o(i.providerId,i.pendingToken)}catch{}return null}function di(i,a,l){if(this.a=null,a.idToken||a.accessToken)a.idToken&&fe(this,"idToken",a.idToken),a.accessToken&&fe(this,"accessToken",a.accessToken),a.nonce&&!a.pendingToken&&fe(this,"nonce",a.nonce),a.pendingToken&&(this.a=a.pendingToken);else if(a.oauthToken&&a.oauthTokenSecret)fe(this,"accessToken",a.oauthToken),fe(this,"secret",a.oauthTokenSecret);else throw new T("internal-error","failed to construct a credential");fe(this,"providerId",i),fe(this,"signInMethod",l)}di.prototype.ka=function(i){return eg(i,Dm(this))},di.prototype.b=function(i,a){var l=Dm(this);return l.idToken=a,tg(i,l)},di.prototype.c=function(i,a){var l=Dm(this);return ea(ng(i,l),a)};function Dm(i){var a={};return i.idToken&&(a.id_token=i.idToken),i.accessToken&&(a.access_token=i.accessToken),i.secret&&(a.oauth_token_secret=i.secret),a.providerId=i.providerId,i.nonce&&!i.a&&(a.nonce=i.nonce),a={postBody:yb(a).toString(),requestUri:"http://localhost"},i.a&&(delete a.postBody,a.pendingToken=i.a),a}di.prototype.w=function(){var i={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(i.oauthIdToken=this.idToken),this.accessToken&&(i.oauthAccessToken=this.accessToken),this.secret&&(i.oauthTokenSecret=this.secret),this.nonce&&(i.nonce=this.nonce),this.a&&(i.pendingToken=this.a),i};function HD(i){if(i&&i.providerId&&i.signInMethod){var a={idToken:i.oauthIdToken,accessToken:i.oauthTokenSecret?null:i.oauthAccessToken,oauthTokenSecret:i.oauthTokenSecret,oauthToken:i.oauthTokenSecret&&i.oauthAccessToken,nonce:i.nonce,pendingToken:i.pendingToken};try{return new di(i.providerId,a,i.signInMethod)}catch{}}return null}function Vo(i,a){this.Qc=a||[],Sn(this,{providerId:i,isOAuthProvider:!0}),this.Jb={},this.qb=(jm(i)||{}).Ja||null,this.pb=null}Vo.prototype.Ka=function(i){return this.Jb=qr(i),this};function sS(i){if(typeof i!="string"||i.indexOf("saml.")!=0)throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');Vo.call(this,i,[])}k(sS,Vo);function Gn(i){Vo.call(this,i,mh),this.a=[]}k(Gn,Vo),Gn.prototype.Ca=function(i){return Ce(this.a,i)||this.a.push(i),this},Gn.prototype.Rb=function(){return dt(this.a)},Gn.prototype.credential=function(i,a){var l;if(C(i)?l={idToken:i.idToken||null,accessToken:i.accessToken||null,nonce:i.rawNonce||null}:l={idToken:i||null,accessToken:a||null},!l.idToken&&!l.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new di(this.providerId,l,this.providerId)};function Bo(){Gn.call(this,"facebook.com")}k(Bo,Gn),fe(Bo,"PROVIDER_ID","facebook.com"),fe(Bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function aS(i){if(!i)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=i;return C(i)&&(a=i.accessToken),new Bo().credential({accessToken:a})}function zo(){Gn.call(this,"github.com")}k(zo,Gn),fe(zo,"PROVIDER_ID","github.com"),fe(zo,"GITHUB_SIGN_IN_METHOD","github.com");function uS(i){if(!i)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=i;return C(i)&&(a=i.accessToken),new zo().credential({accessToken:a})}function qo(){Gn.call(this,"google.com"),this.Ca("profile")}k(qo,Gn),fe(qo,"PROVIDER_ID","google.com"),fe(qo,"GOOGLE_SIGN_IN_METHOD","google.com");function lS(i,a){var l=i;return C(i)&&(l=i.idToken,a=i.accessToken),new qo().credential({idToken:l,accessToken:a})}function ta(){Vo.call(this,"twitter.com",Jb)}k(ta,Vo),fe(ta,"PROVIDER_ID","twitter.com"),fe(ta,"TWITTER_SIGN_IN_METHOD","twitter.com");function cS(i,a){var l=i;if(C(l)||(l={oauthToken:i,oauthTokenSecret:a}),!l.oauthToken||!l.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new di("twitter.com",l,"twitter.com")}function Bi(i,a,l){this.a=i,this.f=a,fe(this,"providerId","password"),fe(this,"signInMethod",l===dr.EMAIL_LINK_SIGN_IN_METHOD?dr.EMAIL_LINK_SIGN_IN_METHOD:dr.EMAIL_PASSWORD_SIGN_IN_METHOD)}Bi.prototype.ka=function(i){return this.signInMethod==dr.EMAIL_LINK_SIGN_IN_METHOD?Le(i,CR,{email:this.a,oobCode:this.f}):Le(i,FS,{email:this.a,password:this.f})},Bi.prototype.b=function(i,a){return this.signInMethod==dr.EMAIL_LINK_SIGN_IN_METHOD?Le(i,AR,{idToken:a,email:this.a,oobCode:this.f}):Le(i,PS,{idToken:a,email:this.a,password:this.f})},Bi.prototype.c=function(i,a){return ea(this.ka(i),a)},Bi.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function GD(i){return i&&i.email&&i.password?new Bi(i.email,i.password,i.signInMethod):null}function dr(){Sn(this,{providerId:"password",isOAuthProvider:!1})}function hS(i,a){if(a=Rm(a),!a)throw new T("argument-error","Invalid email link!");return new Bi(i,a.code,dr.EMAIL_LINK_SIGN_IN_METHOD)}function Rm(i){return i=oS(i),(i=zb(i))&&i.operation===ch?i:null}Sn(dr,{PROVIDER_ID:"password"}),Sn(dr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Sn(dr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function zi(i){if(!(i.fb&&i.eb||i.La&&i.ea))throw new T("internal-error");this.a=i,fe(this,"providerId","phone"),this.fa="phone",fe(this,"signInMethod","phone")}zi.prototype.ka=function(i){return i.gb(Bu(this))},zi.prototype.b=function(i,a){var l=Bu(this);return l.idToken=a,Le(i,XR,l)},zi.prototype.c=function(i,a){var l=Bu(this);return l.operation="REAUTH",i=Le(i,JR,l),ea(i,a)},zi.prototype.w=function(){var i={providerId:"phone"};return this.a.fb&&(i.verificationId=this.a.fb),this.a.eb&&(i.verificationCode=this.a.eb),this.a.La&&(i.temporaryProof=this.a.La),this.a.ea&&(i.phoneNumber=this.a.ea),i};function WD(i){if(i&&i.providerId==="phone"&&(i.verificationId&&i.verificationCode||i.temporaryProof&&i.phoneNumber)){var a={};return xe(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(l){i[l]&&(a[l]=i[l])}),new zi(a)}return null}function Bu(i){return i.a.La&&i.a.ea?{temporaryProof:i.a.La,phoneNumber:i.a.ea}:{sessionInfo:i.a.fb,code:i.a.eb}}function pi(i){try{this.a=i||de.auth()}catch{throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Sn(this,{providerId:"phone",isOAuthProvider:!1})}pi.prototype.gb=function(i,a){var l=this.a.a;return ge(a.verify()).then(function(d){if(typeof d!="string")throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(a.type){case"recaptcha":var g=C(i)?i.session:null,b=C(i)?i.phoneNumber:i,I;return g&&g.type==Vu?I=g.Ha().then(function(D){return bR(l,{idToken:D,phoneEnrollmentInfo:{phoneNumber:b,recaptchaToken:d}})}):g&&g.type==vh?I=g.Ha().then(function(D){return SR(l,{mfaPendingCredential:D,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:d}})}):I=xR(l,{phoneNumber:b,recaptchaToken:d}),I.then(function(D){return typeof a.reset=="function"&&a.reset(),D},function(D){throw typeof a.reset=="function"&&a.reset(),D});default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function fS(i,a){if(!i)throw new T("missing-verification-id");if(!a)throw new T("missing-verification-code");return new zi({fb:i,eb:a})}Sn(pi,{PROVIDER_ID:"phone"}),Sn(pi,{PHONE_SIGN_IN_METHOD:"phone"});function Mm(i){if(i.temporaryProof&&i.phoneNumber)return new zi({La:i.temporaryProof,ea:i.phoneNumber});var a=i&&i.providerId;if(!a||a==="password")return null;var l=i&&i.oauthAccessToken,d=i&&i.oauthTokenSecret,g=i&&i.nonce,b=i&&i.oauthIdToken,I=i&&i.pendingToken;try{switch(a){case"google.com":return lS(b,l);case"facebook.com":return aS(l);case"github.com":return uS(l);case"twitter.com":return cS(l,d);default:return l||d||b||I?I?a.indexOf("saml.")==0?new $o(a,I):new di(a,{pendingToken:I,idToken:i.oauthIdToken,accessToken:i.oauthAccessToken},a):new Gn(a).credential({idToken:b,accessToken:l,rawNonce:g}):null}}catch{return null}}function Om(i){if(!i.isOAuthProvider)throw new T("invalid-oauth-provider")}function Tr(i,a,l,d,g,b,I){if(this.c=i,this.b=a||null,this.g=l||null,this.f=d||null,this.i=b||null,this.h=I||null,this.a=g||null,this.g||this.a){if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}else throw new T("invalid-auth-event")}Tr.prototype.getUid=function(){var i=[];return i.push(this.c),this.b&&i.push(this.b),this.f&&i.push(this.f),this.h&&i.push(this.h),i.join("-")},Tr.prototype.T=function(){return this.h},Tr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function dS(i){return i=i||{},i.type?new Tr(i.type,i.eventId,i.urlResponse,i.sessionId,i.error&&L(i.error),i.postBody,i.tenantId):null}function YD(){this.b=null,this.a=[]}var Lm=null;function QD(i){var a=Lm;a.a.push(i),a.b||(a.b=function(l){for(var d=0;d<a.a.length;d++)a.a[d](l)},i=lt("universalLinks.subscribe",f),typeof i=="function"&&i(null,a.b))}function Pm(i){var a="unauthorized-domain",l=void 0,d=Mn(i);i=d.a,d=d.c,d=="chrome-extension"?l=Px("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",i):d=="http"||d=="https"?l=Px("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",i):a="operation-not-supported-in-this-environment",T.call(this,a,l)}k(Pm,T);function zu(i,a,l){T.call(this,i,l),i=a||{},i.Kb&&fe(this,"email",i.Kb),i.ea&&fe(this,"phoneNumber",i.ea),i.credential&&fe(this,"credential",i.credential),i.$b&&fe(this,"tenantId",i.$b)}k(zu,T),zu.prototype.w=function(){var i={code:this.code,message:this.message};this.email&&(i.email=this.email),this.phoneNumber&&(i.phoneNumber=this.phoneNumber),this.tenantId&&(i.tenantId=this.tenantId);var a=this.credential&&this.credential.w();return a&&Yt(i,a),i},zu.prototype.toJSON=function(){return this.w()};function yh(i){if(i.code){var a=i.code||"";a.indexOf(F)==0&&(a=a.substring(F.length));var l={credential:Mm(i),$b:i.tenantId};if(i.email)l.Kb=i.email;else if(i.phoneNumber)l.ea=i.phoneNumber;else if(!l.credential)return new T(a,i.message||void 0);return new zu(a,l,i.message)}return null}function qu(){}qu.prototype.c=null;function pS(i){return i.c||(i.c=i.b())}var Fm;function wh(){}k(wh,qu),wh.prototype.a=function(){var i=mS(this);return i?new ActiveXObject(i):new XMLHttpRequest},wh.prototype.b=function(){var i={};return mS(this)&&(i[0]=!0,i[1]=!0),i};function mS(i){if(!i.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],l=0;l<a.length;l++){var d=a[l];try{return new ActiveXObject(d),i.f=d}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return i.f}Fm=new wh;function xh(){}k(xh,qu),xh.prototype.a=function(){var i=new XMLHttpRequest;if("withCredentials"in i)return i;if(typeof XDomainRequest<"u")return new gS;throw Error("Unsupported browser")},xh.prototype.b=function(){return{}};function gS(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=x(this.qc,this),this.a.onerror=x(this.Tb,this),this.a.onprogress=x(this.rc,this),this.a.ontimeout=x(this.vc,this)}e=gS.prototype,e.open=function(i,a,l){if(l!=null&&!l)throw Error("Only async requests are supported.");this.a.open(i,a)},e.send=function(i){if(i)if(typeof i=="string")this.a.send(i);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(i){return i.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Um(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Um(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Um(this,1)};function Um(i,a){i.readyState=a,i.onreadystatechange&&i.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function $m(i,a,l){this.reset(i,a,l,void 0,void 0)}$m.prototype.a=null,$m.prototype.reset=function(i,a,l,d,g){delete this.a};function Vm(i){this.f=i,this.b=this.c=this.a=null}function Ku(i,a){this.name=i,this.value=a}Ku.prototype.toString=function(){return this.name};var vS=new Ku("SEVERE",1e3),Bm=new Ku("WARNING",900),XD=new Ku("CONFIG",700),JD=new Ku("FINE",500);function yS(i){return i.c?i.c:i.a?yS(i.a):(V("Root logger has no level set."),null)}Vm.prototype.log=function(i,a,l){if(i.value>=yS(this).value)for(S(a)&&(a=a()),i=new $m(i,String(a),this.f),l&&(i.a=l),l=this;l;)l=l.a};var zm={},bh=null;function qm(i){bh||(bh=new Vm(""),zm[""]=bh,bh.c=XD);var a;if(!(a=zm[i])){a=new Vm(i);var l=i.lastIndexOf("."),d=i.substr(l+1);l=qm(i.substr(0,l)),l.b||(l.b={}),l.b[d]=a,a.a=l,zm[i]=a}return a}function pr(i,a){i&&i.log(JD,a,void 0)}function Sh(i){this.f=i}k(Sh,qu),Sh.prototype.a=function(){return new _h(this.f)},Sh.prototype.b=function(i){return function(){return i}}({});function _h(i){bn.call(this),this.u=i,this.h=void 0,this.readyState=Km,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=qm("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}k(_h,bn);var Km=0;e=_h.prototype,e.open=function(i,a){if(this.readyState!=Km)throw this.abort(),Error("Error reopening a connection");this.s=i,this.f=a,this.readyState=1,Gu(this)},e.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var a={headers:this.l,method:this.s,credentials:this.h,cache:void 0};i&&(a.body=i),this.u.fetch(new Request(this.f,a)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,Hu(this)),this.readyState=Km},e.uc=function(i){this.a&&(this.g=i,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=i.headers,this.readyState=2,Gu(this)),this.a&&(this.readyState=3,Gu(this),this.a&&(this.responseType==="arraybuffer"?i.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof f.ReadableStream<"u"&&"body"in i?(this.response=this.responseText="",this.c=i.body.getReader(),this.m=new TextDecoder,wS(this)):i.text().then(this.tc.bind(this),this.Va.bind(this)))))};function wS(i){i.c.read().then(i.pc.bind(i)).catch(i.Va.bind(i))}e.pc=function(i){if(this.a){var a=this.m.decode(i.value?i.value:new Uint8Array(0),{stream:!i.done});a&&(this.response=this.responseText+=a),i.done?Hu(this):Gu(this),this.readyState==3&&wS(this)}},e.tc=function(i){this.a&&(this.response=this.responseText=i,Hu(this))},e.sc=function(i){this.a&&(this.response=i,Hu(this))},e.Va=function(i){var a=this.i;a&&a.log(Bm,"Failed to fetch url "+this.f,i instanceof Error?i:Error(i)),this.a&&Hu(this)};function Hu(i){i.readyState=4,i.g=null,i.c=null,i.m=null,Gu(i)}e.setRequestHeader=function(i,a){this.l.append(i,a)},e.getResponseHeader=function(i){return this.b?this.b.get(i.toLowerCase())||"":((i=this.i)&&i.log(Bm,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var i=this.i;return i&&i.log(Bm,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}i=[];for(var a=this.b.entries(),l=a.next();!l.done;)l=l.value,i.push(l[0]+": "+l[1]),l=a.next();return i.join(`\r
`)};function Gu(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(_h.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(i){this.h=i?"include":"same-origin"}});function Wu(i){bn.call(this),this.headers=new Gs,this.D=i||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=xS,this.u=this.S=!1}k(Wu,bn);var xS="";Wu.prototype.b=qm("goog.net.XhrIo");var ZD=/^https?$/i,eR=["POST","PUT"];function tR(i,a,l,d,g){if(i.a)throw Error("[goog.net.XhrIo] Object is active with another request="+i.l+"; newUri="+a);l=l?l.toUpperCase():"GET",i.l=a,i.h="",i.P=l,i.J=!1,i.c=!0,i.a=i.D?i.D.a():Fm.a(),i.C=i.D?pS(i.D):pS(Fm),i.a.onreadystatechange=x(i.Wb,i);try{pr(i.b,mi(i,"Opening Xhr")),i.N=!0,i.a.open(l,String(a),!0),i.N=!1}catch(I){pr(i.b,mi(i,"Error opening Xhr: "+I.message)),bS(i,I);return}a=d||"";var b=new Gs(i.headers);g&&aD(g,function(I,D){b.set(D,I)}),g=ft(b.Y()),d=f.FormData&&a instanceof f.FormData,!Ce(eR,l)||g||d||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),b.forEach(function(I,D){this.a.setRequestHeader(D,I)},i),i.m&&(i.a.responseType=i.m),"withCredentials"in i.a&&i.a.withCredentials!==i.S&&(i.a.withCredentials=i.S);try{NS(i),0<i.g&&(i.u=nR(i.a),pr(i.b,mi(i,"Will abort after "+i.g+"ms if incomplete, xhr2 "+i.u)),i.u?(i.a.timeout=i.g,i.a.ontimeout=x(i.Ma,i)):i.s=im(i.Ma,i.g,i)),pr(i.b,mi(i,"Sending request")),i.i=!0,i.a.send(a),i.i=!1}catch(I){pr(i.b,mi(i,"Send error: "+I.message)),bS(i,I)}}function nR(i){return Er&&Vx(9)&&typeof i.timeout=="number"&&i.ontimeout!==void 0}function rR(i){return i.toLowerCase()=="content-type"}e=Wu.prototype,e.Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",pr(this.b,mi(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function bS(i,a){i.c=!1,i.a&&(i.f=!0,i.a.abort(),i.f=!1),i.h=a,SS(i),Nh(i)}function SS(i){i.J||(i.J=!0,i.dispatchEvent("complete"),i.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(pr(this.b,mi(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Nh(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Nh(this,!0)),Wu.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?_S(this):this.Jc())},e.Jc=function(){_S(this)};function _S(i){if(i.c&&typeof c<"u"){if(i.C[1]&&Yu(i)==4&&Eh(i)==2)pr(i.b,mi(i,"Local request error detected and ignored"));else if(i.i&&Yu(i)==4)im(i.Wb,0,i);else if(i.dispatchEvent("readystatechange"),Yu(i)==4){pr(i.b,mi(i,"Request complete")),i.c=!1;try{var a=Eh(i);e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var g;if(g=a===0){var b=String(i.l).match(gb)[1]||null;if(!b&&f.self&&f.self.location){var I=f.self.location.protocol;b=I.substr(0,I.length-1)}g=!ZD.test(b?b.toLowerCase():"")}d=g}if(d)i.dispatchEvent("complete"),i.dispatchEvent("success");else{try{var D=2<Yu(i)?i.a.statusText:""}catch($){pr(i.b,"Can not get status: "+$.message),D=""}i.h=D+" ["+Eh(i)+"]",SS(i)}}finally{Nh(i)}}}}function Nh(i,a){if(i.a){NS(i);var l=i.a,d=i.C[0]?y:null;i.a=null,i.C=null,a||i.dispatchEvent("ready");try{l.onreadystatechange=d}catch(g){(i=i.b)&&i.log(vS,"Problem encountered resetting onreadystatechange: "+g.message,void 0)}}}function NS(i){i.a&&i.u&&(i.a.ontimeout=null),i.s&&(f.clearTimeout(i.s),i.s=null)}function Yu(i){return i.a?i.a.readyState:0}function Eh(i){try{return 2<Yu(i)?i.a.status:-1}catch{return-1}}function iR(i){try{return i.a?i.a.responseText:""}catch(a){return pr(i.b,"Can not get responseText: "+a.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case xS:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var i=this.b;return i&&i.log(vS,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(a){return pr(this.b,"Can not get response: "+a.message),null}};function mi(i,a){return a+" ["+i.P+" "+i.l+" "+Eh(i)+"]"}function Ko(i){var a=aR;this.g=[],this.u=a,this.s=i||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}Ko.prototype.cancel=function(i){if(this.a)this.c instanceof Ko&&this.c.cancel();else{if(this.b){var a=this.b;delete this.b,i?a.cancel(i):(a.l--,0>=a.l&&a.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(i=new Xu,Ih(this),Qu(this,!1,i))}},Ko.prototype.m=function(i,a){this.i=!1,Qu(this,i,a)};function Qu(i,a,l){i.a=!0,i.c=l,i.f=!a,IS(i)}function Ih(i){if(i.a){if(!i.v)throw new Th;i.v=!1}}function oR(i,a){Hm(i,null,a,void 0)}function Hm(i,a,l,d){i.g.push([a,l,d]),i.a&&IS(i)}Ko.prototype.then=function(i,a,l){var d,g,b=new Re(function(I,D){d=I,g=D});return Hm(this,d,function(I){I instanceof Xu?b.cancel():g(I)}),b.then(i,a,l)},Ko.prototype.$goog_Thenable=!0;function ES(i){return Ze(i.g,function(a){return S(a[1])})}function IS(i){if(i.h&&i.a&&ES(i)){var a=i.h,l=jh[a];l&&(f.clearTimeout(l.a),delete jh[a]),i.h=0}i.b&&(i.b.l--,delete i.b),a=i.c;for(var d=l=!1;i.g.length&&!i.i;){var g=i.g.shift(),b=g[0],I=g[1];if(g=g[2],b=i.f?I:b)try{var D=b.call(g||i.s,a);D!==void 0&&(i.f=i.f&&(D==a||D instanceof Error),i.c=a=D),(ee(a)||typeof f.Promise=="function"&&a instanceof f.Promise)&&(d=!0,i.i=!0)}catch($){a=$,i.f=!0,ES(i)||(l=!0)}}i.c=a,d&&(D=x(i.m,i,!0),d=x(i.m,i,!1),a instanceof Ko?(Hm(a,D,d),a.C=!0):a.then(D,d)),l&&(a=new TS(a),jh[a.a]=a,i.h=a.a)}function Th(){H.call(this)}k(Th,H),Th.prototype.message="Deferred has already fired",Th.prototype.name="AlreadyCalledError";function Xu(){H.call(this)}k(Xu,H),Xu.prototype.message="Deferred was canceled",Xu.prototype.name="CanceledError";function TS(i){this.a=f.setTimeout(x(this.c,this),0),this.b=i}TS.prototype.c=function(){throw delete jh[this.a],this.b};var jh={};function Gm(i){var a={},l=a.document||document,d=Nt(i).toString(),g=Zc(document,"SCRIPT"),b={Xb:g,Ma:void 0},I=new Ko(b),D=null,$=a.timeout!=null?a.timeout:5e3;return 0<$&&(D=window.setTimeout(function(){kh(g,!0);var G=new Wm(lR,"Timeout reached for loading script "+d);Ih(I),Qu(I,!1,G)},$),b.Ma=D),g.onload=g.onreadystatechange=function(){g.readyState&&g.readyState!="loaded"&&g.readyState!="complete"||(kh(g,a.xd||!1,D),Ih(I),Qu(I,!0,null))},g.onerror=function(){kh(g,!0,D);var G=new Wm(uR,"Error while loading script "+d);Ih(I),Qu(I,!1,G)},b=a.attributes||{},Yt(b,{type:"text/javascript",charset:"UTF-8"}),zx(g,b),FA(g,i),sR(l).appendChild(g),I}function sR(i){var a;return(a=(i||document).getElementsByTagName("HEAD"))&&a.length!=0?a[0]:i.documentElement}function aR(){if(this&&this.Xb){var i=this.Xb;i&&i.tagName=="SCRIPT"&&kh(i,!0,this.Ma)}}function kh(i,a,l){l!=null&&f.clearTimeout(l),i.onload=y,i.onerror=y,i.onreadystatechange=y,a&&window.setTimeout(function(){i&&i.parentNode&&i.parentNode.removeChild(i)},0)}var uR=0,lR=1;function Wm(i,a){var l="Jsloader error (code #"+i+")";a&&(l+=": "+a),H.call(this,l),this.code=i}k(Wm,H);function Ch(i){this.f=i}k(Ch,qu),Ch.prototype.a=function(){return new this.f},Ch.prototype.b=function(){return{}};function jr(i,a,l){if(this.c=i,i=a||{},this.l=i.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=i.secureTokenTimeout||cR,this.g=qr(i.secureTokenHeaders||hR),this.h=i.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=i.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=i.firebaseTimeout||fR,this.a=qr(i.firebaseHeaders||dR),l&&(this.a["X-Client-Version"]=l,this.g["X-Client-Version"]=l),l=Hr()=="Node",l=f.XMLHttpRequest||l&&de.INTERNAL.node&&de.INTERNAL.node.XMLHttpRequest,!l&&!Ir())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ir()?this.f=new Sh(self):jb()?this.f=new Ch(l):this.f=new xh,this.b=null}var Ym,kr="idToken",cR=new Vi(3e4,6e4),hR={"Content-Type":"application/x-www-form-urlencoded"},fR=new Vi(3e4,6e4),dR={"Content-Type":"application/json"};function jS(i,a){a?i.a["X-Firebase-Locale"]=a:delete i.a["X-Firebase-Locale"]}function Ah(i,a){a&&(i.l=Qm("https://securetoken.googleapis.com/v1/token",a),i.h=Qm("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",a),i.i=Qm("https://identitytoolkit.googleapis.com/v2/",a))}function Qm(i,a){return i=Mn(i),a=Mn(a.url),i.f=i.a+i.f,Cu(i,a.c),i.a=a.a,Au(i,a.g),i.toString()}function kS(i,a){a?(i.a["X-Client-Version"]=a,i.g["X-Client-Version"]=a):(delete i.a["X-Client-Version"],delete i.g["X-Client-Version"])}jr.prototype.T=function(){return this.b};function CS(i,a,l,d,g,b,I){vD()||Ir()?i=x(i.u,i):(Ym||(Ym=new Re(function(D,$){mR(D,$)})),i=x(i.s,i)),i(a,l,d,g,b,I)}jr.prototype.u=function(i,a,l,d,g,b){if(Ir()&&(typeof f.fetch>"u"||typeof f.Headers>"u"||typeof f.Request>"u"))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var I=new Wu(this.f);if(b){I.g=Math.max(0,b);var D=setTimeout(function(){I.dispatchEvent("timeout")},b)}db(I,"complete",function(){D&&clearTimeout(D);var $=null;try{$=JSON.parse(iR(this))||null}catch{$=null}a&&a($)}),rm(I,"ready",function(){D&&clearTimeout(D),sb(this)}),rm(I,"timeout",function(){D&&clearTimeout(D),sb(this),a&&a(null)}),tR(I,i,l,d,g)};var pR=new se(Ge,"https://apis.google.com/js/client.js?onload=%{onload}"),AS="__fcb"+Math.floor(1e6*Math.random()).toString();function mR(i,a){if(((window.gapi||{}).client||{}).request)i();else{f[AS]=function(){((window.gapi||{}).client||{}).request?i():a(Error("CORS_UNSUPPORTED"))};var l=Et(pR,{onload:AS});oR(Gm(l),function(){a(Error("CORS_UNSUPPORTED"))})}}jr.prototype.s=function(i,a,l,d,g){var b=this;Ym.then(function(){window.gapi.client.setApiKey(b.c);var I=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:i,method:l,body:d,headers:g,authType:"none",callback:function(D){window.gapi.auth.setToken(I),a&&a(D)}})}).o(function(I){a&&a({error:{message:I&&I.message||"CORS_UNSUPPORTED"}})})};function gR(i,a){return new Re(function(l,d){a.grant_type=="refresh_token"&&a.refresh_token||a.grant_type=="authorization_code"&&a.code?CS(i,i.l+"?key="+encodeURIComponent(i.c),function(g){g?g.error?d(ig(g)):g.access_token&&g.refresh_token?l(g):d(new T("internal-error")):d(new T("network-request-failed"))},"POST",yb(a).toString(),i.g,i.m.get()):d(new T("internal-error"))})}function DS(i,a,l,d,g,b,I){var D=Mn(a+l);It(D,"key",i.c),I&&It(D,"cb",Date.now().toString());var $=d=="GET";if($)for(var G in g)g.hasOwnProperty(G)&&It(D,G,g[G]);return new Re(function(Ee,Ye){CS(i,D.toString(),function(ze){ze?ze.error?Ye(ig(ze,b||{})):Ee(ze):Ye(new T("network-request-failed"))},d,$?void 0:bb(Ab(g)),i.a,i.v.get())})}function Ho(i){if(i=i.email,typeof i!="string"||!xD.test(i))throw new T("invalid-email")}function RS(i){"email"in i&&Ho(i)}function vR(i,a){return Le(i,TR,{identifier:a,continueUri:lh()?Mu():"http://localhost"}).then(function(l){return l.signinMethods||[]})}function yR(i){return Le(i,UR,{}).then(function(a){return a.authorizedDomains||[]})}function On(i){if(!i[kr])throw i.mfaPendingCredential?new T("multi-factor-auth-required",null,qr(i)):new T("internal-error")}function Xm(i){if(i.phoneNumber||i.temporaryProof){if(!i.phoneNumber||!i.temporaryProof)throw new T("internal-error")}else{if(!i.sessionInfo)throw new T("missing-verification-id");if(!i.code)throw new T("missing-verification-code")}}jr.prototype.Ab=function(){return Le(this,zR,{})},jr.prototype.Cb=function(i,a){return Le(this,LS,{idToken:i,email:a})},jr.prototype.Db=function(i,a){return Le(this,PS,{idToken:i,password:a})};var wR={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=jr.prototype,e.Eb=function(i,a){var l={idToken:i},d=[];return Yc(wR,function(g,b){var I=a[b];I===null?d.push(g):b in a&&(l[b]=I)}),d.length&&(l.deleteAttribute=d),Le(this,LS,l)},e.wb=function(i,a){return i={requestType:"PASSWORD_RESET",email:i},Yt(i,a),Le(this,FR,i)},e.xb=function(i,a){return i={requestType:"EMAIL_SIGNIN",email:i},Yt(i,a),Le(this,OR,i)},e.vb=function(i,a){return i={requestType:"VERIFY_EMAIL",idToken:i},Yt(i,a),Le(this,LR,i)},e.Fb=function(i,a,l){return i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:a},Yt(i,l),Le(this,PR,i)};function xR(i,a){return Le(i,BR,a)}e.gb=function(i){return Le(this,QR,i)};function bR(i,a){return Le(i,qR,a).then(function(l){return l.phoneSessionInfo.sessionInfo})}function MS(i){if(!i.phoneVerificationInfo)throw new T("internal-error");if(!i.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!i.phoneVerificationInfo.code)throw new T("missing-verification-code")}function SR(i,a){return Le(i,KR,a).then(function(l){return l.phoneResponseInfo.sessionInfo})}function _R(i,a,l){return Le(i,kR,{idToken:a,deleteProvider:l})}function Jm(i){if(!i.requestUri||!i.sessionId&&!i.postBody&&!i.pendingToken)throw new T("internal-error")}function Zm(i,a){return a.oauthIdToken&&a.providerId&&a.providerId.indexOf("oidc.")==0&&!a.pendingToken&&(i.sessionId?a.nonce=i.sessionId:i.postBody&&(i=new Lo(i.postBody),am(i,"nonce")&&(a.nonce=i.get("nonce")))),a}function OS(i){var a=null;if(i.needConfirmation?(i.code="account-exists-with-different-credential",a=yh(i)):i.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(i.code="credential-already-in-use",a=yh(i)):i.errorMessage=="EMAIL_EXISTS"?(i.code="email-already-in-use",a=yh(i)):i.errorMessage&&(a=US(i.errorMessage)),a)throw a;On(i)}function eg(i,a){return a.returnIdpCredential=!0,Le(i,HR,a)}function tg(i,a){return a.returnIdpCredential=!0,Le(i,WR,a)}function ng(i,a){return a.returnIdpCredential=!0,a.autoCreate=!1,Le(i,GR,a)}function rg(i){if(!i.oobCode)throw new T("invalid-action-code")}e.ob=function(i,a){return Le(this,VR,{oobCode:i,newPassword:a})},e.Sa=function(i){return Le(this,ER,{oobCode:i})},e.kb=function(i){return Le(this,NR,{oobCode:i})};var NR={endpoint:"setAccountInfo",A:rg,Z:"email",B:!0},ER={endpoint:"resetPassword",A:rg,G:function(i){var a=i.requestType;if(!a||!i.email&&a!="EMAIL_SIGNIN"&&a!="VERIFY_AND_CHANGE_EMAIL")throw new T("internal-error")},B:!0},IR={endpoint:"signupNewUser",A:function(i){if(Ho(i),!i.password)throw new T("weak-password")},G:On,V:!0,B:!0},TR={endpoint:"createAuthUri",B:!0},jR={endpoint:"deleteAccount",O:["idToken"]},kR={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(i){if(!Array.isArray(i.deleteProvider))throw new T("internal-error")}},CR={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Ho,G:On,V:!0,B:!0},AR={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Ho,G:On,V:!0},DR={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:MS,G:On,B:!0,Na:!0},RR={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:MS,G:On,B:!0,Na:!0},MR={endpoint:"getAccountInfo"},OR={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(i){if(i.requestType!="EMAIL_SIGNIN")throw new T("internal-error");Ho(i)},Z:"email",B:!0},LR={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(i){if(i.requestType!="VERIFY_EMAIL")throw new T("internal-error")},Z:"email",B:!0},PR={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(i){if(i.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new T("internal-error")},Z:"email",B:!0},FR={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(i){if(i.requestType!="PASSWORD_RESET")throw new T("internal-error");Ho(i)},Z:"email",B:!0},UR={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},$R={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(i){if(!i.recaptchaSiteKey)throw new T("internal-error")}},VR={endpoint:"resetPassword",A:rg,Z:"email",B:!0},BR={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},LS={endpoint:"setAccountInfo",O:["idToken"],A:RS,V:!0},PS={endpoint:"setAccountInfo",O:["idToken"],A:function(i){if(RS(i),!i.password)throw new T("weak-password")},G:On,V:!0},zR={endpoint:"signupNewUser",G:On,V:!0,B:!0},qR={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(i){if(!i.phoneEnrollmentInfo)throw new T("internal-error");if(!i.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!i.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(i){if(!i.phoneSessionInfo||!i.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},KR={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(i){if(!i.phoneSignInInfo||!i.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(i){if(!i.phoneResponseInfo||!i.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},HR={endpoint:"verifyAssertion",A:Jm,Za:Zm,G:OS,V:!0,B:!0},GR={endpoint:"verifyAssertion",A:Jm,Za:Zm,G:function(i){if(i.errorMessage&&i.errorMessage=="USER_NOT_FOUND")throw new T("user-not-found");if(i.errorMessage)throw US(i.errorMessage);On(i)},V:!0,B:!0},WR={endpoint:"verifyAssertion",A:function(i){if(Jm(i),!i.idToken)throw new T("internal-error")},Za:Zm,G:OS,V:!0},YR={endpoint:"verifyCustomToken",A:function(i){if(!i.token)throw new T("invalid-custom-token")},G:On,V:!0,B:!0},FS={endpoint:"verifyPassword",A:function(i){if(Ho(i),!i.password)throw new T("wrong-password")},G:On,V:!0,B:!0},QR={endpoint:"verifyPhoneNumber",A:Xm,G:On,B:!0},XR={endpoint:"verifyPhoneNumber",A:function(i){if(!i.idToken)throw new T("internal-error");Xm(i)},G:function(i){if(i.temporaryProof)throw i.code="credential-already-in-use",yh(i);On(i)}},JR={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Xm,G:On,B:!0},ZR={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(i){if(!!i[kr]^!!i.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function Le(i,a,l){if(!TD(l,a.O))return ut(new T("internal-error"));var d=!!a.Na,g=a.Vb||"POST",b;return ge(l).then(a.A).then(function(){return a.V&&(l.returnSecureToken=!0),a.B&&i.b&&typeof l.tenantId>"u"&&(l.tenantId=i.b),d?DS(i,i.i,a.endpoint,g,l,a.Ib,a.mb||!1):DS(i,i.h,a.endpoint,g,l,a.Ib,a.mb||!1)}).then(function(I){return b=I,a.Za?a.Za(l,b):b}).then(a.G).then(function(){if(!a.Z)return b;if(!(a.Z in b))throw new T("internal-error");return b[a.Z]})}function US(i){return ig({error:{errors:[{message:i}],code:400,message:i}})}function ig(i,a){var l=(i.error&&i.error.errors&&i.error.errors[0]||{}).reason||"",d={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(l=d[l]?new T(d[l]):null)return l;l=i.error&&i.error.message||"",d={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Yt(d,a||{}),a=(a=l.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<a.length?a[1]:void 0;for(var g in d)if(l.indexOf(g)===0)return new T(d[g],a);return!a&&i&&(a=Lu(i)),new T("internal-error",a)}function eM(i){this.b=i,this.a=null,this.sb=tM(this)}function tM(i){return aM().then(function(){return new Re(function(a,l){lt("gapi.iframes.getContext")().open({where:document.body,url:i.b,messageHandlersFilter:lt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(d){function g(){clearTimeout(b),a()}i.a=d,i.a.restyle({setHideOnLeave:!1});var b=setTimeout(function(){l(Error("Network Error"))},sM.get());d.ping(g).then(g,function(){l(Error("Network Error"))})})})})}function nM(i,a){return i.sb.then(function(){return new Re(function(l){i.a.send(a.type,a,l,lt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function rM(i,a){i.sb.then(function(){i.a.register("authEvent",a,lt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var iM=new se(Ge,"https://apis.google.com/js/api.js?onload=%{onload}"),oM=new Vi(3e4,6e4),sM=new Vi(5e3,15e3),Dh=null;function aM(){return Dh||(Dh=new Re(function(i,a){function l(){Rb(),lt("gapi.load")("gapi.iframes",{callback:i,ontimeout:function(){Rb(),a(Error("Network Error"))},timeout:oM.get()})}if(lt("gapi.iframes.Iframe"))i();else if(lt("gapi.load"))l();else{var d="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[d]=function(){lt("gapi.load")?l():a(Error("Network Error"))},d=Et(iM,{onload:d}),ge(Gm(d)).o(function(){a(Error("Network Error"))})}}).o(function(i){throw Dh=null,i}))}function $S(i,a,l,d){this.l=i,this.h=a,this.i=l,this.g=d,this.f=null,this.g?(i=Mn(this.g.url),i=ah(i.c,i.a,i.g,"/emulator/auth/iframe")):i=ah("https",this.l,null,"/__/auth/iframe"),this.a=i,It(this.a,"apiKey",this.h),It(this.a,"appName",this.i),this.b=null,this.c=[]}$S.prototype.toString=function(){return this.f?It(this.a,"v",this.f):Kr(this.a.b,"v"),this.b?It(this.a,"eid",this.b):Kr(this.a.b,"eid"),this.c.length?It(this.a,"fw",this.c.join(",")):Kr(this.a.b,"fw"),this.a.toString()};function og(i,a,l,d,g,b){this.u=i,this.s=a,this.c=l,this.m=d,this.v=b,this.i=this.g=this.l=null,this.a=g,this.h=this.f=null}og.prototype.zb=function(i){return this.h=i,this},og.prototype.toString=function(){if(this.v){var i=Mn(this.v.url);i=ah(i.c,i.a,i.g,"/emulator/auth/handler")}else i=ah("https",this.u,null,"/__/auth/handler");if(It(i,"apiKey",this.s),It(i,"appName",this.c),It(i,"authType",this.m),this.a.isOAuthProvider){var a=this.a;try{var l=de.app(this.c).auth().la()}catch{l=null}a.pb=l,It(i,"providerId",this.a.providerId),l=this.a,a=Ab(l.Jb);for(var d in a)a[d]=a[d].toString();d=l.Qc,a=qr(a);for(var g=0;g<d.length;g++){var b=d[g];b in a&&delete a[b]}l.qb&&l.pb&&!a[l.qb]&&(a[l.qb]=l.pb),ci(a)||It(i,"customParameters",Lu(a))}if(typeof this.a.Rb=="function"&&(l=this.a.Rb(),l.length&&It(i,"scopes",l.join(","))),this.l?It(i,"redirectUrl",this.l):Kr(i.b,"redirectUrl"),this.g?It(i,"eventId",this.g):Kr(i.b,"eventId"),this.i?It(i,"v",this.i):Kr(i.b,"v"),this.b)for(var I in this.b)this.b.hasOwnProperty(I)&&!fr(i,I)&&It(i,I,this.b[I]);return this.h?It(i,"tid",this.h):Kr(i.b,"tid"),this.f?It(i,"eid",this.f):Kr(i.b,"eid"),I=sg(this.c),I.length&&It(i,"fw",I.join(",")),i.toString()};function sg(i){try{return de.app(i).auth().Ga()}catch{return[]}}function VS(i,a,l,d,g,b){this.s=i,this.g=a,this.b=l,this.f=b,this.c=d||null,this.i=g||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function BS(i){var a=Mu();return yR(i).then(function(l){e:{var d=Mn(a),g=d.c;d=d.a;for(var b=0;b<l.length;b++){var I=l[b],D=d,$=g;if(I.indexOf("chrome-extension://")==0?D=Mn(I).a==D&&$=="chrome-extension":$!="http"&&$!="https"?D=!1:wD.test(I)?D=D==I:(I=I.split(".").join("\\."),D=new RegExp("^(.+\\."+I+"|"+I+")$","i").test(D)),D){l=!0;break e}}l=!1}if(!l)throw new Pm(Mu())})}function zS(i){return i.m||(i.m=uh().then(function(){if(!i.u){var a=i.c,l=i.i,d=sg(i.b),g=new $S(i.s,i.g,i.b,i.f);g.f=a,g.b=l,g.c=dt(d||[]),i.u=g.toString()}i.v=new eM(i.u),uM(i)})),i.m}e=VS.prototype,e.Pb=function(i,a,l){var d=new T("popup-closed-by-user"),g=new T("web-storage-unsupported"),b=this,I=!1;return this.ma().then(function(){lM(b).then(function(D){D||(i&&Po(i),a(g),I=!0)})}).o(function(){}).then(function(){if(!I)return yD(i)}).then(function(){if(!I)return Hs(l).then(function(){a(d)})})},e.Yb=function(){var i=Qt();return!Ou(i)&&!Db(i)},e.Ub=function(){return!1},e.Nb=function(i,a,l,d,g,b,I,D){if(!i)return ut(new T("popup-blocked"));if(I&&!Ou())return this.ma().o(function(G){Po(i),g(G)}),d(),ge();this.a||(this.a=BS(qS(this)));var $=this;return this.a.then(function(){var G=$.ma().o(function(Ee){throw Po(i),g(Ee),Ee});return d(),G}).then(function(){if(Om(l),!I){var G=Ju($.s,$.g,$.b,a,l,null,b,$.c,void 0,$.i,D,$.f);Nb(G,i)}}).o(function(G){throw G.code=="auth/network-request-failed"&&($.a=null),G})};function qS(i){return i.l||(i.C=i.c?Qs(i.c,sg(i.b)):null,i.l=new jr(i.g,O(i.i),i.C),i.f&&Ah(i.l,i.f)),i.l}e.Ob=function(i,a,l,d){this.a||(this.a=BS(qS(this)));var g=this;return this.a.then(function(){Om(a);var b=Ju(g.s,g.g,g.b,i,a,Mu(),l,g.c,void 0,g.i,d,g.f);Nb(b)}).o(function(b){throw b.code=="auth/network-request-failed"&&(g.a=null),b})},e.ma=function(){var i=this;return zS(this).then(function(){return i.v.sb}).o(function(){throw i.a=null,new T("network-request-failed")})},e.ac=function(){return!0};function Ju(i,a,l,d,g,b,I,D,$,G,Ee,Ye){return i=new og(i,a,l,d,g,Ye),i.l=b,i.g=I,i.i=D,i.b=qr($||null),i.f=G,i.zb(Ee).toString()}function uM(i){if(!i.v)throw Error("IfcHandler must be initialized!");rM(i.v,function(a){var l={};if(a&&a.authEvent){var d=!1;for(a=dS(a.authEvent),l=0;l<i.h.length;l++)d=i.h[l](a)||d;return l={},l.status=d?"ACK":"ERROR",ge(l)}return l.status="ERROR",ge(l)})}function lM(i){var a={type:"webStorageSupport"};return zS(i).then(function(){return nM(i.v,a)}).then(function(l){if(l&&l.length&&typeof l[0].webStorageSupport<"u")return l[0].webStorageSupport;throw Error()})}e.Ea=function(i){this.h.push(i)},e.Ta=function(i){Je(this.h,function(a){return a==i})};function KS(i){if(this.a=i||de.INTERNAL.reactNative&&de.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=KS.prototype,e.get=function(i){return ge(this.a.getItem(i)).then(function(a){return a&&Js(a)})},e.set=function(i,a){return ge(this.a.setItem(i,Lu(a)))},e.U=function(i){return ge(this.a.removeItem(i))},e.ca=function(){},e.ia=function(){};function HS(i){this.b=i,this.a={},this.f=x(this.c,this)}var GS=[];function cM(){var i=Ir()?self:null;if(xe(GS,function(l){l.b==i&&(a=l)}),!a){var a=new HS(i);GS.push(a)}return a}HS.prototype.c=function(i){var a=i.data.eventType,l=i.data.eventId,d=this.a[a];if(d&&0<d.length){i.ports[0].postMessage({status:"ack",eventId:l,eventType:a,response:null});var g=[];xe(d,function(b){g.push(ge().then(function(){return b(i.origin,i.data.data)}))}),Xx(g).then(function(b){var I=[];xe(b,function(D){I.push({fulfilled:D.Qb,value:D.value,reason:D.reason?D.reason.message:void 0})}),xe(I,function(D){for(var $ in D)typeof D[$]>"u"&&delete D[$]}),i.ports[0].postMessage({status:"done",eventId:l,eventType:a,response:I})})}};function WS(i,a,l){ci(i.a)&&i.b.addEventListener("message",i.f),typeof i.a[a]>"u"&&(i.a[a]=[]),i.a[a].push(l)}function YS(i){this.a=i}YS.prototype.postMessage=function(i,a){this.a.postMessage(i,a)};function QS(i){this.c=i,this.b=!1,this.a=[]}function XS(i,a,l,d){var g,b=l||{},I,D,$,G=null;if(i.b)return ut(Error("connection_unavailable"));var Ee=d?800:50,Ye=typeof MessageChannel<"u"?new MessageChannel:null;return new Re(function(ze,qt){Ye?(g=Math.floor(Math.random()*Math.pow(10,20)).toString(),Ye.port1.start(),D=setTimeout(function(){qt(Error("unsupported_event"))},Ee),I=function(gi){gi.data.eventId===g&&(gi.data.status==="ack"?(clearTimeout(D),$=setTimeout(function(){qt(Error("timeout"))},3e3)):gi.data.status==="done"?(clearTimeout($),typeof gi.data.response<"u"?ze(gi.data.response):qt(Error("unknown_error"))):(clearTimeout(D),clearTimeout($),qt(Error("invalid_response"))))},G={messageChannel:Ye,onMessage:I},i.a.push(G),Ye.port1.addEventListener("message",I),i.c.postMessage({eventType:a,eventId:g,data:b},[Ye.port2])):qt(Error("connection_unavailable"))}).then(function(ze){return ag(i,G),ze}).o(function(ze){throw ag(i,G),ze})}function ag(i,a){if(a){var l=a.messageChannel,d=a.onMessage;l&&(l.port1.removeEventListener("message",d),l.port1.close()),Je(i.a,function(g){return g==a})}}QS.prototype.close=function(){for(;0<this.a.length;)ag(this,this.a[0]);this.b=!0};function JS(){if(!cg())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=f.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var i=this;Ir()&&self?(this.v=cM(),WS(this.v,"keyChanged",function(a,l){return t1(i).then(function(d){return 0<d.length&&xe(i.a,function(g){g(d)}),{keyProcessed:Ce(d,l.key)}})}),WS(this.v,"ping",function(){return ge(["keyChanged"])})):ED().then(function(a){(i.h=a)&&(i.g=new QS(new YS(a)),XS(i.g,"ping",null,!0).then(function(l){l[0].fulfilled&&Ce(l[0].value,"keyChanged")&&(i.s=!0)}).o(function(){}))})}var ug;function hM(i){return new Re(function(a,l){var d=i.m.deleteDatabase("firebaseLocalStorageDb");d.onsuccess=function(){a()},d.onerror=function(g){l(Error(g.target.error))}})}function ZS(i){return new Re(function(a,l){var d=i.m.open("firebaseLocalStorageDb",1);d.onerror=function(g){try{g.preventDefault()}catch{}l(Error(g.target.error))},d.onupgradeneeded=function(g){g=g.target.result;try{g.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(b){l(b)}},d.onsuccess=function(g){g=g.target.result,g.objectStoreNames.contains("firebaseLocalStorage")?a(g):hM(i).then(function(){return ZS(i)}).then(function(b){a(b)}).o(function(b){l(b)})}})}function lg(i){return i.i||(i.i=ZS(i)),i.i}function Rh(i,a){function l(g,b){lg(i).then(a).then(g).o(function(I){if(3<++d)b(I);else return lg(i).then(function(D){return D.close(),i.i=void 0,l(g,b)}).o(function(D){b(D)})})}var d=0;return new Re(l)}function cg(){try{return!!f.indexedDB}catch{return!1}}function Zu(i){return i.objectStore("firebaseLocalStorage")}function el(i,a){return i.transaction(["firebaseLocalStorage"],a?"readwrite":"readonly")}function na(i){return new Re(function(a,l){i.onsuccess=function(d){d&&d.target?a(d.target.result):a()},i.onerror=function(d){l(d.target.error)}})}e=JS.prototype,e.set=function(i,a){var l=this,d=!1;return Rh(this,function(g){return g=Zu(el(g,!0)),na(g.get(i))}).then(function(g){return Rh(l,function(b){if(b=Zu(el(b,!0)),g)return g.value=a,na(b.put(g));l.b++,d=!0;var I={};return I.fbase_key=i,I.value=a,na(b.add(I))})}).then(function(){return l.c[i]=a,e1(l,i)}).oa(function(){d&&l.b--})};function e1(i,a){return i.g&&i.h&&ND()===i.h?XS(i.g,"keyChanged",{key:a},i.s).then(function(){}).o(function(){}):ge()}e.get=function(i){return Rh(this,function(a){return na(Zu(el(a,!1)).get(i))}).then(function(a){return a&&a.value})},e.U=function(i){var a=this,l=!1;return Rh(this,function(d){return l=!0,a.b++,na(Zu(el(d,!0)).delete(i))}).then(function(){return delete a.c[i],e1(a,i)}).oa(function(){l&&a.b--})};function t1(i){return lg(i).then(function(a){var l=Zu(el(a,!1));return l.getAll?na(l.getAll()):new Re(function(d,g){var b=[],I=l.openCursor();I.onsuccess=function(D){(D=D.target.result)?(b.push(D.value),D.continue()):d(b)},I.onerror=function(D){g(D.target.error)}})}).then(function(a){var l={},d=[];if(i.b==0){for(d=0;d<a.length;d++)l[a[d].fbase_key]=a[d].value;d=Eb(i.c,l),i.c=l}return d})}e.ca=function(i){this.a.length==0&&fM(this),this.a.push(i)},e.ia=function(i){Je(this.a,function(a){return a==i}),this.a.length==0&&n1(this)};function fM(i){function a(){i.f=setTimeout(function(){i.l=t1(i).then(function(l){0<l.length&&xe(i.a,function(d){d(l)})}).then(function(){a()}).o(function(l){l.message!="STOP_EVENT"&&a()})},800)}n1(i),a()}function n1(i){i.l&&i.l.cancel("STOP_EVENT"),i.f&&(clearTimeout(i.f),i.f=null)}function r1(i){var a=this,l=null;this.a=[],this.type="indexedDB",this.c=i,this.b=ge().then(function(){if(cg()){var d=Uo(),g="__sak"+d;return ug||(ug=new JS),l=ug,l.set(g,d).then(function(){return l.get(g)}).then(function(b){if(b!==d)throw Error("indexedDB not supported!");return l.U(g)}).then(function(){return l}).o(function(){return a.c})}return a.c}).then(function(d){return a.type=d.type,d.ca(function(g){xe(a.a,function(b){b(g)})}),d})}e=r1.prototype,e.get=function(i){return this.b.then(function(a){return a.get(i)})},e.set=function(i,a){return this.b.then(function(l){return l.set(i,a)})},e.U=function(i){return this.b.then(function(a){return a.U(i)})},e.ca=function(i){this.a.push(i)},e.ia=function(i){Je(this.a,function(a){return a==i})};function tl(){this.a={},this.type="inMemory"}e=tl.prototype,e.get=function(i){return ge(this.a[i])},e.set=function(i,a){return this.a[i]=a,ge()},e.U=function(i){return delete this.a[i],ge()},e.ca=function(){},e.ia=function(){};function Mh(){if(!dM())throw Hr()=="Node"?new T("internal-error","The LocalStorage compatibility library was not found."):new T("web-storage-unsupported");this.a=i1()||de.INTERNAL.node.localStorage,this.type="localStorage"}function i1(){try{var i=f.localStorage,a=Uo();return i&&(i.setItem(a,"1"),i.removeItem(a)),i}catch{return null}}function dM(){var i=Hr()=="Node";if(i=i1()||i&&de.INTERNAL.node&&de.INTERNAL.node.localStorage,!i)return!1;try{return i.setItem("__sak","1"),i.removeItem("__sak"),!0}catch{return!1}}e=Mh.prototype,e.get=function(i){var a=this;return ge().then(function(){var l=a.a.getItem(i);return Js(l)})},e.set=function(i,a){var l=this;return ge().then(function(){var d=Lu(a);d===null?l.U(i):l.a.setItem(i,d)})},e.U=function(i){var a=this;return ge().then(function(){a.a.removeItem(i)})},e.ca=function(i){f.window&&hr(f.window,"storage",i)},e.ia=function(i){f.window&&Hn(f.window,"storage",i)};function hg(){this.type="nullStorage"}e=hg.prototype,e.get=function(){return ge(null)},e.set=function(){return ge()},e.U=function(){return ge()},e.ca=function(){},e.ia=function(){};function fg(){if(!pM())throw Hr()=="Node"?new T("internal-error","The SessionStorage compatibility library was not found."):new T("web-storage-unsupported");this.a=o1()||de.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function o1(){try{var i=f.sessionStorage,a=Uo();return i&&(i.setItem(a,"1"),i.removeItem(a)),i}catch{return null}}function pM(){var i=Hr()=="Node";if(i=o1()||i&&de.INTERNAL.node&&de.INTERNAL.node.sessionStorage,!i)return!1;try{return i.setItem("__sak","1"),i.removeItem("__sak"),!0}catch{return!1}}e=fg.prototype,e.get=function(i){var a=this;return ge().then(function(){var l=a.a.getItem(i);return Js(l)})},e.set=function(i,a){var l=this;return ge().then(function(){var d=Lu(a);d===null?l.U(i):l.a.setItem(i,d)})},e.U=function(i){var a=this;return ge().then(function(){a.a.removeItem(i)})},e.ca=function(){},e.ia=function(){};function mM(){var i={};i.Browser=gM,i.Node=vM,i.ReactNative=yM,i.Worker=wM,this.a=i[Hr()]}var dg,gM={F:Mh,cb:fg},vM={F:Mh,cb:fg},yM={F:KS,cb:hg},wM={F:Mh,cb:hg},ra={rd:"local",NONE:"none",td:"session"};function xM(i){var a=new T("invalid-persistence-type"),l=new T("unsupported-persistence-type");e:{for(d in ra)if(ra[d]==i){var d=!0;break e}d=!1}if(!d||typeof i!="string")throw a;switch(Hr()){case"ReactNative":if(i==="session")throw l;break;case"Node":if(i!=="none")throw l;break;case"Worker":if(i==="session"||!cg()&&i!=="none")throw l;break;default:if(!dm()&&i!=="none")throw l}}function s1(){var i=!!(!Db(Qt())&&hm()),a=Ou(),l=dm();this.m=i,this.h=a,this.l=l,this.a={},dg||(dg=new mM),i=dg;try{this.g=!lm()&&Mb()||!f.indexedDB?new i.a.F:new r1(Ir()?new tl:new i.a.F)}catch{this.g=new tl,this.h=!0}try{this.i=new i.a.cb}catch{this.i=new tl}this.v=new tl,this.f=x(this.Zb,this),this.b={}}var pg;function nl(){return pg||(pg=new s1),pg}function Go(i,a){switch(a){case"session":return i.i;case"none":return i.v;default:return i.g}}function ia(i,a){return"firebase:"+i.name+(a?":"+a:"")}function bM(i,a,l){var d=ia(a,l),g=Go(i,a.F);return i.get(a,l).then(function(b){var I=null;try{I=Js(f.localStorage.getItem(d))}catch{}if(I&&!b)return f.localStorage.removeItem(d),i.set(a,I,l);I&&b&&g.type!="localStorage"&&f.localStorage.removeItem(d)})}e=s1.prototype,e.get=function(i,a){return Go(this,i.F).get(ia(i,a))};function oa(i,a,l){return l=ia(a,l),a.F=="local"&&(i.b[l]=null),Go(i,a.F).U(l)}e.set=function(i,a,l){var d=ia(i,l),g=this,b=Go(this,i.F);return b.set(d,a).then(function(){return b.get(d)}).then(function(I){i.F=="local"&&(g.b[d]=I)})},e.addListener=function(i,a,l){i=ia(i,a),this.l&&(this.b[i]=f.localStorage.getItem(i)),ci(this.a)&&(Go(this,"local").ca(this.f),this.h||(lm()||!Mb())&&f.indexedDB||!this.l||SM(this)),this.a[i]||(this.a[i]=[]),this.a[i].push(l)},e.removeListener=function(i,a,l){i=ia(i,a),this.a[i]&&(Je(this.a[i],function(d){return d==l}),this.a[i].length==0&&delete this.a[i]),ci(this.a)&&(Go(this,"local").ia(this.f),mg(this))};function SM(i){mg(i),i.c=setInterval(function(){for(var a in i.a){var l=f.localStorage.getItem(a),d=i.b[a];l!=d&&(i.b[a]=l,l=new Mo({type:"storage",key:a,target:window,oldValue:d,newValue:l,a:!0}),i.Zb(l))}},1e3)}function mg(i){i.c&&(clearInterval(i.c),i.c=null)}e.Zb=function(i){if(i&&i.g){var a=i.a.key;if(a==null)for(var l in this.a){var d=this.b[l];typeof d>"u"&&(d=null);var g=f.localStorage.getItem(l);g!==d&&(this.b[l]=g,this.nb(l))}else if(a.indexOf("firebase:")==0&&this.a[a]){if(typeof i.a.a<"u"?Go(this,"local").ia(this.f):mg(this),this.m){if(l=f.localStorage.getItem(a),d=i.a.newValue,d!==l)d!==null?f.localStorage.setItem(a,d):f.localStorage.removeItem(a);else if(this.b[a]===d&&typeof i.a.a>"u")return}var b=this;l=function(){(typeof i.a.a<"u"||b.b[a]!==f.localStorage.getItem(a))&&(b.b[a]=f.localStorage.getItem(a),b.nb(a))},Er&&Fi&&Fi==10&&f.localStorage.getItem(a)!==i.a.newValue&&i.a.newValue!==i.a.oldValue?setTimeout(l,10):l()}}else xe(i,x(this.nb,this))},e.nb=function(i){this.a[i]&&xe(this.a[i],function(a){a()})};function _M(i){this.a=i,this.b=nl()}var gg={name:"authEvent",F:"local"};function NM(i){return i.b.get(gg,i.a).then(function(a){return dS(a)})}function EM(){this.a=nl()}function IM(){this.b=-1}function Oh(i,a){this.b=a1,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=i,this.h=a,this.l=f.Int32Array?new Int32Array(64):Array(64),Lh===void 0&&(f.Int32Array?Lh=new Int32Array(c1):Lh=c1),this.reset()}var Lh;k(Oh,IM);for(var a1=64,TM=a1-1,u1=[],vg=0;vg<TM;vg++)u1[vg]=0;var l1=st(128,u1);Oh.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):dt(this.h)};function yg(i){for(var a=i.f,l=i.l,d=0,g=0;g<a.length;)l[d++]=a[g]<<24|a[g+1]<<16|a[g+2]<<8|a[g+3],g=4*d;for(a=16;64>a;a++){g=l[a-15]|0,d=l[a-2]|0;var b=(l[a-16]|0)+((g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)|0,I=(l[a-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;l[a]=b+I|0}d=i.a[0]|0,g=i.a[1]|0;var D=i.a[2]|0,$=i.a[3]|0,G=i.a[4]|0,Ee=i.a[5]|0,Ye=i.a[6]|0;for(b=i.a[7]|0,a=0;64>a;a++){var ze=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&g^d&D^g&D)|0;I=G&Ee^~G&Ye,b=b+((G>>>6|G<<26)^(G>>>11|G<<21)^(G>>>25|G<<7))|0,I=I+(Lh[a]|0)|0,I=b+(I+(l[a]|0)|0)|0,b=Ye,Ye=Ee,Ee=G,G=$+I|0,$=D,D=g,g=d,d=I+ze|0}i.a[0]=i.a[0]+d|0,i.a[1]=i.a[1]+g|0,i.a[2]=i.a[2]+D|0,i.a[3]=i.a[3]+$|0,i.a[4]=i.a[4]+G|0,i.a[5]=i.a[5]+Ee|0,i.a[6]=i.a[6]+Ye|0,i.a[7]=i.a[7]+b|0}function wg(i,a,l){l===void 0&&(l=a.length);var d=0,g=i.c;if(typeof a=="string")for(;d<l;)i.f[g++]=a.charCodeAt(d++),g==i.b&&(yg(i),g=0);else if(_(a))for(;d<l;){var b=a[d++];if(!(typeof b=="number"&&0<=b&&255>=b&&b==(b|0)))throw Error("message must be a byte array");i.f[g++]=b,g==i.b&&(yg(i),g=0)}else throw Error("message must be string or array");i.c=g,i.g+=l}var c1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function h1(){Oh.call(this,8,jM)}k(h1,Oh);var jM=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function f1(i,a,l,d,g,b){this.v=i,this.i=a,this.l=l,this.m=d||null,this.u=g||null,this.s=b,this.h=a+":"+l,this.C=new EM,this.g=new _M(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ph(i){return new T("invalid-cordova-configuration",i)}e=f1.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=bD().then(function(){if(typeof lt("universalLinks.subscribe",f)!="function")throw Ph("cordova-universal-links-plugin-fix is not installed");if(typeof lt("BuildInfo.packageName",f)>"u")throw Ph("cordova-plugin-buildinfo is not installed");if(typeof lt("cordova.plugins.browsertab.openUrl",f)!="function")throw Ph("cordova-plugin-browsertab is not installed");if(typeof lt("cordova.InAppBrowser.open",f)!="function")throw Ph("cordova-plugin-inappbrowser is not installed")},function(){throw new T("cordova-not-ready")})};function kM(){for(var i=20,a=[];0<i;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),i--;return a.join("")}function CM(i){var a=new h1;wg(a,i),i=[];var l=8*a.g;56>a.c?wg(a,l1,56-a.c):wg(a,l1,a.b-(a.c-56));for(var d=63;56<=d;d--)a.f[d]=l&255,l/=256;for(yg(a),d=l=0;d<a.i;d++)for(var g=24;0<=g;g-=8)i[l++]=a.a[d]>>g&255;return VD(i)}e.Pb=function(i,a){return a(new T("operation-not-supported-in-this-environment")),ge()},e.Nb=function(){return ut(new T("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(i,a,l,d){if(this.c)return ut(new T("redirect-operation-pending"));var g=this,b=f.document,I=null,D=null,$=null,G=null;return this.c=ge().then(function(){return Om(a),p1(g)}).then(function(){return AM(g,i,a,l,d)}).then(function(){return new Re(function(Ee,Ye){D=function(){var ze=lt("cordova.plugins.browsertab.close",f);return Ee(),typeof ze=="function"&&ze(),g.a&&typeof g.a.close=="function"&&(g.a.close(),g.a=null),!1},g.Ea(D),$=function(){I||(I=Hs(2e3).then(function(){Ye(new T("redirect-cancelled-by-user"))}))},G=function(){pm()&&$()},b.addEventListener("resume",$,!1),Qt().toLowerCase().match(/android/)||b.addEventListener("visibilitychange",G,!1)}).o(function(Ee){return xg(g).then(function(){throw Ee})})}).oa(function(){$&&b.removeEventListener("resume",$,!1),G&&b.removeEventListener("visibilitychange",G,!1),I&&I.cancel(),D&&g.Ta(D),g.c=null})};function AM(i,a,l,d,g){var b=kM(),I=new Tr(a,d,null,b,new T("no-auth-event"),null,g),D=lt("BuildInfo.packageName",f);if(typeof D!="string")throw new T("invalid-cordova-configuration");var $=lt("BuildInfo.displayName",f),G={};if(Qt().toLowerCase().match(/iphone|ipad|ipod/))G.ibi=D;else if(Qt().toLowerCase().match(/android/))G.apn=D;else return ut(new T("operation-not-supported-in-this-environment"));$&&(G.appDisplayName=$),b=CM(b),G.sessionId=b;var Ee=Ju(i.v,i.i,i.l,a,l,null,d,i.m,G,i.u,g,i.s);return i.ma().then(function(){var Ye=i.h;return i.C.a.set(gg,I.w(),Ye)}).then(function(){var Ye=lt("cordova.plugins.browsertab.isAvailable",f);if(typeof Ye!="function")throw new T("invalid-cordova-configuration");var ze=null;Ye(function(qt){if(qt){if(ze=lt("cordova.plugins.browsertab.openUrl",f),typeof ze!="function")throw new T("invalid-cordova-configuration");ze(Ee)}else{if(ze=lt("cordova.InAppBrowser.open",f),typeof ze!="function")throw new T("invalid-cordova-configuration");qt=Qt(),i.a=ze(Ee,qt.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||qt.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function d1(i,a){for(var l=0;l<i.b.length;l++)try{i.b[l](a)}catch{}}function p1(i){return i.f||(i.f=i.ma().then(function(){return new Re(function(a){function l(d){return a(d),i.Ta(l),!1}i.Ea(l),DM(i)})})),i.f}function xg(i){var a=null;return NM(i.g).then(function(l){return a=l,l=i.g,oa(l.b,gg,l.a)}).then(function(){return a})}function DM(i){function a(I){d=!0,g&&g.cancel(),xg(i).then(function(D){var $=l;if(D&&I&&I.url){var G=null;$=oS(I.url),$.indexOf("/__/auth/callback")!=-1&&(G=Mn($),G=Js(fr(G,"firebaseError")||null),G=(G=typeof G=="object"?L(G):null)?new Tr(D.c,D.b,null,null,G,null,D.T()):new Tr(D.c,D.b,$,D.f,null,null,D.T())),$=G||l}d1(i,$)})}var l=new Tr("unknown",null,null,null,new T("no-auth-event")),d=!1,g=Hs(500).then(function(){return xg(i).then(function(){d||d1(i,l)})}),b=f.handleOpenURL;f.handleOpenURL=function(I){if(I.toLowerCase().indexOf(lt("BuildInfo.packageName",f).toLowerCase()+"://")==0&&a({url:I}),typeof b=="function")try{b(I)}catch(D){console.error(D)}},Lm||(Lm=new YD),QD(a)}e.Ea=function(i){this.b.push(i),p1(this).o(function(a){a.code==="auth/invalid-cordova-configuration"&&(a=new Tr("unknown",null,null,null,new T("no-auth-event")),i(a))})},e.Ta=function(i){Je(this.b,function(a){return a==i})};function RM(i){this.a=i,this.b=nl()}var bg={name:"pendingRedirect",F:"session"};function MM(i){return i.b.set(bg,"pending",i.a)}function Sg(i){return oa(i.b,bg,i.a)}function OM(i){return i.b.get(bg,i.a).then(function(a){return a=="pending"})}function Fh(i,a,l,d){this.i={},this.u=0,this.D=i,this.v=a,this.m=l,this.J=d,this.h=[],this.f=!1,this.l=x(this.s,this),this.b=new $h,this.C=new N1,this.g=new RM(b1(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=m1(this.D,this.v,this.m,M,this.J)}function m1(i,a,l,d,g){var b=de.SDK_VERSION||null;return cm()?new f1(i,a,l,b,d,g):new VS(i,a,l,b,d,g)}Fh.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=m1(this.D,this.v,this.m,null,this.J),this.i={}};function g1(i){i.f||(i.f=!0,i.a.Ea(i.l));var a=i.a;return i.a.ma().o(function(l){throw i.a==a&&i.reset(),l})}function v1(i){i.a.Yb()&&g1(i).o(function(a){var l=new Tr("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Ng(a)&&i.s(l)}),i.a.Ub()||S1(i.b)}function Uh(i,a){Ce(i.h,a)||i.h.push(a),i.f||OM(i.g).then(function(l){l?Sg(i.g).then(function(){g1(i).o(function(d){var g=new Tr("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Ng(d)&&i.s(g)})}):v1(i)}).o(function(){v1(i)})}function _g(i,a){Je(i.h,function(l){return l==a})}Fh.prototype.s=function(i){if(!i)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),i&&i.getUid()&&this.i.hasOwnProperty(i.getUid()))return!1;for(var a=!1,l=0;l<this.h.length;l++){var d=this.h[l];if(d.Gb(i.c,i.b)){(a=this.c[i.c])&&(a.h(i,d),i&&(i.f||i.b)&&(this.i[i.getUid()]=!0,this.u=Date.now())),a=!0;break}}return S1(this.b),a};var LM=new Vi(2e3,1e4),PM=new Vi(3e4,6e4);Fh.prototype.ra=function(){return this.b.ra()};function y1(i,a,l,d,g,b,I){return i.a.Nb(a,l,d,function(){i.f||(i.f=!0,i.a.Ea(i.l))},function(){i.reset()},g,b,I)}function Ng(i){return!!(i&&i.code=="auth/cordova-not-ready")}function w1(i,a,l,d,g){var b;return MM(i.g).then(function(){return i.a.Ob(a,l,d,g).o(function(I){if(Ng(I))throw new T("operation-not-supported-in-this-environment");return b=I,Sg(i.g).then(function(){throw b})}).then(function(){return i.a.ac()?new Re(function(){}):Sg(i.g).then(function(){return i.ra()}).then(function(){}).o(function(){})})})}function x1(i,a,l,d,g){return i.a.Pb(d,function(b){a.na(l,null,b,g)},LM.get())}var Eg={};function b1(i,a,l){return i=i+":"+a,l&&(i=i+":"+l.url),i}function Ig(i,a,l,d){var g=b1(a,l,d);return Eg[g]||(Eg[g]=new Fh(i,a,l,d)),Eg[g]}function $h(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}$h.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},$h.prototype.h=function(i,a){if(i){this.reset(),this.g=!0;var l=i.c,d=i.b,g=i.a&&i.a.code=="auth/web-storage-unsupported",b=i.a&&i.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!g&&!b),l!="unknown"||g||b?i.a?(Wo(this,!0,null,i.a),ge()):a.Fa(l,d)?FM(this,i,a):ut(new T("invalid-auth-event")):(Wo(this,!1,null,null),ge())}else ut(new T("invalid-auth-event"))};function S1(i){i.g||(i.g=!0,Wo(i,!1,null,null))}function Vh(i){i.g&&!i.i&&Wo(i,!1,null,null)}function FM(i,a,l){l=l.Fa(a.c,a.b);var d=a.g,g=a.f,b=a.i,I=a.T(),D=!!a.c.match(/Redirect$/);l(d,g,I,b).then(function($){Wo(i,D,$,null)}).o(function($){Wo(i,D,null,$)})}function UM(i,a){if(i.b=function(){return ut(a)},i.c.length)for(var l=0;l<i.c.length;l++)i.c[l](a)}function _1(i,a){if(i.b=function(){return ge(a)},i.f.length)for(var l=0;l<i.f.length;l++)i.f[l](a)}function Wo(i,a,l,d){a?d?UM(i,d):_1(i,l):_1(i,{user:null}),i.f=[],i.c=[]}$h.prototype.ra=function(){var i=this;return new Re(function(a,l){i.b?i.b().then(a,l):(i.f.push(a),i.c.push(l),$M(i))})};function $M(i){var a=new T("timeout");i.a&&i.a.cancel(),i.a=Hs(PM.get()).then(function(){i.b||(i.g=!0,Wo(i,!0,null,a))})}function N1(){}N1.prototype.h=function(i,a){if(i){var l=i.c,d=i.b;i.a?(a.na(i.c,null,i.a,i.b),ge()):a.Fa(l,d)?VM(i,a):ut(new T("invalid-auth-event"))}else ut(new T("invalid-auth-event"))};function VM(i,a){var l=i.b,d=i.c;a.Fa(d,l)(i.g,i.f,i.T(),i.i).then(function(g){a.na(d,g,null,l)}).o(function(g){a.na(d,null,g,l)})}function E1(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(i){this.jb=i},enumerable:!1})}function Tg(i,a){this.a=a,fe(this,"verificationId",i)}Tg.prototype.confirm=function(i){return i=fS(this.verificationId,i),this.a(i)};function jg(i,a,l,d){return new pi(i).gb(a,l).then(function(g){return new Tg(g,d)})}function BM(i){var a=Xb(i);if(!(a&&a.exp&&a.auth_time&&a.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Sn(this,{token:i,expirationTime:Pu(1e3*a.exp),authTime:Pu(1e3*a.auth_time),issuedAtTime:Pu(1e3*a.iat),signInProvider:a.firebase&&a.firebase.sign_in_provider?a.firebase.sign_in_provider:null,signInSecondFactor:a.firebase&&a.firebase.sign_in_second_factor?a.firebase.sign_in_second_factor:null,claims:a})}function kg(i,a,l){var d=a&&a[T1];if(!d)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=i,this.f=qr(a),this.g=l,this.c=new gh(null,d),this.b=[];var g=this;xe(a[I1]||[],function(b){(b=xm(b))&&g.b.push(b)}),fe(this,"auth",this.a),fe(this,"session",this.c),fe(this,"hints",this.b)}var I1="mfaInfo",T1="mfaPendingCredential";kg.prototype.Rc=function(i){var a=this;return i.tb(this.a.a,this.c).then(function(l){var d=qr(a.f);return delete d[I1],delete d[T1],Yt(d,l),a.g(d)})};function Cg(i,a,l,d){T.call(this,"multi-factor-auth-required",d,a),this.b=new kg(i,a,l),fe(this,"resolver",this.b)}k(Cg,T);function j1(i,a,l){if(i&&C(i.serverResponse)&&i.code==="auth/multi-factor-auth-required")try{return new Cg(a,i.serverResponse,l,i.message)}catch{}return null}function k1(){}k1.prototype.tb=function(i,a,l){return a.type==Vu?zM(this,i,a,l):qM(this,i,a)};function zM(i,a,l,d){return l.Ha().then(function(g){return g={idToken:g},typeof d<"u"&&(g.displayName=d),Yt(g,{phoneVerificationInfo:Bu(i.a)}),Le(a,DR,g)})}function qM(i,a,l){return l.Ha().then(function(d){return d={mfaPendingCredential:d},Yt(d,{phoneVerificationInfo:Bu(i.a)}),Le(a,RR,d)})}function Ag(i){fe(this,"factorId",i.fa),this.a=i}k(Ag,k1);function C1(i){if(Ag.call(this,i),this.a.fa!=pi.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}k(C1,Ag);function sa(i,a){Rn.call(this,i);for(var l in a)this[l]=a[l]}k(sa,Rn);function Dg(i,a){this.a=i,this.b=[],this.c=x(this.yc,this),hr(this.a,"userReloaded",this.c);var l=[];a&&a.multiFactor&&a.multiFactor.enrolledFactors&&xe(a.multiFactor.enrolledFactors,function(d){var g=null,b={};if(d){d.uid&&(b[Sm]=d.uid),d.displayName&&(b[Lb]=d.displayName),d.enrollmentTime&&(b[bm]=new Date(d.enrollmentTime).toISOString()),d.phoneNumber&&(b[_m]=d.phoneNumber);try{g=new Fu(b)}catch{}d=g}else d=null;d&&l.push(d)}),Bh(this,l)}function KM(i){var a=[];return xe(i.mfaInfo||[],function(l){(l=xm(l))&&a.push(l)}),a}e=Dg.prototype,e.yc=function(i){Bh(this,KM(i.hd))};function Bh(i,a){i.b=a,fe(i,"enrolledFactors",a)}e.Sb=function(){return this.a.I().then(function(i){return new gh(i,null)})},e.fc=function(i,a){var l=this,d=this.a.a;return this.Sb().then(function(g){return i.tb(d,g,a)}).then(function(g){return Yr(l.a,g),l.a.reload()})},e.bd=function(i){var a=this,l=typeof i=="string"?i:i.uid,d=this.a.a;return this.a.I().then(function(g){return Le(d,ZR,{idToken:g,mfaEnrollmentId:l})}).then(function(g){var b=re(a.b,function(I){return I.uid!=l});return Bh(a,b),Yr(a.a,g),a.a.reload().o(function(I){if(I.code!="auth/user-token-expired")throw I})})},e.w=function(){return{multiFactor:{enrolledFactors:Te(this.b,function(i){return i.w()})}}};function Rg(i,a,l){if(this.h=i,this.i=a,this.g=l,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}Rg.prototype.start=function(){this.a=this.c,Mg(this,!0)};function HM(i,a){return a?(i.a=i.c,i.g()):(a=i.a,i.a*=2,i.a>i.f&&(i.a=i.f),a)}function Mg(i,a){i.stop(),i.b=Hs(HM(i,a)).then(function(){return _D()}).then(function(){return i.h()}).then(function(){Mg(i,!0)}).o(function(l){i.i(l)&&Mg(i,!1)})}Rg.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Og(i){this.f=i,this.b=this.a=null,this.c=Date.now()}Og.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function A1(i,a){typeof a>"u"&&(i.b?(a=i.b,a=a.a-a.g):a=0),i.c=Date.now()+1e3*a}function D1(i,a){i.b=ph(a[kr]||""),i.a=a.refreshToken,a=a.expiresIn,A1(i,typeof a<"u"?Number(a):void 0)}function GM(i,a){i.b=a.b,i.a=a.a,i.c=a.c}function WM(i,a){return gR(i.f,a).then(function(l){return i.b=ph(l.access_token),i.a=l.refresh_token,A1(i,l.expires_in),{accessToken:i.b.toString(),refreshToken:i.a}}).o(function(l){throw l.code=="auth/user-token-expired"&&(i.a=null),l})}Og.prototype.getToken=function(i){return i=!!i,this.b&&!this.a?ut(new T("user-token-expired")):i||!this.b||Date.now()>this.c-3e4?this.a?WM(this,{grant_type:"refresh_token",refresh_token:this.a}):ge(null):ge({accessToken:this.b.toString(),refreshToken:this.a})};function zh(i,a){this.a=i||null,this.b=a||null,Sn(this,{lastSignInTime:Pu(a||null),creationTime:Pu(i||null)})}function YM(i){return new zh(i.a,i.b)}zh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function QM(i,a,l,d,g,b){Sn(this,{uid:i,displayName:d||null,photoURL:g||null,email:l||null,phoneNumber:b||null,providerId:a})}function Wn(i,a,l){this.N=[],this.l=i.apiKey,this.m=i.appName,this.s=i.authDomain||null;var d=de.SDK_VERSION?Qs(de.SDK_VERSION):null;this.a=new jr(this.l,O(M),d),(this.u=i.emulatorConfig||null)&&Ah(this.a,this.u),this.h=new Og(this.a),Bg(this,a[kr]),D1(this.h,a),fe(this,"refreshToken",this.h.a),M1(this,l||{}),bn.call(this),this.P=!1,this.s&&Fo()&&(this.b=Ig(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=XM(this),this.ba=x(this.ib,this);var g=this;this.za=null,this.Pa=function(b){g.xa(b.h)},this.qa=null,this.Ba=function(b){Lg(g,b.c)},this.$=null,this.aa=[],this.Oa=function(b){rl(g,b.f)},this.ja=null,this.S=new Dg(this,l),fe(this,"multiFactor",this.S)}k(Wn,bn),Wn.prototype.xa=function(i){this.za=i,jS(this.a,i)};function Lg(i,a){i.u=a,Ah(i.a,a),i.b&&(a=i.b,i.b=Ig(i.s,i.l,i.m,i.u),i.P&&(_g(a,i),Uh(i.b,i)))}Wn.prototype.la=function(){return this.za};function Pg(i,a){i.qa&&Hn(i.qa,"languageCodeChanged",i.Pa),(i.qa=a)&&hr(a,"languageCodeChanged",i.Pa)}function Fg(i,a){i.$&&Hn(i.$,"emulatorConfigChanged",i.Ba),(i.$=a)&&hr(a,"emulatorConfigChanged",i.Ba)}function rl(i,a){i.aa=a,kS(i.a,de.SDK_VERSION?Qs(de.SDK_VERSION,i.aa):null)}Wn.prototype.Ga=function(){return dt(this.aa)};function Ug(i,a){i.ja&&Hn(i.ja,"frameworkChanged",i.Oa),(i.ja=a)&&hr(a,"frameworkChanged",i.Oa)}Wn.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function $g(i){try{return de.app(i.m).auth()}catch{throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+i.m+"'!")}}function XM(i){return new Rg(function(){return i.I(!0)},function(a){return!!(a&&a.code=="auth/network-request-failed")},function(){var a=i.h.c-Date.now()-3e5;return 0<a?a:0})}function R1(i){i.J||i.D.b||(i.D.start(),Hn(i,"tokenChanged",i.ba),hr(i,"tokenChanged",i.ba))}function Vg(i){Hn(i,"tokenChanged",i.ba),i.D.stop()}function Bg(i,a){i.Aa=a,fe(i,"_lat",a)}function JM(i,a){Je(i.W,function(l){return l==a})}function Yo(i){for(var a=[],l=0;l<i.W.length;l++)a.push(i.W[l](i));return Xx(a).then(function(){return i})}function il(i){i.b&&!i.P&&(i.P=!0,Uh(i.b,i))}function M1(i,a){Sn(i,{uid:a.uid,displayName:a.displayName||null,photoURL:a.photoURL||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,isAnonymous:a.isAnonymous||!1,tenantId:a.tenantId||null,metadata:new zh(a.createdAt,a.lastLoginAt),providerData:[]}),i.a.b=i.tenantId}fe(Wn.prototype,"providerId","firebase");function O1(){}function zg(i){return ge().then(function(){if(i.J)throw new T("app-deleted")})}function qg(i){return Te(i.providerData,function(a){return a.providerId})}function Kg(i,a){a&&(L1(i,a.providerId),i.providerData.push(a))}function L1(i,a){Je(i.providerData,function(l){return l.providerId==a})}function qi(i,a,l){(a!="uid"||l)&&i.hasOwnProperty(a)&&fe(i,a,l)}function qh(i,a){i!=a&&(Sn(i,{uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,email:a.email,emailVerified:a.emailVerified,phoneNumber:a.phoneNumber,isAnonymous:a.isAnonymous,tenantId:a.tenantId,providerData:[]}),a.metadata?fe(i,"metadata",YM(a.metadata)):fe(i,"metadata",new zh),xe(a.providerData,function(l){Kg(i,l)}),GM(i.h,a.h),fe(i,"refreshToken",i.h.a),Bh(i.S,a.S.b))}e=Wn.prototype,e.reload=function(){var i=this;return Ut(this,zg(this).then(function(){return Hg(i).then(function(){return Yo(i)}).then(O1)}))};function Hg(i){return i.I().then(function(a){var l=i.isAnonymous;return ZM(i,a).then(function(){return l||qi(i,"isAnonymous",!1),a})})}e.oc=function(i){return this.I(i).then(function(a){return new BM(a)})},e.I=function(i){var a=this;return Ut(this,zg(this).then(function(){return a.h.getToken(i)}).then(function(l){if(!l)throw new T("internal-error");return l.accessToken!=a.Aa&&(Bg(a,l.accessToken),a.dispatchEvent(new sa("tokenChanged"))),qi(a,"refreshToken",l.refreshToken),l.accessToken}))};function Yr(i,a){a[kr]&&i.Aa!=a[kr]&&(D1(i.h,a),i.dispatchEvent(new sa("tokenChanged")),Bg(i,a[kr]),qi(i,"refreshToken",i.h.a))}function ZM(i,a){return Le(i.a,MR,{idToken:a}).then(x(i.Kc,i))}e.Kc=function(i){if(i=i.users,!i||!i.length)throw new T("internal-error");i=i[0],M1(this,{uid:i.localId,displayName:i.displayName,photoURL:i.photoUrl,email:i.email,emailVerified:!!i.emailVerified,phoneNumber:i.phoneNumber,lastLoginAt:i.lastLoginAt,createdAt:i.createdAt,tenantId:i.tenantId});for(var a=eO(i),l=0;l<a.length;l++)Kg(this,a[l]);qi(this,"isAnonymous",!(this.email&&i.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new sa("userReloaded",{hd:i}))};function eO(i){return(i=i.providerUserInfo)&&i.length?Te(i,function(a){return new QM(a.rawId,a.providerId,a.email,a.displayName,a.photoUrl,a.phoneNumber)}):[]}e.Lc=function(i){return mm("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(i)},e.ub=function(i){var a=this,l=null;return Ut(this,i.c(this.a,this.uid).then(function(d){return Yr(a,d),l=ol(a,d,"reauthenticate"),a.i=null,a.reload()}).then(function(){return l}),!0)};function Kh(i,a){return Hg(i).then(function(){if(Ce(qg(i),a))return Yo(i).then(function(){throw new T("provider-already-linked")})})}e.Cc=function(i){return mm("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(i)},e.rb=function(i){var a=this,l=null;return Ut(this,Kh(this,i.providerId).then(function(){return a.I()}).then(function(d){return i.b(a.a,d)}).then(function(d){return l=ol(a,d,"link"),P1(a,d)}).then(function(){return l}))},e.Dc=function(i,a){var l=this;return Ut(this,Kh(this,"phone").then(function(){return jg($g(l),i,a,x(l.rb,l))}))},e.Mc=function(i,a){var l=this;return Ut(this,ge().then(function(){return jg($g(l),i,a,x(l.ub,l))}),!0)};function ol(i,a,l){var d=Mm(a);return a=Zb(a),Gr({user:i,credential:d,additionalUserInfo:a,operationType:l})}function P1(i,a){return Yr(i,a),i.reload().then(function(){return i})}e.Cb=function(i){var a=this;return Ut(this,this.I().then(function(l){return a.a.Cb(l,i)}).then(function(l){return Yr(a,l),a.reload()}))},e.ed=function(i){var a=this;return Ut(this,this.I().then(function(l){return i.b(a.a,l)}).then(function(l){return Yr(a,l),a.reload()}))},e.Db=function(i){var a=this;return Ut(this,this.I().then(function(l){return a.a.Db(l,i)}).then(function(l){return Yr(a,l),a.reload()}))},e.Eb=function(i){if(i.displayName===void 0&&i.photoURL===void 0)return zg(this);var a=this;return Ut(this,this.I().then(function(l){return a.a.Eb(l,{displayName:i.displayName,photoUrl:i.photoURL})}).then(function(l){return Yr(a,l),qi(a,"displayName",l.displayName||null),qi(a,"photoURL",l.photoUrl||null),xe(a.providerData,function(d){d.providerId==="password"&&(fe(d,"displayName",a.displayName),fe(d,"photoURL",a.photoURL))}),Yo(a)}).then(O1))},e.cd=function(i){var a=this;return Ut(this,Hg(this).then(function(l){return Ce(qg(a),i)?_R(a.a,l,[i]).then(function(d){var g={};return xe(d.providerUserInfo||[],function(b){g[b.providerId]=!0}),xe(qg(a),function(b){g[b]||L1(a,b)}),g[pi.PROVIDER_ID]||fe(a,"phoneNumber",null),Yo(a)}):Yo(a).then(function(){throw new T("no-such-provider")})}))},e.delete=function(){var i=this;return Ut(this,this.I().then(function(a){return Le(i.a,jR,{idToken:a})}).then(function(){i.dispatchEvent(new sa("userDeleted"))})).then(function(){for(var a=0;a<i.N.length;a++)i.N[a].cancel("app-deleted");Pg(i,null),Fg(i,null),Ug(i,null),i.N=[],i.J=!0,Vg(i),fe(i,"refreshToken",null),i.b&&_g(i.b,i)})},e.Gb=function(i,a){return!!(i=="linkViaPopup"&&(this.g||null)==a&&this.f||i=="reauthViaPopup"&&(this.g||null)==a&&this.f||i=="linkViaRedirect"&&(this.ga||null)==a||i=="reauthViaRedirect"&&(this.ga||null)==a)},e.na=function(i,a,l,d){i!="linkViaPopup"&&i!="reauthViaPopup"||d!=(this.g||null)||(l&&this.C?this.C(l):a&&!l&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(i,a){return i=="linkViaPopup"&&a==(this.g||null)?x(this.Lb,this):i=="reauthViaPopup"&&a==(this.g||null)?x(this.Mb,this):i=="linkViaRedirect"&&(this.ga||null)==a?x(this.Lb,this):i=="reauthViaRedirect"&&(this.ga||null)==a?x(this.Mb,this):null},e.Ec=function(i){var a=this;return F1(this,"linkViaPopup",i,function(){return Kh(a,i.providerId).then(function(){return Yo(a)})},!1)},e.Nc=function(i){return F1(this,"reauthViaPopup",i,function(){return ge()},!0)};function F1(i,a,l,d,g){if(!Fo())return ut(new T("operation-not-supported-in-this-environment"));if(i.i&&!g)return ut(i.i);var b=jm(l.providerId),I=Uo(i.uid+":::"),D=null;(!Ou()||hm())&&i.s&&l.isOAuthProvider&&(D=Ju(i.s,i.l,i.m,a,l,null,I,de.SDK_VERSION||null,null,null,i.tenantId,i.u));var $=Tb(D,b&&b.va,b&&b.ua);return d=d().then(function(){if($1(i),!g)return i.I().then(function(){})}).then(function(){return y1(i.b,$,a,l,I,!!D,i.tenantId)}).then(function(){return new Re(function(G,Ee){i.na(a,null,new T("cancelled-popup-request"),i.g||null),i.f=G,i.C=Ee,i.g=I,i.c=x1(i.b,i,a,$,I)})}).then(function(G){return $&&Po($),G?Gr(G):null}).o(function(G){throw $&&Po($),G}),Ut(i,d,g)}e.Fc=function(i){var a=this;return U1(this,"linkViaRedirect",i,function(){return Kh(a,i.providerId)},!1)},e.Oc=function(i){return U1(this,"reauthViaRedirect",i,function(){return ge()},!0)};function U1(i,a,l,d,g){if(!Fo())return ut(new T("operation-not-supported-in-this-environment"));if(i.i&&!g)return ut(i.i);var b=null,I=Uo(i.uid+":::");return d=d().then(function(){if($1(i),!g)return i.I().then(function(){})}).then(function(){return i.ga=I,Yo(i)}).then(function(D){return i.ha&&(D=i.ha,D=D.b.set(Gg,i.w(),D.a)),D}).then(function(){return w1(i.b,a,l,I,i.tenantId)}).o(function(D){if(b=D,i.ha)return B1(i.ha);throw b}).then(function(){if(b)throw b}),Ut(i,d,g)}function $1(i){if(!i.b||!i.P)throw i.b&&!i.P?new T("internal-error"):new T("auth-domain-config-required")}e.Lb=function(i,a,l,d){var g=this;this.c&&(this.c.cancel(),this.c=null);var b=null;return l=this.I().then(function(I){return tg(g.a,{requestUri:i,postBody:d,sessionId:a,idToken:I})}).then(function(I){return b=ol(g,I,"link"),P1(g,I)}).then(function(){return b}),Ut(this,l)},e.Mb=function(i,a,l,d){var g=this;this.c&&(this.c.cancel(),this.c=null);var b=null,I=ge().then(function(){return ea(ng(g.a,{requestUri:i,sessionId:a,postBody:d,tenantId:l}),g.uid)}).then(function(D){return b=ol(g,D,"reauthenticate"),Yr(g,D),g.i=null,g.reload()}).then(function(){return b});return Ut(this,I,!0)},e.vb=function(i){var a=this,l=null;return Ut(this,this.I().then(function(d){return l=d,typeof i>"u"||ci(i)?{}:fh(new hh(i))}).then(function(d){return a.a.vb(l,d)}).then(function(d){if(a.email!=d)return a.reload()}).then(function(){}))},e.Fb=function(i,a){var l=this,d=null;return Ut(this,this.I().then(function(g){return d=g,typeof a>"u"||ci(a)?{}:fh(new hh(a))}).then(function(g){return l.a.Fb(d,i,g)}).then(function(g){if(l.email!=g)return l.reload()}).then(function(){}))};function Ut(i,a,l){var d=tO(i,a,l);return i.N.push(d),d.oa(function(){ot(i.N,d)}),d.o(function(g){var b=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(b=j1(g.w(),$g(i),x(i.jc,i))),b||g})}e.jc=function(i){var a=null,l=this;return i=ea(ge(i),l.uid).then(function(d){return a=ol(l,d,"reauthenticate"),Yr(l,d),l.i=null,l.reload()}).then(function(){return a}),Ut(this,i,!0)};function tO(i,a,l){return i.i&&!l?(a.cancel(),ut(i.i)):a.o(function(d){throw!d||d.code!="auth/user-disabled"&&d.code!="auth/user-token-expired"||(i.i||i.dispatchEvent(new sa("userInvalidated")),i.i=d),d})}e.toJSON=function(){return this.w()},e.w=function(){var i={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Yt(i,this.metadata.w()),xe(this.providerData,function(a){i.providerData.push(ID(a))}),Yt(i,this.S.w()),i};function V1(i){if(!i.apiKey)return null;var a={apiKey:i.apiKey,authDomain:i.authDomain,appName:i.appName,emulatorConfig:i.emulatorConfig},l={};if(i.stsTokenManager&&i.stsTokenManager.accessToken){l[kr]=i.stsTokenManager.accessToken,l.refreshToken=i.stsTokenManager.refreshToken||null;var d=i.stsTokenManager.expirationTime;d&&(l.expiresIn=(d-Date.now())/1e3)}else return null;var g=new Wn(a,l,i);return i.providerData&&xe(i.providerData,function(b){b&&Kg(g,Gr(b))}),i.redirectEventId&&(g.ga=i.redirectEventId),g}function nO(i,a,l,d){var g=new Wn(i,a);return l&&(g.ha=l),d&&rl(g,d),g.reload().then(function(){return g})}function rO(i,a,l,d){var g=i.h,b={};return b[kr]=g.b&&g.b.toString(),b.refreshToken=g.a,a=new Wn(a||{apiKey:i.l,authDomain:i.s,appName:i.m},b),l&&(a.ha=l),d&&rl(a,d),qh(a,i),a}function iO(i){this.a=i,this.b=nl()}var Gg={name:"redirectUser",F:"session"};function B1(i){return oa(i.b,Gg,i.a)}function oO(i,a){return i.b.get(Gg,i.a).then(function(l){return l&&a&&(l.authDomain=a),V1(l||{})})}function Wg(i){this.a=i,this.b=nl(),this.c=null,this.f=sO(this),this.b.addListener(Qr("local"),this.a,x(this.g,this))}Wg.prototype.g=function(){var i=this,a=Qr("local");aa(this,function(){return ge().then(function(){return i.c&&i.c.F!="local"?i.b.get(a,i.a):null}).then(function(l){if(l)return Yg(i,"local").then(function(){i.c=a})})})};function Yg(i,a){var l=[],d;for(d in ra)ra[d]!==a&&l.push(oa(i.b,Qr(ra[d]),i.a));return l.push(oa(i.b,Qg,i.a)),YA(l)}function sO(i){var a=Qr("local"),l=Qr("session"),d=Qr("none");return bM(i.b,a,i.a).then(function(){return i.b.get(l,i.a)}).then(function(g){return g?l:i.b.get(d,i.a).then(function(b){return b?d:i.b.get(a,i.a).then(function(I){return I?a:i.b.get(Qg,i.a).then(function(D){return D?Qr(D):a})})})}).then(function(g){return i.c=g,Yg(i,g.F)}).o(function(){i.c||(i.c=a)})}var Qg={name:"persistence",F:"session"};function Qr(i){return{name:"authUser",F:i}}Wg.prototype.yb=function(i){var a=null,l=this;return xM(i),aa(this,function(){return i!=l.c.F?l.b.get(l.c,l.a).then(function(d){return a=d,Yg(l,i)}).then(function(){if(l.c=Qr(i),a)return l.b.set(l.c,a,l.a)}):ge()})};function aO(i){return aa(i,function(){return i.b.set(Qg,i.c.F,i.a)})}function z1(i,a){return aa(i,function(){return i.b.set(i.c,a.w(),i.a)})}function q1(i){return aa(i,function(){return oa(i.b,i.c,i.a)})}function K1(i,a,l){return aa(i,function(){return i.b.get(i.c,i.a).then(function(d){return d&&a&&(d.authDomain=a),d&&l&&(d.emulatorConfig=l),V1(d||{})})})}function aa(i,a){return i.f=i.f.then(a,a),i.f}function Cr(i){if(this.l=!1,fe(this,"settings",new E1),fe(this,"app",i),Xe(this).options&&Xe(this).options.apiKey)i=de.SDK_VERSION?Qs(de.SDK_VERSION):null,this.a=new jr(Xe(this).options&&Xe(this).options.apiKey,O(M),i);else throw new T("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=de.INTERNAL.createSubscribe(x(this.zc,this)),this.W=void 0,this.ib=de.INTERNAL.createSubscribe(x(this.Ac,this)),ua(this,null),this.i=new Wg(Xe(this).options.apiKey+":"+Xe(this).name),this.D=new iO(Xe(this).options.apiKey+":"+Xe(this).name),this.$=xt(this,dO(this)),this.h=xt(this,pO(this)),this.ba=!1,this.ja=x(this.Zc,this),this.Ba=x(this.da,this),this.qa=x(this.mc,this),this.za=x(this.wc,this),this.Aa=x(this.xc,this),this.b=null,cO(this),this.INTERNAL={},this.INTERNAL.delete=x(this.delete,this),this.INTERNAL.logFramework=x(this.Gc,this),this.u=0,bn.call(this),lO(this),this.J=[],this.R=null}k(Cr,bn);function H1(i){Rn.call(this,"languageCodeChanged"),this.h=i}k(H1,Rn);function G1(i){Rn.call(this,"emulatorConfigChanged"),this.c=i}k(G1,Rn);function W1(i){Rn.call(this,"frameworkChanged"),this.f=i}k(W1,Rn),e=Cr.prototype,e.yb=function(i){return i=this.i.yb(i),xt(this,i)},e.xa=function(i){this.aa===i||this.l||(this.aa=i,jS(this.a,this.aa),this.dispatchEvent(new H1(this.la())))},e.la=function(){return this.aa},e.fd=function(){var i=f.navigator;this.xa(i&&(i.languages&&i.languages[0]||i.language||i.userLanguage)||null)},e.gd=function(i,a){if(!this.R){if(!/^https?:\/\//.test(i))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");a=a?!!a.disableWarnings:!1,uO(a),this.R={url:i,ec:a},this.settings.jb=!0,Ah(this.a,this.R),this.dispatchEvent(new G1(this.R))}};function uO(i){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),f.document&&!i&&uh().then(function(){var a=f.document.createElement("div");a.innerText="Running in emulator mode. Do not use with production credentials.",a.style.position="fixed",a.style.width="100%",a.style.backgroundColor="#ffffff",a.style.border=".1em solid #000000",a.style.color="#b50000",a.style.bottom="0px",a.style.left="0px",a.style.margin="0px",a.style.zIndex=1e4,a.style.textAlign="center",a.classList.add("firebase-emulator-warning"),f.document.body.appendChild(a)})}e.Gc=function(i){this.J.push(i),kS(this.a,de.SDK_VERSION?Qs(de.SDK_VERSION,this.J):null),this.dispatchEvent(new W1(this.J))},e.Ga=function(){return dt(this.J)},e.zb=function(i){this.S===i||this.l||(this.S=i,this.a.b=this.S)},e.T=function(){return this.S};function lO(i){Object.defineProperty(i,"lc",{get:function(){return this.la()},set:function(a){this.xa(a)},enumerable:!1}),i.aa=null,Object.defineProperty(i,"ti",{get:function(){return this.T()},set:function(a){this.zb(a)},enumerable:!1}),i.S=null,Object.defineProperty(i,"emulatorConfig",{get:function(){if(this.R){var a=Mn(this.R.url);a=Gr({protocol:a.c,host:a.a,port:a.g,options:Gr({disableWarnings:this.R.ec})})}else a=null;return a},enumerable:!1})}e.toJSON=function(){return{apiKey:Xe(this).options.apiKey,authDomain:Xe(this).options.authDomain,appName:Xe(this).name,currentUser:ke(this)&&ke(this).w()}};function Xg(i){return i.Oa||ut(new T("auth-domain-config-required"))}function cO(i){var a=Xe(i).options.authDomain,l=Xe(i).options.apiKey;a&&Fo()&&(i.Oa=i.$.then(function(){if(!i.l){if(i.b=Ig(a,l,Xe(i).name,i.R),Uh(i.b,i),ke(i)&&il(ke(i)),i.m){il(i.m);var d=i.m;d.xa(i.la()),Pg(d,i),d=i.m,rl(d,i.J),Ug(d,i),d=i.m,Lg(d,i.R),Fg(d,i),i.m=null}return i.b}}))}e.Gb=function(i,a){switch(i){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==a&&!!this.f;default:return!1}},e.na=function(i,a,l,d){i=="signInViaPopup"&&this.g==d&&(l&&this.C?this.C(l):a&&!l&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(i,a){return i=="signInViaRedirect"||i=="signInViaPopup"&&this.g==a&&this.f?x(this.ic,this):null},e.ic=function(i,a,l,d){var g=this,b={requestUri:i,postBody:d,sessionId:a,tenantId:l};return this.c&&(this.c.cancel(),this.c=null),g.$.then(function(){return Qo(g,eg(g.a,b))})},e.Xc=function(i){if(!Fo())return ut(new T("operation-not-supported-in-this-environment"));var a=this,l=jm(i.providerId),d=Uo(),g=null;(!Ou()||hm())&&Xe(this).options.authDomain&&i.isOAuthProvider&&(g=Ju(Xe(this).options.authDomain,Xe(this).options.apiKey,Xe(this).name,"signInViaPopup",i,null,d,de.SDK_VERSION||null,null,null,this.T(),this.R));var b=Tb(g,l&&l.va,l&&l.ua);return l=Xg(this).then(function(I){return y1(I,b,"signInViaPopup",i,d,!!g,a.T())}).then(function(){return new Re(function(I,D){a.na("signInViaPopup",null,new T("cancelled-popup-request"),a.g),a.f=I,a.C=D,a.g=d,a.c=x1(a.b,a,"signInViaPopup",b,d)})}).then(function(I){return b&&Po(b),I?Gr(I):null}).o(function(I){throw b&&Po(b),I}),xt(this,l)},e.Yc=function(i){if(!Fo())return ut(new T("operation-not-supported-in-this-environment"));var a=this,l=Xg(this).then(function(){return aO(a.i)}).then(function(){return w1(a.b,"signInViaRedirect",i,void 0,a.T())});return xt(this,l)};function Y1(i){if(!Fo())return ut(new T("operation-not-supported-in-this-environment"));var a=Xg(i).then(function(){return i.b.ra()}).then(function(l){return l?Gr(l):null});return xt(i,a)}e.ra=function(){var i=this;return Y1(this).then(function(a){return i.b&&Vh(i.b.b),a}).o(function(a){throw i.b&&Vh(i.b.b),a})},e.dd=function(i){if(!i)return ut(new T("null-user"));if(this.S!=i.tenantId)return ut(new T("tenant-id-mismatch"));var a=this,l={};l.apiKey=Xe(this).options.apiKey,l.authDomain=Xe(this).options.authDomain,l.appName=Xe(this).name;var d=rO(i,l,a.D,a.Ga());return xt(this,this.h.then(function(){if(Xe(a).options.apiKey!=i.l)return d.reload()}).then(function(){return ke(a)&&i.uid==ke(a).uid?(qh(ke(a),i),a.da(i)):(ua(a,d),il(d),a.da(d))}).then(function(){sl(a)}))};function hO(i,a){var l={};return l.apiKey=Xe(i).options.apiKey,l.authDomain=Xe(i).options.authDomain,l.appName=Xe(i).name,i.R&&(l.emulatorConfig=i.R),i.$.then(function(){return nO(l,a,i.D,i.Ga())}).then(function(d){return ke(i)&&d.uid==ke(i).uid?(qh(ke(i),d),i.da(d)):(ua(i,d),il(d),i.da(d))}).then(function(){sl(i)})}function ua(i,a){ke(i)&&(JM(ke(i),i.Ba),Hn(ke(i),"tokenChanged",i.qa),Hn(ke(i),"userDeleted",i.za),Hn(ke(i),"userInvalidated",i.Aa),Vg(ke(i))),a&&(a.W.push(i.Ba),hr(a,"tokenChanged",i.qa),hr(a,"userDeleted",i.za),hr(a,"userInvalidated",i.Aa),0<i.u&&R1(a)),fe(i,"currentUser",a),a&&(a.xa(i.la()),Pg(a,i),rl(a,i.J),Ug(a,i),Lg(a,i.R),Fg(a,i))}e.Bb=function(){var i=this,a=this.h.then(function(){return i.b&&Vh(i.b.b),ke(i)?(ua(i,null),q1(i.i).then(function(){sl(i)})):ge()});return xt(this,a)};function fO(i){var a=oO(i.D,Xe(i).options.authDomain).then(function(l){return(i.m=l)&&(l.ha=i.D),B1(i.D)});return xt(i,a)}function dO(i){var a=Xe(i).options.authDomain,l=fO(i).then(function(){return K1(i.i,a,i.R)}).then(function(d){return d?(d.ha=i.D,i.m&&(i.m.ga||null)==(d.ga||null)?d:d.reload().then(function(){return z1(i.i,d).then(function(){return d})}).o(function(g){return g.code=="auth/network-request-failed"?d:q1(i.i)})):null}).then(function(d){ua(i,d||null)});return xt(i,l)}function pO(i){return i.$.then(function(){return Y1(i)}).o(function(){}).then(function(){if(!i.l)return i.ja()}).o(function(){}).then(function(){if(!i.l){i.ba=!0;var a=i.i;a.b.addListener(Qr("local"),a.a,i.ja)}})}e.Zc=function(){var i=this;return K1(this.i,Xe(this).options.authDomain).then(function(a){if(!i.l){var l;if(l=ke(i)&&a){l=ke(i).uid;var d=a.uid;l=l==null||l===""||d===void 0||d===null||d===""?!1:l==d}if(l)return qh(ke(i),a),ke(i).I();(ke(i)||a)&&(ua(i,a),a&&(il(a),a.ha=i.D),i.b&&Uh(i.b,i),sl(i))}})},e.da=function(i){return z1(this.i,i)},e.mc=function(){sl(this),this.da(ke(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function Qo(i,a){var l=null,d=null;return xt(i,a.then(function(g){return l=Mm(g),d=Zb(g),hO(i,g)},function(g){var b=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(b=j1(g.w(),i,x(i.kc,i))),b||g}).then(function(){return Gr({user:ke(i),credential:l,additionalUserInfo:d,operationType:"signIn"})}))}e.kc=function(i){var a=this;return this.h.then(function(){return Qo(a,ge(i))})},e.zc=function(i){var a=this;this.addAuthTokenListener(function(){i.next(ke(a))})},e.Ac=function(i){var a=this;mO(this,function(){i.next(ke(a))})},e.Ic=function(i,a,l){var d=this;return this.ba&&Promise.resolve().then(function(){typeof i=="function"?i(ke(d)):typeof i.next=="function"&&i.next(ke(d))}),this.Pa(i,a,l)},e.Hc=function(i,a,l){var d=this;return this.ba&&Promise.resolve().then(function(){d.W=d.getUid(),typeof i=="function"?i(ke(d)):typeof i.next=="function"&&i.next(ke(d))}),this.ib(i,a,l)},e.nc=function(i){var a=this,l=this.h.then(function(){return ke(a)?ke(a).I(i).then(function(d){return{accessToken:d}}):null});return xt(this,l)},e.Tc=function(i){var a=this;return this.h.then(function(){return Qo(a,Le(a.a,YR,{token:i}))}).then(function(l){var d=l.user;return qi(d,"isAnonymous",!1),a.da(d),l})},e.Uc=function(i,a){var l=this;return this.h.then(function(){return Qo(l,Le(l.a,FS,{email:i,password:a}))})},e.dc=function(i,a){var l=this;return this.h.then(function(){return Qo(l,Le(l.a,IR,{email:i,password:a}))})},e.ab=function(i){var a=this;return this.h.then(function(){return Qo(a,i.ka(a.a))})},e.Sc=function(i){return mm("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(i)},e.Ab=function(){var i=this;return this.h.then(function(){var a=ke(i);if(a&&a.isAnonymous){var l=Gr({providerId:null,isNewUser:!1});return Gr({user:a,credential:null,additionalUserInfo:l,operationType:"signIn"})}return Qo(i,i.a.Ab()).then(function(d){var g=d.user;return qi(g,"isAnonymous",!0),i.da(g),d})})};function Xe(i){return i.app}function ke(i){return i.currentUser}e.getUid=function(){return ke(this)&&ke(this).uid||null};function Hh(i){return ke(i)&&ke(i)._lat||null}function sl(i){if(i.ba){for(var a=0;a<i.s.length;a++)i.s[a]&&i.s[a](Hh(i));if(i.W!==i.getUid()&&i.N.length)for(i.W=i.getUid(),a=0;a<i.N.length;a++)i.N[a]&&i.N[a](Hh(i))}}e.cc=function(i){this.addAuthTokenListener(i),this.u++,0<this.u&&ke(this)&&R1(ke(this))},e.Pc=function(i){var a=this;xe(this.s,function(l){l==i&&a.u--}),0>this.u&&(this.u=0),this.u==0&&ke(this)&&Vg(ke(this)),this.removeAuthTokenListener(i)},e.addAuthTokenListener=function(i){var a=this;this.s.push(i),xt(this,this.h.then(function(){a.l||Ce(a.s,i)&&i(Hh(a))}))},e.removeAuthTokenListener=function(i){Je(this.s,function(a){return a==i})};function mO(i,a){i.N.push(a),xt(i,i.h.then(function(){!i.l&&Ce(i.N,a)&&i.W!==i.getUid()&&(i.W=i.getUid(),a(Hh(i)))}))}e.delete=function(){this.l=!0;for(var i=0;i<this.P.length;i++)this.P[i].cancel("app-deleted");return this.P=[],this.i&&(i=this.i,i.b.removeListener(Qr("local"),i.a,this.ja)),this.b&&(_g(this.b,this),Vh(this.b.b)),Promise.resolve()};function xt(i,a){return i.P.push(a),a.oa(function(){ot(i.P,a)}),a}e.hc=function(i){return xt(this,vR(this.a,i))},e.Bc=function(i){return!!Rm(i)},e.xb=function(i,a){var l=this;return xt(this,ge().then(function(){var d=new hh(a);if(!d.c)throw new T("argument-error",Im+" must be true when sending sign in link to email");return fh(d)}).then(function(d){return l.a.xb(i,d)}).then(function(){}))},e.jd=function(i){return this.Sa(i).then(function(a){return a.data.email})},e.ob=function(i,a){return xt(this,this.a.ob(i,a).then(function(){}))},e.Sa=function(i){return xt(this,this.a.Sa(i).then(function(a){return new jD(a)}))},e.kb=function(i){return xt(this,this.a.kb(i).then(function(){}))},e.wb=function(i,a){var l=this;return xt(this,ge().then(function(){return typeof a>"u"||ci(a)?{}:fh(new hh(a))}).then(function(d){return l.a.wb(i,d)}).then(function(){}))},e.Wc=function(i,a){return xt(this,jg(this,i,a,x(this.ab,this)))},e.Vc=function(i,a){var l=this;return xt(this,ge().then(function(){var d=a||Mu(),g=hS(i,d);if(d=Rm(d),!d)throw new T("argument-error","Invalid email link!");if(d.tenantId!==l.T())throw new T("tenant-id-mismatch");return l.ab(g)}))};function al(){}al.prototype.render=function(){},al.prototype.reset=function(){},al.prototype.getResponse=function(){},al.prototype.execute=function(){};function la(){this.a={},this.b=1e12}var Jg=null;la.prototype.render=function(i,a){return this.a[this.b.toString()]=new Gh(i,a),this.b++},la.prototype.reset=function(i){var a=Zg(this,i);i=Q1(i),a&&i&&(a.delete(),delete this.a[i])},la.prototype.getResponse=function(i){return(i=Zg(this,i))?i.getResponse():null},la.prototype.execute=function(i){(i=Zg(this,i))&&i.execute()};function Zg(i,a){return(a=Q1(a))&&i.a[a]||null}function Q1(i){return(i=typeof i>"u"?1e12:i)?i.toString():null}function Gh(i,a){this.g=!1,this.c=a,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Tu(i);var l=this;this.i=function(){l.execute()},this.h?this.execute():hr(this.f,"click",this.i)}Gh.prototype.getResponse=function(){return ev(this),this.b},Gh.prototype.execute=function(){ev(this);var i=this;this.a||(this.a=setTimeout(function(){i.b=SD();var a=i.c.callback,l=i.c["expired-callback"];if(a)try{a(i.b)}catch{}i.a=setTimeout(function(){if(i.a=null,i.b=null,l)try{l()}catch{}i.h&&i.execute()},6e4)},500))},Gh.prototype.delete=function(){ev(this),this.g=!0,clearTimeout(this.a),this.a=null,Hn(this.f,"click",this.i)};function ev(i){if(i.g)throw Error("reCAPTCHA mock was already deleted!")}function tv(){}fe(tv,"FACTOR_ID","phone");function nv(){}nv.prototype.g=function(){return Jg||(Jg=new la),ge(Jg)},nv.prototype.c=function(){};var rv=null;function iv(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var gO=new se(Ge,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),vO=new Vi(3e4,6e4);iv.prototype.g=function(i){var a=this;return new Re(function(l,d){var g=setTimeout(function(){d(new T("network-request-failed"))},vO.get());if(!f.grecaptcha||i!==a.f&&!a.b){f[a.a]=function(){if(f.grecaptcha){a.f=i;var I=f.grecaptcha.render;f.grecaptcha.render=function(D,$){return D=I(D,$),a.b++,D},clearTimeout(g),l(f.grecaptcha)}else clearTimeout(g),d(new T("internal-error"));delete f[a.a]};var b=Et(gO,{onload:a.a,hl:i||""});ge(Gm(b)).o(function(){clearTimeout(g),d(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(g),l(f.grecaptcha)})},iv.prototype.c=function(){this.b--};var ov=null;function sv(i,a,l,d,g,b,I){if(fe(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=a,this.g=null,I?(rv||(rv=new nv),I=rv):(ov||(ov=new iv),I=ov),this.m=I,this.a=l||{theme:"light",type:"image"},this.h=[],this.a[Z1])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[yO]==="invisible",!f.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Tu(a)||!this.i&&Tu(a).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new jr(i,b||null,g||null),this.u=d||function(){return null};var D=this;this.l=[];var $=this.a[X1];this.a[X1]=function(Ee){if(e_(D,Ee),typeof $=="function")$(Ee);else if(typeof $=="string"){var Ye=lt($,f);typeof Ye=="function"&&Ye(Ee)}};var G=this.a[J1];this.a[J1]=function(){if(e_(D,null),typeof G=="function")G();else if(typeof G=="string"){var Ee=lt(G,f);typeof Ee=="function"&&Ee()}}}var X1="callback",J1="expired-callback",Z1="sitekey",yO="size";function e_(i,a){for(var l=0;l<i.l.length;l++)try{i.l[l](a)}catch{}}function wO(i,a){Je(i.l,function(l){return l==a})}function av(i,a){return i.h.push(a),a.oa(function(){ot(i.h,a)}),a}e=sv.prototype,e.Ia=function(){var i=this;return this.f?this.f:this.f=av(this,ge().then(function(){if(lh()&&!Ir())return uh();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return i.m.g(i.u())}).then(function(a){return i.g=a,Le(i.s,$R,{})}).then(function(a){i.a[Z1]=a.recaptchaSiteKey}).o(function(a){throw i.f=null,a}))},e.render=function(){Wh(this);var i=this;return av(this,this.Ia().then(function(){if(i.c===null){var a=i.v;if(!i.i){var l=Tu(a);a=KA("DIV"),l.appendChild(a)}i.c=i.g.render(a,i.a)}return i.c}))},e.verify=function(){Wh(this);var i=this;return av(this,this.render().then(function(a){return new Re(function(l){var d=i.g.getResponse(a);if(d)l(d);else{var g=function(b){b&&(wO(i,g),l(b))};i.l.push(g),i.i&&i.g.execute(i.c)}})}))},e.reset=function(){Wh(this),this.c!==null&&this.g.reset(this.c)};function Wh(i){if(i.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){Wh(this),this.J=!0,this.m.c();for(var i=0;i<this.h.length;i++)this.h[i].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){i=Tu(this.v);for(var a;a=i.firstChild;)i.removeChild(a)}};function uv(i,a,l){var d=!1;try{this.b=l||de.app()}catch{throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)l=this.b.options.apiKey;else throw new T("invalid-api-key");var g=this,b=null;try{b=this.b.auth().Ga()}catch{}try{d=this.b.auth().settings.appVerificationDisabledForTesting}catch{}b=de.SDK_VERSION?Qs(de.SDK_VERSION,b):null,sv.call(this,l,i,a,function(){try{var I=g.b.auth().la()}catch{I=null}return I},b,O(M),d)}k(uv,sv);function t_(i,a,l,d){e:{l=Array.prototype.slice.call(l);for(var g=0,b=!1,I=0;I<a.length;I++)if(a[I].optional)b=!0;else{if(b)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");g++}if(b=a.length,l.length<g||b<l.length)d="Expected "+(g==b?g==1?"1 argument":g+" arguments":g+"-"+b+" arguments")+" but got "+l.length+".";else{for(g=0;g<l.length;g++)if(b=a[g].optional&&l[g]===void 0,!a[g].M(l[g])&&!b){if(a=a[g],0>g||g>=n_.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");l=n_[g],d=(d?"":l+" argument ")+(a.name?'"'+a.name+'" ':"")+"must be "+a.K+".";break e}d=null}}if(d)throw new T("argument-error",i+" failed: "+d)}var n_="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function he(i,a){return{name:i||"",K:"a valid string",optional:!!a,M:function(l){return typeof l=="string"}}}function lv(i,a){return{name:i||"",K:"a boolean",optional:!!a,M:function(l){return typeof l=="boolean"}}}function Dt(i,a){return{name:i||"",K:"a valid object",optional:!!a,M:C}}function ca(i,a){return{name:i||"",K:"a function",optional:!!a,M:function(l){return typeof l=="function"}}}function Xr(i,a){return{name:i||"",K:"null",optional:!!a,M:function(l){return l===null}}}function xO(){return{name:"",K:"an HTML element",optional:!1,M:function(i){return!!(i&&i instanceof Element)}}}function bO(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(i){return!!(i&&i instanceof Cr)}}}function SO(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(i){return!!(i&&i instanceof de.app.App)}}}function Ki(i){return{name:i?i+"Credential":"credential",K:i?"a valid "+i+" credential":"a valid credential",optional:!1,M:function(a){if(!a)return!1;var l=!i||a.providerId===i;return!(!a.ka||!l)}}}function r_(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(i){return i?!!i.tb:!1}}}function ha(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(i){return!!(i&&i.providerId&&i.hasOwnProperty&&i.hasOwnProperty("isOAuthProvider"))}}}function cv(i,a){return C(i)&&typeof i.type=="string"&&i.type===a&&typeof i.Ha=="function"}function i_(i){return C(i)&&typeof i.uid=="string"}function Yh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(i){return!(!i||typeof i.type!="string"||typeof i.verify!="function")}}}function Tt(i,a,l,d){return{name:l||"",K:i.K+" or "+a.K,optional:!!d,M:function(g){return i.M(g)||a.M(g)}}}function pt(i,a){for(var l in a){var d=a[l].name;i[d]=s_(d,i[l],a[l].j)}}function o_(i,a){for(var l in a){var d=a[l].name;d!==l&&Object.defineProperty(i,d,{get:j(function(g){return this[g]},l),set:j(function(g,b,I,D){t_(g,[I],[D],!0),this[b]=D},d,l,a[l].lb),enumerable:!0})}}function jt(i,a,l,d){i[a]=s_(a,l,d)}function s_(i,a,l){function d(){var I=Array.prototype.slice.call(arguments);return t_(g,l,I),a.apply(this,I)}if(!l)return a;var g=_O(i),b;for(b in a)d[b]=a[b];for(b in a.prototype)d.prototype[b]=a.prototype[b];return d}function _O(i){return i=i.split("."),i[i.length-1]}pt(Cr.prototype,{kb:{name:"applyActionCode",j:[he("code")]},Sa:{name:"checkActionCode",j:[he("code")]},ob:{name:"confirmPasswordReset",j:[he("code"),he("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[he("email"),he("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[he("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[he("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Tt(Dt(),ca(),"nextOrObserver"),ca("opt_error",!0),ca("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Tt(Dt(),ca(),"nextOrObserver"),ca("opt_error",!0),ca("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[he("email"),Tt(Dt("opt_actionCodeSettings",!0),Xr(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[he("email"),Dt("actionCodeSettings")]},yb:{name:"setPersistence",j:[he("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Ki()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Ki()]},Tc:{name:"signInWithCustomToken",j:[he("token")]},Uc:{name:"signInWithEmailAndPassword",j:[he("email"),he("password")]},Vc:{name:"signInWithEmailLink",j:[he("email"),he("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[he("phoneNumber"),Yh()]},Xc:{name:"signInWithPopup",j:[ha()]},Yc:{name:"signInWithRedirect",j:[ha()]},dd:{name:"updateCurrentUser",j:[Tt(function(i){return{name:"user",K:"an instance of Firebase User",optional:!1,M:function(a){return!!(a&&a instanceof Wn)}}}(),Xr(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[he(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[he("url"),Dt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[he("code")]}}),o_(Cr.prototype,{lc:{name:"languageCode",lb:Tt(he(),Xr(),"languageCode")},ti:{name:"tenantId",lb:Tt(he(),Xr(),"tenantId")}}),Cr.Persistence=ra,Cr.Persistence.LOCAL="local",Cr.Persistence.SESSION="session",Cr.Persistence.NONE="none",pt(Wn.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[lv("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[lv("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Ki()]},rb:{name:"linkWithCredential",j:[Ki()]},Dc:{name:"linkWithPhoneNumber",j:[he("phoneNumber"),Yh()]},Ec:{name:"linkWithPopup",j:[ha()]},Fc:{name:"linkWithRedirect",j:[ha()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ki()]},ub:{name:"reauthenticateWithCredential",j:[Ki()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[he("phoneNumber"),Yh()]},Nc:{name:"reauthenticateWithPopup",j:[ha()]},Oc:{name:"reauthenticateWithRedirect",j:[ha()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Tt(Dt("opt_actionCodeSettings",!0),Xr(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[he(null,!0)]},cd:{name:"unlink",j:[he("provider")]},Cb:{name:"updateEmail",j:[he("email")]},Db:{name:"updatePassword",j:[he("password")]},ed:{name:"updatePhoneNumber",j:[Ki("phone")]},Eb:{name:"updateProfile",j:[Dt("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[he("email"),Tt(Dt("opt_actionCodeSettings",!0),Xr(null,!0),"opt_actionCodeSettings",!0)]}}),pt(la.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),pt(al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),pt(Re.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),o_(E1.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:lv("appVerificationDisabledForTesting")}}),pt(Tg.prototype,{confirm:{name:"confirm",j:[he("verificationCode")]}}),jt(Zs,"fromJSON",function(i){i=typeof i=="string"?JSON.parse(i):i;for(var a,l=[HD,GD,WD,KD],d=0;d<l.length;d++)if(a=l[d](i))return a;return null},[Tt(he(),Dt(),"json")]),jt(dr,"credential",function(i,a){return new Bi(i,a)},[he("email"),he("password")]),pt(Bi.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),pt(Bo.prototype,{Ca:{name:"addScope",j:[he("scope")]},Ka:{name:"setCustomParameters",j:[Dt("customOAuthParameters")]}}),jt(Bo,"credential",aS,[Tt(he(),Dt(),"token")]),jt(dr,"credentialWithLink",hS,[he("email"),he("emailLink")]),pt(zo.prototype,{Ca:{name:"addScope",j:[he("scope")]},Ka:{name:"setCustomParameters",j:[Dt("customOAuthParameters")]}}),jt(zo,"credential",uS,[Tt(he(),Dt(),"token")]),pt(qo.prototype,{Ca:{name:"addScope",j:[he("scope")]},Ka:{name:"setCustomParameters",j:[Dt("customOAuthParameters")]}}),jt(qo,"credential",lS,[Tt(he(),Tt(Dt(),Xr()),"idToken"),Tt(he(),Xr(),"accessToken",!0)]),pt(ta.prototype,{Ka:{name:"setCustomParameters",j:[Dt("customOAuthParameters")]}}),jt(ta,"credential",cS,[Tt(he(),Dt(),"token"),he("secret",!0)]),pt(Gn.prototype,{Ca:{name:"addScope",j:[he("scope")]},credential:{name:"credential",j:[Tt(he(),Tt(Dt(),Xr()),"optionsOrIdToken"),Tt(he(),Xr(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Dt("customOAuthParameters")]}}),pt(di.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),pt($o.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),jt(pi,"credential",fS,[he("verificationId"),he("verificationCode")]),pt(pi.prototype,{gb:{name:"verifyPhoneNumber",j:[Tt(he(),function(i,a){return{name:i||"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(l){return l?l.session&&l.phoneNumber?cv(l.session,Vu)&&typeof l.phoneNumber=="string":l.session&&l.multiFactorHint?cv(l.session,vh)&&i_(l.multiFactorHint):l.session&&l.multiFactorUid?cv(l.session,vh)&&typeof l.multiFactorUid=="string":l.phoneNumber?typeof l.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Yh()]}}),pt(zi.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),pt(T.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),pt(zu.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),pt(Pm.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),pt(Cg.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),pt(kg.prototype,{Rc:{name:"resolveSignIn",j:[r_()]}}),pt(Dg.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[r_(),he("displayName",!0)]},bd:{name:"unenroll",j:[Tt({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:i_},he(),"multiFactorInfoIdentifier")]}}),pt(uv.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),jt(Em,"parseLink",zb,[he("link")]),jt(tv,"assertion",function(i){return new C1(i)},[Ki("phone")]),function(){if(typeof de<"u"&&de.INTERNAL&&de.INTERNAL.registerComponent){var i={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ch,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Nm,VERIFY_AND_CHANGE_EMAIL:Uu,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Cr,AuthCredential:Zs,Error:T};jt(i,"EmailAuthProvider",dr,[]),jt(i,"FacebookAuthProvider",Bo,[]),jt(i,"GithubAuthProvider",zo,[]),jt(i,"GoogleAuthProvider",qo,[]),jt(i,"TwitterAuthProvider",ta,[]),jt(i,"OAuthProvider",Gn,[he("providerId")]),jt(i,"SAMLAuthProvider",sS,[he("providerId")]),jt(i,"PhoneAuthProvider",pi,[bO()]),jt(i,"RecaptchaVerifier",uv,[Tt(he(),xO(),"recaptchaContainer"),Dt("recaptchaParameters",!0),SO()]),jt(i,"ActionCodeURL",Em,[]),jt(i,"PhoneMultiFactorGenerator",tv,[]),de.INTERNAL.registerComponent({name:"auth",instanceFactory:function(a){return a=a.getProvider("app").getImmediate(),new Cr(a)},multipleInstances:!1,serviceProps:i,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(a){a.getProvider("auth-internal").initialize()}}),de.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(a){return a=a.getProvider("auth").getImmediate(),{getUid:x(a.getUid,a),getToken:x(a.nc,a),addAuthTokenListener:x(a.cc,a),removeAuthTokenListener:x(a.Pc,a)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),de.registerVersion("@firebase/auth","0.16.8"),de.INTERNAL.extendNamespace({User:Wn})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gy=function(e,t){return Gy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Gy(e,t)};function QF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Cj(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var XF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ce,ww=ww||{},Ie=XF||self;function yd(){}function Wy(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function up(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function JF(e,t,n){return e.call.apply(e.bind,arguments)}function ZF(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),e.apply(t,o)}}return function(){return e.apply(t,arguments)}}function tn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?tn=JF:tn=ZF,tn.apply(null,arguments)}function mf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function on(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,o,s){for(var u=Array(arguments.length-2),c=2;c<arguments.length;c++)u[c-2]=arguments[c];return t.prototype[o].apply(r,u)}}function To(){this.s=this.s,this.o=this.o}var eU=0;To.prototype.s=!1;To.prototype.na=function(){!this.s&&(this.s=!0,this.M(),eU!=0)};To.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Aj=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Dj=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in o&&t.call(n,o[s],s,e)};function tU(e){e:{for(var t=GU,n=e.length,r=typeof e=="string"?e.split(""):e,o=0;o<n;o++)if(o in r&&t.call(void 0,r[o],o,e)){t=o;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function wN(e){return Array.prototype.concat.apply([],arguments)}function xw(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function wd(e){return/^[\s\xa0]*$/.test(e)}var xN=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function En(e,t){return e.indexOf(t)!=-1}function $v(e,t){return e<t?-1:e>t?1:0}var In;e:{var bN=Ie.navigator;if(bN){var SN=bN.userAgent;if(SN){In=SN;break e}}In=""}function bw(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Rj(e){var t={};for(var n in e)t[n]=e[n];return t}var _N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mj(e,t){for(var n,r,o=1;o<arguments.length;o++){r=arguments[o];for(n in r)e[n]=r[n];for(var s=0;s<_N.length;s++)n=_N[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Sw(e){return Sw[" "](e),e}Sw[" "]=yd;function nU(e){var t=oU;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var rU=En(In,"Opera"),Ya=En(In,"Trident")||En(In,"MSIE"),Oj=En(In,"Edge"),Yy=Oj||Ya,Lj=En(In,"Gecko")&&!(En(In.toLowerCase(),"webkit")&&!En(In,"Edge"))&&!(En(In,"Trident")||En(In,"MSIE"))&&!En(In,"Edge"),iU=En(In.toLowerCase(),"webkit")&&!En(In,"Edge");function Pj(){var e=Ie.document;return e?e.documentMode:void 0}var xd;e:{var Vv="",Bv=function(){var e=In;if(Lj)return/rv:([^\);]+)(\)|;)/.exec(e);if(Oj)return/Edge\/([\d\.]+)/.exec(e);if(Ya)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(iU)return/WebKit\/(\S+)/.exec(e);if(rU)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Bv&&(Vv=Bv?Bv[1]:""),Ya){var zv=Pj();if(zv!=null&&zv>parseFloat(Vv)){xd=String(zv);break e}}xd=Vv}var oU={};function sU(){return nU(function(){for(var e=0,t=xN(String(xd)).split("."),n=xN("9").split("."),r=Math.max(t.length,n.length),o=0;e==0&&o<r;o++){var s=t[o]||"",u=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],s[0].length==0&&u[0].length==0)break;e=$v(s[1].length==0?0:parseInt(s[1],10),u[1].length==0?0:parseInt(u[1],10))||$v(s[2].length==0,u[2].length==0)||$v(s[2],u[2]),s=s[3],u=u[3]}while(e==0)}return 0<=e})}var Qy;if(Ie.document&&Ya){var NN=Pj();Qy=NN||parseInt(xd,10)||void 0}else Qy=void 0;var aU=Qy,uU=function(){if(!Ie.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ie.addEventListener("test",yd,t),Ie.removeEventListener("test",yd,t)}catch{}return e}();function vn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}vn.prototype.h=function(){this.defaultPrevented=!0};function sc(e,t){if(vn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Lj){e:{try{Sw(t.nodeName);var o=!0;break e}catch{}o=!1}o||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:lU[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&sc.Z.h.call(this)}}on(sc,vn);var lU={2:"touch",3:"pen",4:"mouse"};sc.prototype.h=function(){sc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var lp="closure_listenable_"+(1e6*Math.random()|0),cU=0;function hU(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=o,this.key=++cU,this.ca=this.fa=!1}function cp(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function hp(e){this.src=e,this.g={},this.h=0}hp.prototype.add=function(e,t,n,r,o){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var u=Jy(e,t,r,o);return-1<u?(t=e[u],n||(t.fa=!1)):(t=new hU(t,this.src,s,!!r,o),t.fa=n,e.push(t)),t};function Xy(e,t){var n=t.type;if(n in e.g){var r=e.g[n],o=Aj(r,t),s;(s=0<=o)&&Array.prototype.splice.call(r,o,1),s&&(cp(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Jy(e,t,n,r){for(var o=0;o<e.length;++o){var s=e[o];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return o}return-1}var _w="closure_lm_"+(1e6*Math.random()|0),qv={};function Fj(e,t,n,r,o){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Fj(e,t[s],n,r,o);return null}return n=Vj(n),e&&e[lp]?e.N(t,n,up(r)?!!r.capture:!1,o):fU(e,t,n,!1,r,o)}function fU(e,t,n,r,o,s){if(!t)throw Error("Invalid event type");var u=up(o)?!!o.capture:!!o,c=Ew(e);if(c||(e[_w]=c=new hp(e)),n=c.add(t,n,r,u,s),n.proxy)return n;if(r=dU(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)uU||(o=u),o===void 0&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent($j(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function dU(){function e(n){return t.call(e.src,e.listener,n)}var t=pU;return e}function Uj(e,t,n,r,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)Uj(e,t[s],n,r,o);else r=up(r)?!!r.capture:!!r,n=Vj(n),e&&e[lp]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=Jy(s,n,r,o),-1<n&&(cp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Ew(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Jy(t,n,r,o)),(n=-1<e?t[e]:null)&&Nw(n))}function Nw(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[lp])Xy(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($j(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ew(t))?(Xy(n,e),n.h==0&&(n.src=null,t[_w]=null)):cp(e)}}}function $j(e){return e in qv?qv[e]:qv[e]="on"+e}function pU(e,t){if(e.ca)e=!0;else{t=new sc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Nw(e),e=n.call(r,t)}return e}function Ew(e){return e=e[_w],e instanceof hp?e:null}var Kv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vj(e){return typeof e=="function"?e:(e[Kv]||(e[Kv]=function(t){return e.handleEvent(t)}),e[Kv])}function Wt(){To.call(this),this.i=new hp(this),this.P=this,this.I=null}on(Wt,To);Wt.prototype[lp]=!0;Wt.prototype.removeEventListener=function(e,t,n,r){Uj(this,e,t,n,r)};function nn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new vn(t,e);else if(t instanceof vn)t.target=t.target||e;else{var o=t;t=new vn(r,e),Mj(t,o)}if(o=!0,n)for(var s=n.length-1;0<=s;s--){var u=t.g=n[s];o=gf(u,r,!0,t)&&o}if(u=t.g=e,o=gf(u,r,!0,t)&&o,o=gf(u,r,!1,t)&&o,n)for(s=0;s<n.length;s++)u=t.g=n[s],o=gf(u,r,!1,t)&&o}Wt.prototype.M=function(){if(Wt.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)cp(n[r]);delete e.g[t],e.h--}}this.I=null};Wt.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Wt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function gf(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var o=!0,s=0;s<t.length;++s){var u=t[s];if(u&&!u.ca&&u.capture==n){var c=u.listener,f=u.ia||u.src;u.fa&&Xy(e.i,u),o=c.call(f,r)!==!1&&o}}return o&&!r.defaultPrevented}var Iw=Ie.JSON.stringify;function mU(){var e=zj,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gU=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=Bj.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),Bj=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new vU},function(e){return e.reset()}),vU=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function yU(e){Ie.setTimeout(function(){throw e},0)}function Tw(e,t){Zy||wU(),e0||(Zy(),e0=!0),zj.add(e,t)}var Zy;function wU(){var e=Ie.Promise.resolve(void 0);Zy=function(){e.then(xU)}}var e0=!1,zj=new gU;function xU(){for(var e;e=mU();){try{e.h.call(e.g)}catch(n){yU(n)}var t=Bj;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}e0=!1}function fp(e,t){Wt.call(this),this.h=e||1,this.g=t||Ie,this.j=tn(this.kb,this),this.l=Date.now()}on(fp,Wt);ce=fp.prototype;ce.da=!1;ce.S=null;ce.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),nn(this,"tick"),this.da&&(jw(this),this.start()))}};ce.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jw(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}ce.M=function(){fp.Z.M.call(this),jw(this),delete this.g};function kw(e,t,n){if(typeof e=="function")n&&(e=tn(e,n));else if(e&&typeof e.handleEvent=="function")e=tn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Ie.setTimeout(e,t||0)}function qj(e){e.g=kw(function(){e.g=null,e.i&&(e.i=!1,qj(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var bU=function(e){QF(t,e);function t(n,r){var o=e.call(this)||this;return o.m=n,o.j=r,o.h=null,o.i=!1,o.g=null,o}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:qj(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(Ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(To);function ac(e){To.call(this),this.h=e,this.g={}}on(ac,To);var EN=[];function Kj(e,t,n,r){Array.isArray(n)||(n&&(EN[0]=n.toString()),n=EN);for(var o=0;o<n.length;o++){var s=Fj(t,n[o],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Hj(e){bw(e.g,function(t,n){this.g.hasOwnProperty(n)&&Nw(t)},e),e.g={}}ac.prototype.M=function(){ac.Z.M.call(this),Hj(this)};ac.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function dp(){this.g=!0}dp.prototype.Aa=function(){this.g=!1};function SU(e,t,n,r,o,s){e.info(function(){if(e.g)if(s)for(var u="",c=s.split("&"),f=0;f<c.length;f++){var p=c[f].split("=");if(1<p.length){var m=p[0];p=p[1];var v=m.split("_");u=2<=v.length&&v[1]=="type"?u+(m+"="+p+"&"):u+(m+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+`
`+n+`
`+u})}function _U(e,t,n,r,o,s,u){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+`
`+n+`
`+s+" "+u})}function Da(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+EU(e,n)+(r?" "+r:"")})}function NU(e,t){e.info(function(){return"TIMEOUT: "+t})}dp.prototype.info=function(){};function EU(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var s=o[0];if(s!="noop"&&s!="stop"&&s!="close")for(var u=1;u<o.length;u++)o[u]=""}}}}return Iw(n)}catch{return t}}var Ds={},IN=null;function pp(){return IN=IN||new Wt}Ds.Ma="serverreachability";function Gj(e){vn.call(this,Ds.Ma,e)}on(Gj,vn);function uc(e){var t=pp();nn(t,new Gj(t))}Ds.STAT_EVENT="statevent";function Wj(e,t){vn.call(this,Ds.STAT_EVENT,e),this.stat=t}on(Wj,vn);function Tn(e){var t=pp();nn(t,new Wj(t,e))}Ds.Na="timingevent";function Yj(e,t){vn.call(this,Ds.Na,e),this.size=t}on(Yj,vn);function Cc(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Ie.setTimeout(function(){e()},t)}var mp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Qj={};function Cw(){}Cw.prototype.h=null;function TN(e){return e.h||(e.h=e.i())}function Xj(){}var Ac={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Aw(){vn.call(this,"d")}on(Aw,vn);function Dw(){vn.call(this,"c")}on(Dw,vn);var t0;function gp(){}on(gp,Cw);gp.prototype.g=function(){return new XMLHttpRequest};gp.prototype.i=function(){return{}};t0=new gp;function Dc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ac(this),this.P=IU,e=Yy?125:void 0,this.W=new fp(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jj}function Jj(){this.i=null,this.g="",this.h=!1}var IU=45e3,n0={},bd={};ce=Dc.prototype;ce.setTimeout=function(e){this.P=e};function r0(e,t,n){e.K=1,e.v=yp(Ai(t)),e.s=n,e.U=!0,Zj(e,null)}function Zj(e,t){e.F=Date.now(),Rc(e),e.A=Ai(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),sk(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Jj,e.g=Ik(e.l,n?t:null,!e.s),0<e.O&&(e.L=new bU(tn(e.Ia,e,e.g),e.O)),Kj(e.V,e.g,"readystatechange",e.gb),t=e.H?Rj(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),uc(),SU(e.j,e.u,e.A,e.m,e.X,e.s)}ce.gb=function(e){e=e.target;var t=this.L;t&&bi(e)==3?t.l():this.Ia(e)};ce.Ia=function(e){try{if(e==this.g)e:{var t=bi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||Yy||this.g&&(this.h.h||this.g.ga()||AN(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?uc(3):uc(2)),vp(this);var o=this.g.ba();this.N=o;t:if(ek(this)){var s=AN(this.g);e="";var u=s.length,c=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),Ml(this);var f="";break t}this.h.i=new Ie.TextDecoder}for(n=0;n<u;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:c&&n==u-1});s.splice(0,u),this.h.g+=e,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=o==200,_U(this.j,this.u,this.A,this.m,this.X,t,o),this.i){if(this.$&&!this.J){t:{if(this.g){var p,m=this.g;if((p=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wd(p)){var v=p;break t}}v=null}if(o=v)Da(this.j,this.m,o,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,i0(this,o);else{this.i=!1,this.o=3,Tn(12),ss(this),Ml(this);break e}}this.U?(tk(this,t,f),Yy&&this.i&&t==3&&(Kj(this.V,this.W,"tick",this.fb),this.W.start())):(Da(this.j,this.m,f,null),i0(this,f)),t==4&&ss(this),this.i&&!this.I&&(t==4?Sk(this.l,this):(this.i=!1,Rc(this)))}else o==400&&0<f.indexOf("Unknown SID")?(this.o=3,Tn(12)):(this.o=0,Tn(13)),ss(this),Ml(this)}}}catch{}finally{}};function ek(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function tk(e,t,n){for(var r=!0,o;!e.I&&e.C<n.length;)if(o=TU(e,n),o==bd){t==4&&(e.o=4,Tn(14),r=!1),Da(e.j,e.m,null,"[Incomplete Response]");break}else if(o==n0){e.o=4,Tn(15),Da(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Da(e.j,e.m,o,null),i0(e,o);ek(e)&&o!=bd&&o!=n0&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Tn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vw(t),t.L=!0,Tn(11))):(Da(e.j,e.m,n,"[Invalid Chunked Response]"),ss(e),Ml(e))}ce.fb=function(){if(this.g){var e=bi(this.g),t=this.g.ga();this.C<t.length&&(vp(this),tk(this,e,t),this.i&&e!=4&&Rc(this))}};function TU(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?bd:(n=Number(t.substring(n,r)),isNaN(n)?n0:(r+=1,r+n>t.length?bd:(t=t.substr(r,n),e.C=r+n,t)))}ce.cancel=function(){this.I=!0,ss(this)};function Rc(e){e.Y=Date.now()+e.P,nk(e,e.P)}function nk(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Cc(tn(e.eb,e),t)}function vp(e){e.B&&(Ie.clearTimeout(e.B),e.B=null)}ce.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(NU(this.j,this.A),this.K!=2&&(uc(),Tn(17)),ss(this),this.o=2,Ml(this)):nk(this,this.Y-e)};function Ml(e){e.l.G==0||e.I||Sk(e.l,e)}function ss(e){vp(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,jw(e.W),Hj(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function i0(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||o0(n.i,e))){if(n.I=e.N,!e.J&&o0(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var o=r;if(o[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Ed(n),bp(n);else break e;$w(n),Tn(18)}}else n.ta=o[1],0<n.ta-n.U&&37500>o[2]&&n.N&&n.A==0&&!n.v&&(n.v=Cc(tn(n.ab,n),6e3));if(1>=lk(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else as(n,11)}else if((e.J||n.g==e)&&Ed(n),!wd(t))for(o=n.Ca.g.parse(t),t=0;t<o.length;t++){var s=o[t];if(n.U=s[0],s=s[1],n.G==2)if(s[0]=="c"){n.J=s[1],n.la=s[2];var u=s[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));var c=s[4];c!=null&&(n.za=c,n.h.info("SVER="+n.za));var f=s[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var p=e.g;if(p){var m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var v=r.i;!v.g&&(En(m,"spdy")||En(m,"quic")||En(m,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(Ow(v,v.h),v.h=null))}if(r.D){var y=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.sa=y,ht(r.F,r.D,y))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var w=e;if(r.oa=Ek(r,r.H?r.la:null,r.W),w.J){ck(r.i,w);var _=w,S=r.K;S&&_.setTimeout(S),_.B&&(vp(_),Rc(_)),r.g=w}else xk(r);0<n.l.length&&Sp(n)}else s[0]!="stop"&&s[0]!="close"||as(n,7);else n.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?as(n,7):Uw(n):s[0]!="noop"&&n.j&&n.j.wa(s),n.A=0)}}uc(4)}catch{}}function jU(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(Wy(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function Rw(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Wy(e)||typeof e=="string")Dj(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(Wy(e)||typeof e=="string"){n=[];for(var r=e.length,o=0;o<r;o++)n.push(o)}else for(o in n=[],r=0,e)n[r++]=o;r=jU(e),o=r.length;for(var s=0;s<o;s++)t.call(void 0,r[s],n&&n[s],e)}}function gu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof gu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}ce=gu.prototype;ce.R=function(){Mw(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};ce.T=function(){return Mw(this),this.g.concat()};function Mw(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];_s(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var o={};for(n=t=0;t<e.g.length;)r=e.g[t],_s(o,r)||(e.g[n++]=r,o[r]=1),t++;e.g.length=n}}ce.get=function(e,t){return _s(this.h,e)?this.h[e]:t};ce.set=function(e,t){_s(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};ce.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var o=n[r],s=this.get(o);e.call(t,s,o,this)}};function _s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var rk=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kU(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var s=e[n].substring(0,r);o=e[n].substring(r+1)}else s=e[n];t(s,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function Ns(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ns){this.g=t!==void 0?t:e.g,Sd(this,e.j),this.s=e.s,_d(this,e.i),Nd(this,e.m),this.l=e.l,t=e.h;var n=new lc;n.i=t.i,t.g&&(n.g=new gu(t.g),n.h=t.h),jN(this,n),this.o=e.o}else e&&(n=String(e).match(rk))?(this.g=!!t,Sd(this,n[1]||"",!0),this.s=Ol(n[2]||""),_d(this,n[3]||"",!0),Nd(this,n[4]),this.l=Ol(n[5]||"",!0),jN(this,n[6]||"",!0),this.o=Ol(n[7]||"")):(this.g=!!t,this.h=new lc(null,this.g))}Ns.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_l(t,kN,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(_l(t,kN,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(_l(n,n.charAt(0)=="/"?MU:RU,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",_l(n,LU)),e.join("")};function Ai(e){return new Ns(e)}function Sd(e,t,n){e.j=n?Ol(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function _d(e,t,n){e.i=n?Ol(t,!0):t}function Nd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function jN(e,t,n){t instanceof lc?(e.h=t,PU(e.h,e.g)):(n||(t=_l(t,OU)),e.h=new lc(t,e.g))}function ht(e,t,n){e.h.set(t,n)}function yp(e){return ht(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function CU(e){return e instanceof Ns?Ai(e):new Ns(e,void 0)}function AU(e,t,n,r){var o=new Ns(null,void 0);return e&&Sd(o,e),t&&_d(o,t),n&&Nd(o,n),r&&(o.l=r),o}function Ol(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _l(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,DU),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function DU(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var kN=/[#\/\?@]/g,RU=/[#\?:]/g,MU=/[#\?]/g,OU=/[#\?@]/g,LU=/#/g;function lc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jo(e){e.g||(e.g=new gu,e.h=0,e.i&&kU(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ce=lc.prototype;ce.add=function(e,t){jo(this),this.i=null,e=vu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function ik(e,t){jo(e),t=vu(e,t),_s(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,_s(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Mw(e)))}function ok(e,t){return jo(e),t=vu(e,t),_s(e.g.h,t)}ce.forEach=function(e,t){jo(this),this.g.forEach(function(n,r){Dj(n,function(o){e.call(t,o,r,this)},this)},this)};ce.T=function(){jo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var o=e[r],s=0;s<o.length;s++)n.push(t[r]);return n};ce.R=function(e){jo(this);var t=[];if(typeof e=="string")ok(this,e)&&(t=wN(t,this.g.get(vu(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=wN(t,e[n])}return t};ce.set=function(e,t){return jo(this),this.i=null,e=vu(this,e),ok(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ce.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function sk(e,t,n){ik(e,t),0<n.length&&(e.i=null,e.g.set(vu(e,t),xw(n)),e.h+=n.length)}ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],o=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=o;r[s]!==""&&(u+="="+encodeURIComponent(String(r[s]))),e.push(u)}}return this.i=e.join("&")};function vu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function PU(e,t){t&&!e.j&&(jo(e),e.i=null,e.g.forEach(function(n,r){var o=r.toLowerCase();r!=o&&(ik(this,r),sk(this,o,n))},e)),e.j=t}var FU=function(){function e(t,n){this.h=t,this.g=n}return e}();function ak(e){this.l=e||UU,Ie.PerformanceNavigationTiming?(e=Ie.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Ie.g&&Ie.g.Ea&&Ie.g.Ea()&&Ie.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var UU=10;function uk(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function lk(e){return e.h?1:e.g?e.g.size:0}function o0(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Ow(e,t){e.g?e.g.add(t):e.h=t}function ck(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ak.prototype.cancel=function(){var e,t;if(this.i=hk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=Cj(this.g.values()),r=n.next();!r.done;r=n.next()){var o=r.value;o.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};function hk(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var o=Cj(e.g.values()),s=o.next();!s.done;s=o.next()){var u=s.value;r=r.concat(u.D)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return xw(e.i)}function Lw(){}Lw.prototype.stringify=function(e){return Ie.JSON.stringify(e,void 0)};Lw.prototype.parse=function(e){return Ie.JSON.parse(e,void 0)};function $U(){this.g=new Lw}function VU(e,t,n){var r=n||"";try{Rw(e,function(o,s){var u=o;up(o)&&(u=Iw(o)),t.push(r+s+"="+encodeURIComponent(u))})}catch(o){throw t.push(r+"type="+encodeURIComponent("_badmap")),o}}function BU(e,t){var n=new dp;if(Ie.Image){var r=new Image;r.onload=mf(vf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mf(vf,n,r,"TestLoadImage: error",!1,t),r.onabort=mf(vf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mf(vf,n,r,"TestLoadImage: timeout",!1,t),Ie.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function vf(e,t,n,r,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(r)}catch{}}function Mc(e){this.l=e.$b||null,this.j=e.ib||!1}on(Mc,Cw);Mc.prototype.g=function(){return new wp(this.l,this.j)};Mc.prototype.i=function(e){return function(){return e}}({});function wp(e,t){Wt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Pw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}on(wp,Wt);var Pw=0;ce=wp.prototype;ce.open=function(e,t){if(this.readyState!=Pw)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,cc(this)};ce.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ie).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=Pw};ce.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,cc(this)),this.g&&(this.readyState=3,cc(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ie.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fk(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function fk(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}ce.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Oc(this):cc(this),this.readyState==3&&fk(this)}};ce.Ua=function(e){this.g&&(this.response=this.responseText=e,Oc(this))};ce.Ta=function(e){this.g&&(this.response=e,Oc(this))};ce.ha=function(){this.g&&Oc(this)};function Oc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,cc(e)}ce.setRequestHeader=function(e,t){this.v.append(e,t)};ce.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ce.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function cc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(wp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var zU=Ie.JSON.parse;function Ft(e){Wt.call(this),this.headers=new gu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=dk,this.K=this.L=!1}on(Ft,Wt);var dk="",qU=/^https?$/i,KU=["POST","PUT"];ce=Ft.prototype;ce.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():t0.g(),this.C=this.u?TN(this.u):TN(t0),this.g.onreadystatechange=tn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){CN(this,s);return}e=n||"";var o=new gu(this.headers);r&&Rw(r,function(s,u){o.set(u,s)}),r=tU(o.T()),n=Ie.FormData&&e instanceof Ie.FormData,!(0<=Aj(KU,t))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gk(this),0<this.B&&((this.K=HU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tn(this.pa,this)):this.A=kw(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){CN(this,s)}};function HU(e){return Ya&&sU()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function GU(e){return e.toLowerCase()=="content-type"}ce.pa=function(){typeof ww<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nn(this,"timeout"),this.abort(8))};function CN(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,pk(e),xp(e)}function pk(e){e.D||(e.D=!0,nn(e,"complete"),nn(e,"error"))}ce.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,nn(this,"complete"),nn(this,"abort"),xp(this))};ce.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xp(this,!0)),Ft.Z.M.call(this)};ce.Fa=function(){this.s||(this.F||this.v||this.l?mk(this):this.cb())};ce.cb=function(){mk(this)};function mk(e){if(e.h&&typeof ww<"u"&&(!e.C[1]||bi(e)!=4||e.ba()!=2)){if(e.v&&bi(e)==4)kw(e.Fa,0,e);else if(nn(e,"readystatechange"),bi(e)==4){e.h=!1;try{var t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var o;if(o=t===0){var s=String(e.H).match(rk)[1]||null;if(!s&&Ie.self&&Ie.self.location){var u=Ie.self.location.protocol;s=u.substr(0,u.length-1)}o=!qU.test(s?s.toLowerCase():"")}r=o}if(r)nn(e,"complete"),nn(e,"success");else{e.m=6;try{var c=2<bi(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",pk(e)}}finally{xp(e)}}}}function xp(e,t){if(e.g){gk(e);var n=e.g,r=e.C[0]?yd:null;e.g=null,e.C=null,t||nn(e,"ready");try{n.onreadystatechange=r}catch{}}}function gk(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ie.clearTimeout(e.A),e.A=null)}function bi(e){return e.g?e.g.readyState:0}ce.ba=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}};ce.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};ce.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),zU(t)}};function AN(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case dk:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}ce.Da=function(){return this.m};ce.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function WU(e){var t="";return bw(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Fw(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=WU(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):ht(e,t,n))}function gl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vk(e){this.za=0,this.l=[],this.h=new dp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gl("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gl("baseRetryDelayMs",5e3,e),this.$a=gl("retryDelaySeedMs",1e4,e),this.Ya=gl("forwardChannelMaxRetries",2,e),this.ra=gl("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ak(e&&e.concurrentRequestLimit),this.Ca=new $U,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}ce=vk.prototype;ce.ma=8;ce.G=1;function Uw(e){if(yk(e),e.G==3){var t=e.V++,n=Ai(e.F);ht(n,"SID",e.J),ht(n,"RID",t),ht(n,"TYPE","terminate"),Lc(e,n),t=new Dc(e,e.h,t,void 0),t.K=2,t.v=yp(Ai(n)),n=!1,Ie.navigator&&Ie.navigator.sendBeacon&&(n=Ie.navigator.sendBeacon(t.v.toString(),"")),!n&&Ie.Image&&(new Image().src=t.v,n=!0),n||(t.g=Ik(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Rc(t)}Nk(e)}ce.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function bp(e){e.g&&(Vw(e),e.g.cancel(),e.g=null)}function yk(e){bp(e),e.u&&(Ie.clearTimeout(e.u),e.u=null),Ed(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Ie.clearTimeout(e.m),e.m=null)}function Hv(e,t){e.l.push(new FU(e.Za++,t)),e.G==3&&Sp(e)}function Sp(e){uk(e.i)||e.m||(e.m=!0,Tw(e.Ha,e),e.C=0)}function YU(e,t){return lk(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=Cc(tn(e.Ha,e,t),_k(e,e.C)),e.C++,!0)}ce.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Dc(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=Rj(n),Mj(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)e:{for(var r=0,o=0;o<this.l.length;o++){t:{var s=this.l[o];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=o;break e}if(r===4096||o===this.l.length-1){r=o+1;break e}}r=1e3}else r=1e3;r=wk(this,t,r),o=Ai(this.F),ht(o,"RID",e),ht(o,"CVER",22),this.D&&ht(o,"X-HTTP-Session-Id",this.D),Lc(this,o),this.o&&n&&Fw(o,this.o,n),Ow(this.i,t),this.Ra&&ht(o,"TYPE","init"),this.ja?(ht(o,"$req",r),ht(o,"SID","null"),t.$=!0,r0(t,o,null)):r0(t,o,r),this.G=2}}else this.G==3&&(e?DN(this,e):this.l.length==0||uk(this.i)||DN(this))};function DN(e,t){var n;t?n=t.m:n=e.V++;var r=Ai(e.F);ht(r,"SID",e.J),ht(r,"RID",n),ht(r,"AID",e.U),Lc(e,r),e.o&&e.s&&Fw(r,e.o,e.s),n=new Dc(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=wk(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ow(e.i,n),r0(n,r,t)}function Lc(e,t){e.j&&Rw({},function(n,r){ht(t,r,n)})}function wk(e,t,n){n=Math.min(e.l.length,n);var r=e.j?tn(e.j.Oa,e.j,e):null;e:for(var o=e.l,s=-1;;){var u=["count="+n];s==-1?0<n?(s=o[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);for(var c=!0,f=0;f<n;f++){var p=o[f].h,m=o[f].g;if(p-=s,0>p)s=Math.max(0,o[f].h-100),c=!1;else try{VU(m,u,"req"+p+"_")}catch{r&&r(m)}}if(c){r=u.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function xk(e){e.g||e.u||(e.Y=1,Tw(e.Ga,e),e.A=0)}function $w(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=Cc(tn(e.Ga,e),_k(e,e.A)),e.A++,!0)}ce.Ga=function(){if(this.u=null,bk(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Cc(tn(this.bb,this),e)}};ce.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Tn(10),bp(this),bk(this))};function Vw(e){e.B!=null&&(Ie.clearTimeout(e.B),e.B=null)}function bk(e){e.g=new Dc(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Ai(e.oa);ht(t,"RID","rpc"),ht(t,"SID",e.J),ht(t,"CI",e.N?"0":"1"),ht(t,"AID",e.U),Lc(e,t),ht(t,"TYPE","xmlhttp"),e.o&&e.s&&Fw(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=yp(Ai(t)),n.s=null,n.U=!0,Zj(n,e)}ce.ab=function(){this.v!=null&&(this.v=null,bp(this),$w(this),Tn(19))};function Ed(e){e.v!=null&&(Ie.clearTimeout(e.v),e.v=null)}function Sk(e,t){var n=null;if(e.g==t){Ed(e),Vw(e),e.g=null;var r=2}else if(o0(e.i,t))n=t.D,ck(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var o=e.C;r=pp(),nn(r,new Yj(r,n)),Sp(e)}else xk(e);else if(o=t.o,o==3||o==0&&0<e.I||!(r==1&&YU(e,t)||r==2&&$w(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),o){case 1:as(e,5);break;case 4:as(e,10);break;case 3:as(e,6);break;default:as(e,2)}}}function _k(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function as(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=tn(e.jb,e);n||(n=new Ns("//www.google.com/images/cleardot.gif"),Ie.location&&Ie.location.protocol=="http"||Sd(n,"https"),yp(n)),BU(n.toString(),r)}else Tn(2);e.G=0,e.j&&e.j.va(t),Nk(e),yk(e)}ce.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Tn(2)):(this.h.info("Failed to ping google.com"),Tn(1))};function Nk(e){e.G=0,e.I=-1,e.j&&((hk(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,xw(e.l),e.l.length=0),e.j.ua())}function Ek(e,t,n){var r=CU(n);if(r.i!="")t&&_d(r,t+"."+r.i),Nd(r,r.m);else{var o=Ie.location;r=AU(o.protocol,t?t+"."+o.hostname:o.hostname,+o.port,n)}return e.aa&&bw(e.aa,function(s,u){ht(r,u,s)}),t=e.D,n=e.sa,t&&n&&ht(r,t,n),ht(r,"VER",e.ma),Lc(e,r),r}function Ik(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Ft(new Mc({ib:!0})):new Ft(e.qa),t.L=e.H,t}function Tk(){}ce=Tk.prototype;ce.xa=function(){};ce.wa=function(){};ce.va=function(){};ce.ua=function(){};ce.Oa=function(){};function Id(){if(Ya&&!(10<=Number(aU)))throw Error("Environmental error: no available transport.")}Id.prototype.g=function(e,t){return new sr(e,t)};function sr(e,t){Wt.call(this),this.g=new vk(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!wd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!wd(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new yu(this)}on(sr,Wt);sr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Tw(tn(e.hb,e,t))),Tn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ek(e,null,e.W),Sp(e)};sr.prototype.close=function(){Uw(this.g)};sr.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,Hv(this.g,t)}else this.v?(t={},t.__data__=Iw(e),Hv(this.g,t)):Hv(this.g,e)};sr.prototype.M=function(){this.g.j=null,delete this.j,Uw(this.g),delete this.g,sr.Z.M.call(this)};function jk(e){Aw.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}on(jk,Aw);function kk(){Dw.call(this),this.status=1}on(kk,Dw);function yu(e){this.g=e}on(yu,Tk);yu.prototype.xa=function(){nn(this.g,"a")};yu.prototype.wa=function(e){nn(this.g,new jk(e))};yu.prototype.va=function(e){nn(this.g,new kk)};yu.prototype.ua=function(){nn(this.g,"b")};Id.prototype.createWebChannel=Id.prototype.g;sr.prototype.send=sr.prototype.u;sr.prototype.open=sr.prototype.m;sr.prototype.close=sr.prototype.close;mp.NO_ERROR=0;mp.TIMEOUT=8;mp.HTTP_ERROR=6;Qj.COMPLETE="complete";Xj.EventType=Ac;Ac.OPEN="a";Ac.CLOSE="b";Ac.ERROR="c";Ac.MESSAGE="d";Wt.prototype.listen=Wt.prototype.N;Ft.prototype.listenOnce=Ft.prototype.O;Ft.prototype.getLastError=Ft.prototype.La;Ft.prototype.getLastErrorCode=Ft.prototype.Da;Ft.prototype.getStatus=Ft.prototype.ba;Ft.prototype.getResponseJson=Ft.prototype.Qa;Ft.prototype.getResponseText=Ft.prototype.ga;Ft.prototype.send=Ft.prototype.ea;var QU=function(){return new Id},XU=function(){return pp()},Gv=mp,JU=Qj,ZU=Ds,RN={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},e$=Mc,yf=Xj,t$=Ft,n$={};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(o){return r.t(o)},this.i=function(o){return n.writeSequenceNumber(o)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();tr.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=function(e){function t(n,r){var o=this;return(o=e.call(this,r)||this).code=n,o.message=r,o.name="FirebaseError",o.toString=function(){return o.name+": [code="+o.code+"]: "+o.message},o}return be(t,e),t}(Error),Fr=new Ij("@firebase/firestore");function s0(){return Fr.logLevel}function ne(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Fr.logLevel<=qe.DEBUG){var r=t.map(Bw);Fr.debug.apply(Fr,_t(["Firestore (8.10.1): "+e],r))}}function Lt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Fr.logLevel<=qe.ERROR){var r=t.map(Bw);Fr.error.apply(Fr,_t(["Firestore (8.10.1): "+e],r))}}function Td(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Fr.logLevel<=qe.WARN){var r=t.map(Bw);Fr.warn.apply(Fr,_t(["Firestore (8.10.1): "+e],r))}}function Bw(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Lt(t),new Error(t)}function _e(e,t){e||pe()}function ue(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ck=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var o=r$(40),s=0;s<o.length;++s)r.length<20&&o[s]<n&&(r+=t.charAt(o[s]%t.length));return r},e}();function Pe(e,t){return e<t?-1:e>t?1:0}function Qa(e,t,n){return e.length===t.length&&e.every(function(r,o){return n(r,t[o])})}function Ak(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?Pe(this.nanoseconds,t.nanoseconds):Pe(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),Ae=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Bn(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dk(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rk=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&pe(),r===void 0?r=t.length-n:r>t.length-n&&pe(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),o=0;o<r;o++){var s=t.get(o),u=n.get(o);if(s<u)return-1;if(s>u)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),Ke=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t.prototype.construct=function(n,r,o){return new t(n,r,o)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var o=[],s=0,u=n;s<u.length;s++){var c=u[s];if(c.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");o.push.apply(o,c.split("/").filter(function(f){return f.length>0}))}return new t(o)},t.emptyPath=function(){return new t([])},t}(Rk),i$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Br=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t.prototype.construct=function(n,r,o){return new t(n,r,o)},t.isValidIdentifier=function(n){return i$.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],o="",s=0,u=function(){if(o.length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(o),o=""},c=!1;s<n.length;){var f=n[s];if(f==="\\"){if(s+1===n.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var p=n[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);o+=p,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(o+=f,s++):(u(),s++)}if(u(),c)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(Rk),Xa=function(){function e(t){this.fields=t,t.sort(Br.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return Qa(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),zn=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",o=0;o<n.length;++o)r+=String.fromCharCode(n[o]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return Pe(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();zn.EMPTY_BYTE_STRING=new zn("");var o$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(e){if(_e(!!e),typeof e=="string"){var t=0,n=o$.exec(e);if(_e(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var o=new Date(e);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:Mt(e.seconds),nanos:Mt(e.nanos)}}function Mt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ja(e){return typeof e=="string"?zn.fromBase64String(e):zn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mk(e){var t=e.mapValue.fields.__previous_value__;return zw(t)?Mk(t):t}function hc(e){var t=So(e.mapValue.fields.__local_write_time__.timestampValue);return new Bn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(e){return e==null}function jd(e){return e===0&&1/e==-1/0}function Ok(e){return typeof e=="number"&&Number.isInteger(e)&&!jd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(Ke.fromString(t))},e.fromName=function(t){return new e(Ke.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&Ke.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return Ke.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new Ke(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zw(e)?4:10:pe()}function ai(e,t){var n=Es(e);if(n!==Es(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hc(e).isEqual(hc(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;var s=So(r.timestampValue),u=So(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,o){return Ja(r.bytesValue).isEqual(Ja(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,o){return Mt(r.geoPointValue.latitude)===Mt(o.geoPointValue.latitude)&&Mt(r.geoPointValue.longitude)===Mt(o.geoPointValue.longitude)}(e,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Mt(r.integerValue)===Mt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){var s=Mt(r.doubleValue),u=Mt(o.doubleValue);return s===u?jd(s)===jd(u):isNaN(s)&&isNaN(u)}return!1}(e,t);case 9:return Qa(e.arrayValue.values||[],t.arrayValue.values||[],ai);case 10:return function(r,o){var s=r.mapValue.fields||{},u=o.mapValue.fields||{};if(MN(s)!==MN(u))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!ai(s[c],u[c])))return!1;return!0}(e,t);default:return pe()}}function fc(e,t){return(e.values||[]).find(function(n){return ai(n,t)})!==void 0}function Za(e,t){var n=Es(e),r=Es(t);if(n!==r)return Pe(n,r);switch(n){case 0:return 0;case 1:return Pe(e.booleanValue,t.booleanValue);case 2:return function(o,s){var u=Mt(o.integerValue||o.doubleValue),c=Mt(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(e,t);case 3:return ON(e.timestampValue,t.timestampValue);case 4:return ON(hc(e),hc(t));case 5:return Pe(e.stringValue,t.stringValue);case 6:return function(o,s){var u=Ja(o),c=Ja(s);return u.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){for(var u=o.split("/"),c=s.split("/"),f=0;f<u.length&&f<c.length;f++){var p=Pe(u[f],c[f]);if(p!==0)return p}return Pe(u.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){var u=Pe(Mt(o.latitude),Mt(s.latitude));return u!==0?u:Pe(Mt(o.longitude),Mt(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,s){for(var u=o.values||[],c=s.values||[],f=0;f<u.length&&f<c.length;++f){var p=Za(u[f],c[f]);if(p)return p}return Pe(u.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,s){var u=o.fields||{},c=Object.keys(u),f=s.fields||{},p=Object.keys(f);c.sort(),p.sort();for(var m=0;m<c.length&&m<p.length;++m){var v=Pe(c[m],p[m]);if(v!==0)return v;var y=Za(u[c[m]],f[p[m]]);if(y!==0)return y}return Pe(c.length,p.length)}(e.mapValue,t.mapValue);default:throw pe()}}function ON(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Pe(e,t);var n=So(e),r=So(t),o=Pe(n.seconds,r.seconds);return o!==0?o:Pe(n.nanos,r.nanos)}function qw(e){return a0(e)}function a0(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var o=So(r);return"time("+o.seconds+","+o.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ja(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,me.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var o="[",s=!0,u=0,c=r.values||[];u<c.length;u++)s?s=!1:o+=",",o+=a0(c[u]);return o+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var o="{",s=!0,u=0,c=Object.keys(r.fields||{}).sort();u<c.length;u++){var f=c[u];s?s=!1:o+=",",o+=f+":"+a0(r.fields[f])}return o+"}"}(e.mapValue):pe();var t,n}function kd(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function u0(e){return!!e&&"integerValue"in e}function Kw(e){return!!e&&"arrayValue"in e}function LN(e){return!!e&&"nullValue"in e}function PN(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $f(e){return!!e&&"mapValue"in e}function Ll(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rs(e.mapValue.fields,function(o,s){return t.mapValue.fields[o]=Ll(s)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ll(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!$f(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ll(n)},e.prototype.setAll=function(t){var n=this,r=Br.emptyPath(),o={},s=[];t.forEach(function(c,f){if(!r.isImmediateParentOf(f)){var p=n.getFieldsMap(r);n.applyChanges(p,o,s),o={},s=[],r=f.popLast()}c?o[f.lastSegment()]=Ll(c):s.push(f.lastSegment())});var u=this.getFieldsMap(r);this.applyChanges(u,o,s)},e.prototype.delete=function(t){var n=this.field(t.popLast());$f(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return ai(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var o=n.mapValue.fields[t.get(r)];$f(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){Rs(n,function(c,f){return t[c]=f});for(var o=0,s=r;o<s.length;o++){var u=s[o];delete t[u]}},e.prototype.clone=function(){return new e(Ll(this.value))},e}();function Lk(e){var t=[];return Rs(e.fields,function(n,r){var o=new Br([n]);if($f(r)){var s=Lk(r.mapValue).fields;if(s.length===0)t.push(o);else for(var u=0,c=s;u<c.length;u++){var f=c[u];t.push(o.child(f))}}else t.push(o)}),new Xa(t)}var wn=function(){function e(t,n,r,o,s){this.key=t,this.documentType=n,this.version=r,this.data=o,this.documentState=s}return e.newInvalidDocument=function(t){return new e(t,0,Ae.min(),Jn.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Jn.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Jn.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),s$=function(e,t,n,r,o,s,u){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s=null),u===void 0&&(u=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=s,this.endAt=u,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(e,t,n,r,o,s,u){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s=null),u===void 0&&(u=null),new s$(e,t,n,r,o,s,u)}function Pc(e){var t=ue(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(o){return o.field.canonicalString()+o.op.toString()+qw(o.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(o){return o.field.canonicalString()+o.dir}(r)}).join(","),Ms(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ad(t.startAt)),t.endAt&&(n+="|ub:",n+=Ad(t.endAt)),t.h=n}return t.h}function _p(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!p$(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(o=e.filters[r],s=t.filters[r],o.op!==s.op||!o.field.isEqual(s.field)||!ai(o.value,s.value))return!1;var o,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$N(e.startAt,t.startAt)&&$N(e.endAt,t.endAt)}function Cd(e){return me.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var nr=function(e){function t(n,r,o){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=o,s}return be(t,e),t.create=function(n,r,o){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,o):new a$(n,r,o):r==="array-contains"?new c$(n,o):r==="in"?new h$(n,o):r==="not-in"?new f$(n,o):r==="array-contains-any"?new d$(n,o):new t(n,r,o)},t.l=function(n,r,o){return r==="in"?new u$(n,o):new l$(n,o)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(Za(r,this.value)):r!==null&&Es(this.value)===Es(r)&&this.m(Za(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return pe()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),a$=function(e){function t(n,r,o){var s=this;return(s=e.call(this,n,r,o)||this).key=me.fromName(o.referenceValue),s}return be(t,e),t.prototype.matches=function(n){var r=me.comparator(n.key,this.key);return this.m(r)},t}(nr),u$=function(e){function t(n,r){var o=this;return(o=e.call(this,n,"in",r)||this).keys=Pk("in",r),o}return be(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(nr),l$=function(e){function t(n,r){var o=this;return(o=e.call(this,n,"not-in",r)||this).keys=Pk("not-in",r),o}return be(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(nr);function Pk(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return me.fromName(r.referenceValue)})}var c$=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return be(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return Kw(r)&&fc(r.arrayValue,this.value)},t}(nr),h$=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return be(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&fc(this.value.arrayValue,r)},t}(nr),f$=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return be(t,e),t.prototype.matches=function(n){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!fc(this.value.arrayValue,r)},t}(nr),d$=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return be(t,e),t.prototype.matches=function(n){var r=this,o=n.data.field(this.field);return!(!Kw(o)||!o.arrayValue.values)&&o.arrayValue.values.some(function(s){return fc(r.value.arrayValue,s)})},t}(nr),dc=function(e,t){this.position=e,this.before=t};function Ad(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return qw(t)}).join(",")}var $a=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function p$(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function UN(e,t,n){for(var r=0,o=0;o<e.position.length;o++){var s=t[o],u=e.position[o];if(r=s.field.isKeyField()?me.comparator(me.fromName(u.referenceValue),n.key):Za(u,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function $N(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ai(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi=function(e,t,n,r,o,s,u,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s="F"),u===void 0&&(u=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};function Fk(e,t,n,r,o,s,u,c){return new Mi(e,t,n,r,o,s,u,c)}function Fc(e){return new Mi(e)}function Vf(e){return!Ms(e.limit)&&e.limitType==="F"}function Dd(e){return!Ms(e.limit)&&e.limitType==="L"}function Hw(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Gw(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Ww(e){return e.collectionGroup!==null}function eu(e){var t=ue(e);if(t.p===null){t.p=[];var n=Gw(t),r=Hw(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new $a(n)),t.p.push(new $a(Br.keyField(),"asc"));else{for(var o=!1,s=0,u=t.explicitOrderBy;s<u.length;s++){var c=u[s];t.p.push(c),c.field.isKeyField()&&(o=!0)}if(!o){var f=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new $a(Br.keyField(),f))}}}return t.p}function ui(e){var t=ue(e);if(!t.T)if(t.limitType==="F")t.T=FN(t.path,t.collectionGroup,eu(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,o=eu(t);r<o.length;r++){var s=o[r],u=s.dir==="desc"?"asc":"desc";n.push(new $a(s.field,u))}var c=t.endAt?new dc(t.endAt.position,!t.endAt.before):null,f=t.startAt?new dc(t.startAt.position,!t.startAt.before):null;t.T=FN(t.path,t.collectionGroup,n,t.filters,t.limit,c,f)}return t.T}function Uk(e,t,n){return new Mi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Uc(e,t){return _p(ui(e),ui(t))&&e.limitType===t.limitType}function $k(e){return Pc(ui(e))+"|lt:"+e.limitType}function l0(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(o=r).field.canonicalString()+" "+o.op+" "+qw(o.value);var o}).join(", ")+"]"),Ms(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(o){return o.field.canonicalString()+" ("+o.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Ad(t.startAt)),t.endAt&&(n+=", endAt: "+Ad(t.endAt)),"Target("+n+")"}(ui(e))+"; limitType="+e.limitType+")"}function $c(e,t){return t.isFoundDocument()&&function(n,r){var o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):me.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(e,t)&&function(n,r){for(var o=0,s=n.explicitOrderBy;o<s.length;o++){var u=s[o];if(!u.field.isKeyField()&&r.data.field(u.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var o=0,s=n.filters;o<s.length;o++)if(!s[o].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!UN(n.startAt,eu(n),r))&&(!n.endAt||!UN(n.endAt,eu(n),r))}(e,t)}function Vk(e){return function(t,n){for(var r=!1,o=0,s=eu(e);o<s.length;o++){var u=s[o],c=m$(u,t,n);if(c!==0)return c;r=r||u.field.isKeyField()}return 0}}function m$(e,t,n){var r=e.field.isKeyField()?me.comparator(t.key,n.key):function(o,s,u){var c=s.data.field(o),f=u.data.field(o);return c!==null&&f!==null?Za(c,f):pe()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(t)?"-0":t}}function zk(e){return{integerValue:""+e}}function qk(e,t){return Ok(t)?zk(t):Bk(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Np=function(){this._=void 0};function g$(e,t,n){return e instanceof tu?function(r,o){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,t):e instanceof Is?Hk(e,t):e instanceof Ts?Gk(e,t):function(r,o){var s=Kk(r,o),u=VN(s)+VN(r.A);return u0(s)&&u0(r.A)?zk(u):Bk(r.R,u)}(e,t)}function v$(e,t,n){return e instanceof Is?Hk(e,t):e instanceof Ts?Gk(e,t):n}function Kk(e,t){return e instanceof nu?u0(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var tu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t}(Np),Is=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return be(t,e),t}(Np);function Hk(e,t){for(var n=Wk(t),r=function(u){n.some(function(c){return ai(c,u)})||n.push(u)},o=0,s=e.elements;o<s.length;o++)r(s[o]);return{arrayValue:{values:n}}}var Ts=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return be(t,e),t}(Np);function Gk(e,t){for(var n=Wk(t),r=function(u){n=n.filter(function(c){return!ai(c,u)})},o=0,s=e.elements;o<s.length;o++)r(s[o]);return{arrayValue:{values:n}}}var nu=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).R=n,o.A=r,o}return be(t,e),t}(Np);function VN(e){return Mt(e.integerValue||e.doubleValue)}function Wk(e){return Kw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vc=function(e,t){this.field=e,this.transform=t},y$=function(e,t){this.version=e,this.transformResults=t},gn=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function Bf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Ep=function(){};function w$(e,t,n){e instanceof Bc?function(r,o,s){var u=r.value.clone(),c=qN(r.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(e,t,n):e instanceof ko?function(r,o,s){if(Bf(r.precondition,o)){var u=qN(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Yk(r)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else o.convertToUnknownDocument(s.version)}(e,t,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function c0(e,t,n){e instanceof Bc?function(r,o,s){if(Bf(r.precondition,o)){var u=r.value.clone(),c=KN(r.fieldTransforms,s,o);u.setAll(c),o.convertToFoundDocument(zN(o),u).setHasLocalMutations()}}(e,t,n):e instanceof ko?function(r,o,s){if(Bf(r.precondition,o)){var u=KN(r.fieldTransforms,s,o),c=o.data;c.setAll(Yk(r)),c.setAll(u),o.convertToFoundDocument(zN(o),c).setHasLocalMutations()}}(e,t,n):function(r,o){Bf(r.precondition,o)&&o.convertToNoDocument(Ae.min())}(e,t)}function x$(e,t){for(var n=null,r=0,o=e.fieldTransforms;r<o.length;r++){var s=o[r],u=t.data.field(s.field),c=Kk(s.transform,u||null);c!=null&&(n==null&&(n=Jn.empty()),n.set(s.field,c))}return n||null}function BN(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Qa(n,r,function(o,s){return function(u,c){return u.field.isEqual(c.field)&&function(f,p){return f instanceof Is&&p instanceof Is||f instanceof Ts&&p instanceof Ts?Qa(f.elements,p.elements,ai):f instanceof nu&&p instanceof nu?ai(f.A,p.A):f instanceof tu&&p instanceof tu}(u.transform,c.transform)}(o,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function zN(e){return e.isFoundDocument()?e.version:Ae.min()}var Bc=function(e){function t(n,r,o,s){s===void 0&&(s=[]);var u=this;return(u=e.call(this)||this).key=n,u.value=r,u.precondition=o,u.fieldTransforms=s,u.type=0,u}return be(t,e),t}(Ep),ko=function(e){function t(n,r,o,s,u){u===void 0&&(u=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=o,c.precondition=s,c.fieldTransforms=u,c.type=1,c}return be(t,e),t}(Ep);function Yk(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function qN(e,t,n){var r=new Map;_e(e.length===n.length);for(var o=0;o<n.length;o++){var s=e[o],u=s.transform,c=t.data.field(s.field);r.set(s.field,v$(u,c,n[o]))}return r}function KN(e,t,n){for(var r=new Map,o=0,s=e;o<s.length;o++){var u=s[o],c=u.transform,f=n.data.field(u.field);r.set(u.field,g$(c,f,t))}return r}var Rt,$e,zc=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).key=n,o.precondition=r,o.type=2,o.fieldTransforms=[],o}return be(t,e),t}(Ep),Yw=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).key=n,o.precondition=r,o.type=3,o.fieldTransforms=[],o}return be(t,e),t}(Ep),b$=function(e){this.count=e};function Qk(e){switch(e){case U.OK:return pe();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return pe()}}function Xk(e){if(e===void 0)return Lt("GRPC error has no .code"),U.UNKNOWN;switch(e){case Rt.OK:return U.OK;case Rt.CANCELLED:return U.CANCELLED;case Rt.UNKNOWN:return U.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return U.INTERNAL;case Rt.UNAVAILABLE:return U.UNAVAILABLE;case Rt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Rt.NOT_FOUND:return U.NOT_FOUND;case Rt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Rt.ABORTED:return U.ABORTED;case Rt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Rt.DATA_LOSS:return U.DATA_LOSS;default:return pe()}}($e=Rt||(Rt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn=function(){function e(t,n){this.comparator=t,this.root=n||no.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,no.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,no.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new wf(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new wf(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new wf(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new wf(this.root,t,this.comparator,!0)},e}(),wf=function(){function e(t,n,r,o){this.isReverse=o,this.nodeStack=[];for(var s=1;!t.isEmpty();)if(s=n?r(t.key,n):1,o&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),no=function(){function e(t,n,r,o,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=o??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,o,s){return new e(t??this.key,n??this.value,r??this.color,o??this.left,s??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var o=this,s=r(t,o.key);return(o=s<0?o.copy(null,null,null,o.left.insert(t,n,r),null):s===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return e.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();var t=this.left.check();if(t!==this.right.check())throw pe();return t+(this.isRed()?0:1)},e}();no.EMPTY=null,no.RED=!0,no.BLACK=!1,no.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw pe()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw pe()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw pe()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw pe()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw pe()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,o,s){return this},e.prototype.insert=function(t,n,r){return new no(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt=function(){function e(t){this.comparator=t,this.data=new xn(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new HN(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new HN(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var o=n.getNext().key,s=r.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),HN=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),S$=new xn(me.comparator);function Ur(){return S$}var _$=new xn(me.comparator);function h0(){return _$}var N$=new xn(me.comparator);function E$(){return N$}var I$=new zt(me.comparator);function tt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=I$,r=0,o=e;r<o.length;r++){var s=o[r];n=n.add(s)}return n}var T$=new zt(Pe);function Ip(){return T$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qw=function(){function e(t,n,r,o,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=s}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Xw.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ae.min(),r,Ip(),Ur(),tt())},e}(),Xw=function(){function e(t,n,r,o,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=s}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(zn.EMPTY_BYTE_STRING,n,tt(),tt(),tt())},e}(),zf=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Jk=function(e,t){this.targetId=e,this.V=t},Zk=function(e,t,n,r){n===void 0&&(n=zn.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},GN=function(){function e(){this.S=0,this.D=YN(),this.C=zn.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=tt(),n=tt(),r=tt();return this.D.forEach(function(o,s){switch(s){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:pe()}}),new Xw(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=YN()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),j$=function(){function e(t){this.W=t,this.G=new Map,this.H=Ur(),this.J=WN(),this.Y=new zt(Pe)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var o=r[n];t.P&&t.P.isFoundDocument()?this.Z(o,t.P):this.tt(o,t.key,t.P)}for(var s=0,u=t.removedTargetIds;s<u.length;s++)o=u[s],this.tt(o,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var o=n.nt(r);switch(t.state){case 0:n.st(r)&&o.O(t.resumeToken);break;case 1:o.K(),o.F||o.L(),o.O(t.resumeToken);break;case 2:o.K(),o.F||n.removeTarget(r);break;case 3:n.st(r)&&(o.j(),o.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),o.O(t.resumeToken));break;default:pe()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(o,s){r.st(s)&&n(s)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,o=this.ot(n);if(o){var s=o.target;if(Cd(s))if(r===0){var u=new me(s.path);this.tt(n,u,wn.newNoDocument(u,Ae.min()))}else _e(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(u,c){var f=n.ot(c);if(f){if(u.current&&Cd(f.target)){var p=new me(f.target.path);n.H.get(p)!==null||n.at(c,p)||n.tt(c,p,wn.newNoDocument(p,t))}u.$&&(r.set(c,u.M()),u.L())}});var o=tt();this.J.forEach(function(u,c){var f=!0;c.forEachWhile(function(p){var m=n.ot(p);return!m||m.purpose===2||(f=!1,!1)}),f&&(o=o.add(u))});var s=new Qw(t,r,this.Y,this.H,o);return this.H=Ur(),this.J=WN(),this.Y=new zt(Pe),s},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var o=this.nt(t);this.at(t,n)?o.B(n,1):o.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new GN,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new zt(Pe),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new GN),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function WN(){return new xn(me.comparator)}function YN(){return new xn(me.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k$={asc:"ASCENDING",desc:"DESCENDING"},C$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A$=function(e,t){this.databaseId=e,this.I=t};function pc(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function eC(e,t){return e.I?t.toBase64():t.toUint8Array()}function D$(e,t){return pc(e,t.toTimestamp())}function jn(e){return _e(!!e),Ae.fromTimestamp(function(t){var n=So(t);return new Bn(n.seconds,n.nanos)}(e))}function Jw(e,t){return function(n){return new Ke(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function tC(e){var t=Ke.fromString(e);return _e(uC(t)),t}function mc(e,t){return Jw(e.databaseId,t.path)}function Ni(e,t){var n=tC(t);if(n.get(1)!==e.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new me(rC(n))}function f0(e,t){return Jw(e.databaseId,t)}function nC(e){var t=tC(e);return t.length===4?Ke.emptyPath():rC(t)}function gc(e){return new Ke(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rC(e){return _e(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function QN(e,t,n){return{name:mc(e,t),fields:n.value.mapValue.fields}}function R$(e,t,n){var r=Ni(e,t.name),o=jn(t.updateTime),s=new Jn({mapValue:{fields:t.fields}}),u=wn.newFoundDocument(r,o,s);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Rd(e,t){var n;if(t instanceof Bc)n={update:QN(e,t.key,t.value)};else if(t instanceof zc)n={delete:mc(e,t.key)};else if(t instanceof ko)n={update:QN(e,t.key,t.data),updateMask:F$(t.fieldMask)};else{if(!(t instanceof Yw))return pe();n={verify:mc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(o,s){var u=s.transform;if(u instanceof tu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Is)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ts)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof nu)return{fieldPath:s.field.canonicalString(),increment:u.A};throw pe()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:D$(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe()}(e,t.precondition)),n}function XN(e,t){var n=t.currentDocument?function(p){return p.updateTime!==void 0?gn.updateTime(jn(p.updateTime)):p.exists!==void 0?gn.exists(p.exists):gn.none()}(t.currentDocument):gn.none(),r=t.updateTransforms?t.updateTransforms.map(function(p){return function(m,v){var y=null;if("setToServerValue"in v)_e(v.setToServerValue==="REQUEST_TIME"),y=new tu;else if("appendMissingElements"in v){var w=v.appendMissingElements.values||[];y=new Is(w)}else if("removeAllFromArray"in v){var _=v.removeAllFromArray.values||[];y=new Ts(_)}else"increment"in v?y=new nu(m,v.increment):pe();var S=Br.fromServerFormat(v.fieldPath);return new Vc(S,y)}(e,p)}):[];if(t.update){t.update.name;var o=Ni(e,t.update.name),s=new Jn({mapValue:{fields:t.update.fields}});if(t.updateMask){var u=function(p){var m=p.fieldPaths||[];return new Xa(m.map(function(v){return Br.fromServerFormat(v)}))}(t.updateMask);return new ko(o,s,u,n,r)}return new Bc(o,s,n,r)}if(t.delete){var c=Ni(e,t.delete);return new zc(c,n)}if(t.verify){var f=Ni(e,t.verify);return new Yw(f,n)}return pe()}function iC(e,t){return{documents:[f0(e,t.path)]}}function oC(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=f0(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=f0(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var o=function(c){if(c.length!==0){var f=c.map(function(p){return function(m){if(m.op==="=="){if(PN(m.value))return{unaryFilter:{field:da(m.field),op:"IS_NAN"}};if(LN(m.value))return{unaryFilter:{field:da(m.field),op:"IS_NULL"}}}else if(m.op==="!="){if(PN(m.value))return{unaryFilter:{field:da(m.field),op:"IS_NOT_NAN"}};if(LN(m.value))return{unaryFilter:{field:da(m.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(m.field),op:O$(m.op),value:m.value}}}(p)});return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}}(t.filters);o&&(n.structuredQuery.where=o);var s=function(c){if(c.length!==0)return c.map(function(f){return function(p){return{field:da(p.field),direction:M$(p.dir)}}(f)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var u=function(c,f){return c.I||Ms(f)?f:{value:f}}(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=JN(t.startAt)),t.endAt&&(n.structuredQuery.endAt=JN(t.endAt)),n}function sC(e){var t=nC(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,o=null;if(r>0){_e(r===1);var s=n.from[0];s.allDescendants?o=s.collectionId:t=t.child(s.collectionId)}var u=[];n.where&&(u=aC(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(v){return function(y){return new $a(Ra(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(v)}));var f=null;n.limit&&(f=function(v){var y;return Ms(y=typeof v=="object"?v.value:v)?null:y}(n.limit));var p=null;n.startAt&&(p=ZN(n.startAt));var m=null;return n.endAt&&(m=ZN(n.endAt)),Fk(t,o,c,u,f,"F",p,m)}function aC(e){return e?e.unaryFilter!==void 0?[P$(e)]:e.fieldFilter!==void 0?[L$(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return aC(t)}).reduce(function(t,n){return t.concat(n)}):pe():[]}function JN(e){return{before:e.before,values:e.position}}function ZN(e){var t=!!e.before,n=e.values||[];return new dc(n,t)}function M$(e){return k$[e]}function O$(e){return C$[e]}function da(e){return{fieldPath:e.canonicalString()}}function Ra(e){return Br.fromServerFormat(e.fieldPath)}function L$(e){return nr.create(Ra(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return pe()}}(e.fieldFilter.op),e.fieldFilter.value)}function P$(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ra(e.unaryFilter.field);return nr.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ra(e.unaryFilter.field);return nr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ra(e.unaryFilter.field);return nr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var o=Ra(e.unaryFilter.field);return nr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return pe()}}function F$(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function uC(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=eE(t)),t=U$(e.get(n),t);return eE(t)}function U$(e,t){for(var n=t,r=e.length,o=0;o<r;o++){var s=e.charAt(o);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function eE(e){return e+""}function Si(e){var t=e.length;if(_e(t>=2),t===2)return _e(e.charAt(0)===""&&e.charAt(1)===""),Ke.emptyPath();for(var n=t-2,r=[],o="",s=0;s<t;){var u=e.indexOf("",s);switch((u<0||u>n)&&pe(),e.charAt(u+1)){case"":var c=e.substring(s,u),f=void 0;o.length===0?f=c:(f=o+=c,o=""),r.push(f);break;case"":o+=e.substring(s,u),o+="\0";break;case"":o+=e.substring(s,u+1);break;default:pe()}s=u+2}return new Ke(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $$=function(e,t){this.seconds=e,this.nanoseconds=t},Qn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Qn.store="owner",Qn.key="owner";var vo=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};vo.store="mutationQueues",vo.keyPath="userId";var rt=function(e,t,n,r,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o};rt.store="mutations",rt.keyPath="batchId",rt.userMutationsIndex="userMutationsIndex",rt.userMutationsKeyPath=["userId","batchId"];var fn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,$r(n)]},e.key=function(t,n,r){return[t,$r(n),r]},e}();fn.store="documentMutations",fn.PLACEHOLDER=new fn;var V$=function(e,t){this.path=e,this.readTime=t},B$=function(e,t){this.path=e,this.version=t},St=function(e,t,n,r,o,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=o,this.parentPath=s};St.store="remoteDocuments",St.readTimeIndex="readTimeIndex",St.readTimeIndexPath="readTime",St.collectionReadTimeIndex="collectionReadTimeIndex",St.collectionReadTimeIndexPath=["parentPath","readTime"];var ri=function(e){this.byteSize=e};ri.store="remoteDocumentGlobal",ri.key="remoteDocumentGlobalKey";var Fn=function(e,t,n,r,o,s,u){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=s,this.query=u};Fn.store="targets",Fn.keyPath="targetId",Fn.queryTargetsIndexName="queryTargetsIndex",Fn.queryTargetsKeyPath=["canonicalId","targetId"];var Zt=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Zt.store="targetDocuments",Zt.keyPath=["targetId","path"],Zt.documentTargetsIndex="documentTargetsIndex",Zt.documentTargetsKeyPath=["path","targetId"];var Xn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Xn.key="targetGlobalKey",Xn.store="targetGlobal";var fs=function(e,t){this.collectionId=e,this.parent=t};fs.store="collectionParents",fs.keyPath=["collectionId","parent"];var Ei=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Ei.store="clientMetadata",Ei.keyPath="clientId";var ru=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};ru.store="bundles",ru.keyPath="bundleId";var iu=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};iu.store="namedQueries",iu.keyPath="name";var z$=_t(_t([],_t(_t([],_t(_t([],_t(_t([],[vo.store,rt.store,fn.store,St.store,Fn.store,Qn.store,Xn.store,Zt.store]),[Ei.store])),[ri.store])),[fs.store])),[ru.store,iu.store]),lC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cC=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),qn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},J=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(o,s){r.nextCallback=function(u){r.wrapSuccess(t,u).next(o,s)},r.catchCallback=function(u){r.wrapFailure(n,u).next(o,s)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var o=0,s=0,u=!1;t.forEach(function(c){++o,c.next(function(){++s,u&&s===o&&n()},function(f){return r(f)})}),u=!0,s===o&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(u){n=n.next(function(c){return c?e.resolve(c):u()})},o=0,s=t;o<s.length;o++)r(s[o]);return n},e.forEach=function(t,n){var r=this,o=[];return t.forEach(function(s,u){o.push(n.call(r,s,u))}),this.waitFor(o)},e}(),hC=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new qn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new Pl(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(o){var s=Zw(o.target.error);r.ft.reject(new Pl(t,s))}}return e.open=function(t,n,r,o){try{return new e(n,t.transaction(o,r))}catch(s){throw new Pl(n,s)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(ne("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new K$(n)},e}(),ou=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(Ss())===12.2&&Lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return ne("SimpleDb","Removing database:",t),ns(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=Ss(),n=e._t(t),r=0<n&&n<10,o=e.Et(t),s=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var t;return typeof process<"u"&&((t=n$)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return W(this,void 0,void 0,function(){var n,r=this;return K(this,function(o){switch(o.label){case 0:return this.db?[3,2]:(ne("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,u){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(f){var p=f.target.result;s(p)},c.onblocked=function(){u(new Pl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(f){var p=f.target.error;p.name==="VersionError"?u(new Y(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u(new Pl(t,p))},c.onupgradeneeded=function(f){ne("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',f.oldVersion);var p=f.target.result;r.wt.Rt(p,c.transaction,f.oldVersion,r.version).next(function(){ne("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=o.sent(),o.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,o){return W(this,void 0,void 0,function(){var s,u,c,f,p;return K(this,function(m){switch(m.label){case 0:s=n==="readonly",u=0,c=function(){var v,y,w,_,S;return K(this,function(C){switch(C.label){case 0:++u,C.label=1;case 1:return C.trys.push([1,4,,5]),[4,f.At(t)];case 2:return f.db=C.sent(),v=hC.open(f.db,t,s?"readonly":"readwrite",r),y=o(v).catch(function(N){return v.abort(N),J.reject(N)}).toPromise(),w={},y.catch(function(){}),[4,v.dt];case 3:return[2,(w.value=(C.sent(),y),w)];case 4:return _=C.sent(),S=_.name!=="FirebaseError"&&u<3,ne("SimpleDb","Transaction failed with error:",_.message,"Retrying:",S),f.close(),S?[3,5]:[2,{value:Promise.reject(_)}];case 5:return[2]}})},f=this,m.label=1;case 1:return[5,c()];case 2:if(typeof(p=m.sent())=="object")return[2,p.value];m.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),q$=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return ns(this.Pt.delete())},e}(),Pl=function(e){function t(n,r){var o=this;return(o=e.call(this,U.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",o}return be(t,e),t}(Y);function Os(e){return e.name==="IndexedDbTransactionError"}var K$=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(ne("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ns(r)},e.prototype.add=function(t){return ne("SimpleDb","ADD",this.store.name,t,t),ns(this.store.add(t))},e.prototype.get=function(t){var n=this;return ns(this.store.get(t)).next(function(r){return r===void 0&&(r=null),ne("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return ne("SimpleDb","DELETE",this.store.name,t),ns(this.store.delete(t))},e.prototype.count=function(){return ne("SimpleDb","COUNT",this.store.name),ns(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),o=[];return this.xt(r,function(s,u){o.push(u)}).next(function(){return o})},e.prototype.kt=function(t,n){ne("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var o=this.cursor(r);return this.xt(o,function(s,u,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var o=this.cursor(r);return this.xt(o,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new J(function(r,o){n.onerror=function(s){var u=Zw(s.target.error);o(u)},n.onsuccess=function(s){var u=s.target.result;u?t(u.primaryKey,u.value).next(function(c){c?u.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new J(function(o,s){t.onerror=function(u){s(u.target.error)},t.onsuccess=function(u){var c=u.target.result;if(c){var f=new q$(c),p=n(c.primaryKey,c.value,f);if(p instanceof J){var m=p.catch(function(v){return f.done(),J.reject(v)});r.push(m)}f.isDone?o():f.Dt===null?c.continue():c.continue(f.Dt)}else o()}}).next(function(){return J.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ns(e){return new J(function(t,n){e.onsuccess=function(r){var o=r.target.result;t(o)},e.onerror=function(r){var o=Zw(r.target.error);n(o)}})}var tE=!1;function Zw(e){var t=ou._t(Ss());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Y("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return tE||(tE=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nE=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).Mt=n,o.currentSequenceNumber=r,o}return be(t,e),t}(cC);function Kn(e,t){var n=ue(e);return ou.It(n.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ex=function(){function e(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,o=0;o<this.mutations.length;o++){var s=this.mutations[o];s.key.isEqual(t.key)&&w$(s,t,r[o])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(u=r[n]).key.isEqual(t.key)&&c0(u,t,this.localWriteTime);for(var o=0,s=this.mutations;o<s.length;o++){var u;(u=s[o]).key.isEqual(t.key)&&c0(u,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var o=t.get(r.key),s=o;n.applyToLocalView(s),o.isValidDocument()||s.convertToNoDocument(Ae.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},tt())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&Qa(this.mutations,t.mutations,function(n,r){return BN(n,r)})&&Qa(this.baseMutations,t.baseMutations,function(n,r){return BN(n,r)})},e}(),H$=function(){function e(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}return e.from=function(t,n,r){_e(t.mutations.length===r.length);for(var o=E$(),s=t.mutations,u=0;u<s.length;u++)o=o.insert(s[u].key,r[u].version);return new e(t,n,r,o)},e}(),Tp=function(){function e(t,n,r,o,s,u,c){s===void 0&&(s=Ae.min()),u===void 0&&(u=Ae.min()),c===void 0&&(c=zn.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),fC=function(e){this.Lt=e};function d0(e,t){if(t.document)return R$(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=me.fromSegments(t.noDocument.path),r=au(t.noDocument.readTime),o=wn.newNoDocument(n,r);return t.hasCommittedMutations?o.setHasCommittedMutations():o}if(t.unknownDocument){var s=me.fromSegments(t.unknownDocument.path);return r=au(t.unknownDocument.version),wn.newUnknownDocument(s,r)}return pe()}function rE(e,t,n){var r=tx(n),o=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s=function(v,y){return{name:mc(v,y.key),fields:y.data.value.mapValue.fields,updateTime:pc(v,y.version.toTimestamp())}}(e.Lt,t),u=t.hasCommittedMutations;return new St(null,null,s,u,r,o)}if(t.isNoDocument()){var c=t.key.path.toArray(),f=su(t.version);return u=t.hasCommittedMutations,new St(null,new V$(c,f),null,u,r,o)}if(t.isUnknownDocument()){var p=t.key.path.toArray(),m=su(t.version);return new St(new B$(p,m),null,null,!0,r,o)}return pe()}function tx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function dC(e){var t=new Bn(e[0],e[1]);return Ae.fromTimestamp(t)}function su(e){var t=e.toTimestamp();return new $$(t.seconds,t.nanoseconds)}function au(e){var t=new Bn(e.seconds,e.nanoseconds);return Ae.fromTimestamp(t)}function ya(e,t){for(var n=(t.baseMutations||[]).map(function(f){return XN(e.Lt,f)}),r=0;r<t.mutations.length-1;++r){var o=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];o.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var u=t.mutations.map(function(f){return XN(e.Lt,f)}),c=Bn.fromMillis(t.localWriteTimeMs);return new ex(t.batchId,c,n,u)}function Nl(e){var t,n,r=au(e.readTime),o=e.lastLimboFreeSnapshotVersion!==void 0?au(e.lastLimboFreeSnapshotVersion):Ae.min();return e.query.documents!==void 0?(_e((n=e.query).documents.length===1),t=ui(Fc(nC(n.documents[0])))):t=function(s){return ui(sC(s))}(e.query),new Tp(t,e.targetId,0,e.lastListenSequenceNumber,r,o,zn.fromBase64String(e.resumeToken))}function pC(e,t){var n,r=su(t.snapshotVersion),o=su(t.lastLimboFreeSnapshotVersion);n=Cd(t.target)?iC(e.Lt,t.target):oC(e.Lt,t.target);var s=t.resumeToken.toBase64();return new Fn(t.targetId,Pc(t.target),r,s,t.sequenceNumber,o,n)}function mC(e){var t=sC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Uk(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G$=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return iE(t).get(n).next(function(r){if(r)return{id:(o=r).bundleId,createTime:au(o.createTime),version:o.version};var o})},e.prototype.saveBundleMetadata=function(t,n){return iE(t).put({bundleId:(r=n).id,createTime:su(jn(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return oE(t).get(n).next(function(r){if(r)return{name:(o=r).name,query:mC(o.bundledQuery),readTime:au(o.readTime)};var o})},e.prototype.saveNamedQuery=function(t,n){return oE(t).put(function(r){return{name:r.name,readTime:su(jn(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function iE(e){return Kn(e,ru.store)}function oE(e){return Kn(e,iu.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W$=function(){function e(){this.Bt=new nx}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),J.resolve()},e.prototype.getCollectionParents=function(t,n){return J.resolve(this.Bt.getEntries(n))},e}(),nx=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new zt(Ke.comparator),s=!o.has(r);return this.index[n]=o.add(r),s},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new zt(Ke.comparator)).toArray()},e}(),Y$=function(){function e(){this.qt=new nx}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var o=n.lastSegment(),s=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var u={collectionId:o,parent:$r(s)};return sE(t).put(u)}return J.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],o=IDBKeyRange.bound([n,""],[Ak(n),""],!1,!0);return sE(t).Nt(o).next(function(s){for(var u=0,c=s;u<c.length;u++){var f=c[u];if(f.collectionId!==n)break;r.push(Si(f.parent))}return r})},e}();function sE(e){return Kn(e,fs.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ti=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(e,t,n){var r=e.store(rt.store),o=e.store(fn.store),s=[],u=IDBKeyRange.only(n.batchId),c=0,f=r.$t({range:u},function(_,S,C){return c++,C.delete()});s.push(f.next(function(){_e(c===1)}));for(var p=[],m=0,v=n.mutations;m<v.length;m++){var y=v[m],w=fn.key(t,y.key.path,n.batchId);s.push(o.delete(w)),p.push(y.key)}return J.waitFor(s).next(function(){return p})}function Md(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw pe();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti.DEFAULT_COLLECTION_PERCENTILE=10,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ti.DEFAULT=new ti(41943040,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ti.DISABLED=new ti(-1,0,0);var Q$=function(){function e(t,n,r,o){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=o,this.Kt={}}return e.Qt=function(t,n,r,o){return _e(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,o)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wi(t).$t({index:rt.userMutationsIndex,range:r},function(o,s,u){n=!1,u.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,o){var s=this,u=wa(t),c=Wi(t);return c.add({}).next(function(f){_e(typeof f=="number");for(var p=new ex(f,n,r,o),m=function(N,E,x){var j=x.baseMutations.map(function(A){return Rd(N.Lt,A)}),k=x.mutations.map(function(A){return Rd(N.Lt,A)});return new rt(E,x.batchId,x.localWriteTime.toMillis(),j,k)}(s.R,s.userId,p),v=[],y=new zt(function(N,E){return Pe(N.canonicalString(),E.canonicalString())}),w=0,_=o;w<_.length;w++){var S=_[w],C=fn.key(s.userId,S.key.path,f);y=y.add(S.key.path.popLast()),v.push(c.put(m)),v.push(u.put(C,fn.PLACEHOLDER))}return y.forEach(function(N){v.push(s.Ut.addToCollectionParentIndex(t,N))}),t.addOnCommittedListener(function(){s.Kt[f]=p.keys()}),J.waitFor(v).next(function(){return p})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return Wi(t).get(n).next(function(o){return o?(_e(o.userId===r.userId),ya(r.R,o)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?J.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(o){if(o){var s=o.keys();return r.Kt[n]=s,s}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,o=n+1,s=IDBKeyRange.lowerBound([this.userId,o]),u=null;return Wi(t).$t({index:rt.userMutationsIndex,range:s},function(c,f,p){f.userId===r.userId&&(_e(f.batchId>=o),u=ya(r.R,f)),p.done()}).next(function(){return u})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Wi(t).$t({index:rt.userMutationsIndex,range:n,reverse:!0},function(o,s,u){r=s.batchId,u.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wi(t).Nt(rt.userMutationsIndex,r).next(function(o){return o.map(function(s){return ya(n.R,s)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,o=fn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(o),u=[];return wa(t).$t({range:s},function(c,f,p){var m=c[0],v=c[1],y=c[2],w=Si(v);if(m===r.userId&&n.path.isEqual(w))return Wi(t).get(y).next(function(_){if(!_)throw pe();_e(_.userId===r.userId),u.push(ya(r.R,_))});p.done()}).next(function(){return u})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,o=new zt(Pe),s=[];return n.forEach(function(u){var c=fn.prefixForPath(r.userId,u.path),f=IDBKeyRange.lowerBound(c),p=wa(t).$t({range:f},function(m,v,y){var w=m[0],_=m[1],S=m[2],C=Si(_);w===r.userId&&u.path.isEqual(C)?o=o.add(S):y.done()});s.push(p)}),J.waitFor(s).next(function(){return r.Wt(t,o)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,o=n.path,s=o.length+1,u=fn.prefixForPath(this.userId,o),c=IDBKeyRange.lowerBound(u),f=new zt(Pe);return wa(t).$t({range:c},function(p,m,v){var y=p[0],w=p[1],_=p[2],S=Si(w);y===r.userId&&o.isPrefixOf(S)?S.length===s&&(f=f.add(_)):v.done()}).next(function(){return r.Wt(t,f)})},e.prototype.Wt=function(t,n){var r=this,o=[],s=[];return n.forEach(function(u){s.push(Wi(t).get(u).next(function(c){if(c===null)throw pe();_e(c.userId===r.userId),o.push(ya(r.R,c))}))}),J.waitFor(s).next(function(){return o})},e.prototype.removeMutationBatch=function(t,n){var r=this;return gC(t.Mt,this.userId,n).next(function(o){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),J.forEach(o,function(s){return r.referenceDelegate.markPotentiallyOrphaned(t,s)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return J.resolve();var o=IDBKeyRange.lowerBound(fn.prefixForUser(n.userId)),s=[];return wa(t).$t({range:o},function(u,c,f){if(u[0]===n.userId){var p=Si(u[1]);s.push(p)}else f.done()}).next(function(){_e(s.length===0)})})},e.prototype.containsKey=function(t,n){return vC(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return yC(t).get(this.userId).next(function(r){return r||new vo(n.userId,-1,"")})},e}();function vC(e,t,n){var r=fn.prefixForPath(t,n.path),o=r[1],s=IDBKeyRange.lowerBound(r),u=!1;return wa(e).$t({range:s,Ft:!0},function(c,f,p){var m=c[0],v=c[1];c[2],m===t&&v===o&&(u=!0),p.done()}).next(function(){return u})}function Wi(e){return Kn(e,rt.store)}function wa(e){return Kn(e,fn.store)}function yC(e){return Kn(e,vo.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Od=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),X$=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var o=new Od(r.highestTargetId);return r.highestTargetId=o.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return Ae.fromTimestamp(new Bn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var o=this;return this.Xt(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),o.Zt(t,s)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(o){return o.targetCount+=1,r.ee(n,o),r.Zt(t,o)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return pa(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(o){return _e(o.targetCount>0),o.targetCount-=1,r.Zt(t,o)})},e.prototype.removeTargets=function(t,n,r){var o=this,s=0,u=[];return pa(t).$t(function(c,f){var p=Nl(f);p.sequenceNumber<=n&&r.get(p.targetId)===null&&(s++,u.push(o.removeTargetData(t,p)))}).next(function(){return J.waitFor(u)}).next(function(){return s})},e.prototype.forEachTarget=function(t,n){return pa(t).$t(function(r,o){var s=Nl(o);n(s)})},e.prototype.Xt=function(t){return uE(t).get(Xn.key).next(function(n){return _e(n!==null),n})},e.prototype.Zt=function(t,n){return uE(t).put(Xn.key,n)},e.prototype.te=function(t,n){return pa(t).put(pC(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=Pc(n),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return pa(t).$t({range:o,index:Fn.queryTargetsIndexName},function(u,c,f){var p=Nl(c);_p(n,p.target)&&(s=p,f.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(t,n,r){var o=this,s=[],u=ro(t);return n.forEach(function(c){var f=$r(c.path);s.push(u.put(new Zt(r,f))),s.push(o.referenceDelegate.addReference(t,r,c))}),J.waitFor(s)},e.prototype.removeMatchingKeys=function(t,n,r){var o=this,s=ro(t);return J.forEach(n,function(u){var c=$r(u.path);return J.waitFor([s.delete([r,c]),o.referenceDelegate.removeReference(t,r,u)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=ro(t),o=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(o)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),o=ro(t),s=tt();return o.$t({range:r,Ft:!0},function(u,c,f){var p=Si(u[1]),m=new me(p);s=s.add(m)}).next(function(){return s})},e.prototype.containsKey=function(t,n){var r=$r(n.path),o=IDBKeyRange.bound([r],[Ak(r)],!1,!0),s=0;return ro(t).$t({index:Zt.documentTargetsIndex,Ft:!0,range:o},function(u,c,f){var p=u[0];u[1],p!==0&&(s++,f.done())}).next(function(){return s>0})},e.prototype.lt=function(t,n){return pa(t).get(n).next(function(r){return r?Nl(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(e){return Kn(e,Fn.store)}function uE(e){return Kn(e,Xn.store)}function ro(e){return Kn(e,Zt.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(e){return W(this,void 0,void 0,function(){return K(this,function(t){if(e.code!==U.FAILED_PRECONDITION||e.message!==lC)throw e;return ne("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(e,t){var n=e[0],r=e[1],o=t[0],s=t[1],u=Pe(n,o);return u===0?Pe(r,s):u}var J$=function(){function e(t){this.ne=t,this.buffer=new zt(lE),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();lE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),Z$=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;ne("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return W(n,void 0,void 0,function(){var o;return K(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return Os(o=s.sent())?(ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o),[3,6]):[3,4];case 4:return[4,Ls(o)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return s.sent(),[2]}})})})},e}(),e4=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return J.resolve(tr.o);var o=new J$(n);return this.ae.forEachTarget(t,function(s){return o.re(s.sequenceNumber)}).next(function(){return r.ae.le(t,function(s){return o.re(s)})}).next(function(){return o.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(aE)):this.getCacheSize(t).next(function(o){return o<r.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; Cache size "+o+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),aE):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,o,s,u,c,f,p,m=this,v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(y){return y>m.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+m.params.maximumSequenceNumbersToCollect+" from "+y),o=m.params.maximumSequenceNumbersToCollect):o=y,u=Date.now(),m.nthSequenceNumber(t,o)}).next(function(y){return r=y,c=Date.now(),m.removeTargets(t,r,n)}).next(function(y){return s=y,f=Date.now(),m.removeOrphanedDocuments(t,r)}).next(function(y){return p=Date.now(),s0()<=qe.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(u-v)+`ms
	Determined least recently used `+o+" in "+(c-u)+`ms
	Removed `+s+" targets in "+(f-c)+`ms
	Removed `+y+" documents in "+(p-f)+`ms
Total Duration: `+(p-v)+"ms"),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:y})})},e}(),t4=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,o){return new e4(r,o)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(o){return r+o})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,o){return n(o)})},e.prototype.addReference=function(t,n,r){return xf(t,r)},e.prototype.removeReference=function(t,n,r){return xf(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return xf(t,n)},e.prototype._e=function(t,n){return function(r,o){var s=!1;return yC(r).Ot(function(u){return vC(r,u,o).next(function(c){return c&&(s=!0),J.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],u=0;return this.we(t,function(c,f){if(f<=n){var p=r._e(t,c).next(function(m){if(!m)return u++,o.getEntry(t,c).next(function(){return o.removeEntry(c),ro(t).delete([0,$r(c.path)])})});s.push(p)}}).next(function(){return J.waitFor(s)}).next(function(){return o.apply(t)}).next(function(){return u})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return xf(t,n)},e.prototype.we=function(t,n){var r,o=ro(t),s=tr.o;return o.$t({index:Zt.documentTargetsIndex},function(u,c){var f=u[0];u[1];var p=c.path,m=c.sequenceNumber;f===0?(s!==tr.o&&n(new me(Si(r)),s),s=m,r=p):s=tr.o}).next(function(){s!==tr.o&&n(new me(Si(r)),s)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function xf(e,t){return ro(e).put(function(n,r){return new Zt(0,$r(n.path),r)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wu=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var o=0,s=r;o<s.length;o++){var u=s[o],c=u[0],f=u[1];if(this.equalsFn(c,t))return f}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),o=this.inner[r];if(o!==void 0){for(var s=0;s<o.length;s++)if(this.equalsFn(o[s][0],t))return void(o[s]=[t,n]);o.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),!0;return!1},e.prototype.forEach=function(t){Rs(this.inner,function(n,r){for(var o=0,s=r;o<s.length;o++){var u=s[o],c=u[0],f=u[1];t(c,f)}})},e.prototype.isEmpty=function(){return Dk(this.inner)},e}(),wC=function(){function e(){this.changes=new wu(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:Ae.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:wn.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?J.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),n4=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return Ji(t).put(bf(n),r)},e.prototype.removeEntry=function(t,n){var r=Ji(t),o=bf(n);return r.delete(o)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(o){return o.byteSize+=n,r.me(t,o)})},e.prototype.getEntry=function(t,n){var r=this;return Ji(t).get(bf(n)).next(function(o){return r.ye(n,o)})},e.prototype.ge=function(t,n){var r=this;return Ji(t).get(bf(n)).next(function(o){return{document:r.ye(n,o),size:Md(o)}})},e.prototype.getEntries=function(t,n){var r=this,o=Ur();return this.pe(t,n,function(s,u){var c=r.ye(s,u);o=o.insert(s,c)}).next(function(){return o})},e.prototype.Ee=function(t,n){var r=this,o=Ur(),s=new xn(me.comparator);return this.pe(t,n,function(u,c){var f=r.ye(u,c);o=o.insert(u,f),s=s.insert(u,Md(c))}).next(function(){return{documents:o,Te:s}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return J.resolve();var o=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),u=s.getNext();return Ji(t).$t({range:o},function(c,f,p){for(var m=me.fromSegments(c);u&&me.comparator(u,m)<0;)r(u,null),u=s.getNext();u&&u.isEqual(m)&&(r(u,f),u=s.hasNext()?s.getNext():null),u?p.Ct(u.path.toArray()):p.done()}).next(function(){for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var o=this,s=Ur(),u=n.path.length+1,c={};if(r.isEqual(Ae.min())){var f=n.path.toArray();c.range=IDBKeyRange.lowerBound(f)}else{var p=n.path.toArray(),m=tx(r);c.range=IDBKeyRange.lowerBound([p,m],!0),c.index=St.collectionReadTimeIndex}return Ji(t).$t(c,function(v,y,w){if(v.length===u){var _=d0(o.R,y);n.path.isPrefixOf(_.key.path)?$c(n,_)&&(s=s.insert(_.key,_)):w.done()}}).next(function(){return s})},e.prototype.newChangeBuffer=function(t){return new r4(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return cE(t).get(ri.key).next(function(n){return _e(!!n),n})},e.prototype.me=function(t,n){return cE(t).put(ri.key,n)},e.prototype.ye=function(t,n){if(n){var r=d0(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(Ae.min()))return r}return wn.newInvalidDocument(t)},e}(),r4=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).Ie=n,o.trackRemovals=r,o.Ae=new wu(function(s){return s.toString()},function(s,u){return s.isEqual(u)}),o}return be(t,e),t.prototype.applyChanges=function(n){var r=this,o=[],s=0,u=new zt(function(c,f){return Pe(c.canonicalString(),f.canonicalString())});return this.changes.forEach(function(c,f){var p=r.Ae.get(c);if(f.document.isValidDocument()){var m=rE(r.Ie.R,f.document,r.getReadTime(c));u=u.add(c.path.popLast());var v=Md(m);s+=v-p,o.push(r.Ie.addEntry(n,c,m))}else if(s-=p,r.trackRemovals){var y=rE(r.Ie.R,wn.newNoDocument(c,Ae.min()),r.getReadTime(c));o.push(r.Ie.addEntry(n,c,y))}else o.push(r.Ie.removeEntry(n,c))}),u.forEach(function(c){o.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),o.push(this.Ie.updateMetadata(n,s)),J.waitFor(o)},t.prototype.getFromCache=function(n,r){var o=this;return this.Ie.ge(n,r).next(function(s){return o.Ae.set(r,s.size),s.document})},t.prototype.getAllFromCache=function(n,r){var o=this;return this.Ie.Ee(n,r).next(function(s){var u=s.documents;return s.Te.forEach(function(c,f){o.Ae.set(c,f)}),u})},t}(wC);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(e){return Kn(e,ri.store)}function Ji(e){return Kn(e,St.store)}function bf(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i4=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,o){var s=this;_e(r<o&&r>=0&&o<=11);var u=new hC("createOrUpgrade",n);r<1&&o>=1&&(function(f){f.createObjectStore(Qn.store)}(t),function(f){f.createObjectStore(vo.store,{keyPath:vo.keyPath}),f.createObjectStore(rt.store,{keyPath:rt.keyPath,autoIncrement:!0}).createIndex(rt.userMutationsIndex,rt.userMutationsKeyPath,{unique:!0}),f.createObjectStore(fn.store)}(t),hE(t),function(f){f.createObjectStore(St.store)}(t));var c=J.resolve();return r<3&&o>=3&&(r!==0&&(function(f){f.deleteObjectStore(Zt.store),f.deleteObjectStore(Fn.store),f.deleteObjectStore(Xn.store)}(t),hE(t)),c=c.next(function(){return function(f){var p=f.store(Xn.store),m=new Xn(0,0,Ae.min().toTimestamp(),0);return p.put(Xn.key,m)}(u)})),r<4&&o>=4&&(r!==0&&(c=c.next(function(){return function(f,p){return p.store(rt.store).Nt().next(function(m){f.deleteObjectStore(rt.store),f.createObjectStore(rt.store,{keyPath:rt.keyPath,autoIncrement:!0}).createIndex(rt.userMutationsIndex,rt.userMutationsKeyPath,{unique:!0});var v=p.store(rt.store),y=m.map(function(w){return v.put(w)});return J.waitFor(y)})}(t,u)})),c=c.next(function(){(function(f){f.createObjectStore(Ei.store,{keyPath:Ei.keyPath})})(t)})),r<5&&o>=5&&(c=c.next(function(){return s.Re(u)})),r<6&&o>=6&&(c=c.next(function(){return function(f){f.createObjectStore(ri.store)}(t),s.be(u)})),r<7&&o>=7&&(c=c.next(function(){return s.ve(u)})),r<8&&o>=8&&(c=c.next(function(){return s.Pe(t,u)})),r<9&&o>=9&&(c=c.next(function(){(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(t),function(f){var p=f.objectStore(St.store);p.createIndex(St.readTimeIndex,St.readTimeIndexPath,{unique:!1}),p.createIndex(St.collectionReadTimeIndex,St.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&o>=10&&(c=c.next(function(){return s.Ve(u)})),r<11&&o>=11&&(c=c.next(function(){(function(f){f.createObjectStore(ru.store,{keyPath:ru.keyPath})})(t),function(f){f.createObjectStore(iu.store,{keyPath:iu.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store(St.store).$t(function(r,o){n+=Md(o)}).next(function(){var r=new ri(n);return t.store(ri.store).put(ri.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(vo.store),o=t.store(rt.store);return r.Nt().next(function(s){return J.forEach(s,function(u){var c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return o.Nt(rt.userMutationsIndex,c).next(function(f){return J.forEach(f,function(p){_e(p.userId===u.userId);var m=ya(n.R,p);return gC(t,u.userId,m).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(Zt.store),r=t.store(St.store);return t.store(Xn.store).get(Xn.key).next(function(o){var s=[];return r.$t(function(u,c){var f=new Ke(u),p=function(m){return[0,$r(m)]}(f);s.push(n.get(p).next(function(m){return m?J.resolve():function(v){return n.put(new Zt(0,$r(v),o.highestListenSequenceNumber))}(f)}))}).next(function(){return J.waitFor(s)})})},e.prototype.Pe=function(t,n){t.createObjectStore(fs.store,{keyPath:fs.keyPath});var r=n.store(fs.store),o=new nx,s=function(u){if(o.add(u)){var c=u.lastSegment(),f=u.popLast();return r.put({collectionId:c,parent:$r(f)})}};return n.store(St.store).$t({Ft:!0},function(u,c){var f=new Ke(u);return s(f.popLast())}).next(function(){return n.store(fn.store).$t({Ft:!0},function(u,c){u[0];var f=u[1];u[2];var p=Si(f);return s(p.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(Fn.store);return r.$t(function(o,s){var u=Nl(s),c=pC(n.R,u);return r.put(c)})},e}();function hE(e){e.createObjectStore(Zt.store,{keyPath:Zt.keyPath}).createIndex(Zt.documentTargetsIndex,Zt.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Fn.store,{keyPath:Fn.keyPath}).createIndex(Fn.queryTargetsIndexName,Fn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Xn.store)}var Wv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",o4=function(){function e(t,n,r,o,s,u,c,f,p,m){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=u,this.document=c,this.De=p,this.Ce=m,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(v){return Promise.resolve()},!e.yt())throw new Y(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new t4(this,o),this.Le=n+"main",this.R=new fC(f),this.Be=new ou(this.Le,11,new i4(this.R)),this.qe=new X$(this.referenceDelegate,this.R),this.Ut=new Y$,this.Ue=function(v,y){return new n4(v,y)}(this.R,this.Ut),this.Ke=new G$,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,m===!1&&Lt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,Wv);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new tr(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return W(n,void 0,void 0,function(){return K(this,function(o){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return W(n,void 0,void 0,function(){return K(this,function(o){switch(o.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return W(n,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Sf(n).put(new Ei(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(Os(n))return ne("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return vl(t).get(Qn.key).next(function(r){return J.resolve(n.tn(r))})},e.prototype.en=function(t){return Sf(t).delete(this.clientId)},e.prototype.nn=function(){return W(this,void 0,void 0,function(){var t,n,r,o,s=this;return K(this,function(u){switch(u.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var f=Kn(c,Ei.store);return f.Nt().next(function(p){var m=s.rn(p,18e5),v=p.filter(function(y){return m.indexOf(y)===-1});return J.forEach(v,function(y){return f.delete(y.clientId)}).next(function(){return v})})}).catch(function(){return[]})]);case 1:if(t=u.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)o=r[n],this.Qe.removeItem(this.on(o.clientId));u.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?J.resolve(!0):vl(t).get(Qn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,Wv);return!1}}return!(!n.networkEnabled||!n.inForeground)||Sf(t).Nt().next(function(o){return n.rn(o,5e3).find(function(s){if(n.clientId!==s.clientId){var u=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,f=n.networkEnabled===s.networkEnabled;if(u||c&&f)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&ne("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return W(this,void 0,void 0,function(){var t=this;return K(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Qn.store,Ei.store],function(r){var o=new nE(r,tr.o);return t.Xe(o).next(function(){return t.en(o)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(o){return r.sn(o.updateTimeMs,n)&&!r.cn(o.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return Sf(n).Nt().next(function(r){return t.rn(r,18e5).map(function(o){return o.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return Q$.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var o=this;ne("IndexedDbPersistence","Starting transaction:",t);var s,u=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,u,z$,function(c){return s=new nE(c,o.Ne?o.Ne.next():tr.o),n==="readwrite-primary"?o.Je(s).next(function(f){return!!f||o.Ye(s)}).next(function(f){if(!f)throw Lt("Failed to obtain primary lease for action '"+t+"'."),o.isPrimary=!1,o.Se.enqueueRetryable(function(){return o.Me(!1)}),new Y(U.FAILED_PRECONDITION,lC);return r(s)}).next(function(f){return o.Ze(s).next(function(){return f})}):o.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return vl(t).get(Qn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new Y(U.FAILED_PRECONDITION,Wv)})},e.prototype.Ze=function(t){var n=new Qn(this.clientId,this.allowTabSynchronization,Date.now());return vl(t).put(Qn.key,n)},e.yt=function(){return ou.yt()},e.prototype.Xe=function(t){var n=this,r=vl(t);return r.get(Qn.key).next(function(o){return n.tn(o)?(ne("IndexedDbPersistence","Releasing primary lease."),r.delete(Qn.key)):J.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Lt("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),hF()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return ne("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(o){return Lt("IndexedDbPersistence","Failed to get zombied client id.",o),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Lt("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function vl(e){return Kn(e,Qn.store)}function Sf(e){return Kn(e,Ei.store)}function rx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var xC=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(o){return r.yn(t,n,o)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(o){for(var s=0,u=r;s<u.length;s++)u[s].applyToLocalView(o);return o})},e.prototype.gn=function(t,n){t.forEach(function(r,o){for(var s=0,u=n;s<u.length;s++)u[s].applyToLocalView(o)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(o){return r.En(t,o).next(function(){return o})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(o){return r.gn(n,o)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.Tn(t,n.path):Ww(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new me(n)).next(function(r){var o=h0();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})},e.prototype.In=function(t,n,r){var o=this,s=n.collectionGroup,u=h0();return this.Ut.getCollectionParents(t,s).next(function(c){return J.forEach(c,function(f){var p=function(m,v){return new Mi(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,f.child(s));return o.An(t,p,r).next(function(m){m.forEach(function(v,y){u=u.insert(v,y)})})}).next(function(){return u})})},e.prototype.An=function(t,n,r){var o,s,u=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return o=c,u._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return s=c,u.Rn(t,s,o).next(function(f){o=f;for(var p=0,m=s;p<m.length;p++)for(var v=m[p],y=0,w=v.mutations;y<w.length;y++){var _=w[y],S=_.key,C=o.get(S);C==null&&(C=wn.newInvalidDocument(S),o=o.insert(S,C)),c0(_,C,v.localWriteTime),C.isFoundDocument()||(o=o.remove(S))}})}).next(function(){return o.forEach(function(c,f){$c(n,f)||(o=o.remove(c))}),o})},e.prototype.Rn=function(t,n,r){for(var o=tt(),s=0,u=n;s<u.length;s++)for(var c=0,f=u[s].mutations;c<f.length;c++){var p=f[c];p instanceof ko&&r.get(p.key)===null&&(o=o.add(p.key))}var m=r;return this.Ue.getEntries(t,o).next(function(v){return v.forEach(function(y,w){w.isFoundDocument()&&(m=m.insert(y,w))}),m})},e}(),s4=function(){function e(t,n,r,o){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=o}return e.Pn=function(t,n){for(var r=tt(),o=tt(),s=0,u=n.docChanges;s<u.length;s++){var c=u[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}}return new e(t,n.fromCache,r,o)},e}(),bC=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,o){var s=this;return function(u){return u.filters.length===0&&u.limit===null&&u.startAt==null&&u.endAt==null&&(u.explicitOrderBy.length===0||u.explicitOrderBy.length===1&&u.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(Ae.min())?this.Dn(t,n):this.Sn.pn(t,o).next(function(u){var c=s.Cn(n,u);return(Vf(n)||Dd(n))&&s.Nn(n.limitType,c,o,r)?s.Dn(t,n):(s0()<=qe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),l0(n)),s.Sn.getDocumentsMatchingQuery(t,n,r).next(function(f){return c.forEach(function(p){f=f.insert(p.key,p)}),f}))})},e.prototype.Cn=function(t,n){var r=new zt(Vk(t));return n.forEach(function(o,s){$c(t,s)&&(r=r.add(s))}),r},e.prototype.Nn=function(t,n,r,o){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)},e.prototype.Dn=function(t,n){return s0()<=qe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",l0(n)),this.Sn.getDocumentsMatchingQuery(t,n,Ae.min())},e}(),a4=function(){function e(t,n,r,o){this.persistence=t,this.xn=n,this.R=o,this.kn=new xn(Pe),this.Fn=new wu(function(s){return Pc(s)},_p),this.$n=Ae.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new xC(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(e,t,n,r){return new a4(e,t,n,r)}function _C(e,t){return W(this,void 0,void 0,function(){var n,r,o,s;return K(this,function(u){switch(u.label){case 0:return n=ue(e),r=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var f;return n._n.getAllMutationBatches(c).next(function(p){return f=p,r=n.persistence.getMutationQueue(t),o=new xC(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(p){for(var m=[],v=[],y=tt(),w=0,_=f;w<_.length;w++){var S=_[w];m.push(S.batchId);for(var C=0,N=S.mutations;C<N.length;C++){var E=N[C];y=y.add(E.key)}}for(var x=0,j=p;x<j.length;x++){var k=j[x];v.push(k.batchId);for(var A=0,T=k.mutations;A<T.length;A++){var L=T[A];y=y.add(L.key)}}return o.pn(c,y).next(function(F){return{Ln:F,removedBatchIds:m,addedBatchIds:v}})})})];case 1:return s=u.sent(),[2,(n._n=r,n.Mn=o,n.xn.Vn(n.Mn),s)]}})})}function u4(e,t){var n=ue(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var o=t.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(u,c,f,p){var m=f.batch,v=m.keys(),y=J.resolve();return v.forEach(function(w){y=y.next(function(){return p.getEntry(c,w)}).next(function(_){var S=f.docVersions.get(w);_e(S!==null),_.version.compareTo(S)<0&&(m.applyToRemoteDocument(_,f),_.isValidDocument()&&p.addEntry(_,f.commitVersion))})}),y.next(function(){return u._n.removeMutationBatch(c,m)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,o)})})}function NC(e){var t=ue(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function l4(e,t){var n=ue(e),r=t.snapshotVersion,o=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var u=n.On.newChangeBuffer({trackRemovals:!0});o=n.kn;var c=[];t.targetChanges.forEach(function(m,v){var y=o.get(v);if(y){c.push(n.qe.removeMatchingKeys(s,m.removedDocuments,v).next(function(){return n.qe.addMatchingKeys(s,m.addedDocuments,v)}));var w=m.resumeToken;if(w.approximateByteSize()>0){var _=y.withResumeToken(w,r).withSequenceNumber(s.currentSequenceNumber);o=o.insert(v,_),function(S,C,N){return _e(C.resumeToken.approximateByteSize()>0),S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(y,_,m)&&c.push(n.qe.updateTargetData(s,_))}}});var f=Ur();if(t.documentUpdates.forEach(function(m,v){t.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),c.push(c4(s,u,t.documentUpdates,r).next(function(m){f=m})),!r.isEqual(Ae.min())){var p=n.qe.getLastRemoteSnapshotVersion(s).next(function(m){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(p)}return J.waitFor(c).next(function(){return u.apply(s)}).next(function(){return n.Mn.En(s,f)}).next(function(){return f})}).then(function(s){return n.kn=o,s})}function c4(e,t,n,r,o){var s=tt();return n.forEach(function(u){return s=s.add(u)}),t.getEntries(e,s).next(function(u){var c=Ur();return n.forEach(function(f,p){var m=u.get(f),v=r;p.isNoDocument()&&p.version.isEqual(Ae.min())?(t.removeEntry(f,v),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(p,v),c=c.insert(f,p)):ne("LocalStore","Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)}),c})}function h4(e,t){var n=ue(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function Ld(e,t){var n=ue(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var o;return n.qe.getTargetData(r,t).next(function(s){return s?(o=s,J.resolve(o)):n.qe.allocateTargetId(r).next(function(u){return o=new Tp(t,u,0,r.currentSequenceNumber),n.qe.addTargetData(r,o).next(function(){return o})})})}).then(function(r){var o=n.kn.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function uu(e,t,n){return W(this,void 0,void 0,function(){var r,o,s,u;return K(this,function(c){switch(c.label){case 0:r=ue(e),o=r.kn.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(f){return r.persistence.referenceDelegate.removeTarget(f,o)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!Os(u=c.sent()))throw u;return ne("LocalStore","Failed to update sequence numbers for target "+t+": "+u),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(o.target),[2]}})})}function Pd(e,t,n){var r=ue(e),o=Ae.min(),s=tt();return r.persistence.runTransaction("Execute query","readonly",function(u){return function(c,f,p){var m=ue(c),v=m.Fn.get(p);return v!==void 0?J.resolve(m.kn.get(v)):m.qe.getTargetData(f,p)}(r,u,ui(t)).next(function(c){if(c)return o=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(u,c.targetId).next(function(f){s=f})}).next(function(){return r.xn.getDocumentsMatchingQuery(u,t,n?o:Ae.min(),n?s:tt())}).next(function(c){return{documents:c,Bn:s}})})}function EC(e,t){var n=ue(e),r=ue(n.qe),o=n.kn.get(t);return o?Promise.resolve(o.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,t).next(function(u){return u?u.target:null})})}function IC(e){var t=ue(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,o,s){var u=ue(r),c=Ur(),f=tx(s),p=Ji(o),m=IDBKeyRange.lowerBound(f,!0);return p.$t({index:St.readTimeIndex,range:m},function(v,y){var w=d0(u.R,y);c=c.insert(w.key,w),f=y.readTime}).next(function(){return{wn:c,readTime:dC(f)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,o=n.readTime;return t.$n=o,r})}function f4(e){return W(this,void 0,void 0,function(){var t;return K(this,function(n){return[2,(t=ue(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(o){var s=Ji(o),u=Ae.min();return s.$t({index:St.readTimeIndex,reverse:!0},function(c,f,p){f.readTime&&(u=dC(f.readTime)),p.done()}).next(function(){return u})}(r)}).then(function(r){t.$n=r})]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d4=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return J.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:jn(r.createTime)}),J.resolve()},e.prototype.getNamedQuery=function(t,n){return J.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:mC(r.bundledQuery),readTime:jn(r.readTime)}}(n)),J.resolve()},e}(),ix=function(){function e(){this.Wn=new zt(Kt.Gn),this.zn=new zt(Kt.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new Kt(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(o){return r.addReference(o,n)})},e.prototype.removeReference=function(t,n){this.Yn(new Kt(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(o){return r.removeReference(o,n)})},e.prototype.Zn=function(t){var n=this,r=new me(new Ke([])),o=new Kt(r,t),s=new Kt(r,t+1),u=[];return this.zn.forEachInRange([o,s],function(c){n.Yn(c),u.push(c.key)}),u},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new me(new Ke([])),r=new Kt(n,t),o=new Kt(n,t+1),s=tt();return this.zn.forEachInRange([r,o],function(u){s=s.add(u.key)}),s},e.prototype.containsKey=function(t){var n=new Kt(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),Kt=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return me.comparator(t.key,n.key)||Pe(t.ns,n.ns)},e.Hn=function(t,n){return Pe(t.ns,n.ns)||me.comparator(t.key,n.key)},e}(),p4=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new zt(Kt.Gn)}return e.prototype.checkEmpty=function(t){return J.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,o){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var u=new ex(s,n,r,o);this._n.push(u);for(var c=0,f=o;c<f.length;c++){var p=f[c];this.rs=this.rs.add(new Kt(p.key,s)),this.Ut.addToCollectionParentIndex(t,p.key.path.popLast())}return J.resolve(u)},e.prototype.lookupMutationBatch=function(t,n){return J.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,o=this.cs(r),s=o<0?0:o;return J.resolve(this._n.length>s?this._n[s]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return J.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return J.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,o=new Kt(n,0),s=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.rs.forEachInRange([o,s],function(c){var f=r.os(c.ns);u.push(f)}),J.resolve(u)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,o=new zt(Pe);return n.forEach(function(s){var u=new Kt(s,0),c=new Kt(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([u,c],function(f){o=o.add(f.ns)})}),J.resolve(this.us(o))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,o=r.length+1,s=r;me.isDocumentKey(s)||(s=s.child(""));var u=new Kt(new me(s),0),c=new zt(Pe);return this.rs.forEachWhile(function(f){var p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(c=c.add(f.ns)),!0)},u),J.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(o){var s=n.os(o);s!==null&&r.push(s)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;_e(this.hs(n.batchId,"removed")===0),this._n.shift();var o=this.rs;return J.forEach(n.mutations,function(s){var u=new Kt(s.key,n.batchId);return o=o.delete(u),r.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(function(){r.rs=o})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new Kt(n,0),o=this.rs.firstAfterOrEqual(r);return J.resolve(n.isEqual(o&&o.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,J.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),m4=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new xn(me.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var o=n.key,s=this.docs.get(o),u=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(o,{document:n.clone(),size:c,readTime:r}),this.size+=c-u,this.Ut.addToCollectionParentIndex(t,o.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return J.resolve(r?r.document.clone():wn.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,o=Ur();return n.forEach(function(s){var u=r.docs.get(s);o=o.insert(s,u?u.document.clone():wn.newInvalidDocument(s))}),J.resolve(o)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var o=Ur(),s=new me(n.path.child("")),u=this.docs.getIteratorFrom(s);u.hasNext();){var c=u.getNext(),f=c.key,p=c.value,m=p.document,v=p.readTime;if(!n.path.isPrefixOf(f.path))break;v.compareTo(r)<=0||$c(n,m)&&(o=o.insert(m.key,m.clone()))}return J.resolve(o)},e.prototype.fs=function(t,n){return J.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new g4(this)},e.prototype.getSize=function(t){return J.resolve(this.size)},e}(),g4=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return be(t,e),t.prototype.applyChanges=function(n){var r=this,o=[];return this.changes.forEach(function(s,u){u.document.isValidDocument()?o.push(r.Ie.addEntry(n,u.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),J.waitFor(o)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(wC),v4=function(){function e(t){this.persistence=t,this.ds=new wu(function(n){return Pc(n)},_p),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ws=0,this._s=new ix,this.targetCount=0,this.ys=Od.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,o){return n(o)}),J.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return J.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return J.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),J.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),J.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new Od(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,J.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),J.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,J.resolve()},e.prototype.removeTargets=function(t,n,r){var o=this,s=0,u=[];return this.ds.forEach(function(c,f){f.sequenceNumber<=n&&r.get(f.targetId)===null&&(o.ds.delete(c),u.push(o.removeMatchingKeysForTargetId(t,f.targetId)),s++)}),J.waitFor(u).next(function(){return s})},e.prototype.getTargetCount=function(t){return J.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return J.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),J.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var o=this.persistence.referenceDelegate,s=[];return o&&n.forEach(function(u){s.push(o.markPotentiallyOrphaned(t,u))}),J.waitFor(s)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),J.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return J.resolve(r)},e.prototype.containsKey=function(t,n){return J.resolve(this._s.containsKey(n))},e}(),y4=function(){function e(t,n){var r=this;this.gs={},this.Ne=new tr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new v4(this),this.Ut=new W$,this.Ue=function(o,s){return new m4(o,function(u){return r.referenceDelegate.ps(u)})}(this.Ut),this.R=new fC(n),this.Ke=new d4(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new p4(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var o=this;ne("MemoryPersistence","Starting transaction:",t);var s=new w4(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(u){return o.referenceDelegate.Ts(s).next(function(){return u})}).toPromise().then(function(u){return s.raiseOnCommittedEvent(),u})},e.prototype.Is=function(t,n){return J.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),w4=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return be(t,e),t}(cC),x4=function(){function e(t){this.persistence=t,this.As=new ix,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw pe()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),J.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),J.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),J.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,n.targetId).next(function(s){s.forEach(function(u){return r.vs.add(u.toString())})}).next(function(){return o.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.vs,function(o){var s=me.fromPath(o);return n.Ps(t,s).next(function(u){u||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(o){o?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return J.or([function(){return J.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),Jt=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(e,t){return"firestore_clients_"+e+"_"+t}function dE(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Yv(e,t){return"firestore_targets_"+e+"_"+t}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");var pE=function(){function e(t,n,r,o){this.user=t,this.batchId=n,this.state=r,this.error=o}return e.Vs=function(t,n,r){var o,s=JSON.parse(r),u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(o=new Y(s.error.code,s.error.message)),u?new e(t,n,s.state,o):(Lt("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Qv=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,o=JSON.parse(n),s=typeof o=="object"&&["not-current","current","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return s&&o.error&&(s=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(r=new Y(o.error.code,o.error.message)),s?new e(t,o.state,r):(Lt("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),mE=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),o=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Ip(),u=0;o&&u<r.activeTargetIds.length;++u)o=Ok(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return o?new e(t,s):(Lt("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),b4=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Lt("SharedClientState","Failed to parse online state: "+t),null)},e}(),p0=function(){function e(){this.activeTargetIds=Ip()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),Xv=function(){function e(t,n,r,o,s){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new xn(Pe),this.started=!1,this.$s=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=fE(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new p0),this.Ls=new RegExp("^firestore_clients_"+u+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+u+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+u+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return W(this,void 0,void 0,function(){var t,n,r,o,s,u,c,f,p,m,v,y=this;return K(this,function(w){switch(w.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=w.sent(),n=0,r=t;n<r.length;n++)(o=r[n])!==this.Ns&&(s=this.getItem(fE(this.persistenceKey,o)))&&(u=mE.Vs(o,s))&&(this.Fs=this.Fs.insert(u.clientId,u));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(f=this.js(c))&&this.Ws(f),p=0,m=this.$s;p<m.length;p++)v=m[p],this.ks(v);return this.$s=[],this.window.addEventListener("pagehide",function(){return y.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,o){o.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(Yv(this.persistenceKey,t));if(r){var o=Qv.Vs(t,r);o&&(n=o.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(Yv(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var o=this;n.forEach(function(s){o.Hs(s)}),this.currentUser=t,r.forEach(function(s){o.addPendingMutation(s)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return ne("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){ne("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){ne("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Lt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return W(n,void 0,void 0,function(){var o,s,u,c,f,p;return K(this,function(m){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return o=this.ti(r.key),[2,this.ei(o,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(u=this.si(r.key,r.newValue)))return[2,this.ii(u)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(f=this.js(r.newValue)))return[2,this.Ws(f)]}else if(r.key===this.Ms)(p=function(v){var y=tr.o;if(v!=null)try{var w=JSON.parse(v);_e(typeof w=="number"),y=w}catch(_){Lt("SharedClientState","Failed to read sequence number from WebStorage",_)}return y}(r.newValue))!==tr.o&&this.sequenceNumberHandler(p);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var o=new pE(this.currentUser,t,n,r),s=dE(this.persistenceKey,this.currentUser,t);this.setItem(s,o.Ss())},e.prototype.Hs=function(t){var n=dE(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var o=Yv(this.persistenceKey,t),s=new Qv(t,n,r);this.setItem(o,s.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return mE.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),o=Number(r[1]),s=r[2]!==void 0?r[2]:null;return pE.Vs(new Jt(s),o,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),o=Number(r[1]);return Qv.Vs(o,n)},e.prototype.js=function(t){return b4.Vs(t)},e.prototype.ii=function(t){return W(this,void 0,void 0,function(){return K(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(ne("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,o=n?this.Fs.insert(t,n):this.Fs.remove(t),s=this.Gs(this.Fs),u=this.Gs(o),c=[],f=[];return u.forEach(function(p){s.has(p)||c.push(p)}),s.forEach(function(p){u.has(p)||f.push(p)}),this.syncEngine.hi(c,f).then(function(){r.Fs=o})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=Ip();return t.forEach(function(r,o){n=n.unionWith(o.activeTargetIds)}),n},e}(),TC=function(){function e(){this.li=new p0,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new p0,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),S4=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),gE=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),_4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},N4=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),E4=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return be(t,e),t.prototype.Fi=function(n,r,o,s){return new Promise(function(u,c){var f=new t$;f.listenOnce(JU.COMPLETE,function(){try{switch(f.getLastErrorCode()){case Gv.NO_ERROR:var m=f.getResponseJson();ne("Connection","XHR received:",JSON.stringify(m)),u(m);break;case Gv.TIMEOUT:ne("Connection",'RPC "'+n+'" timed out'),c(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case Gv.HTTP_ERROR:var v=f.getStatus();if(ne("Connection",'RPC "'+n+'" failed with status:',v,"response text:",f.getResponseText()),v>0){var y=f.getResponseJson().error;if(y&&y.status&&y.message){var w=function(_){var S=_.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(S)>=0?S:U.UNKNOWN}(y.status);c(new Y(w,y.message))}else c(new Y(U.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Y(U.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{ne("Connection",'RPC "'+n+'" completed.')}});var p=JSON.stringify(s);f.send(r,"POST",p,o,15)})},t.prototype.Oi=function(n,r){var o=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=QU(),u=XU(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new e$({})),this.ki(c.initMessageHeaders,r),iF()||aF()||uF()||lF()||cF()||sF()||(c.httpHeadersOverwriteParam="$httpHeaders");var f=o.join("");ne("Connection","Creating WebChannel: "+f,c);var p=s.createWebChannel(f,c),m=!1,v=!1,y=new N4({Ei:function(_){v?ne("Connection","Not sending because WebChannel is closed:",_):(m||(ne("Connection","Opening WebChannel transport."),p.open(),m=!0),ne("Connection","WebChannel sending:",_),p.send(_))},Ti:function(){return p.close()}}),w=function(_,S,C){_.listen(S,function(N){try{C(N)}catch(E){setTimeout(function(){throw E},0)}})};return w(p,yf.EventType.OPEN,function(){v||ne("Connection","WebChannel transport opened.")}),w(p,yf.EventType.CLOSE,function(){v||(v=!0,ne("Connection","WebChannel transport closed"),y.Vi())}),w(p,yf.EventType.ERROR,function(_){v||(v=!0,Td("Connection","WebChannel transport errored:",_),y.Vi(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),w(p,yf.EventType.MESSAGE,function(_){var S;if(!v){var C=_.data[0];_e(!!C);var N=C,E=N.error||((S=N[0])===null||S===void 0?void 0:S.error);if(E){ne("Connection","WebChannel received error:",E);var x=E.status,j=function(A){var T=Rt[A];if(T!==void 0)return Xk(T)}(x),k=E.message;j===void 0&&(j=U.INTERNAL,k="Unknown error status: "+x+" with message "+E.message),v=!0,y.Vi(new Y(j,k)),p.close()}else ne("Connection","WebChannel received:",C),y.Si(C)}}),w(u,ZU.STAT_EVENT,function(_){_.stat===RN.PROXY?ne("Connection","Detected buffering proxy"):_.stat===RN.NOPROXY&&ne("Connection","Detected no buffering proxy")}),setTimeout(function(){y.Pi()},0),y},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,o){var s=this.xi(t,n);ne("RestConnection","Sending: ",s,r);var u={};return this.ki(u,o),this.Fi(t,s,u,r).then(function(c){return ne("RestConnection","Received: ",c),c},function(c){throw Td("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.$i=function(t,n,r,o){return this.Ni(t,n,r,o)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=_4[t];return this.Di+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof window<"u"?window:null}function qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(e){return new A$(e,!0)}var ox=function(){function e(t,n,r,o,s){r===void 0&&(r=1e3),o===void 0&&(o=1.5),s===void 0&&(s=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=o,this.Bi=s,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),o=Math.max(0,Date.now()-this.Ki),s=Math.max(0,r-o);s>0&&ne("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+o+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),kC=function(){function e(t,n,r,o,s,u){this.Se=t,this.zi=r,this.Hi=o,this.Ji=s,this.listener=u,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ox(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return W(this,void 0,void 0,function(){return K(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return W(this,void 0,void 0,function(){return K(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return W(this,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Lt(n.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===U.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(o){t.Yi===r&&t.lr(o)},function(o){n(function(){var s=new Y(U.UNKNOWN,"Fetching auth token failed: "+o.message);return t.dr(s)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(o){r(function(){return n.dr(o)})}),this.stream.onMessage(function(o){r(function(){return n.onMessage(o)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return W(t,void 0,void 0,function(){return K(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return ne("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),I4=function(e){function t(n,r,o,s,u){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,o,u)||this).R=s,c}return be(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,u){var c;if("targetChange"in u){u.targetChange;var f=function(C){return C==="NO_CHANGE"?0:C==="ADD"?1:C==="REMOVE"?2:C==="CURRENT"?3:C==="RESET"?4:pe()}(u.targetChange.targetChangeType||"NO_CHANGE"),p=u.targetChange.targetIds||[],m=function(C,N){return C.I?(_e(N===void 0||typeof N=="string"),zn.fromBase64String(N||"")):(_e(N===void 0||N instanceof Uint8Array),zn.fromUint8Array(N||new Uint8Array))}(s,u.targetChange.resumeToken),v=(y=u.targetChange.cause)&&function(C){var N=C.code===void 0?U.UNKNOWN:Xk(C.code);return new Y(N,C.message||"")}(y);c=new Zk(f,p,m,v||null)}else if("documentChange"in u){u.documentChange,(f=u.documentChange).document,f.document.name,f.document.updateTime,p=Ni(s,f.document.name),m=jn(f.document.updateTime);var y=new Jn({mapValue:{fields:f.document.fields}}),w=(v=wn.newFoundDocument(p,m,y),f.targetIds||[]),_=f.removedTargetIds||[];c=new zf(w,_,v.key,v)}else if("documentDelete"in u)u.documentDelete,(f=u.documentDelete).document,p=Ni(s,f.document),m=f.readTime?jn(f.readTime):Ae.min(),y=wn.newNoDocument(p,m),v=f.removedTargetIds||[],c=new zf([],v,y.key,y);else if("documentRemove"in u)u.documentRemove,(f=u.documentRemove).document,p=Ni(s,f.document),m=f.removedTargetIds||[],c=new zf([],m,p,null);else{if(!("filter"in u))return pe();u.filter;var S=u.filter;S.targetId,f=S.count||0,p=new b$(f),m=S.targetId,c=new Jk(m,p)}return c}(this.R,n),o=function(s){if(!("targetChange"in s))return Ae.min();var u=s.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?jn(u.readTime):Ae.min()}(n);return this.listener._r(r,o)},t.prototype.mr=function(n){var r={};r.database=gc(this.R),r.addTarget=function(s,u){var c,f=u.target;return(c=Cd(f)?{documents:iC(s,f)}:{query:oC(s,f)}).targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=eC(s,u.resumeToken):u.snapshotVersion.compareTo(Ae.min())>0&&(c.readTime=pc(s,u.snapshotVersion.toTimestamp())),c}(this.R,n);var o=function(s,u){var c=function(f,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pe()}}(0,u.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);o&&(r.labels=o),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=gc(this.R),r.removeTarget=n,this.cr(r)},t}(kC),T4=function(e){function t(n,r,o,s,u){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,o,u)||this).R=s,c.gr=!1,c}return be(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(_e(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,u){return s&&s.length>0?(_e(u!==void 0),s.map(function(c){return function(f,p){var m=f.updateTime?jn(f.updateTime):jn(p);return m.isEqual(Ae.min())&&(m=jn(p)),new y$(m,f.transformResults||[])}(c,u)})):[]}(n.writeResults,n.commitTime),o=jn(n.commitTime);return this.listener.Tr(o,r)}return _e(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=gc(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,o={streamToken:this.lastStreamToken,writes:n.map(function(s){return Rd(r.R,s)})};this.cr(o)},t}(kC),j4=function(e){function t(n,r,o){var s=this;return(s=e.call(this)||this).credentials=n,s.Hi=r,s.R=o,s.Rr=!1,s}return be(t,e),t.prototype.br=function(){if(this.Rr)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,o){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.Ni(n,r,o,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===U.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new Y(U.UNKNOWN,u.toString())})},t.prototype.$i=function(n,r,o){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.$i(n,r,o,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===U.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new Y(U.UNKNOWN,u.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),k4=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Lt(n),this.Vr=!1):ne("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),C4=function(e,t,n,r,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di(function(u){n.enqueueAndForget(function(){return W(s,void 0,void 0,function(){return K(this,function(c){switch(c.label){case 0:return Co(this)?(ne("RemoteStore","Restarting streams for network reachability change."),[4,function(f){return W(this,void 0,void 0,function(){var p;return K(this,function(m){switch(m.label){case 0:return(p=ue(f)).Or.add(4),[4,xu(p)];case 1:return m.sent(),p.Br.set("Unknown"),p.Or.delete(4),[4,qc(p)];case 2:return m.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new k4(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(e){return W(this,void 0,void 0,function(){var t,n;return K(this,function(r){switch(r.label){case 0:if(!Co(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function xu(e){return W(this,void 0,void 0,function(){var t,n;return K(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function kp(e,t){var n=ue(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),ux(n)?ax(n):Su(n).er()&&sx(n,t))}function vc(e,t){var n=ue(e),r=Su(n);n.$r.delete(t),r.er()&&CC(n,t),n.$r.size===0&&(r.er()?r.ir():Co(n)&&n.Br.set("Unknown"))}function sx(e,t){e.qr.U(t.targetId),Su(e).mr(t)}function CC(e,t){e.qr.U(t),Su(e).yr(t)}function ax(e){e.qr=new j$({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Su(e).start(),e.Br.Sr()}function ux(e){return Co(e)&&!Su(e).tr()&&e.$r.size>0}function Co(e){return ue(e).Or.size===0}function AC(e){e.qr=void 0}function A4(e){return W(this,void 0,void 0,function(){return K(this,function(t){return e.$r.forEach(function(n,r){sx(e,n)}),[2]})})}function D4(e,t){return W(this,void 0,void 0,function(){return K(this,function(n){return AC(e),ux(e)?(e.Br.Nr(t),ax(e)):e.Br.set("Unknown"),[2]})})}function R4(e,t,n){return W(this,void 0,void 0,function(){var r,o,s;return K(this,function(u){switch(u.label){case 0:if(e.Br.set("Online"),!(t instanceof Zk&&t.state===2&&t.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(c,f){return W(this,void 0,void 0,function(){var p,m,v,y;return K(this,function(w){switch(w.label){case 0:p=f.cause,m=0,v=f.targetIds,w.label=1;case 1:return m<v.length?(y=v[m],c.$r.has(y)?[4,c.remoteSyncer.rejectListen(y,p)]:[3,3]):[3,5];case 2:w.sent(),c.$r.delete(y),c.qr.removeTarget(y),w.label=3;case 3:w.label=4;case 4:return m++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),ne("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Fd(e,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof zf?e.qr.X(t):t instanceof Jk?e.qr.rt(t):e.qr.et(t),n.isEqual(Ae.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,NC(e.localStore)];case 8:return o=u.sent(),n.compareTo(o)>=0?[4,function(c,f){var p=c.qr.ut(f);return p.targetChanges.forEach(function(m,v){if(m.resumeToken.approximateByteSize()>0){var y=c.$r.get(v);y&&c.$r.set(v,y.withResumeToken(m.resumeToken,f))}}),p.targetMismatches.forEach(function(m){var v=c.$r.get(m);if(v){c.$r.set(m,v.withResumeToken(zn.EMPTY_BYTE_STRING,v.snapshotVersion)),CC(c,m);var y=new Tp(v.target,m,1,v.sequenceNumber);sx(c,y)}}),c.remoteSyncer.applyRemoteEvent(p)}(e,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return ne("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,Fd(e,s)];case 12:return u.sent(),[3,13];case 13:return[2]}})})}function Fd(e,t,n){return W(this,void 0,void 0,function(){var r=this;return K(this,function(o){switch(o.label){case 0:if(!Os(t))throw t;return e.Or.add(1),[4,xu(e)];case 1:return o.sent(),e.Br.set("Offline"),n||(n=function(){return NC(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return W(r,void 0,void 0,function(){return K(this,function(s){switch(s.label){case 0:return ne("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Or.delete(1),[4,qc(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function DC(e,t){return t().catch(function(n){return Fd(e,n,t)})}function bu(e){return W(this,void 0,void 0,function(){var t,n,r,o,s;return K(this,function(u){switch(u.label){case 0:t=ue(e),n=_o(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,u.label=1;case 1:if(!function(c){return Co(c)&&c.Fr.length<10}(t))return[3,7];u.label=2;case 2:return u.trys.push([2,4,,6]),[4,h4(t.localStore,r)];case 3:return(o=u.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=o.batchId,function(c,f){c.Fr.push(f);var p=_o(c);p.er()&&p.pr&&p.Er(f.mutations)}(t,o),[3,6]);case 4:return s=u.sent(),[4,Fd(t,s)];case 5:return u.sent(),[3,6];case 6:return[3,1];case 7:return RC(t)&&MC(t),[2]}})})}function RC(e){return Co(e)&&!_o(e).tr()&&e.Fr.length>0}function MC(e){_o(e).start()}function M4(e){return W(this,void 0,void 0,function(){return K(this,function(t){return _o(e).Ar(),[2]})})}function O4(e){return W(this,void 0,void 0,function(){var t,n,r,o;return K(this,function(s){for(t=_o(e),n=0,r=e.Fr;n<r.length;n++)o=r[n],t.Er(o.mutations);return[2]})})}function L4(e,t,n){return W(this,void 0,void 0,function(){var r,o;return K(this,function(s){switch(s.label){case 0:return r=e.Fr.shift(),o=H$.from(r,t,n),[4,DC(e,function(){return e.remoteSyncer.applySuccessfulWrite(o)})];case 1:return s.sent(),[4,bu(e)];case 2:return s.sent(),[2]}})})}function P4(e,t){return W(this,void 0,void 0,function(){return K(this,function(n){switch(n.label){case 0:return t&&_o(e).pr?[4,function(r,o){return W(this,void 0,void 0,function(){var s,u;return K(this,function(c){switch(c.label){case 0:return Qk(u=o.code)&&u!==U.ABORTED?(s=r.Fr.shift(),_o(r).sr(),[4,DC(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,o)})]):[3,3];case 1:return c.sent(),[4,bu(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return RC(e)&&MC(e),[2]}})})}function m0(e,t){return W(this,void 0,void 0,function(){var n;return K(this,function(r){switch(r.label){case 0:return n=ue(e),t?(n.Or.delete(2),[4,qc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,xu(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Su(e){var t=this;return e.Ur||(e.Ur=function(n,r,o){var s=ue(n);return s.br(),new I4(r,s.Hi,s.credentials,s.R,o)}(e.datastore,e.asyncQueue,{Ii:A4.bind(null,e),Ri:D4.bind(null,e),_r:R4.bind(null,e)}),e.Mr.push(function(n){return W(t,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),ux(e)?ax(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),AC(e),r.label=3;case 3:return[2]}})})})),e.Ur}function _o(e){var t=this;return e.Kr||(e.Kr=function(n,r,o){var s=ue(n);return s.br(),new T4(r,s.Hi,s.credentials,s.R,o)}(e.datastore,e.asyncQueue,{Ii:M4.bind(null,e),Ri:P4.bind(null,e),Ir:O4.bind(null,e),Tr:L4.bind(null,e)}),e.Mr.push(function(n){return W(t,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,bu(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(ne("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var F4=function(){function e(t,n,r,o,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=s,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(u){})}return e.createAndSchedule=function(t,n,r,o,s){var u=new e(t,n,Date.now()+r,o,s);return u.start(r),u},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function _u(e,t){if(Lt("AsyncQueue",t+": "+e),Os(e))return new Y(U.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OC=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||me.comparator(n.key,r.key)}:function(n,r){return me.comparator(n.key,r.key)},this.keyedMap=h0(),this.sortedSet=new xn(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var o=n.getNext().key,s=r.getNext().key;if(!o.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),vE=function(){function e(){this.Qr=new xn(me.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):pe():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),Ud=function(){function e(t,n,r,o,s,u,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=f}return e.fromInitialDocuments=function(t,n,r,o){var s=[];return n.forEach(function(u){s.push({type:0,doc:u})}),new e(t,n,OC.emptySet(n),s,r,o,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Uc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0},e}(),U4=function(){this.Wr=void 0,this.listeners=[]},$4=function(){this.queries=new wu(function(e){return $k(e)},Uc),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(e,t){return W(this,void 0,void 0,function(){var n,r,o,s,u,c,f;return K(this,function(p){switch(p.label){case 0:if(n=ue(e),r=t.query,o=!1,(s=n.queries.get(r))||(o=!0,s=new U4),!o)return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),u=s,[4,n.onListen(r)];case 2:return u.Wr=p.sent(),[3,4];case 3:return c=p.sent(),f=_u(c,"Initialization of query '"+l0(t.query)+"' failed"),[2,void t.onError(f)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&hx(n),[2]}})})}function cx(e,t){return W(this,void 0,void 0,function(){var n,r,o,s,u;return K(this,function(c){return n=ue(e),r=t.query,o=!1,(s=n.queries.get(r))&&(u=s.listeners.indexOf(t))>=0&&(s.listeners.splice(u,1),o=s.listeners.length===0),o?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function V4(e,t){for(var n=ue(e),r=!1,o=0,s=t;o<s.length;o++){var u=s[o],c=u.query,f=n.queries.get(c);if(f){for(var p=0,m=f.listeners;p<m.length;p++)m[p].Hr(u)&&(r=!0);f.Wr=u}}r&&hx(n)}function B4(e,t,n){var r=ue(e),o=r.queries.get(t);if(o)for(var s=0,u=o.listeners;s<u.length;s++)u[s].onError(n);r.queries.delete(t)}function hx(e){e.Gr.forEach(function(t){t.next()})}var fx=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,o=t.docChanges;r<o.length;r++){var s=o[r];s.type!==3&&n.push(s)}t=new Ud(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var u=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),u=!0):this.eo(t,this.onlineState)&&(this.no(t),u=!0),this.Xr=t,u},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=Ud.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LC=function(e){this.key=e},PC=function(e){this.key=e},FC=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=tt(),this.mutatedKeys=tt(),this.lo=Vk(t),this.fo=new OC(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,o=n?n.mo:new vE,s=n?n.fo:this.fo,u=n?n.mutatedKeys:this.mutatedKeys,c=s,f=!1,p=Vf(this.query)&&s.size===this.query.limit?s.last():null,m=Dd(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(function(y,w){var _=s.get(y),S=$c(r.query,w)?w:null,C=!!_&&r.mutatedKeys.has(_.key),N=!!S&&(S.hasLocalMutations||r.mutatedKeys.has(S.key)&&S.hasCommittedMutations),E=!1;_&&S?_.data.isEqual(S.data)?C!==N&&(o.track({type:3,doc:S}),E=!0):r.yo(_,S)||(o.track({type:2,doc:S}),E=!0,(p&&r.lo(S,p)>0||m&&r.lo(S,m)<0)&&(f=!0)):!_&&S?(o.track({type:0,doc:S}),E=!0):_&&!S&&(o.track({type:1,doc:_}),E=!0,(p||m)&&(f=!0)),E&&(S?(c=c.add(S),u=N?u.add(y):u.delete(y)):(c=c.delete(y),u=u.delete(y)))}),Vf(this.query)||Dd(this.query))for(;c.size>this.query.limit;){var v=Vf(this.query)?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),o.track({type:1,doc:v})}return{fo:c,mo:o,Nn:f,mutatedKeys:u}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var o=this,s=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var u=t.mo.jr();u.sort(function(m,v){return function(y,w){var _=function(S){switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return _(y)-_(w)}(m.type,v.type)||o.lo(m.doc,v.doc)}),this.po(r);var c=n?this.Eo():[],f=this.ho.size===0&&this.current?1:0,p=f!==this.ao;return this.ao=f,u.length!==0||p?{snapshot:new Ud(this.query,t.fo,s,u,t.mutatedKeys,f===0,p,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new vE,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=tt(),this.fo.forEach(function(o){t.Io(o.key)&&(t.ho=t.ho.add(o.key))});var r=[];return n.forEach(function(o){t.ho.has(o)||r.push(new PC(o))}),this.ho.forEach(function(o){n.has(o)||r.push(new LC(o))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=tt();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return Ud.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),z4=function(e,t,n){this.query=e,this.targetId=t,this.view=n},q4=function(e){this.key=e,this.bo=!1},K4=function(){function e(t,n,r,o,s,u){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.vo={},this.Po=new wu(function(c){return $k(c)},Uc),this.Vo=new Map,this.So=new Set,this.Do=new xn(me.comparator),this.Co=new Map,this.No=new ix,this.xo={},this.ko=new Map,this.Fo=Od.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function H4(e,t){return W(this,void 0,void 0,function(){var n,r,o,s,u,c;return K(this,function(f){switch(f.label){case 0:return n=vx(e),(s=n.Po.get(t))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),o=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Ld(n.localStore,ui(t))];case 2:return u=f.sent(),c=n.sharedClientState.addLocalQueryTarget(u.targetId),r=u.targetId,[4,dx(n,t,r,c==="current")];case 3:o=f.sent(),n.isPrimaryClient&&kp(n.remoteStore,u),f.label=4;case 4:return[2,o]}})})}function dx(e,t,n,r){return W(this,void 0,void 0,function(){var o,s,u,c,f,p;return K(this,function(m){switch(m.label){case 0:return e.Oo=function(v,y,w){return function(_,S,C,N){return W(this,void 0,void 0,function(){var E,x,j;return K(this,function(k){switch(k.label){case 0:return E=S.view._o(C),E.Nn?[4,Pd(_.localStore,S.query,!1).then(function(A){var T=A.documents;return S.view._o(T,E)})]:[3,2];case 1:E=k.sent(),k.label=2;case 2:return x=N&&N.targetChanges.get(S.targetId),j=S.view.applyChanges(E,_.isPrimaryClient,x),[2,(g0(_,S.targetId,j.To),j.snapshot)]}})})}(e,v,y,w)},[4,Pd(e.localStore,t,!0)];case 1:return o=m.sent(),s=new FC(t,o.Bn),u=s._o(o.documents),c=Xw.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),f=s.applyChanges(u,e.isPrimaryClient,c),g0(e,n,f.To),p=new z4(t,n,s),[2,(e.Po.set(t,p),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),f.snapshot)]}})})}function G4(e,t){return W(this,void 0,void 0,function(){var n,r,o;return K(this,function(s){switch(s.label){case 0:return n=ue(e),r=n.Po.get(t),(o=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,o.filter(function(u){return!Uc(u,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,uu(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),vc(n.remoteStore,r.targetId),lu(n,r.targetId)}).catch(Ls)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return lu(n,r.targetId),[4,uu(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function W4(e,t,n){return W(this,void 0,void 0,function(){var r,o,s,u;return K(this,function(c){switch(c.label){case 0:r=yx(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(f,p){var m,v=ue(f),y=Bn.now(),w=p.reduce(function(_,S){return _.add(S.key)},tt());return v.persistence.runTransaction("Locally write mutations","readwrite",function(_){return v.Mn.pn(_,w).next(function(S){m=S;for(var C=[],N=0,E=p;N<E.length;N++){var x=E[N],j=x$(x,m.get(x.key));j!=null&&C.push(new ko(x.key,j,Lk(j.value.mapValue),gn.exists(!0)))}return v._n.addMutationBatch(_,y,C,p)})}).then(function(_){return _.applyToLocalDocumentSet(m),{batchId:_.batchId,changes:m}})}(r.localStore,t)];case 2:return o=c.sent(),r.sharedClientState.addPendingMutation(o.batchId),function(f,p,m){var v=f.xo[f.currentUser.toKey()];v||(v=new xn(Pe)),v=v.insert(p,m),f.xo[f.currentUser.toKey()]=v}(r,o.batchId,n),[4,Ao(r,o.changes)];case 3:return c.sent(),[4,bu(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),u=_u(s,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}})})}function UC(e,t){return W(this,void 0,void 0,function(){var n,r;return K(this,function(o){switch(o.label){case 0:n=ue(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,l4(n.localStore,t)];case 2:return r=o.sent(),t.targetChanges.forEach(function(s,u){var c=n.Co.get(u);c&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?_e(c.bo):s.removedDocuments.size>0&&(_e(c.bo),c.bo=!1))}),[4,Ao(n,r,t)];case 3:return o.sent(),[3,6];case 4:return[4,Ls(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function yE(e,t,n){var r=ue(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var o=[];r.Po.forEach(function(s,u){var c=u.view.zr(t);c.snapshot&&o.push(c.snapshot)}),function(s,u){var c=ue(s);c.onlineState=u;var f=!1;c.queries.forEach(function(p,m){for(var v=0,y=m.listeners;v<y.length;v++)y[v].zr(u)&&(f=!0)}),f&&hx(c)}(r.eventManager,t),o.length&&r.vo._r(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Y4(e,t,n){return W(this,void 0,void 0,function(){var r,o,s,u,c,f;return K(this,function(p){switch(p.label){case 0:return(r=ue(e)).sharedClientState.updateQueryState(t,"rejected",n),o=r.Co.get(t),(s=o&&o.key)?(u=(u=new xn(me.comparator)).insert(s,wn.newNoDocument(s,Ae.min())),c=tt().add(s),f=new Qw(Ae.min(),new Map,new zt(Pe),u,c),[4,UC(r,f)]):[3,2];case 1:return p.sent(),r.Do=r.Do.remove(s),r.Co.delete(t),gx(r),[3,4];case 2:return[4,uu(r.localStore,t,!1).then(function(){return lu(r,t,n)}).catch(Ls)];case 3:p.sent(),p.label=4;case 4:return[2]}})})}function Q4(e,t){return W(this,void 0,void 0,function(){var n,r,o;return K(this,function(s){switch(s.label){case 0:n=ue(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,u4(n.localStore,t)];case 2:return o=s.sent(),mx(n,r,null),px(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ao(n,o)];case 3:return s.sent(),[3,6];case 4:return[4,Ls(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function X4(e,t,n){return W(this,void 0,void 0,function(){var r,o;return K(this,function(s){switch(s.label){case 0:r=ue(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(u,c){var f=ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",function(p){var m;return f._n.lookupMutationBatch(p,c).next(function(v){return _e(v!==null),m=v.keys(),f._n.removeMutationBatch(p,v)}).next(function(){return f._n.performConsistencyCheck(p)}).next(function(){return f.Mn.pn(p,m)})})}(r.localStore,t)];case 2:return o=s.sent(),mx(r,t,n),px(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Ao(r,o)];case 3:return s.sent(),[3,6];case 4:return[4,Ls(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function J4(e,t){return W(this,void 0,void 0,function(){var n,r,o,s,u;return K(this,function(c){switch(c.label){case 0:Co((n=ue(e)).remoteStore)||ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(f){var p=ue(f);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(m){return p._n.getHighestUnacknowledgedBatchId(m)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((o=n.ko.get(r)||[]).push(t),n.ko.set(r,o),[3,4]);case 3:return s=c.sent(),u=_u(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(u),[3,4];case 4:return[2]}})})}function px(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function mx(e,t,n){var r=ue(e),o=r.xo[r.currentUser.toKey()];if(o){var s=o.get(t);s&&(n?s.reject(n):s.resolve(),o=o.remove(t)),r.xo[r.currentUser.toKey()]=o}}function lu(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,o=e.Vo.get(t);r<o.length;r++){var s=o[r];e.Po.delete(s),n&&e.vo.Mo(s,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(u){e.No.containsKey(u)||$C(e,u)})}function $C(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(vc(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),gx(e))}function g0(e,t,n){for(var r=0,o=n;r<o.length;r++){var s=o[r];s instanceof LC?(e.No.addReference(s.key,t),Z4(e,s)):s instanceof PC?(ne("SyncEngine","Document no longer in limbo: "+s.key),e.No.removeReference(s.key,t),e.No.containsKey(s.key)||$C(e,s.key)):pe()}}function Z4(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(ne("SyncEngine","New document in limbo: "+n),e.So.add(r),gx(e))}function gx(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new me(Ke.fromString(t)),r=e.Fo.next();e.Co.set(r,new q4(n)),e.Do=e.Do.insert(n,r),kp(e.remoteStore,new Tp(ui(Fc(n.path)),r,2,tr.o))}}function Ao(e,t,n){return W(this,void 0,void 0,function(){var r,o,s,u;return K(this,function(c){switch(c.label){case 0:return r=ue(e),o=[],s=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(f,p){u.push(r.Oo(p,t,n).then(function(m){if(m){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,m.fromCache?"not-current":"current"),o.push(m);var v=s4.Pn(p.targetId,m);s.push(v)}}))}),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(o),[4,function(f,p){return W(this,void 0,void 0,function(){var m,v,y,w,_,S,C,N,E;return K(this,function(x){switch(x.label){case 0:m=ue(f),x.label=1;case 1:return x.trys.push([1,3,,4]),[4,m.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(j){return J.forEach(p,function(k){return J.forEach(k.bn,function(A){return m.persistence.referenceDelegate.addReference(j,k.targetId,A)}).next(function(){return J.forEach(k.vn,function(A){return m.persistence.referenceDelegate.removeReference(j,k.targetId,A)})})})})];case 2:return x.sent(),[3,4];case 3:if(!Os(v=x.sent()))throw v;return ne("LocalStore","Failed to update sequence numbers: "+v),[3,4];case 4:for(y=0,w=p;y<w.length;y++)_=w[y],S=_.targetId,_.fromCache||(C=m.kn.get(S),N=C.snapshotVersion,E=C.withLastLimboFreeSnapshotVersion(N),m.kn=m.kn.insert(S,E));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function eV(e,t){return W(this,void 0,void 0,function(){var n,r;return K(this,function(o){switch(o.label){case 0:return(n=ue(e)).currentUser.isEqual(t)?[3,3]:(ne("SyncEngine","User change. New user:",t.toKey()),[4,_C(n.localStore,t)]);case 1:return r=o.sent(),n.currentUser=t,function(s,u){s.ko.forEach(function(c){c.forEach(function(f){f.reject(new Y(U.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Ao(n,r.Ln)];case 2:o.sent(),o.label=3;case 3:return[2]}})})}function tV(e,t){var n=ue(e),r=n.Co.get(t);if(r&&r.bo)return tt().add(r.key);var o=tt(),s=n.Vo.get(t);if(!s)return o;for(var u=0,c=s;u<c.length;u++){var f=c[u],p=n.Po.get(f);o=o.unionWith(p.view.wo)}return o}function nV(e,t){return W(this,void 0,void 0,function(){var n,r,o;return K(this,function(s){switch(s.label){case 0:return[4,Pd((n=ue(e)).localStore,t.query,!0)];case 1:return r=s.sent(),o=t.view.Ao(r),[2,(n.isPrimaryClient&&g0(n,t.targetId,o.To),o)]}})})}function rV(e){return W(this,void 0,void 0,function(){var t;return K(this,function(n){return[2,IC((t=ue(e)).localStore).then(function(r){return Ao(t,r)})]})})}function iV(e,t,n,r){return W(this,void 0,void 0,function(){var o,s;return K(this,function(u){switch(u.label){case 0:return[4,function(c,f){var p=ue(c),m=ue(p._n);return p.persistence.runTransaction("Lookup mutation documents","readonly",function(v){return m.jt(v,f).next(function(y){return y?p.Mn.pn(v,y):J.resolve(null)})})}((o=ue(e)).localStore,t)];case 1:return(s=u.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,bu(o.remoteStore)];case 2:return u.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(mx(o,t,r||null),px(o,t),function(c,f){ue(ue(c)._n).Gt(f)}(o.localStore,t)):pe(),u.label=4;case 4:return[4,Ao(o,s)];case 5:return u.sent(),[3,7];case 6:ne("SyncEngine","Cannot apply mutation batch with id: "+t),u.label=7;case 7:return[2]}})})}function oV(e,t){return W(this,void 0,void 0,function(){var n,r,o,s,u,c,f,p;return K(this,function(m){switch(m.label){case 0:return vx(n=ue(e)),yx(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,wE(n,r.toArray())]);case 1:return o=m.sent(),n.$o=!0,[4,m0(n.remoteStore,!0)];case 2:for(m.sent(),s=0,u=o;s<u.length;s++)c=u[s],kp(n.remoteStore,c);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(f=[],p=Promise.resolve(),n.Vo.forEach(function(v,y){n.sharedClientState.isLocalQueryTarget(y)?f.push(y):p=p.then(function(){return lu(n,y),uu(n.localStore,y,!0)}),vc(n.remoteStore,y)}),[4,p]);case 4:return m.sent(),[4,wE(n,f)];case 5:return m.sent(),function(v){var y=ue(v);y.Co.forEach(function(w,_){vc(y.remoteStore,_)}),y.No.ts(),y.Co=new Map,y.Do=new xn(me.comparator)}(n),n.$o=!1,[4,m0(n.remoteStore,!1)];case 6:m.sent(),m.label=7;case 7:return[2]}})})}function wE(e,t,n){return W(this,void 0,void 0,function(){var r,o,s,u,c,f,p,m,v,y,w,_,S,C;return K(this,function(N){switch(N.label){case 0:r=ue(e),o=[],s=[],u=0,c=t,N.label=1;case 1:return u<c.length?(f=c[u],p=void 0,(m=r.Vo.get(f))&&m.length!==0?[4,Ld(r.localStore,ui(m[0]))]:[3,7]):[3,13];case 2:p=N.sent(),v=0,y=m,N.label=3;case 3:return v<y.length?(w=y[v],_=r.Po.get(w),[4,nV(r,_)]):[3,6];case 4:(S=N.sent()).snapshot&&s.push(S.snapshot),N.label=5;case 5:return v++,[3,3];case 6:return[3,11];case 7:return[4,EC(r.localStore,f)];case 8:return C=N.sent(),[4,Ld(r.localStore,C)];case 9:return p=N.sent(),[4,dx(r,VC(C),f,!1)];case 10:N.sent(),N.label=11;case 11:o.push(p),N.label=12;case 12:return u++,[3,1];case 13:return[2,(r.vo._r(s),o)]}})})}function VC(e){return Fk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sV(e){var t=ue(e);return ue(ue(t.localStore).persistence).fn()}function aV(e,t,n,r){return W(this,void 0,void 0,function(){var o,s,u;return K(this,function(c){switch(c.label){case 0:return(o=ue(e)).$o?(ne("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,IC(o.localStore)];case 3:return s=c.sent(),u=Qw.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,Ao(o,s,u)];case 4:return c.sent(),[3,8];case 5:return[4,uu(o.localStore,t,!0)];case 6:return c.sent(),lu(o,t,r),[3,8];case 7:pe(),c.label=8;case 8:return[2]}})})}function uV(e,t,n){return W(this,void 0,void 0,function(){var r,o,s,u,c,f,p,m,v,y;return K(this,function(w){switch(w.label){case 0:if(!(r=vx(e)).$o)return[3,10];o=0,s=t,w.label=1;case 1:return o<s.length?(u=s[o],r.Vo.has(u)?(ne("SyncEngine","Adding an already active target "+u),[3,5]):[4,EC(r.localStore,u)]):[3,6];case 2:return c=w.sent(),[4,Ld(r.localStore,c)];case 3:return f=w.sent(),[4,dx(r,VC(c),f.targetId,!1)];case 4:w.sent(),kp(r.remoteStore,f),w.label=5;case 5:return o++,[3,1];case 6:p=function(_){return K(this,function(S){switch(S.label){case 0:return r.Vo.has(_)?[4,uu(r.localStore,_,!1).then(function(){vc(r.remoteStore,_),lu(r,_)}).catch(Ls)]:[3,2];case 1:S.sent(),S.label=2;case 2:return[2]}})},m=0,v=n,w.label=7;case 7:return m<v.length?(y=v[m],[5,p(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return m++,[3,7];case 10:return[2]}})})}function vx(e){var t=ue(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=UC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Y4.bind(null,t),t.vo._r=V4.bind(null,t.eventManager),t.vo.Mo=B4.bind(null,t.eventManager),t}function yx(e){var t=ue(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Q4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=X4.bind(null,t),t}var BC=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return W(this,void 0,void 0,function(){return K(this,function(n){switch(n.label){case 0:return this.R=jp(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return SC(this.persistence,new bC,t.initialUser,this.R)},e.prototype.qo=function(t){return new y4(x4.bs,this.R)},e.prototype.Bo=function(t){return new TC},e.prototype.terminate=function(){return W(this,void 0,void 0,function(){return K(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),zC=function(e){function t(n,r,o){var s=this;return(s=e.call(this)||this).Qo=n,s.cacheSizeBytes=r,s.forceOwnership=o,s.synchronizeTabs=!1,s}return be(t,e),t.prototype.initialize=function(n){return W(this,void 0,void 0,function(){var r=this;return K(this,function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return o.sent(),[4,f4(this.localStore)];case 2:return o.sent(),[4,this.Qo.initialize(this,n)];case 3:return o.sent(),[4,yx(this.Qo.syncEngine)];case 4:return o.sent(),[4,bu(this.Qo.remoteStore)];case 5:return o.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return o.sent(),[2]}})})},t.prototype.Ko=function(n){return SC(this.persistence,new bC,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new Z$(r,n.asyncQueue)},t.prototype.qo=function(n){var r=rx(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),o=this.cacheSizeBytes!==void 0?ti.withCacheSize(this.cacheSizeBytes):ti.DEFAULT;return new o4(this.synchronizeTabs,r,n.clientId,o,n.asyncQueue,jC(),qf(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new TC},t}(BC),lV=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r,!1)||this).Qo=n,o.cacheSizeBytes=r,o.synchronizeTabs=!0,o}return be(t,e),t.prototype.initialize=function(n){return W(this,void 0,void 0,function(){var r,o=this;return K(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof Xv?(this.sharedClientState.syncEngine={ui:iV.bind(null,r),ai:aV.bind(null,r),hi:uV.bind(null,r),fn:sV.bind(null,r),ci:rV.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(u){return W(o,void 0,void 0,function(){return K(this,function(c){switch(c.label){case 0:return[4,oV(this.Qo.syncEngine,u)];case 1:return c.sent(),this.gcScheduler&&(u&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):u||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Bo=function(n){var r=jC();if(!Xv.yt(r))throw new Y(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var o=rx(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Xv(r,n.asyncQueue,o,n.clientId,n.initialUser)},t}(zC),v0=function(){function e(){}return e.prototype.initialize=function(t,n){return W(this,void 0,void 0,function(){var r=this;return K(this,function(o){switch(o.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return yE(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=eV.bind(null,this.syncEngine),[4,m0(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new $4},e.prototype.createDatastore=function(t){var n,r=jp(t.databaseInfo.databaseId),o=(n=t.databaseInfo,new E4(n));return function(s,u,c){return new j4(s,u,c)}(t.credentials,o,r)},e.prototype.createRemoteStore=function(t){var n,r,o,s,u,c=this;return n=this.localStore,r=this.datastore,o=t.asyncQueue,s=function(f){return yE(c.syncEngine,f,0)},u=gE.yt()?new gE:new S4,new C4(n,r,o,s,u)},e.prototype.createSyncEngine=function(t,n){return function(r,o,s,u,c,f,p){var m=new K4(r,o,s,u,c,f);return p&&(m.$o=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return W(this,void 0,void 0,function(){var n;return K(this,function(r){switch(r.label){case 0:return n=ue(t),ne("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,xu(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cp=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),cV=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return W(this,void 0,void 0,function(){var n,r=this;return K(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Y(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return W(this,void 0,void 0,function(){var c,f,p,m,v,y;return K(this,function(w){switch(w.label){case 0:return c=ue(s),f=gc(c.R)+"/documents",p={documents:u.map(function(_){return mc(c.R,_)})},[4,c.$i("BatchGetDocuments",f,p)];case 1:return m=w.sent(),v=new Map,m.forEach(function(_){var S=function(C,N){return"found"in N?function(E,x){_e(!!x.found),x.found.name,x.found.updateTime;var j=Ni(E,x.found.name),k=jn(x.found.updateTime),A=new Jn({mapValue:{fields:x.found.fields}});return wn.newFoundDocument(j,k,A)}(C,N):"missing"in N?function(E,x){_e(!!x.missing),_e(!!x.readTime);var j=Ni(E,x.missing),k=jn(x.readTime);return wn.newNoDocument(j,k)}(C,N):pe()}(c.R,_);v.set(S.key.toString(),S)}),y=[],[2,(u.forEach(function(_){var S=v.get(_.toString());_e(!!S),y.push(S)}),y)]}})})}(this.datastore,t)];case 1:return[2,((n=o.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new zc(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return W(this,void 0,void 0,function(){var t,n=this;return K(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(o){t.delete(o.key.toString())}),t.forEach(function(o,s){var u=me.fromPath(s);n.mutations.push(new Yw(u,n.precondition(u)))}),[4,function(o,s){return W(this,void 0,void 0,function(){var u,c,f;return K(this,function(p){switch(p.label){case 0:return u=ue(o),c=gc(u.R)+"/documents",f={writes:s.map(function(m){return Rd(u.R,m)})},[4,u.Ni("Commit",c,f)];case 1:return p.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw pe();n=Ae.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new Y(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?gn.updateTime(n):gn.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Ae.min()))throw new Y(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gn.updateTime(n)}return gn.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),hV=function(){function e(t,n,r,o){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=o,this.ec=5,this.Zi=new ox(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return W(t,void 0,void 0,function(){var n,r,o=this;return K(this,function(s){return n=new cV(this.datastore),(r=this.sc(n))&&r.then(function(u){o.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){o.deferred.resolve(u)}).catch(function(c){o.ic(c)})})}).catch(function(u){o.ic(u)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!Ms(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!Qk(n)}return!1},e}(),fV=function(){function e(t,n,r){var o=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Jt.UNAUTHENTICATED,this.clientId=Ck.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return W(o,void 0,void 0,function(){return K(this,function(u){switch(u.label){case 0:return ne("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return u.sent(),this.user=s,[2]}})})})}return e.prototype.getConfiguration=function(){return W(this,void 0,void 0,function(){return K(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return W(t,void 0,void 0,function(){var r,o;return K(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),o=_u(r,"Failed to shutdown persistence"),n.reject(o),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(e,t){return W(this,void 0,void 0,function(){var n,r,o=this;return K(this,function(s){switch(s.label){case 0:return e.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.initialUser,e.setCredentialChangeListener(function(u){return W(o,void 0,void 0,function(){return K(this,function(c){switch(c.label){case 0:return r.isEqual(u)?[3,2]:[4,_C(t.localStore,u)];case 1:c.sent(),r=u,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function KC(e,t){return W(this,void 0,void 0,function(){var n,r;return K(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,wx(e)];case 1:return n=o.sent(),ne("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=o.sent(),[4,t.initialize(n,r)];case 3:return o.sent(),e.setCredentialChangeListener(function(s){return function(u,c){return W(this,void 0,void 0,function(){var f,p;return K(this,function(m){switch(m.label){case 0:return(f=ue(u)).asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials"),p=Co(f),f.Or.add(3),[4,xu(f)];case 1:return m.sent(),p&&f.Br.set("Unknown"),[4,f.remoteSyncer.handleCredentialChange(c)];case 2:return m.sent(),f.Or.delete(3),[4,qc(f)];case 3:return m.sent(),[2]}})})}(t.remoteStore,s)}),e.onlineComponents=t,[2]}})})}function wx(e){return W(this,void 0,void 0,function(){return K(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(ne("FirestoreClient","Using default OfflineComponentProvider"),[4,qC(e,new BC)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function Ap(e){return W(this,void 0,void 0,function(){return K(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(ne("FirestoreClient","Using default OnlineComponentProvider"),[4,KC(e,new v0)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function xE(e){return wx(e).then(function(t){return t.persistence})}function HC(e){return wx(e).then(function(t){return t.localStore})}function bE(e){return Ap(e).then(function(t){return t.remoteStore})}function GC(e){return Ap(e).then(function(t){return t.syncEngine})}function cu(e){return W(this,void 0,void 0,function(){var t,n;return K(this,function(r){switch(r.label){case 0:return[4,Ap(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=H4.bind(null,t.syncEngine),n.onUnlisten=G4.bind(null,t.syncEngine),n)]}})})}function SE(e,t,n){var r=this;n===void 0&&(n={});var o=new qn;return e.asyncQueue.enqueueAndForget(function(){return W(r,void 0,void 0,function(){var s;return K(this,function(u){switch(u.label){case 0:return s=function(c,f,p,m,v){var y=new Cp({next:function(_){f.enqueueAndForget(function(){return cx(c,w)});var S=_.docs.has(p);!S&&_.fromCache?v.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&_.fromCache&&m&&m.source==="server"?v.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(_)},error:function(_){return v.reject(_)}}),w=new fx(Fc(p.path),y,{includeMetadataChanges:!0,so:!0});return lx(c,w)},[4,cu(e)];case 1:return[2,s.apply(void 0,[u.sent(),e.asyncQueue,t,n,o])]}})})}),o.promise}function _E(e,t,n){var r=this;n===void 0&&(n={});var o=new qn;return e.asyncQueue.enqueueAndForget(function(){return W(r,void 0,void 0,function(){var s;return K(this,function(u){switch(u.label){case 0:return s=function(c,f,p,m,v){var y=new Cp({next:function(_){f.enqueueAndForget(function(){return cx(c,w)}),_.fromCache&&m.source==="server"?v.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(_)},error:function(_){return v.reject(_)}}),w=new fx(p,y,{includeMetadataChanges:!0,so:!0});return lx(c,w)},[4,cu(e)];case 1:return[2,s.apply(void 0,[u.sent(),e.asyncQueue,t,n,o])]}})})}),o.promise}var dV=function(e,t,n,r,o,s,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.useFetchStreams=c},$d=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),NE=new Map,WC=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},EE=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(Jt.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),pV=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),mV=function(){function e(t){var n=this;this.currentUser=Jt.UNAUTHENTICATED,this.oc=new qn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(o){ne("FirebaseCredentialsProvider","Auth detected"),n.auth=o,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(o){return r(o)}),setTimeout(function(){if(!n.auth){var o=t.getImmediate({optional:!0});o?r(o):(ne("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(o){return t.cc!==n?(ne("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):o?(_e(typeof o.accessToken=="string"),new WC(o.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return W(r,void 0,void 0,function(){return K(this,function(o){switch(o.label){case 0:return[4,this.oc.promise];case 1:return o.sent(),[4,n(this.currentUser)];case 2:return o.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return _e(t===null||typeof t=="string"),new Jt(t)},e}(),gV=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),vV=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new gV(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(Jt.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(e,t,n){if(!n)throw new Y(U.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function bx(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new Y(U.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function YC(e,t,n,r){if(t===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function IE(e){if(!me.isDocumentKey(e))throw new Y(U.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function TE(e){if(me.isDocumentKey(e))throw new Y(U.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Dp(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":pe()}function We(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Dp(e);throw new Y(U.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function jE(e,t){if(t<=0)throw new Y(U.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kE=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,YC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),yc=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kE({}),this._settingsFrozen=!1,t instanceof $d?(this._databaseId=t,this._credentials=new EE):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $d(r.options.projectId)}(t),this._credentials=new mV(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kE(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new EE;switch(n.type){case"gapi":var r=n.client;return _e(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vV(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new Y(U.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=NE.get(t))&&(ne("ComponentProvider","Removing Datastore"),NE.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),gt=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new yo(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),ir=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),yo=function(e){function t(n,r,o){var s=this;return(s=e.call(this,n,r,Fc(o))||this)._path=o,s.type="collection",s}return be(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new gt(this.firestore,null,new me(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(ir);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(e=Pt(e),xx("collection","path",t),e instanceof yc)return TE(n=Ke.fromString.apply(Ke,_t([t],r))),new yo(e,null,n);if(!(e instanceof gt||e instanceof yo))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return TE(n=Ke.fromString.apply(Ke,_t([e.path],r)).child(Ke.fromString(t))),new yo(e.firestore,null,n)}function Kf(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(e=Pt(e),arguments.length===1&&(t=Ck.u()),xx("doc","path",t),e instanceof yc)return IE(n=Ke.fromString.apply(Ke,_t([t],r))),new gt(e,null,new me(n));if(!(e instanceof gt||e instanceof yo))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return IE(n=e._path.child(Ke.fromString.apply(Ke,_t([t],r)))),new gt(e.firestore,e instanceof yo?e.converter:null,new me(n))}function XC(e,t){return e=Pt(e),t=Pt(t),(e instanceof gt||e instanceof yo)&&(t instanceof gt||t instanceof yo)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function JC(e,t){return e=Pt(e),t=Pt(t),e instanceof ir&&t instanceof ir&&e.firestore===t.firestore&&Uc(e._query,t._query)&&e.converter===t.converter}var yV=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new ox(this,"async_queue_retry"),this.Ic=function(){var r=qf();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=qf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new qn;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return W(this,void 0,void 0,function(){var t,n=this;return K(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Os(t=r.sent()))throw t;return ne("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(o){throw n.yc=o,n.gc=!1,Lt("INTERNAL UNHANDLED ERROR: ",function(s){var u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),u}(o)),o}).then(function(o){return n.gc=!1,o})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var o=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var s=F4.createAndSchedule(this,t,n,r,function(u){return o.vc(u)});return this.mc.push(s),s},e.prototype.Ac=function(){this.yc&&pe()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return W(this,void 0,void 0,function(){var t;return K(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(u,c){return u.targetTimeMs-c.targetTimeMs});for(var r=0,o=n.mc;r<o.length;r++){var s=o[r];if(s.skipDelay(),t!=="all"&&s.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function hu(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,o=0,s=["next","error","complete"];o<s.length;o++){var u=s[o];if(u in r&&typeof r[u]=="function")return!0}return!1}(e)}var wV=-1,Bt=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r)||this).type="firestore",o._queue=new yV,o._persistenceKey="name"in n?n.name:"[DEFAULT]",o}return be(t,e),t.prototype._terminate=function(){return this._firestoreClient||ZC(this),this._firestoreClient.terminate()},t}(yc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(e){return e._firestoreClient||ZC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ZC(e){var t,n=e._freezeSettings(),r=function(o,s,u,c){return new dV(o,s,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new fV(e._credentials,e._queue,r)}function CE(e,t,n){var r=this,o=new qn;return e.asyncQueue.enqueue(function(){return W(r,void 0,void 0,function(){var s;return K(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,qC(e,n)];case 1:return u.sent(),[4,KC(e,t)];case 2:return u.sent(),o.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===U.FAILED_PRECONDITION||c.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=u.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),o.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function AE(e){if(e._initialized||e._terminated)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),js=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(zn.fromBase64String(t))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(zn.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),Ps=function(e){this._methodName=e},Rp=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return Pe(this._lat,t._lat)||Pe(this._long,t._long)},e}(),xV=/^__.*__$/,bV=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new ko(t,this.data,this.fieldMask,n,this.fieldTransforms):new Bc(t,this.data,n,this.fieldTransforms)},e}(),eA=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new ko(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}var nA=function(){function e(t,n,r,o,s,u){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=o,s===void 0&&this.Cc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.xc({path:r,Fc:!1});return o.$c(t),o},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.xc({path:r,Fc:!1});return o.Cc(),o},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return Vd(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(tA(this.Nc)&&xV.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),SV=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||jp(t)}return e.prototype.Uc=function(t,n,r,o){return o===void 0&&(o=!1),new nA({Nc:t,methodName:n,qc:r,path:Br.emptyPath(),Fc:!1,Bc:o},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Fs(e){var t=e._freezeSettings(),n=jp(e._databaseId);return new SV(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Mp(e,t,n,r,o,s){s===void 0&&(s={});var u=e.Uc(s.merge||s.mergeFields?2:0,t,n,o);Ex("Data must be an object, but it was:",u,r);var c,f,p=oA(r,u);if(s.merge)c=new Xa(u.fieldMask),f=u.fieldTransforms;else if(s.mergeFields){for(var m=[],v=0,y=s.mergeFields;v<y.length;v++){var w=y0(t,y[v],n);if(!u.contains(w))throw new Y(U.INVALID_ARGUMENT,"Field '"+w+"' is specified in your field mask but missing from your input data.");aA(m,w)||m.push(w)}c=new Xa(m),f=u.fieldTransforms.filter(function(_){return c.covers(_.field)})}else c=null,f=u.fieldTransforms;return new bV(new Jn(p),c,f)}var Sx=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(Ps);function rA(e,t,n){return new nA({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var _V=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t.prototype._toFieldTransform=function(n){return new Vc(n.path,new tu)},t.prototype.isEqual=function(n){return n instanceof t},t}(Ps),NV=function(e){function t(n,r){var o=this;return(o=e.call(this,n)||this).Kc=r,o}return be(t,e),t.prototype._toFieldTransform=function(n){var r=rA(this,n,!0),o=this.Kc.map(function(u){return Us(u,r)}),s=new Is(o);return new Vc(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(Ps),EV=function(e){function t(n,r){var o=this;return(o=e.call(this,n)||this).Kc=r,o}return be(t,e),t.prototype._toFieldTransform=function(n){var r=rA(this,n,!0),o=this.Kc.map(function(u){return Us(u,r)}),s=new Ts(o);return new Vc(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(Ps),IV=function(e){function t(n,r){var o=this;return(o=e.call(this,n)||this).Qc=r,o}return be(t,e),t.prototype._toFieldTransform=function(n){var r=new nu(n.R,qk(n.R,this.Qc));return new Vc(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(Ps);function _x(e,t,n,r){var o=e.Uc(1,t,n);Ex("Data must be an object, but it was:",o,r);var s=[],u=Jn.empty();Rs(r,function(f,p){var m=Ix(t,f,n);p=Pt(p);var v=o.Oc(m);if(p instanceof Sx)s.push(m);else{var y=Us(p,v);y!=null&&(s.push(m),u.set(m,y))}});var c=new Xa(s);return new eA(u,c,o.fieldTransforms)}function Nx(e,t,n,r,o,s){var u=e.Uc(1,t,n),c=[y0(t,r,n)],f=[o];if(s.length%2!=0)throw new Y(U.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var p=0;p<s.length;p+=2)c.push(y0(t,s[p])),f.push(s[p+1]);for(var m=[],v=Jn.empty(),y=c.length-1;y>=0;--y)if(!aA(m,c[y])){var w=c[y],_=f[y];_=Pt(_);var S=u.Oc(w);if(_ instanceof Sx)m.push(w);else{var C=Us(_,S);C!=null&&(m.push(w),v.set(w,C))}}var N=new Xa(m);return new eA(v,N,u.fieldTransforms)}function iA(e,t,n,r){return r===void 0&&(r=!1),Us(n,e.Uc(r?4:3,t))}function Us(e,t){if(sA(e=Pt(e)))return Ex("Unsupported field value:",t,e),oA(e,t);if(e instanceof Ps)return function(n,r){if(!tA(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var o=[],s=0,u=0,c=n;u<c.length;u++){var f=Us(c[u],r.Mc(s));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),s++}return{arrayValue:{values:o}}}(e,t)}return function(n,r){if((n=Pt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return qk(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var o=Bn.fromDate(n);return{timestampValue:pc(r.R,o)}}if(n instanceof Bn)return o=new Bn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:pc(r.R,o)};if(n instanceof Rp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof js)return{bytesValue:eC(r.R,n._byteString)};if(n instanceof gt){o=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(o))throw r.Lc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+o.projectId+"/"+o.database);return{referenceValue:Jw(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+Dp(n))}(e,t)}function oA(e,t){var n={};return Dk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rs(e,function(r,o){var s=Us(o,t.kc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Bn||e instanceof Rp||e instanceof js||e instanceof gt||e instanceof Ps)}function Ex(e,t,n){if(!sA(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){var r=Dp(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function y0(e,t,n){if((t=Pt(t))instanceof si)return t._internalPath;if(typeof t=="string")return Ix(e,t);throw Vd("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var TV=new RegExp("[~\\*/\\[\\]]");function Ix(e,t,n){if(t.search(TV)>=0)throw Vd("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(si.bind.apply(si,_t([void 0],t.split("."))))()._internalPath}catch{throw Vd("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Vd(e,t,n,r,o){var s=r&&!r.isEmpty(),u=o!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var f="";return(s||u)&&(f+=" (found",s&&(f+=" in field "+r),u&&(f+=" in document "+o),f+=")"),new Y(U.INVALID_ARGUMENT,(c+=". ")+e+f)}function aA(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wc=function(){function e(t,n,r,o,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new gt(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new jV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(Bd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),jV=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(wc);function Bd(e,t){return typeof t=="string"?Ix(e,t):t instanceof si?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Ii=function(e){function t(n,r,o,s,u,c){var f=this;return(f=e.call(this,n,r,o,s,c)||this)._firestore=n,f._firestoreImpl=n,f.metadata=u,f}return be(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new Fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var o=this._document.data.field(Bd("DocumentSnapshot.get",n));if(o!==null)return this._userDataWriter.convertValue(o,r.serverTimestamps)}},t}(wc),Fl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(Ii),io=function(){function e(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new us(o.hasPendingWrites,o.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(o){t.call(n,new Fl(r._firestore,r._userDataWriter,o.key,o,new us(r._snapshot.mutatedKeys.has(o.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new Fl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new us(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}})}var u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return o||c.type!==3}).map(function(c){var f=new Fl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new us(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),p=-1,m=-1;return c.type!==0&&(p=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(m=(u=u.add(c.doc)).indexOf(c.doc.key)),{type:kV(c.type),doc:f,oldIndex:p,newIndex:m}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function kV(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}function uA(e,t){return e instanceof Ii&&t instanceof Ii?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof io&&t instanceof io&&e._firestore===t._firestore&&JC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(e){if(Dd(e)&&e.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kc=function(){};function Yi(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=t;r<o.length;r++){var s=o[r];e=s._apply(e)}return e}var CV=function(e){function t(n,r,o){var s=this;return(s=e.call(this)||this).jc=n,s.Wc=r,s.Gc=o,s.type="where",s}return be(t,e),t.prototype._apply=function(n){var r=Fs(n.firestore),o=function(s,u,c,f,p,m,v){var y;if(p.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+m+"' queries on FieldPath.documentId().");if(m==="in"||m==="not-in"){LE(v,m);for(var w=[],_=0,S=v;_<S.length;_++){var C=S[_];w.push(OE(f,s,C))}y={arrayValue:{values:w}}}else y=OE(f,s,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||LE(v,m),y=iA(c,"where",v,m==="in"||m==="not-in");var N=nr.create(p,m,y);return function(E,x){if(x.g()){var j=Gw(E);if(j!==null&&!j.isEqual(x.field))throw new Y(U.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+j.toString()+"' and '"+x.field.toString()+"'");var k=Hw(E);k!==null&&hA(E,x.field,k)}var A=function(T,L){for(var F=0,q=T.filters;F<q.length;F++){var z=q[F];if(L.indexOf(z.op)>=0)return z.op}return null}(E,function(T){switch(T){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(x.op));if(A!==null)throw A===x.op?new Y(U.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+x.op.toString()+"' filter."):new Y(U.INVALID_ARGUMENT,"Invalid query. You cannot use '"+x.op.toString()+"' filters with '"+A.toString()+"' filters.")}(s,N),N}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ir(n.firestore,n.converter,function(s,u){var c=s.filters.concat([u]);return new Mi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,o))},t}(Kc),AV=function(e){function t(n,r){var o=this;return(o=e.call(this)||this).jc=n,o.zc=r,o.type="orderBy",o}return be(t,e),t.prototype._apply=function(n){var r=function(o,s,u){if(o.startAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new $a(s,u);return function(f,p){if(Hw(f)===null){var m=Gw(f);m!==null&&hA(f,m,p.field)}}(o,c),c}(n._query,this.jc,this.zc);return new ir(n.firestore,n.converter,function(o,s){var u=o.explicitOrderBy.concat([s]);return new Mi(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(n._query,r))},t}(Kc),DE=function(e){function t(n,r,o){var s=this;return(s=e.call(this)||this).type=n,s.Hc=r,s.Jc=o,s}return be(t,e),t.prototype._apply=function(n){return new ir(n.firestore,n.converter,Uk(n._query,this.Hc,this.Jc))},t}(Kc),RE=function(e){function t(n,r,o){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=o,s}return be(t,e),t.prototype._apply=function(n){var r=cA(n,this.type,this.Yc,this.Xc);return new ir(n.firestore,n.converter,function(o,s){return new Mi(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,s,o.endAt)}(n._query,r))},t}(Kc),ME=function(e){function t(n,r,o){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=o,s}return be(t,e),t.prototype._apply=function(n){var r=cA(n,this.type,this.Yc,this.Xc);return new ir(n.firestore,n.converter,function(o,s){return new Mi(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,s)}(n._query,r))},t}(Kc);function cA(e,t,n,r){if(n[0]=Pt(n[0]),n[0]instanceof wc)return function(s,u,c,f,p){if(!f)throw new Y(U.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var m=[],v=0,y=eu(s);v<y.length;v++){var w=y[v];if(w.field.isKeyField())m.push(kd(u,f.key));else{var _=f.data.field(w.field);if(zw(_))throw new Y(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){var S=w.field.canonicalString();throw new Y(U.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+S+"' (used as the orderBy) does not exist.")}m.push(_)}}return new dc(m,p)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var o=Fs(e.firestore);return function(s,u,c,f,p,m){var v=s.explicitOrderBy;if(p.length>v.length)throw new Y(U.INVALID_ARGUMENT,"Too many arguments provided to "+f+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var y=[],w=0;w<p.length;w++){var _=p[w];if(v[w].field.isKeyField()){if(typeof _!="string")throw new Y(U.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+f+"(), but got a "+typeof _);if(!Ww(s)&&_.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+f+"() must be a plain document ID, but '"+_+"' contains a slash.");var S=s.path.child(Ke.fromString(_));if(!me.isDocumentKey(S))throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+f+"() must result in a valid document path, but '"+S+"' is not because it contains an odd number of segments.");var C=new me(S);y.push(kd(u,C))}else{var N=iA(c,f,_);y.push(N)}}return new dc(y,m)}(e._query,e.firestore._databaseId,o,t,n,r)}function OE(e,t,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ww(t)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Ke.fromString(n));if(!me.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return kd(e,new me(r))}if(n instanceof gt)return kd(e,n._key);throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Dp(n)+".")}function LE(e,t){if(!Array.isArray(e)||e.length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Y(U.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function hA(e,t,n){if(!n.isEqual(t))throw new Y(U.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tx=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),Es(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Mt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ja(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw pe()}},e.prototype.convertObject=function(t,n){var r=this,o={};return Rs(t.fields,function(s,u){o[s]=r.convertValue(u,n)}),o},e.prototype.convertGeoPoint=function(t){return new Rp(Mt(t.latitude),Mt(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(o){return r.convertValue(o,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=Mk(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hc(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=So(t);return new Bn(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=Ke.fromString(t);_e(uC(r));var o=new $d(r.get(1),r.get(3)),s=new me(r.popFirst(5));return o.isEqual(n)||Lt("Document "+s+" contains a document reference within a different database ("+o.projectId+"/"+o.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var DV=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return be(t,e),t.prototype.convertBytes=function(n){return new js(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new gt(this.firestore,null,r)},t}(Tx),RV=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fs(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var o=oo(t,this._firestore),s=Op(o.converter,n,r),u=Mp(this._dataReader,"WriteBatch.set",o._key,s,o.converter!==null,r);return this._mutations.push(u.toMutation(o._key,gn.none())),this},e.prototype.update=function(t,n,r){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this._verifyNotCommitted();var u,c=oo(t,this._firestore);return u=typeof(n=Pt(n))=="string"||n instanceof si?Nx(this._dataReader,"WriteBatch.update",c._key,n,r,o):_x(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(u.toMutation(c._key,gn.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=oo(t,this._firestore);return this._mutations=this._mutations.concat(new zc(n._key,gn.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new Y(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(e,t){if((e=Pt(e)).firestore!==t)throw new Y(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return be(t,e),t.prototype.convertBytes=function(n){return new js(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new gt(this.firestore,null,r)},t}(Tx);function PE(e,t,n){e=We(e,gt);var r=We(e.firestore,Bt),o=Op(e.converter,t,n);return Hc(r,[Mp(Fs(r),"setDoc",e._key,o,e.converter!==null,n).toMutation(e._key,gn.none())])}function FE(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];e=We(e,gt);var s=We(e.firestore,Bt),u=Fs(s);return Hc(s,[(typeof(t=Pt(t))=="string"||t instanceof si?Nx(u,"updateDoc",e._key,t,n,r):_x(u,"updateDoc",e._key,t)).toMutation(e._key,gn.exists(!0))])}function fA(e){for(var t,n,r,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];e=Pt(e);var u={includeMetadataChanges:!1},c=0;typeof o[c]!="object"||hu(o[c])||(u=o[c],c++);var f,p,m,v={includeMetadataChanges:u.includeMetadataChanges};if(hu(o[c])){var y=o[c];o[c]=(t=y.next)===null||t===void 0?void 0:t.bind(y),o[c+1]=(n=y.error)===null||n===void 0?void 0:n.bind(y),o[c+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}if(e instanceof gt)p=We(e.firestore,Bt),m=Fc(e._key.path),f={next:function(S){o[c]&&o[c](w0(p,e,S))},error:o[c+1],complete:o[c+2]};else{var w=We(e,ir);p=We(w.firestore,Bt),m=w._query;var _=new ds(p);f={next:function(S){o[c]&&o[c](new io(p,_,w,S))},error:o[c+1],complete:o[c+2]},lA(e._query)}return function(S,C,N,E){var x=this,j=new Cp(E),k=new fx(C,j,N);return S.asyncQueue.enqueueAndForget(function(){return W(x,void 0,void 0,function(){var A;return K(this,function(T){switch(T.label){case 0:return A=lx,[4,cu(S)];case 1:return[2,A.apply(void 0,[T.sent(),k])]}})})}),function(){j.Wo(),S.asyncQueue.enqueueAndForget(function(){return W(x,void 0,void 0,function(){var A;return K(this,function(T){switch(T.label){case 0:return A=cx,[4,cu(S)];case 1:return[2,A.apply(void 0,[T.sent(),k])]}})})})}}(dn(p),m,v,f)}function Hc(e,t){return function(n,r){var o=this,s=new qn;return n.asyncQueue.enqueueAndForget(function(){return W(o,void 0,void 0,function(){var u;return K(this,function(c){switch(c.label){case 0:return u=W4,[4,GC(n)];case 1:return[2,u.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(dn(e),t)}function w0(e,t,n){var r=n.docs.get(t._key),o=new ds(e);return new Ii(e,o,t._key,r,new us(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MV=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r)||this)._firestore=n,o}return be(t,e),t.prototype.get=function(n){var r=this,o=oo(n,this._firestore),s=new ds(this._firestore);return e.prototype.get.call(this,n).then(function(u){return new Ii(r._firestore,s,o._key,u._document,new us(!1,!1),o.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=Fs(t)}return e.prototype.get=function(t){var n=this,r=oo(t,this._firestore),o=new DV(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return pe();var u=s[0];if(u.isFoundDocument())return new wc(n._firestore,o,u.key,u,r.converter);if(u.isNoDocument())return new wc(n._firestore,o,r._key,null,r.converter);throw pe()})},e.prototype.set=function(t,n,r){var o=oo(t,this._firestore),s=Op(o.converter,n,r),u=Mp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,u),this},e.prototype.update=function(t,n,r){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u,c=oo(t,this._firestore);return u=typeof(n=Pt(n))=="string"||n instanceof si?Nx(this._dataReader,"Transaction.update",c._key,n,r,o):_x(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,u),this},e.prototype.delete=function(t){var n=oo(t,this._firestore);return this._transaction.delete(n._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(){if(typeof Uint8Array>"u")throw new Y(U.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $E(){if(typeof atob>"u")throw new Y(U.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var dA=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return $E(),new e(js.fromBase64String(t))},e.fromUint8Array=function(t){return UE(),new e(js.fromUint8Array(t))},e.prototype.toBase64=function(){return $E(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return UE(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),OV=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,o){AE(r=We(r,Bt));var s=dn(r),u=r._freezeSettings(),c=new v0;return CE(s,c,new zC(c,u.cacheSizeBytes,o==null?void 0:o.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){AE(n=We(n,Bt));var r=dn(n),o=n._freezeSettings(),s=new v0;return CE(r,s,new lV(s,o.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new Y(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var o=new qn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return W(r,void 0,void 0,function(){var s;return K(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,function(c){return W(this,void 0,void 0,function(){var f;return K(this,function(p){switch(p.label){case 0:return ou.yt()?(f=c+"main",[4,ou.delete(f)]):[2,Promise.resolve()];case 1:return p.sent(),[2]}})})}(rx(n._databaseId,n._persistenceKey))];case 1:return u.sent(),o.resolve(),[3,3];case 2:return s=u.sent(),o.reject(s),[3,3];case 3:return[2]}})})}),o.promise}(t._delegate)},e}(),pA=function(){function e(t,n,r){var o=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return o.terminate()}},t instanceof $d||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||Td("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(o,s,u,c){var f;c===void 0&&(c={});var p=(o=We(o,yc))._getSettings();if(p.host!=="firestore.googleapis.com"&&p.host!==s&&Td("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},p),{host:s+":"+u,ssl:!1})),c.mockUserToken){var m,v;if(typeof c.mockUserToken=="string")m=c.mockUserToken,v=Jt.MOCK_USER;else{m=rF(c.mockUserToken,(f=o._app)===null||f===void 0?void 0:f.options.projectId);var y=c.mockUserToken.sub||c.mockUserToken.user_id;if(!y)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Jt(y)}o._credentials=new pV(new WC(m,v))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return W(n,void 0,void 0,function(){var r,o;return K(this,function(s){switch(s.label){case 0:return[4,xE(t)];case 1:return r=s.sent(),[4,bE(t)];case 2:return o=s.sent(),[2,(r.setNetworkEnabled(!0),function(u){var c=ue(u);return c.Or.delete(0),qc(c)}(o))]}})})})}(dn(We(this._delegate,Bt)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return W(n,void 0,void 0,function(){var r,o;return K(this,function(s){switch(s.label){case 0:return[4,xE(t)];case 1:return r=s.sent(),[4,bE(t)];case 2:return o=s.sent(),[2,(r.setNetworkEnabled(!1),function(u){return W(this,void 0,void 0,function(){var c;return K(this,function(f){switch(f.label){case 0:return(c=ue(u)).Or.add(0),[4,xu(c)];case 1:return f.sent(),c.Br.set("Offline"),[2]}})})}(o))]}})})})}(dn(We(this._delegate,Bt)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&YC("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new qn;return t.asyncQueue.enqueueAndForget(function(){return W(n,void 0,void 0,function(){var o;return K(this,function(s){switch(s.label){case 0:return o=J4,[4,GC(t)];case 1:return[2,o.apply(void 0,[s.sent(),r])]}})})}),r.promise}(dn(We(this._delegate,Bt)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(o,s){var u=this,c=new Cp(s);return o.asyncQueue.enqueueAndForget(function(){return W(u,void 0,void 0,function(){var f;return K(this,function(p){switch(p.label){case 0:return f=function(m,v){ue(m).Gr.add(v),v.next()},[4,cu(o)];case 1:return[2,f.apply(void 0,[p.sent(),c])]}})})}),function(){c.Wo(),o.asyncQueue.enqueueAndForget(function(){return W(u,void 0,void 0,function(){var f;return K(this,function(p){switch(p.label){case 0:return f=function(m,v){ue(m).Gr.delete(v)},[4,cu(o)];case 1:return[2,f.apply(void 0,[p.sent(),c])]}})})})}}(dn(n=We(n,Bt)),hu(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new zd(this,QC(this._delegate,t))}catch(n){throw Nn(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new ps(this,Kf(this._delegate,t))}catch(n){throw Nn(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Fp(this,function(n,r){if(n=We(n,yc),xx("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new Y(U.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ir(n,null,function(o){return new Mi(Ke.emptyPath(),o)}(r))}(this._delegate,t))}catch(n){throw Nn(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,o){return function(s,u){var c=this,f=new qn;return s.asyncQueue.enqueueAndForget(function(){return W(c,void 0,void 0,function(){var p;return K(this,function(m){switch(m.label){case 0:return[4,function(v){return Ap(v).then(function(y){return y.datastore})}(s)];case 1:return p=m.sent(),new hV(s.asyncQueue,p,u,f).run(),[2]}})})}),f.promise}(dn(r),function(s){return o(new MV(r,s))})}(this._delegate,function(r){return t(new mA(n,r))})},e.prototype.batch=function(){var t=this;return dn(this._delegate),new gA(new RV(this._delegate,function(n){return Hc(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new Y(U.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Y(U.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),Lp=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return be(t,e),t.prototype.convertBytes=function(n){return new dA(new js(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return ps.eu(r,this.firestore,null)},t}(Tx);function LV(e){var t;t=e,Fr.setLogLevel(t)}var mA=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Lp(t)}return e.prototype.get=function(t){var n=this,r=ls(t);return this._delegate.get(r).then(function(o){return new xc(n._firestore,new Ii(n._firestore._delegate,n._userDataWriter,o._key,o._document,o.metadata,r.converter))})},e.prototype.set=function(t,n,r){var o=ls(t);return r?(bx("Transaction.set",r),this._delegate.set(o,n,r)):this._delegate.set(o,n),this},e.prototype.update=function(t,n,r){for(var o,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=ls(t);return arguments.length===2?this._delegate.update(c,n):(o=this._delegate).update.apply(o,_t([c,n,r],s)),this},e.prototype.delete=function(t){var n=ls(t);return this._delegate.delete(n),this},e}(),gA=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var o=ls(t);return r?(bx("WriteBatch.set",r),this._delegate.set(o,n,r)):this._delegate.set(o,n),this},e.prototype.update=function(t,n,r){for(var o,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=ls(t);return arguments.length===2?this._delegate.update(c,n):(o=this._delegate).update.apply(o,_t([c,n,r],s)),this},e.prototype.delete=function(t){var n=ls(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Pp=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new Fl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new bc(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,o=r.get(t);o||(o=new WeakMap,r.set(t,o));var s=o.get(n);return s||(s=new e(t,new Lp(t),n),o.set(n,s)),s},e}();Pp.su=new WeakMap;var ps=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Lp(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new Y(U.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new gt(n._delegate,r,new me(t)))},e.eu=function(t,n,r){return new e(n,new gt(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new zd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new zd(this.firestore,QC(this._delegate,t))}catch(n){throw Nn(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Pt(t))instanceof gt&&XC(this._delegate,t)},e.prototype.set=function(t,n){n=bx("DocumentReference.set",n);try{return n?PE(this._delegate,t,n):PE(this._delegate,t)}catch(r){throw Nn(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];try{return arguments.length===1?FE(this._delegate,t):FE.apply(void 0,_t([this._delegate,t,n],r))}catch(s){throw Nn(s,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Hc(We((t=this._delegate).firestore,Bt),[new zc(t._key,gn.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=vA(n),s=yA(n,function(u){return new xc(t.firestore,new Ii(t.firestore._delegate,t._userDataWriter,u._key,u._document,u.metadata,t._delegate.converter))});return fA(this._delegate,o,s)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=We(r,gt);var o=We(r.firestore,Bt),s=dn(o),u=new ds(o);return function(c,f){var p=this,m=new qn;return c.asyncQueue.enqueueAndForget(function(){return W(p,void 0,void 0,function(){var v;return K(this,function(y){switch(y.label){case 0:return v=function(w,_,S){return W(this,void 0,void 0,function(){var C,N;return K(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,function(x,j){var k=ue(x);return k.persistence.runTransaction("read document","readonly",function(A){return k.Mn.mn(A,j)})}(w,_)];case 1:return(N=E.sent()).isFoundDocument()?S.resolve(N):N.isNoDocument()?S.resolve(null):S.reject(new Y(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return C=E.sent(),N=_u(C,"Failed to get document '"+_+" from cache"),S.reject(N),[3,3];case 3:return[2]}})})},[4,HC(c)];case 1:return[2,v.apply(void 0,[y.sent(),f,m])]}})})}),m.promise}(s,r._key).then(function(c){return new Ii(o,u,r._key,c,new us(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=We(r,gt);var o=We(r.firestore,Bt);return SE(dn(o),r._key,{source:"server"}).then(function(s){return w0(o,r,s)})}(this._delegate):function(r){r=We(r,gt);var o=We(r.firestore,Bt);return SE(dn(o),r._key).then(function(s){return w0(o,r,s)})}(this._delegate)).then(function(r){return new xc(n.firestore,new Ii(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Pp.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function Nn(e,t,n){return e.message=e.message.replace(t,n),e}function vA(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!hu(r))return r}return{}}function yA(e,t){var n,r,o;return{next:function(s){o.next&&o.next(t(s))},error:(n=(o=hu(e[0])?e[0]:hu(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(o),complete:(r=o.complete)===null||r===void 0?void 0:r.bind(o)}}var xc=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new ps(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return uA(this._delegate,t._delegate)},e}(),bc=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return be(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(xc),Fp=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Lp(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Yi(this._delegate,function(o,s,u){var c=s,f=Bd("where",o);return new CV(f,c,u)}(t,n,r)))}catch(o){throw Nn(o,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Yi(this._delegate,function(r,o){o===void 0&&(o="asc");var s=o,u=Bd("orderBy",r);return new AV(u,s)}(t,n)))}catch(r){throw Nn(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Yi(this._delegate,function(n){return jE("limit",n),new DE("limit",n,"F")}(t)))}catch(n){throw Nn(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Yi(this._delegate,function(n){return jE("limitToLast",n),new DE("limitToLast",n,"L")}(t)))}catch(n){throw Nn(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Yi(this._delegate,(function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new RE("startAt",r,!0)}).apply(void 0,t)))}catch(r){throw Nn(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Yi(this._delegate,(function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new RE("startAfter",r,!1)}).apply(void 0,t)))}catch(r){throw Nn(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Yi(this._delegate,(function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new ME("endBefore",r,!0)}).apply(void 0,t)))}catch(r){throw Nn(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Yi(this._delegate,(function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new ME("endAt",r,!1)}).apply(void 0,t)))}catch(r){throw Nn(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return JC(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=We(r,ir);var o=We(r.firestore,Bt),s=dn(o),u=new ds(o);return function(c,f){var p=this,m=new qn;return c.asyncQueue.enqueueAndForget(function(){return W(p,void 0,void 0,function(){var v;return K(this,function(y){switch(y.label){case 0:return v=function(w,_,S){return W(this,void 0,void 0,function(){var C,N,E,x,j;return K(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,Pd(w,_,!0)];case 1:return j=k.sent(),C=new FC(_,j.Bn),N=C._o(j.documents),E=C.applyChanges(N,!1),S.resolve(E.snapshot),[3,3];case 2:return x=k.sent(),j=_u(x,"Failed to execute query '"+_+" against cache"),S.reject(j),[3,3];case 3:return[2]}})})},[4,HC(c)];case 1:return[2,v.apply(void 0,[y.sent(),f,m])]}})})}),m.promise}(s,r._query).then(function(c){return new io(o,u,r,c)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=We(r,ir);var o=We(r.firestore,Bt),s=dn(o),u=new ds(o);return _E(s,r._query,{source:"server"}).then(function(c){return new io(o,u,r,c)})}(this._delegate):function(r){r=We(r,ir);var o=We(r.firestore,Bt),s=dn(o),u=new ds(o);return lA(r._query),_E(s,r._query).then(function(c){return new io(o,u,r,c)})}(this._delegate)).then(function(r){return new x0(n.firestore,new io(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=vA(n),s=yA(n,function(u){return new x0(t.firestore,new io(t.firestore._delegate,t._userDataWriter,t._delegate,u._snapshot))});return fA(this._delegate,o,s)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Pp.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),PV=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new bc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),x0=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Fp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new bc(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new PV(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(o){t.call(n,new bc(r._firestore,o))})},e.prototype.isEqual=function(t){return uA(this._delegate,t._delegate)},e}(),zd=function(e){function t(n,r){var o=this;return(o=e.call(this,n,r)||this).firestore=n,o._delegate=r,o}return be(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new ps(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new ps(this.firestore,n===void 0?Kf(this._delegate):Kf(this._delegate,n))}catch(r){throw Nn(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(o,s){var u=We(o.firestore,Bt),c=Kf(o),f=Op(o.converter,s);return Hc(u,[Mp(Fs(o.firestore),"addDoc",c._key,f,o.converter!==null,{}).toMutation(c._key,gn.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(o){return new ps(r.firestore,o)})},t.prototype.isEqual=function(n){return XC(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(Pp.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(Fp);function ls(e){return We(e,gt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FV=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(si.bind.apply(si,_t([void 0],t)))}return e.documentId=function(){return new e(Br.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Pt(t))instanceof si&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),UV=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new _V("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Sx("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return new NV("arrayUnion",o)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return new EV("arrayRemove",o)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new IV("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(),$V={Firestore:pA,GeoPoint:Rp,Timestamp:Bn,Blob:dA,Transaction:mA,WriteBatch:gA,DocumentReference:ps,DocumentSnapshot:xc,Query:Fp,QueryDocumentSnapshot:bc,QuerySnapshot:x0,CollectionReference:zd,FieldPath:FV,FieldValue:UV,setLogLevel:LV,CACHE_SIZE_UNLIMITED:wV};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(e){(function(t,n){t.INTERNAL.registerComponent(new ap("firestore",function(r){var o=r.getProvider("app").getImmediate();return n(o,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},$V)))})(e,function(t,n){return new pA(t,new Bt(t,n),new OV)}),e.registerVersion("@firebase/firestore","2.4.1")}VV(de);const BV={apiKey:"   - `VITE_FIREBASE_API_KEY` = AIzaSyD7p6iK1b0lG7sGP187VU7tBlTZyGo1wBA\n   - `VITE_FIREBASE_AUTH_DOMAIN` = alsani-cockpit-v3.firebaseapp.com\n   - `VITE_FIREBASE_PROJECT_ID` = alsani-cockpit-v3\n   - `VITE_FIREBASE_STORAGE_BUCKET` = alsani-cockpit-v3.firebasestorage.app\n   - `VITE_FIREBASE_MESSAGING_SENDER_ID` = 1055161240393\n   - `VITE_FIREBASE_APP_ID` = 1:1055161240393:web:64428acfb48922fbc76898\n   - `VITE_GEMINI_API_KEY` = AIzaSyBJeuf5Ne_IsEvgKlxIfbsOS7Sm9Xjl4Ws\n",authDomain:"alsani-cockpit-v3.firebaseapp.com",projectId:"alsani-cockpit-v3",storageBucket:"alsani-cockpit-v3.firebasestorage.app",messagingSenderId:"1055161240393",appId:"1:1055161240393:web:64428acfb48922fbc76898"};console.log("🔍 Firebase Environment Variables:");console.log("API Key:","✅ Set from env");console.log("Auth Domain:","⚠️ Using fallback");console.log("Project ID:","⚠️ Using fallback");de.apps.length||de.initializeApp(BV);const Sc=de.auth(),Se=de.firestore(),zV=async e=>{try{const t=await Se.collection("users").doc(e).get();if(t.exists){const n=t.data();return(n==null?void 0:n.status)||null}return null}catch(t){return console.error("Error getting user status:",t),null}},qV=async e=>{const t=await zV(e);return t==="approved"||t==="active"},KV=()=>{const[e,t]=R.useState({user:null,profile:null,loading:!0,isApproved:!1});return R.useEffect(()=>{const n=Sc.onAuthStateChanged(async r=>{var o,s;if(r)try{let u=null;const f=await Se.collection("users").doc(r.uid).get();if(f.exists)u=f.data();else{const v=await Se.collection("users").where("uid","==",r.uid).limit(1).get();v.empty||(u=v.docs[0].data())}if(u){const p=await qV(r.uid);if(!p&&u.role==="admin"){console.log("Admin user without status field, auto-approving...");try{await Se.collection("users").doc(r.uid).update({status:"approved",approvedAt:de.firestore.FieldValue.serverTimestamp(),approvedBy:"system"}),t({user:r,profile:{...u,status:"approved"},loading:!1,isApproved:!0});return}catch(m){console.error("Error auto-approving admin:",m)}}if(t({user:r,profile:u,loading:!1,isApproved:p}),!p){console.log("User not approved, signing out..."),await Sc.signOut(),t({user:null,profile:null,loading:!1,isApproved:!1});return}}else{console.warn(`No profile document found for user with uid ${r.uid}. Falling back to default profile.`);const p={id:r.uid,name:r.displayName||((o=r.email)==null?void 0:o.split("@")[0])||"User",email:r.email||"",role:"employee"};t({user:r,profile:p,loading:!1,isApproved:!1})}}catch(u){console.error("Error fetching user profile:",u);const c={id:r.uid,name:r.displayName||((s=r.email)==null?void 0:s.split("@")[0])||"User",email:r.email||"",role:"employee"};t({user:r,profile:c,loading:!1,isApproved:!1})}else t({user:null,profile:null,loading:!1,isApproved:!1})});return()=>n()},[]),e},VE={en:{dashboard:"Dashboard",employees:"Employees",stores:"Stores",products:"Products",settings:"Settings",logout:"Logout",login:"Login",signup:"Sign Up",welcome:"Welcome",total_sales:"Total Sales",total_transactions:"Total Transactions",avg_transaction_value:"ATV",achievement:"Achievement",store:"Store",employee:"Employee",name:"Name",sales:"Sales",target:"Target",performance:"Performance",add_store:"Add Store",add_employee:"Add Employee",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",search:"Search",filter:"Filter",export:"Export",import:"Import",upload:"Upload",download:"Download",loading:"Loading...",error:"Error",success:"Success",warning:"Warning",info:"Information",no_tasks:"You have no tasks or alerts.",smart_upload:"Smart Upload",lfl_comparison:"LFL Comparison",commissions:"Commissions",duvets:"Duvets",my_tasks_and_alerts:"My Tasks & Alerts",conversion_rate:"Conversion Rate",sales_per_visitor:"Sales Per Visitor",monthly_sales_performance:"Monthly Sales Performance",daily_sales_performance:"Daily Sales Performance",sales_by_store:"Sales by Store",greeting_evening:"Good evening",all_months:"All Months",all_days:"All Days",all_area_managers:"All Areas",all_stores:"All Stores",top_stores_by_achievement:"Top Stores by Achievement",top_employees_by_achievement:"Top Employees by Achievement",top_products_by_sales_value:"Top Products by Sales Value",dynamic_daily_target:"Dynamic Daily Target",ai_performance_review:"AI Performance Review",sales_by_product_category:"Sales by Product Category",daily_average_sales:"Daily Average Sales",monthly_average_sales:"Monthly Average Sales",user_management:"User Management",pending_approvals:"Pending Approvals",update_employees:"Update Employees",update_employees_desc:"Add linkedAccount field to all employees to activate new registration system",update_all_employees:"Update All Employees",updating:"Updating...",employees_updated_successfully:"Employees updated successfully",employees_already_updated:"All employees already updated",error_updating_employees:"Error updating employees",confirm_update_employees:"Are you sure you want to update all employees? This will add linkedAccount field for employees who don't have it.",role_statistics:"Role Statistics",manage_user_roles:"Manage User Roles",modify_roles_for_approved_users:"Modify roles for approved users",change_role:"Change Role",permissions_guide:"Permissions Guide",view_own_sales_only:"View own sales only",manage_branch_employees:"Manage branch employees and send tasks",edit_employee_targets:"Edit employee targets in their area",view_all_areas:"View all areas and edit targets",full_permissions:"Full permissions and complete control",manage_new_registration_requests:"Manage New Registration Requests",total_requests:"Total Requests",no_pending_requests:"No pending requests",all_requests_processed:"All requests have been processed",user_name:"User Name",current_role:"Current Role",undefined:"Undefined",approved:"Approved",pending:"Pending",role_updated_successfully:"Role updated successfully",failed_to_update_role:"Failed to update role",roles_guide:"Roles Guide",roles_guide_description:"This section allows you to assign roles",roles_guide_header:"دليل الصلاحيات — اختر الدور المناسب حسب مهام المستخدم.",roles_management:"Manage User Roles",modify_roles:"Modify roles for approved users",roles_description:"Choose the appropriate role for each user",role_updated:"Role updated successfully",role_failed:"Failed to update role",year:"Year",month:"Month",deleting:"Deleting...",delete_data_button:"Delete Data",no_users_found:"No Users Found",check_firebase_or_signup:"Check Firebase connection or sign up new users",total_users:"Total Users",please_sign_in:"Please sign in to continue",email_or_id:"Email or Employee ID",email_or_id_placeholder:"Enter email or employee ID",password:"Password",sign_in:"Sign In",signing_in:"Signing in...",sign_up:"Sign Up",sign_up_title:"Create Account",employee_id:"Employee ID",email:"Email",no_account:"Don't have an account?",sign_up_success:"Account created. Awaiting approval.",forgot_password:"Forgot your password?",welcome_back_title:"Welcome Back!",welcome_back_text:"To keep connected, please login with your personal info",hello_friend_title:"Hello, Friend!",hello_friend_text:"Enter your details and start your journey with us",sign_in_cta:"Sign In",sign_up_cta:"Sign Up",error_no_user_id:"No user found with this ID",error_no_user_email:"This user does not have an email",error_login_failed:"Login failed",create_your_account:"Create Your Account",confirm_password:"Confirm Password",already_have_account:"Already have an account?",passwords_do_not_match:"Passwords do not match"},ar:{dashboard:"لوحة التحكم",employees:"الموظفين",stores:"المعرض",products:"المنتجات",settings:"الإعدادات",logout:"تسجيل الخروج",login:"تسجيل الدخول",signup:"إنشاء حساب",welcome:"مرحباً",total_sales:"إجمالي المبيعات",total_transactions:"إجمالي المعاملات",avg_transaction_value:"ATV",achievement:"الإنجاز",store:"المعرض",employee:"الموظف",name:"الاسم",sales:"المبيعات",target:"الهدف",performance:"الأداء",add_store:"إضافة معرض",add_employee:"إضافة موظف",edit:"تعديل",delete:"حذف",save:"حفظ",cancel:"إلغاء",search:"بحث",filter:"تصفية",export:"تصدير",import:"استيراد",upload:"رفع",download:"تحميل",loading:"جاري التحميل...",error:"خطأ",success:"نجح",warning:"تحذير",info:"معلومات",no_tasks:"ليس لديك مهام أو تنبيهات.",smart_upload:"الرفع الذكي",lfl_comparison:"مقارنة LFL",commissions:"العمولات",duvets:"الألحفة",my_tasks_and_alerts:"مهامي وتنبيهاتي",conversion_rate:"معدل التحويل",sales_per_visitor:"مبيعات كل زائر",monthly_sales_performance:"أداء المبيعات الشهري",daily_sales_performance:"أداء المبيعات اليومي",sales_by_store:"المبيعات حسب المعرض",greeting_evening:"مساء الخير",all_months:"كل الشهور",all_days:"كل الأيام",all_area_managers:"كل المناطق",all_stores:"كل المعارض",top_stores_by_achievement:"أفضل المعارض حسب الإنجاز",top_employees_by_achievement:"أفضل الموظفين حسب الإنجاز",top_products_by_sales_value:"أفضل المنتجات حسب قيمة المبيعات",dynamic_daily_target:"الهدف اليومي الديناميكي",ai_performance_review:"مراجعة الأداء بالذكاء الاصطناعي",sales_by_product_category:"المبيعات حسب فئة المنتج",daily_average_sales:"معدل البيع اليومي",monthly_average_sales:"معدل البيع الشهري",user_management:"إدارة المستخدمين",pending_approvals:"الطلبات المعلقة",update_employees:"تحديث بيانات الموظفين",update_employees_desc:"إضافة حقل linkedAccount لجميع الموظفين لتفعيل نظام التسجيل الجديد",update_all_employees:"تحديث جميع الموظفين",updating:"جاري التحديث...",employees_updated_successfully:"تم تحديث الموظفين بنجاح",employees_already_updated:"جميع الموظفين محدثين مسبقاً",error_updating_employees:"خطأ في تحديث الموظفين",confirm_update_employees:"هل أنت متأكد من تحديث جميع الموظفين؟ سيتم إضافة حقل linkedAccount للموظفين الذين لا يملكونه.",role_statistics:"إحصائيات الأدوار",manage_user_roles:"إدارة أدوار المستخدمين",modify_roles_for_approved_users:"تعديل أدوار المستخدمين المعتمدين",change_role:"تغيير الدور",permissions_guide:"دليل الصلاحيات",view_own_sales_only:"عرض مبيعاته الشخصية فقط",manage_branch_employees:"إدارة موظفي فرعه وإرسال مهام",edit_employee_targets:"تعديل أهداف الموظفين في منطقته",view_all_areas:"عرض كل المناطق وتعديل الأهداف",full_permissions:"جميع الصلاحيات والتحكم الكامل",manage_new_registration_requests:"إدارة طلبات التسجيل الجديدة",total_requests:"إجمالي الطلبات",no_pending_requests:"لا توجد طلبات معلقة",all_requests_processed:"جميع الطلبات تمت معالجتها",user_name:"اسم المستخدم",current_role:"الدور الحالي",undefined:"غير محدد",approved:"معتمد",pending:"معلق",role_updated_successfully:"تم تحديث الصلاحية بنجاح",failed_to_update_role:"فشل في تحديث الصلاحية",roles_guide:"دليل الصلاحيات",roles_guide_description:"يمكنك هنا تعيين الصلاحيات لكل مستخدم",roles_guide_header:"دليل الصلاحيات — اختر الدور المناسب حسب مهام المستخدم.",roles_management:"إدارة صلاحيات المستخدمين",modify_roles:"تعديل صلاحيات المستخدمين الموافق عليهم",roles_description:"اختر الدور المناسب لكل مستخدم حسب مهامه",role_updated:"تم تحديث الصلاحية بنجاح",role_failed:"فشل في تحديث الصلاحية",year:"السنة",month:"الشهر",deleting:"جاري الحذف...",delete_data_button:"حذف البيانات",no_users_found:"لا يوجد مستخدمين",check_firebase_or_signup:"تحقق من اتصال Firebase أو سجل مستخدمين جدد",total_users:"إجمالي المستخدمين",please_sign_in:"يرجى تسجيل الدخول للمتابعة",email_or_id:"البريد الإلكتروني أو رقم الموظف",email_or_id_placeholder:"أدخل البريد الإلكتروني أو رقم الموظف",password:"كلمة المرور",sign_in:"تسجيل الدخول",signing_in:"جاري تسجيل الدخول...",sign_up:"إنشاء حساب",sign_up_title:"إنشاء حساب جديد",employee_id:"رقم الموظف",email:"البريد الإلكتروني",no_account:"ليس لديك حساب؟",sign_up_success:"تم إنشاء الحساب. بانتظار الموافقة.",forgot_password:"نسيت كلمة المرور؟",welcome_back_title:"مرحباً بعودتك!",welcome_back_text:"للبقاء على اتصال، سجل دخولك بمعلوماتك الشخصية",hello_friend_title:"مرحباً صديقنا!",hello_friend_text:"أدخل بياناتك وابدأ رحلتك معنا",sign_in_cta:"تسجيل الدخول",sign_up_cta:"إنشاء حساب",error_no_user_id:"لا يوجد مستخدم بهذا الرقم",error_no_user_email:"هذا المستخدم لا يملك بريد إلكتروني",error_login_failed:"فشل تسجيل الدخول",create_your_account:"أنشئ حسابك",confirm_password:"تأكيد كلمة المرور",already_have_account:"لديك حساب بالفعل؟",passwords_do_not_match:"كلمتا المرور غير متطابقتين"}},wA=R.createContext({locale:"en",setLocale:()=>{},t:e=>e}),HV=({children:e})=>{const[t,n]=R.useState(()=>{const s=navigator.language.startsWith("ar")?"ar":"en";return localStorage.getItem("locale")||s});R.useEffect(()=>{localStorage.setItem("locale",t)},[t]);const r=s=>{n(s)},o=R.useCallback((s,u)=>{var f,p;let c=((f=VE[t])==null?void 0:f[s])||((p=VE.ar)==null?void 0:p[s])||s;return u&&Object.keys(u).forEach(m=>{c=c.replace(`{{${m}}}`,String(u[m]))}),c},[t]);return h.jsx(wA.Provider,{value:{locale:t,setLocale:r,t:o},children:e})},Oe=()=>R.useContext(wA);function _f(e){if(!e)return null;if(typeof e=="number"){const o=new Date(Date.UTC(1899,11,30));return new Date(o.getTime()+e*86400*1e3).toISOString().split("T")[0]}const t=String(e);if(/^\d{4}-\d{2}-\d{2}/.test(t))return t.substring(0,10);const n=t.split(/[\/\-.]/);if(n.length===3){let[o,s,u]=n;if(u&&u.length===2&&(u="20"+u),o&&s&&u&&u.length===4)return`${u}-${s.padStart(2,"0")}-${o.padStart(2,"0")}`}const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}const qd=e=>{const t=(e.name||"").toLowerCase(),n=String(e.alias||"");return n.startsWith("4")?"Duvets":n.startsWith("2")?"Duvets Full":t.includes("mattresspad")||t.includes("matresspad")?"Toppers":t.includes("pillow")&&!t.includes("case")?"Pillows":"Other"},ms=(e,t)=>{if(!e||!t)return 0;const{year:n,month:r,day:o}=t;if(n==="all")return 0;const s=String(n),u=String(r==="all"?"all":r+1),c=e[s];if(r==="all")return c&&typeof c=="object"?Object.values(c).reduce((m,v)=>m+(Number(v)||0),0):0;const f=c&&typeof c=="object"&&Number(c[u])||0;if(o==="all")return f;const p=new Date(n,r+1,0).getDate();return p>0?f/p:0},mr=e=>{if(e==null)return 0;const t=Number(String(e).replace(/,/g,""));return isNaN(t)?0:t},GV=e=>e>=199&&e<=399?"Low Value (199-399)":e>=495&&e<=695?"Medium Value (495-695)":e>=795&&e<=999?"High Value (795-999)":null,WV=e=>e>=100?.02:e>=90?.01:e>=80?.005:0,Nf=(e,t)=>{if(e.assignments&&t.year!=="all"&&t.month!=="all"){const n=`${t.year}-${String(t.month+1).padStart(2,"0")}`;if(e.assignments[n])return e.assignments[n]}return e.currentStore},YV=({stores:e,employees:t,dailyMetrics:n,kingDuvetSales:r,salesTransactions:o,dateFilter:s,areaStoreFilter:u,profile:c})=>{const f=R.useMemo(()=>t.filter(x=>x.status!=="inactive"),[t]),p=R.useMemo(()=>{var O;if(!c)return{stores:[],employees:[],dailyMetrics:[],kingDuvetSales:[],salesTransactions:[]};const{role:x}=c,j=t.find(M=>c.employeeId&&M.employeeId===c.employeeId||M.userId&&M.userId===c.id||M.userEmail&&M.userEmail===c.email),k=c.store||(j==null?void 0:j.currentStore)||"",A=c.areaManager||((O=e.find(M=>M.name===k))==null?void 0:O.areaManager)||c.areaManager||"";if(x==="admin"||x==="general_manager")return{stores:e,employees:f,dailyMetrics:n,kingDuvetSales:r,salesTransactions:o};let T;if(x==="area_manager")T=e.filter(M=>M.areaManager===A);else if(x==="store_manager"){const M=e.find(ee=>ee.name===k);T=M?e.filter(ee=>ee.areaManager===M.areaManager):[]}else T=e.filter(M=>M.name===k);const L=new Set(T.map(M=>M.name));let F;x==="employee"?F=f.filter(M=>M.currentStore===k):x==="store_manager"?F=f.filter(M=>M.currentStore===k):F=f.filter(M=>L.has(Nf(M,s)));const q=M=>L.has(M.store),z=M=>L.has(M["Outlet Name"]);return{stores:T,employees:F,dailyMetrics:n.filter(q),kingDuvetSales:r.filter(z),salesTransactions:o.filter(z)}},[c,e,f,n,r,o,s]),m=R.useMemo(()=>{const x=T=>{const L="date"in T?T.date:T["Bill Dt."];if(!L||typeof L.toDate!="function")return!1;const F=L.toDate(),q=s.year==="all"||F.getUTCFullYear()===s.year,z=s.month==="all"||F.getUTCMonth()===s.month,O=s.day==="all"||F.getUTCDate()===s.day;return q&&z&&O},k=[...p.salesTransactions,...p.kingDuvetSales].filter(x),A=k.filter(T=>{const L=T["Item Alias"]||"",F=T["Item Name"]||"";return String(L).startsWith("4")&&F.toUpperCase().includes("COMFORTER")});return{metrics:p.dailyMetrics.filter(x),sales:k,duvetSales:A}},[p,s]),v=R.useMemo(()=>{const x=p.stores.filter(A=>(u.areaManager==="All"||A.areaManager===u.areaManager)&&(u.store==="All"||A.name===u.store)),j=new Set(x.map(A=>A.name));let k=p.employees.filter(A=>j.has(Nf(A,s)));if((c==null?void 0:c.role)==="store_manager"){const A=t.find(L=>c.employeeId&&L.employeeId===c.employeeId||L.userId&&L.userId===c.id||L.userEmail&&L.userEmail===c.email),T=c.store||(A==null?void 0:A.currentStore)||"";k=p.employees.filter(L=>Nf(L,s)===T)}return{stores:x,employees:k,metrics:m.metrics.filter(A=>j.has(A.store)),sales:m.sales.filter(A=>j.has(A["Outlet Name"])),duvetSales:m.duvetSales.filter(A=>j.has(A["Outlet Name"]))}},[p,m,u,s]),y=R.useMemo(()=>v.stores.map(x=>{const j=v.metrics.filter(F=>F.store===x.name),k=j.reduce((F,q)=>F+(q.totalSales||0),0),A=j.reduce((F,q)=>F+(q.visitors||0),0),T=j.reduce((F,q)=>F+(q.transactionCount||0),0),L=ms(x.targets,s);return{...x,totalSales:k,transactionCount:T,visitors:A,atv:T>0?k/T:0,visitorRate:A>0?T/A*100:0,effectiveTarget:L,targetAchievement:L>0?k/L*100:0,salesPerVisitor:A>0?k/A:0}}),[v.stores,v.metrics,s]),w=R.useMemo(()=>{const x={};v.employees.forEach(k=>{const A=Nf(k,s);if(!v.stores.some(z=>z.name===A))return;const T=v.metrics.filter(z=>z.employeeId===k.employeeId||z.employee===k.name),L=T.reduce((z,O)=>z+(O.totalSales||0),0),F=T.reduce((z,O)=>z+(O.transactionCount||0),0),q=ms(k.targets,s);x[A]||(x[A]=[]),x[A].push({...k,store:A,totalSales:L,totalTransactions:F,atv:F>0?L/F:0,effectiveTarget:q,achievement:q>0?L/q*100:0})});const j=new Set;return v.sales.forEach(k=>{var T;const A=k["SalesMan Name"];if(A&&!j.has(A)&&(j.add(A),!Object.values(x).some(F=>F.some(q=>q.name===A)))){const F=v.sales.filter(M=>M["SalesMan Name"]===A),q=F.reduce((M,ee)=>M+(ee["Net Amount"]||0),0),z=F.length,O=((T=F[0])==null?void 0:T["Outlet Name"])||"Unknown Store";x[O]||(x[O]=[]),x[O].push({id:A.replace(/\s+/g,"_"),name:A,currentStore:O,store:O,totalSales:q,totalTransactions:z,atv:z>0?q/z:0,effectiveTarget:0,achievement:0,status:"active",employeeId:null})}}),x},[v.employees,v.metrics,v.stores,v.sales,s]),_=R.useMemo(()=>{const x=new Map;return v.sales.forEach(j=>{const k=j["Item Alias"],A=j["Sold Qty"]||0,T=j["Item Rate"]||0,L=x.get(k)||{id:k,name:j["Item Name"],alias:k,price:T,soldQty:0,totalValue:0};L.soldQty+=A,L.totalValue+=A*T,x.set(k,L)}),Array.from(x.values()).sort((j,k)=>k.totalValue-j.totalValue)},[v.sales]),S=R.useMemo(()=>v.duvetSales.reduce((x,j)=>{const k=j["Outlet Name"],A=GV(j["Item Rate"]);return A&&(x[k]||(x[k]={name:k,"Low Value (199-399)":0,"Medium Value (495-695)":0,"High Value (795-999)":0,total:0}),x[k][A]+=j["Sold Qty"],x[k].total+=j["Sold Qty"]),x},{}),[v.duvetSales]),C=R.useMemo(()=>{const x={};return Object.values(w).flat().forEach(k=>{const A=y.find(L=>L.name===k.store);if(!A)return;x[A.name]||(x[A.name]={name:A.name,achievement:A.targetAchievement,commissionRate:WV(A.targetAchievement)*100,employees:[]});const T=x[A.name].commissionRate/100*(k.achievement/100);x[A.name].employees.push({...k,finalCommissionRate:T*100,commissionAmount:k.totalSales*T})}),Object.values(x)},[y,w]),N=R.useMemo(()=>{const x=y.reduce((A,T)=>A+T.totalSales,0),j=y.reduce((A,T)=>A+T.transactionCount,0),k=y.reduce((A,T)=>A+T.visitors,0);return{totalSales:x,totalTransactions:j,averageTransactionValue:j>0?x/j:0,conversionRate:k>0?j/k*100:0,salesPerVisitor:k>0?x/k:0}},[y]),E=R.useMemo(()=>{const{year:x,month:j}=s;if(x==="all")return[];if(j!=="all"){const T=new Date(x,j+1,0).getDate(),L=Array.from({length:T},(z,O)=>({name:`${O+1}`,Sales:0,Target:0}));let F=0;v.stores.forEach(z=>{F+=ms(z.targets,{year:x,month:j,day:"all"})});const q=T>0?F/T:0;return L.forEach(z=>z.Target=q),v.metrics.forEach(z=>{if(!z.date||typeof z.date.toDate!="function")return;const O=z.date.toDate();if(O.getUTCFullYear()===x&&O.getUTCMonth()===j){const M=O.getUTCDate()-1;M>=0&&M<T&&(L[M].Sales+=z.totalSales||0)}}),L}const k={};for(let T=0;T<12;T++)k[T]={sales:0,target:0};v.metrics.forEach(T=>{if(!T.date||typeof T.date.toDate!="function")return;const L=T.date.toDate();if(L.getUTCFullYear()===x){const F=L.getUTCMonth();k[F].sales+=T.totalSales||0}}),v.stores.forEach(T=>{var F;const L=(F=T.targets)==null?void 0:F[x];if(L)for(const q in L){const z=parseInt(q,10)-1;!isNaN(z)&&z>=0&&z<12&&(k[z].target+=L[q]||0)}});const A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return Array.from({length:12}).map((T,L)=>({name:A[L],Sales:k[L].sales,Target:k[L].target}))},[v.metrics,v.stores,s]);return{kpiData:N,storeSummary:y,employeeSummary:w,productSummary:_,duvetSummary:S,commissionData:C,salesPerformance:E}};var BE;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(BE||(BE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zE;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(zE||(zE={}));var qE;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(qE||(qE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=["user","model","function","system"];var HE;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(HE||(HE={}));var GE;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(GE||(GE={}));var WE;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(WE||(WE={}));var YE;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(YE||(YE={}));var Ul;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Ul||(Ul={}));var QE;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(QE||(QE={}));var XE;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(XE||(XE={}));var JE;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(JE||(JE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ma extends mn{constructor(t,n){super(t),this.response=n}}class xA extends mn{constructor(t,n,r,o){super(t),this.status=n,this.statusText=r,this.errorDetails=o}}class wo extends mn{}class bA extends mn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="https://generativelanguage.googleapis.com",XV="v1beta",JV="0.24.1",ZV="genai-js";var ks;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ks||(ks={}));class e6{constructor(t,n,r,o,s){this.model=t,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=s}toString(){var t,n;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||XV;let s=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||QV}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function t6(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${ZV}/${JV}`),t.join(" ")}async function n6(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",t6(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new wo(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,s]of r.entries()){if(o==="x-goog-api-key")throw new wo(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new wo(`Header name ${o} can only be set using the apiClient field`);n.append(o,s)}}return n}async function r6(e,t,n,r,o,s){const u=new e6(e,t,n,r,s);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},a6(s)),{method:"POST",headers:await n6(u),body:o})}}async function Gc(e,t,n,r,o,s={},u=fetch){const{url:c,fetchOptions:f}=await r6(e,t,n,r,o,s);return i6(c,f,u)}async function i6(e,t,n=fetch){let r;try{r=await n(e,t)}catch(o){o6(o,e)}return r.ok||await s6(r,e),r}function o6(e,t){let n=e;throw n.name==="AbortError"?(n=new bA(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof xA||e instanceof wo||(n=new mn(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function s6(e,t){let n="",r;try{const o=await e.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new xA(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}function a6(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const n=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(e.candidates[0]))throw new ma(`${Zi(e)}`,e);return u6(e)}else if(e.promptFeedback)throw new ma(`Text not available. ${Zi(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(e.candidates[0]))throw new ma(`${Zi(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ZE(e)[0]}else if(e.promptFeedback)throw new ma(`Function call not available. ${Zi(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(e.candidates[0]))throw new ma(`${Zi(e)}`,e);return ZE(e)}else if(e.promptFeedback)throw new ma(`Function call not available. ${Zi(e)}`,e)},e}function u6(e){var t,n,r,o;const s=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const u of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)u.text&&s.push(u.text),u.executableCode&&s.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&s.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function ZE(e){var t,n,r,o;const s=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const u of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)u.functionCall&&s.push(u.functionCall);if(s.length>0)return s}const l6=[Ul.RECITATION,Ul.SAFETY,Ul.LANGUAGE];function Hf(e){return!!e.finishReason&&l6.includes(e.finishReason)}function Zi(e){var t,n,r;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const s=e.candidates[0];Hf(s)&&(o+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(o+=`: ${s.finishMessage}`))}return o}function _c(e){return this instanceof _c?(this.v=e,this):new _c(e)}function c6(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(y){r[y]&&(o[y]=function(w){return new Promise(function(_,S){s.push([y,w,_,S])>1||c(y,w)})})}function c(y,w){try{f(r[y](w))}catch(_){v(s[0][3],_)}}function f(y){y.value instanceof _c?Promise.resolve(y.value.v).then(p,m):v(s[0][2],y)}function p(y){c("next",y)}function m(y){c("throw",y)}function v(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function h6(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=p6(t),[r,o]=n.tee();return{stream:d6(r),response:f6(o)}}async function f6(e){const t=[],n=e.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return jx(m6(t));t.push(o)}}function d6(e){return c6(this,arguments,function*(){const n=e.getReader();for(;;){const{value:r,done:o}=yield _c(n.read());if(o)break;yield yield _c(jx(r))}})}function p6(e){const t=e.getReader();return new ReadableStream({start(r){let o="";return s();function s(){return t.read().then(({value:u,done:c})=>{if(c){if(o.trim()){r.error(new mn("Failed to parse stream"));return}r.close();return}o+=u;let f=o.match(eI),p;for(;f;){try{p=JSON.parse(f[1])}catch{r.error(new mn(`Error parsing JSON response: "${f[1]}"`));return}r.enqueue(p),o=o.substring(f[0].length),f=o.match(eI)}return s()}).catch(u=>{let c=u;throw c.stack=u.stack,c.name==="AbortError"?c=new bA("Request aborted when reading from the stream"):c=new mn("Error reading from the stream"),c})}}})}function m6(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e){if(r.candidates){let o=0;for(const s of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=s.citationMetadata,n.candidates[o].groundingMetadata=s.groundingMetadata,n.candidates[o].finishReason=s.finishReason,n.candidates[o].finishMessage=s.finishMessage,n.candidates[o].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[o].content||(n.candidates[o].content={role:s.content.role||"user",parts:[]});const u={};for(const c of s.content.parts)c.text&&(u.text=c.text),c.functionCall&&(u.functionCall=c.functionCall),c.executableCode&&(u.executableCode=c.executableCode),c.codeExecutionResult&&(u.codeExecutionResult=c.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[o].content.parts.push(u)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(e,t,n,r){const o=await Gc(t,ks.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r);return h6(o)}async function _A(e,t,n,r){const s=await(await Gc(t,ks.GENERATE_CONTENT,e,!1,JSON.stringify(n),r)).json();return{response:jx(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Nc(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return g6(t)}function g6(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const s of e)"functionResponse"in s?(n.parts.push(s),o=!0):(t.parts.push(s),r=!0);if(r&&o)throw new mn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new mn("No content is provided for sending chat message.");return r?t:n}function v6(e,t){var n;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new wo("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const s=Nc(e);r.contents=[s]}return{generateContentRequest:r}}function tI(e){let t;return e.contents?t=e:t={contents:[Nc(e)]},e.systemInstruction&&(t.systemInstruction=NA(e.systemInstruction)),t}function y6(e){return typeof e=="string"||Array.isArray(e)?{content:Nc(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],w6={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function x6(e){let t=!1;for(const n of e){const{role:r,parts:o}=n;if(!t&&r!=="user")throw new mn(`First content should be with role 'user', got ${r}`);if(!KE.includes(r))throw new mn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(KE)}`);if(!Array.isArray(o))throw new mn("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new mn("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of o)for(const f of nI)f in c&&(s[f]+=1);const u=w6[r];for(const c of nI)if(!u.includes(c)&&s[c]>0)throw new mn(`Content with role '${r}' can't contain '${c}' part`);t=!0}}function rI(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="SILENT_ERROR";class b6{constructor(t,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(x6(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var r,o,s,u,c,f;await this._sendPromise;const p=Nc(t),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),n);let y;return this._sendPromise=this._sendPromise.then(()=>_A(this._apiKey,this.model,m,v)).then(w=>{var _;if(rI(w.response)){this._history.push(p);const S=Object.assign({parts:[],role:"model"},(_=w.response.candidates)===null||_===void 0?void 0:_[0].content);this._history.push(S)}else{const S=Zi(w.response);S&&console.warn(`sendMessage() was unsuccessful. ${S}. Inspect response object for details.`)}y=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,y}async sendMessageStream(t,n={}){var r,o,s,u,c,f;await this._sendPromise;const p=Nc(t),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),n),y=SA(this._apiKey,this.model,m,v);return this._sendPromise=this._sendPromise.then(()=>y).catch(w=>{throw new Error(iI)}).then(w=>w.response).then(w=>{if(rI(w)){this._history.push(p);const _=Object.assign({},w.candidates[0].content);_.role||(_.role="model"),this._history.push(_)}else{const _=Zi(w);_&&console.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(w=>{w.message!==iI&&console.error(w)}),y}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(e,t,n,r){return(await Gc(t,ks.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(e,t,n,r){return(await Gc(t,ks.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}async function N6(e,t,n,r){const o=n.requests.map(u=>Object.assign(Object.assign({},u),{model:t}));return(await Gc(t,ks.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,n,r={}){this.apiKey=t,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=NA(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var r;const o=tI(t),s=Object.assign(Object.assign({},this._requestOptions),n);return _A(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}async generateContentStream(t,n={}){var r;const o=tI(t),s=Object.assign(Object.assign({},this._requestOptions),n);return SA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}startChat(t){var n;return new b6(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const r=v6(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return S6(this.apiKey,this.model,r,o)}async embedContent(t,n={}){const r=y6(t),o=Object.assign(Object.assign({},this._requestOptions),n);return _6(this.apiKey,this.model,r,o)}async batchEmbedContents(t,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return N6(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new mn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new oI(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,r){if(!t.name)throw new wo("Cached content must contain a `name` field.");if(!t.model)throw new wo("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const u of o)if(n!=null&&n[u]&&t[u]&&(n==null?void 0:n[u])!==t[u]){if(u==="model"){const c=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,f=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(c===f)continue}throw new wo(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${t[u]})`)}const s=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new oI(this.apiKey,s,r)}}const I6="AIzaSyBJeuf5Ne_IsEvgKlxIfbsOS7Sm9Xjl4Ws";console.log("🔍 Gemini API Key:","⚠️ Using fallback");const T6=new E6(I6),b0=async(e,t,n,r=3)=>{let o=0,s=1e3;for(;o<r;)try{console.log(`🔍 Gemini API call attempt ${o+1}/${r} with model: ${e}`);const u=T6.getGenerativeModel({model:e});let c;typeof t=="string"?n?c=await u.generateContent({contents:[{role:"user",parts:[{text:t}]}],generationConfig:n}):c=await u.generateContent(t):c=await u.generateContent({contents:t.contents,systemInstruction:t.systemInstruction,generationConfig:t.generationConfig});const f=await c.response;return console.log("✅ Gemini API call successful"),f}catch(u){if(console.error(`❌ Gemini API call failed on attempt ${o+1}:`,{error:u.message,status:u.status||"Unknown",details:u.details||"No additional details"}),o>=r-1)throw new Error(`AI analysis failed after ${r} retries. Last error: ${u.message}`);console.log(`🔄 Retrying in ${s}ms...`),await new Promise(c=>setTimeout(c,s)),s*=2,o++}throw new Error("AI analysis failed after multiple retries.")},li=async(e,t="gemini-2.5-flash",n=3)=>{var f;if(typeof e=="string")return(await b0(t,e,void 0,n)).text();const r=e.model||t,o=e.systemInstruction||((f=e.config)==null?void 0:f.systemInstruction),s=e.generationConfig||(e.config?Object.fromEntries(Object.entries(e.config).filter(([p])=>p!=="systemInstruction")):void 0),u={contents:e.contents,systemInstruction:o,generationConfig:s};return(await b0(r,u,void 0,n)).text()},j6=async(e,t,n)=>{const r=new Date,o=r.getMonth(),s=r.getFullYear(),u=t.filter(y=>{if(!y.date||typeof y.date.toDate!="function")return!1;const w=y.date.toDate();return w.getMonth()===o&&w.getFullYear()===s}).map(y=>({date:y.date.toDate().toISOString().split("T")[0],sales:y.totalSales||0})),c=n==="ar"?"IMPORTANT: The justification must be in Arabic.":"",f=`You are a predictive retail analyst. Your task is to forecast month-end sales for a store and assess its risk of missing its target.

Store Name: ${e.name}
Monthly Sales Target: ${e.effectiveTarget.toFixed(2)} SAR
Current Sales Data (This Month So Far): ${JSON.stringify(u)}

Based ONLY on this data, provide a JSON object with your analysis.
1.  **predictedSales**: Your realistic forecast for total sales by the end of the month.
2.  **riskScore**: An integer from 0 (no risk) to 100 (certain to miss target). A score > 60 is high risk.
3.  **justification**: A brief, one-sentence explanation for your risk score. ${c}`,v=(await b0("gemini-2.5-flash",f,{responseMimeType:"application/json",responseSchema:{type:"object",properties:{predictedSales:{type:"number",description:"Forecasted total sales for the month."},riskScore:{type:"number",description:"Risk of missing target (0-100)."},justification:{type:"string",description:"Brief reason for the risk score."}},required:["predictedSales","riskScore","justification"]}})).text().trim();try{return JSON.parse(v)}catch(y){throw console.error("❌ Failed to parse JSON response:",v),new Error(`Failed to parse AI response as JSON: ${y}`)}},{Timestamp:Ef}=de.firestore,k6=(e,t,n,r,o)=>{const[s,u]=R.useState(null),c=()=>u(null),f=y=>y.toLowerCase().trim().replace(/[\s_.-]+/g,""),p=y=>{if(!y)return null;const w=String(y).trim();let _=w.match(/^(\d{3,4})\b/);return _||(_=w.match(/unknown[\s_\-]*(\d{3,4})/i),_)||(_=w.match(/(\d{3,4})\s*$/),_)?_[1]:null},m=(y,w)=>{const _={};for(const S in y)_[f(S)]=S;for(const S of w){if(!S)continue;const C=f(String(S)),N=_[C];if(N!==void 0){const E=y[N];if(E!=null)return E}}};return{handleSmartUpload:async(y,w)=>{var A,T,L;if(!e)return;n(!0),w(0),u(null),t({isOpen:!0,text:"AI is analyzing your file structure...",type:"alert"});let _,S,C;try{const z=`You are an expert data import specialist for a retail company. Analyze the provided file preview. Your task is to identify the file type, its format, and map its columns to our system's required columns.

The possible file types are: 'employee_sales', 'item_wise_sales', 'install', 'visitors'.

Our system's columns for each type are:
- 'employee_sales': ['Sales Man Name', 'Outlet Name', 'Bill Date', 'Net Amount', 'Total Sales Bills']
- 'item_wise_sales': ['Outlet Name', 'SalesMan Name', 'Bill Dt.', 'Item Name', 'Item Alias', 'Sold Qty', 'Item Rate']
- 'install': ['Type', 'Store Name', 'Area Manager', 'Employee Name', 'Employee Store', 'Year', 'Month', 'Store Target', 'Employee Sales Target', 'Employee Duvet Target', 'Employee Email']
- 'visitors': ['Date', 'Store Name', 'Visitors']

**Analysis Rules:**
1.  **Partial 'install' Files:** The 'install' file type is special. It can be a partial file. For example, it might ONLY contain employee targets ('Type', 'Employee Name', 'Year', 'Month', 'Employee Sales Target') or ONLY store targets. You must still identify it as 'install' if it contains a valid subset of the 'install' columns. The 'Type' column is a strong indicator.
2.  **File Formats:** 'employee_sales' can have a "flat" format (one employee per row) or a "grouped" format (employee name in one row, their data in subsequent rows). Your JSON response must include a "format" key for this file type.
3.  **Flexible Column Names:** Match headers intelligently (e.g., 'Net Amount' could be 'Net Sales', 'Sales Man Name' could be 'Employee').

**IMPORTANT EXAMPLE:** If the user uploads a file with headers \`Type, Employee Name, Employee Store, Year, Month, Employee Sales Target\`, you MUST correctly identify it as 'install' and return a headerMap for the columns present.
{
  "fileType": "install",
  "headerMap": {
    "Type": "Type",
    "Employee Name": "Employee Name",
    "Employee Store": "Employee Store",
    "Year": "Year",
    "Month": "Month",
    "Employee Sales Target": "Employee Sales Target"
  }
}

Return ONLY a valid JSON object with "fileType", "headerMap", and a "format" key (null if not 'employee_sales').

File Preview:
${`Headers: ${Object.keys(y[0]).join(", ")}
Sample rows:
${y.slice(0,3).map(H=>Object.values(H).join(", ")).join(`
`)}`}`,M=(A=(await li({model:"gemini-2.5-flash",contents:[{parts:[{text:z}]}]})).match(/\{.*\}/s))==null?void 0:A[0];if(!M)throw new Error("AI response was not valid JSON.");const ee=JSON.parse(M);if(_=ee.fileType,S=ee.headerMap,C=ee.format,!_||!S)throw new Error("AI could not determine file structure.");if(_==="item_wise_sales"){const H=["Bill_No","bill_no","Bill No","Invoice","Invoice No","Transaction_ID","Bill Number"];if(!H.find(V=>Object.keys(S).some(P=>P.toLowerCase().trim()===V.toLowerCase().trim()))){const P=Object.keys(y[0]||{}).find(X=>H.some(B=>X.toLowerCase().trim()===B.toLowerCase().trim()));P?S.Bill_No=P:console.warn("Bill number not found, sold-with analysis may be limited")}}t({isOpen:!0,text:`AI identified file as: ${_}. Starting upload...`,type:"alert"})}catch(F){t({isOpen:!0,text:`AI analysis failed: ${F.message}. Please use a template.`,type:"alert"}),n(!1);return}const N=400;let E=[],x=0;const j=new Set;let k=null;for(let F=0;F<y.length;F+=N){const q=y.slice(F,F+N),z=e.batch();let O=null;for(const M of q)try{switch(_){case"employee_sales":{if(C==="flat"){const ee=m(M,[S["Sales Man Name"]]),H=m(M,[S["Outlet Name"]]),te=_f(m(M,[S["Bill Date"]])),V=mr(m(M,[S["Net Amount"]])),P=mr(m(M,[S["Total Sales Bills"]]));if(te&&H&&ee){const X=p(ee),B=Ef.fromDate(new Date(te)),ae=e.collection("dailyMetrics").doc();z.set(ae,{date:B,store:String(H).trim(),employee:String(ee).trim(),employeeId:X,totalSales:V,transactionCount:P}),E.push({dataType:"Employee Sale",name:ee,value:`Sales: ${V}`})}else x++}else{const ee=m(M,[S["Sales Man Name"]]),H=m(M,[S["Outlet Name"]]);if(ee&&String(ee).trim()&&!String(ee).toLowerCase().includes("total")){O=String(ee).trim();continue}if(!ee&&H&&O){const te=_f(m(M,[S["Bill Date"]])),V=mr(m(M,[S["Net Amount"]])),P=mr(m(M,[S["Total Sales Bills"]]));if(te){const X=p(O),B=Ef.fromDate(new Date(te)),ae=e.collection("dailyMetrics").doc();z.set(ae,{date:B,store:String(H).trim(),employee:O,employeeId:X,totalSales:V,transactionCount:P}),E.push({dataType:"Employee Sale",name:O,value:`Sales: ${V}`})}else x++}else x++}break}case"item_wise_sales":{const ee=_f(m(M,[S["Bill Dt."]])),H=m(M,[S["Outlet Name"]]),te=m(M,[S["SalesMan Name"]]),V=m(M,[S["Item Name"]]),P=m(M,[S["Item Alias"]]),X=mr(m(M,[S["Sold Qty"]])),B=mr(m(M,[S["Item Rate"]])),ae=m(M,["Bill_No","bill_no","Bill No","BillNo","Invoice","InvoiceNo","Invoice No","Transaction_ID","Transaction ID","Bill Number"]);if(ee&&H&&te&&V&&P){const Q=p(te),we=Ef.fromDate(new Date(ee)),xe=String(P).startsWith("4")&&String(V).toUpperCase().includes("COMFORTER")?"kingDuvetSales":"salesTransactions",Ve=e.collection(xe).doc(),re={"Bill Dt.":we,"Outlet Name":H,"SalesMan Name":te,employeeId:Q,"Item Name":V,"Item Alias":P,"Sold Qty":X,"Item Rate":B};ae!=null&&String(ae).trim()!==""?re.bill_no=String(ae).trim():console.warn("Bill number not found, sold-with analysis may be limited"),z.set(Ve,re),E.push({dataType:"Item Sale",name:V,value:`Qty: ${X}`})}else x++;break}case"install":{const ee=(T=m(M,[S.Type]))==null?void 0:T.toLowerCase(),H=mr(m(M,[S.Year])),te=mr(m(M,[S.Month]));if(!ee||!H||!te){x++;continue}if(k||(k={year:H,month:te}),ee==="store"){const V=m(M,[S["Store Name"]]),P=m(M,[S["Area Manager"]]);if(V&&(o.find(X=>X.name===V)||P)){const X=o.find(we=>we.name===V)||{id:V.replace(/\s+/g,"_")},B=e.collection("stores").doc(X.id),ae={name:V};P&&(ae.areaManager=P),z.set(B,ae,{merge:!0});const Q=m(M,[S["Store Target"]]);if(Q!==void 0){const we={};we[`targets.${H}.${te}`]=mr(Q),z.update(B,we)}E.push({dataType:"Store Install",name:V,value:"Data updated"})}else x++}else if(ee==="employee"){const V=m(M,[S["Employee Name"]]),P=m(M,[S["Employee Store"]]),X=m(M,[S["Employee Email"]]);if(V){j.add(V);const B=r.find(Te=>Te.name===V)||{id:V.replace(/\s+/g,"_"),assignments:{}},ae=e.collection("employees").doc(B.id),Q=`${H}-${String(te).padStart(2,"0")}`,we={name:V,status:"active"};P&&(we.currentStore=P,we.assignments={...B.assignments,[Q]:P}),X&&(we.email=X);const De=((L=String(V).match(/^\d+/))==null?void 0:L[0])||null;De&&(we.employeeId=De),z.set(ae,we,{merge:!0});const xe={},Ve=m(M,[S["Employee Sales Target"]]);Ve!==void 0&&(xe[`targets.${H}.${te}`]=mr(Ve));const re=m(M,[S["Employee Duvet Target"]]);re!==void 0&&(xe[`duvetTargets.${H}.${te}`]=mr(re)),Object.keys(xe).length>0&&z.update(ae,xe),E.push({dataType:"Employee Install",name:V,value:"Data updated"})}else x++}else x++;break}case"visitors":{const ee=_f(m(M,[S.Date])),H=m(M,[S["Store Name"]]),te=mr(m(M,[S.Visitors]));if(ee&&H){const V=Ef.fromDate(new Date(ee)),P=`${ee}_${H.replace(/\s+/g,"-")}`,X=e.collection("dailyMetrics").doc(P);z.set(X,{date:V,store:H,visitors:te},{merge:!0}),E.push({dataType:"Visitors",name:H,value:`${te} visitors`})}else x++;break}default:x++}}catch(ee){console.error("Error processing row:",M,ee),x++}await z.commit(),w((F+q.length)/y.length*100)}if(_==="install"&&j.size>0&&k){const F=e.batch(),q=r.filter(z=>z.status==="active"&&!j.has(z.name));q.forEach(z=>{const O=e.collection("employees").doc(z.id);F.update(O,{status:"inactive"})}),await F.commit(),q.length>0&&t({isOpen:!0,text:`Marked ${q.length} employees as inactive.`,type:"alert"})}u({successful:E,skipped:x}),t({isOpen:!0,text:`Upload complete! Processed ${E.length} records.`,type:"alert"}),n(!1)},uploadResult:s,clearUploadResult:c}},Nu=({stores:e,filters:t,setFilters:n,profile:r})=>{const{t:o}=Oe(),s=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="general_manager",u=R.useMemo(()=>{if(!s)return[];const m=new Set(e.map(v=>v.areaManager).filter(Boolean));return["All",...Array.from(m).sort()]},[e,s]),c=R.useMemo(()=>{if(t.areaManager==="All"&&s)return e;const m=s?t.areaManager:r==null?void 0:r.areaManager;return m?e.filter(v=>v.areaManager===m):e},[e,t.areaManager,s,r]),f=m=>{n({areaManager:m.target.value,store:"All"})},p=m=>{n(v=>({...v,store:m.target.value}))};return h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 p-4 bg-white rounded-xl shadow-sm border border-neutral-200",children:[s&&h.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[h.jsxs("span",{className:"font-semibold text-zinc-600",children:[o("area_manager"),":"]}),h.jsx("select",{value:t.areaManager,onChange:f,className:"input w-full",children:u.map(m=>h.jsx("option",{value:m,children:m==="All"?o("all_area_managers"):m},m))})]}),h.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[h.jsxs("span",{className:"font-semibold text-zinc-600",children:[o("store"),":"]}),h.jsxs("select",{value:t.store,onChange:p,className:"input w-full",disabled:(r==null?void 0:r.role)==="employee",children:[h.jsx("option",{value:"All",children:o("all_stores")}),c.map(m=>h.jsx("option",{value:m.name,children:m.name},m.id))]})]})]})},$s=({dateFilter:e,setDateFilter:t,allData:n})=>{const{t:r,locale:o}=Oe(),s=R.useMemo(()=>{const v=new Set;n.forEach(_=>{const S="date"in _?_.date:_["Bill Dt."];if(S&&typeof S.toDate=="function"){const N=S.toDate().getUTCFullYear();isNaN(N)||v.add(N)}});const y=new Date().getFullYear();return v.add(y),["all",...Array.from(v).filter(_=>!isNaN(_)).sort((_,S)=>S-_)]},[n]),u=R.useMemo(()=>o==="ar"?["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],[o]),c=["all",...Array.from({length:31},(v,y)=>y+1)],f=v=>{const y=v.target.value==="all"?"all":Number(v.target.value);t({year:y,month:"all",day:"all"})},p=v=>{const y=v.target.value==="all"?"all":Number(v.target.value);t(w=>({...w,month:y,day:"all"}))},m=v=>{const y=v.target.value==="all"?"all":Number(v.target.value);t(w=>({...w,day:y}))};return h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 p-4 bg-white rounded-xl shadow-sm border border-neutral-200",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[150px]",children:[h.jsxs("span",{className:"font-semibold text-zinc-600",children:[r("year"),":"]}),h.jsx("select",{value:e.year,onChange:f,className:"input w-full",children:s.map(v=>h.jsx("option",{value:v,children:v==="all"?r("all_years"):v},v))})]}),h.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[150px]",children:[h.jsxs("span",{className:"font-semibold text-zinc-600",children:[r("month"),":"]}),h.jsxs("select",{value:e.month,onChange:p,className:"input w-full",disabled:e.year==="all",children:[h.jsx("option",{value:"all",children:r("all_months")}),u.map((v,y)=>h.jsx("option",{value:y,children:v},v))]})]}),h.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[150px]",children:[h.jsxs("span",{className:"font-semibold text-zinc-600",children:[r("day"),":"]}),h.jsx("select",{value:e.day,onChange:m,className:"input w-full",disabled:e.month==="all"||e.year==="all",children:c.map(v=>h.jsx("option",{value:v,children:v==="all"?r("all_days"):v},v))})]})]})},C6=({data:e})=>{if(!e||e.length<2)return null;const t=100,n=30,r=2,o=Math.max(...e),s=Math.min(...e),u=o-s,c=e.map((p,m)=>{const v=m/(e.length-1)*(t-r*2)+r,y=n-r-(p-s)/(u||1)*(n-r*2);return`${v},${y}`}).join(" "),f=e.length>1&&e[e.length-1]>e[0];return h.jsx("svg",{viewBox:`0 0 ${t} ${n}`,className:"w-full h-8",children:h.jsx("polyline",{fill:"none",stroke:f?"#10b981":"#ef4444",strokeWidth:"2",points:c})})},A6=({percentage:e,size:t=60})=>{const n=(t-8)/2,r=2*Math.PI*n,o=r,s=r-e/100*r;return h.jsxs("div",{className:"circular-progress",style:{width:t,height:t},children:[h.jsxs("svg",{width:t,height:t,children:[h.jsx("circle",{cx:t/2,cy:t/2,r:n,className:"circular-progress-bg"}),h.jsx("circle",{cx:t/2,cy:t/2,r:n,className:"circular-progress-fill",strokeDasharray:o,strokeDashoffset:s,style:{strokeDasharray:`${o} ${o}`,strokeDashoffset:s}})]}),h.jsxs("div",{className:"circular-progress-text",children:[Math.round(e),"%"]})]})},D6=({trend:e,value:t})=>{const n=()=>{switch(e){case"up":return"text-green-600";case"down":return"text-red-500";default:return"text-gray-500"}},r=()=>{switch(e){case"up":return"↗";case"down":return"↘";default:return"→"}};return h.jsxs("div",{className:`flex items-center gap-1 text-xs font-semibold ${n()}`,children:[h.jsx("span",{className:"text-lg",children:r()}),t&&h.jsx("span",{children:t})]})},pn=({title:e,value:t,format:n,comparisonValue:r,comparisonLabel:o,icon:s,iconBgColor:u,onClick:c,trendData:f,showProgress:p=!1,progressValue:m=0,trend:v="neutral",trendValue:y})=>{const w=r!==void 0&&t>=r,_=n&&typeof t=="number"?n(t):(t==null?void 0:t.toLocaleString())||0;return h.jsxs("button",{onClick:c,disabled:!c,className:"modern-kpi-card group p-4 flex flex-col text-left w-full h-full disabled:cursor-default",children:[h.jsx("div",{className:"kpi-card-background"}),h.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[s&&h.jsx("div",{className:"kpi-icon-container flex-shrink-0",children:s}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("h3",{className:"kpi-title truncate",children:e})})]}),y&&h.jsx(D6,{trend:v,value:y})]}),h.jsx("div",{className:"mb-4 flex-1 flex items-center",children:h.jsx("div",{className:"kpi-value break-all leading-tight",children:_})}),h.jsxs("div",{className:"flex items-end justify-between",children:[h.jsx("div",{className:"flex-1",children:p?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(A6,{percentage:m,size:50}),h.jsxs("div",{className:"text-xs text-gray-500",children:["التقدم: ",Math.round(m),"%"]})]}):r!==void 0?h.jsxs("div",{className:`text-xs font-semibold flex items-center gap-1 ${w?"text-green-600":"text-red-500"}`,children:[h.jsx("span",{className:"text-sm",children:w?"▲":"▼"}),h.jsxs("span",{children:[o,": ",n?n(r):r.toLocaleString()]})]}):null}),f&&f.length>1&&h.jsx("div",{className:"ml-3",children:h.jsx(C6,{data:f})})]})]})]})},Zn=({title:e,children:t})=>h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-neutral-200 h-full flex flex-col transition-all duration-300 hover:shadow-xl hover:border-primary-200",children:[h.jsx("div",{className:"text-xl font-bold text-neutral-800 mb-6 border-b border-neutral-100 pb-3",children:e}),h.jsx("div",{className:"flex-grow relative",children:t})]}),EA=({content:e,x:t,y:n})=>h.jsx("div",{className:"absolute p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg pointer-events-none",style:{left:t,top:n,transform:"translate(-50%, -110%)"},dangerouslySetInnerHTML:{__html:e}}),gs=({data:e,dataKey:t,nameKey:n,format:r})=>{if(!e||e.length===0)return h.jsx("div",{className:"flex items-center justify-center h-full text-neutral-500",children:"No data to display"});const o=Math.max(...e.map(s=>s[t]||0));return o===0?h.jsx("div",{className:"flex items-center justify-center h-full text-neutral-500",children:"No data to display"}):h.jsx("div",{className:"w-full h-full flex flex-col space-y-3",children:e.map((s,u)=>{const c=s[t]||0,f=c/o*100;return h.jsxs("div",{className:"group relative",title:`${s[n]}: ${r?r(c):c}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-sm font-medium text-neutral-700 truncate pr-2",children:s[n]}),h.jsx("span",{className:"text-sm font-bold text-neutral-900 whitespace-nowrap",children:r?r(c):c.toLocaleString()})]}),h.jsx("div",{className:"relative h-4 bg-neutral-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-orange-400 to-orange-600 rounded-full transition-all duration-500 ease-out relative group-hover:from-orange-500 group-hover:to-orange-700",style:{width:`${Math.max(f,2)}%`},children:h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})})})]},`${s[n]}-${u}`)})})},kx=({data:e,onSliceClick:t})=>{const n=R.useRef(null),[r,o]=R.useState(null);if(!e||e.length===0)return h.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:"No data to display"});const s=e.reduce((p,m)=>p+m.value,0);if(s===0)return h.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:"No data to display"});const u=["#f97316","#3b82f6","#6366f1","#14b8a6","#f59e0b","#84cc16","#ef4444","#8b5cf6","#ec4899","#22d3ee"];let c=0;const f=(p,m=50)=>[50+m*Math.cos(p),50+m*Math.sin(p)];return h.jsxs("div",{className:"w-full h-full flex flex-col md:flex-row items-center justify-between gap-4",ref:n,children:[h.jsxs("div",{className:"w-48 h-48 relative flex-shrink-0",children:[r&&h.jsx(EA,{...r}),h.jsx("svg",{viewBox:"0 0 100 100",onMouseLeave:()=>o(null),children:e.map((p,m)=>{const v=p.value/s*2*Math.PI,y=c;c+=v;const w=c,[_,S]=f(y,40),[C,N]=f(w,40),E=v>Math.PI?1:0,x=`M 50,50 L ${_},${S} A 40,40 0 ${E},1 ${C},${N} z`;return h.jsx("path",{d:x,fill:u[m%u.length],className:t?"cursor-pointer hover:opacity-80 transition-opacity":"",onClick:()=>t&&t(p.name),onMouseMove:j=>{if(!n.current)return;const k=n.current.getBoundingClientRect(),A=j.clientX-k.left,T=j.clientY-k.top;o({content:`${p.name}: ${(p.value/s*100).toFixed(1)}%`,x:A,y:T})}},p.name)})})]}),h.jsx("div",{className:"flex-grow overflow-y-auto h-full w-full",children:h.jsxs("ul",{className:"space-y-2",children:[e.slice(0,10).map((p,m)=>h.jsxs("li",{className:"flex items-center text-sm group hover:bg-neutral-50 p-2 rounded-lg transition-all duration-200",children:[h.jsx("div",{className:"w-4 h-4 rounded-full mr-3 shadow-sm",style:{backgroundColor:u[m%u.length]}}),h.jsx("span",{className:"text-neutral-700 flex-grow font-medium whitespace-nowrap",title:p.name,children:p.name}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-neutral-500",children:p.value.toLocaleString()}),h.jsxs("span",{className:"font-bold text-neutral-900 bg-neutral-100 px-2 py-1 rounded-md text-xs",children:[(p.value/s*100).toFixed(1),"%"]})]})]},p.name)),e.length>10&&h.jsxs("li",{className:"text-xs text-neutral-400 mt-3 p-2 bg-neutral-50 rounded-lg text-center",children:["... و ",e.length-10," عناصر أخرى"]})]})})]})},IA=({data:e})=>{const t=R.useRef(null),[n,r]=R.useState(null),o=R.useMemo(()=>!e||e.length===0?[]:Object.keys(e[0]).filter(N=>typeof e[0][N]=="number"&&N!=="monthIndex"),[e]),[s,u]=R.useState(()=>new Set(o));if(R.useEffect(()=>{u(new Set(o))},[o]),!e||e.length===0)return h.jsx("div",{className:"flex items-center justify-center h-full text-neutral-500",children:"No data available"});const c={Sales:"#10b981",Target:"#a78bfa",totalSales:"#f97316",effectiveTarget:"#3b82f6",targetAchievement:"#8b5cf6"},f=600,p=250,m={top:10,right:20,bottom:30,left:40},v=e.flatMap(N=>o.filter(E=>s.has(E)).map(E=>N[E])),y=v.length>0?Math.max(...v,1):1,w=5,_=N=>e.length<2?"":`M ${e.map((x,j)=>{const k=m.left+j*((f-m.left-m.right)/(e.length-1)),A=p-m.bottom-x[N]/y*(p-m.top-m.bottom);return`${k},${A}`}).join(" L ")}`,S=N=>{if(!t.current)return;const E=N.currentTarget,j=new DOMPoint(N.clientX,N.clientY).matrixTransform(E.getScreenCTM().inverse()),k=Math.min(e.length-1,Math.max(0,Math.round((j.x-m.left)/(f-m.left-m.right)*(e.length-1))));if(k>=0&&k<e.length){const A=e[k],T=`<div class="font-bold mb-1">${A.name}</div>${o.filter(F=>s.has(F)).map(F=>`
                <div class="flex items-center justify-between gap-2">
                    <div class="flex items-center">
                       <span class="w-2 h-2 rounded-full mr-1.5" style="background-color: ${c[F]}"></span>
                       <span>${F}:</span>
                    </div>
                    <span class="font-semibold">${A[F].toLocaleString(void 0,{maximumFractionDigits:0})}</span>
                </div>
            `).join("")}`,L=t.current.getBoundingClientRect();r({content:T,x:N.clientX-L.left,y:N.clientY-L.top})}},C=N=>{u(E=>{const x=new Set(E);return x.has(N)?x.delete(N):x.add(N),x})};return h.jsxs("div",{className:"w-full h-full relative flex flex-col",ref:t,children:[h.jsxs("div",{className:"flex-grow",onMouseLeave:()=>r(null),children:[n&&h.jsx(EA,{...n}),h.jsxs("svg",{viewBox:`0 0 ${f} ${p}`,className:"w-full h-full",children:[Array.from({length:w}).map((N,E)=>{const x=p-m.bottom-E*(p-m.top-m.bottom)/(w-1),j=y/(w-1)*E;return h.jsxs("g",{className:"text-gray-400",children:[h.jsx("text",{x:m.left-8,y:x+4,textAnchor:"end",fontSize:"10",fill:"currentColor",children:j>=1e3?`${(j/1e3).toFixed(0)}k`:j.toFixed(0)}),h.jsx("line",{x1:m.left,y1:x,x2:f-m.right,y2:x,stroke:"currentColor",strokeOpacity:"0.2",strokeDasharray:"2 2"})]},E)}),e.map((N,E)=>h.jsx("text",{x:m.left+E*((f-m.left-m.right)/(e.length-1)),y:p-m.bottom+15,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:N.name},N.name)),o.map(N=>s.has(N)&&h.jsx("path",{d:_(N),fill:"none",stroke:c[N]||"#000",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:N.toLowerCase()==="target"?"6 6":"none",className:"transition-all duration-300"},N)),h.jsx("rect",{x:"0",y:"0",width:f,height:p,fill:"transparent",onMouseMove:S})]})]}),h.jsx("div",{className:"flex justify-center gap-6 text-sm mt-2",children:o.map(N=>h.jsxs("button",{onClick:()=>C(N),className:`flex items-center gap-2 transition-opacity ${!s.has(N)&&"opacity-40"}`,children:[h.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c[N]||"#000"}}),h.jsx("span",{children:N})]},N))})]})},ga=({title:e,current:t,previous:n,isPercentage:r})=>{const o=f=>r?`${f.toFixed(1)}%`:f>=1e3?f.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0}):f.toLocaleString("en-US",{maximumFractionDigits:0}),s=t-n,u=n!==0?s/Math.abs(n)*100:t>0?100:0,c=s>=0;return h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[h.jsx("p",{className:"text-sm font-medium text-zinc-500",children:e}),h.jsx("p",{className:"text-2xl font-bold text-zinc-900 mt-1",children:o(t)}),h.jsxs("div",{className:"text-xs text-zinc-400",children:["vs ",o(n)," last year"]}),h.jsxs("div",{className:`mt-2 flex items-center text-sm font-semibold ${c?"text-green-600":"text-red-600"}`,children:[c?"▲":"▼",h.jsx("span",{className:"ml-1",children:o(Math.abs(s))}),h.jsxs("span",{className:"ml-2",children:["(",Math.abs(u).toFixed(1),"%)"]})]})]})},TA=({percentage:e})=>{const t=Math.min(Math.max(e,0),100),n=()=>t<60?"from-orange-300 to-orange-400":t<80?"from-orange-400 to-orange-500":t<95?"from-orange-500 to-orange-600":"from-orange-600 to-orange-700",r=()=>t<60?"text-red-600":t<80?"text-yellow-600":t<95?"text-blue-600":"text-green-600";return h.jsxs("div",{className:"flex items-center gap-2 w-full",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-4 overflow-hidden",children:h.jsx("div",{className:`h-full bg-gradient-to-r ${n()} rounded-full transition-all duration-700 ease-out relative`,style:{width:`${Math.max(t,2)}%`},children:h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})})}),h.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white shadow-sm",style:{left:`${t}%`}})]}),h.jsxs("div",{className:`text-sm font-bold ${r()} min-w-[2.5rem] text-right`,children:[e.toFixed(1),"%"]})]})},He=({children:e,className:t="h-6 w-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e}),R6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),M6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-8h1m-1 4h1m-1 4h1M4 21V5a2 2 0 012-2h12a2 2 0 012 2v16"})}),O6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),L6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-14L4 7m8 4v10M4 7v10l8 4"})}),jA=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),kA=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),Cx=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),P6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),F6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),U6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),$6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M19 3v4M17 5h4M5 21v-4M3 19h4M19 21v-4M17 19h4M12 5v14M5 12h14"})}),V6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m-6 4h6m-6 4h6M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"})}),Di=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M5 17v4M3 19h4M12 3l1.09 2.22L15.31 6l-1.85 1.58L15 10l-2.6-1.8L9.8 10l1.05-2.42L9 6l2.22-.78L12 3zm0 14l-1.09-2.22L8.69 14l1.85-1.58L9 10l2.6 1.8L14.2 10l-1.05 2.42L15 14l-2.22.78L12 17z"})}),B6=()=>h.jsxs(He,{children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),z6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),q6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),K6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),CA=()=>h.jsx(He,{className:"h-5 w-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),sI=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M12 12a5 5 0 100-10 5 5 0 000 10z"})}),H6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),G6=()=>h.jsx(He,{className:"h-5 w-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),W6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Y6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Q6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 18c-1.11 0-2.08-.402-2.599-1M12 18v1m0-1v-.01m6-4a9 9 0 11-18 0 9 9 0 0118 0z"})}),X6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 12a2 2 0 01-2 2H7a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v6z"})}),J6=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),AA=()=>h.jsx(He,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.995 5.995 0 0112 12a5.995 5.995 0 016 3.803M15 21a6 6 0 00-9-5.197"})}),Z6=()=>h.jsxs(He,{children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 3.055A9 9 0 0121.945 13H11V3.055z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 21.945V11H3.055A9 9 0 0013 21.945z"})]}),aI=()=>h.jsx(He,{className:"h-5 w-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),uI=()=>h.jsx(He,{className:"h-5 w-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Jv=()=>h.jsx(He,{className:"h-5 w-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e5=()=>h.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),fu=({className:e})=>h.jsx("div",{className:`relative overflow-hidden bg-gray-100 ${e}`,children:h.jsx(e5,{})}),t5=()=>h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[h.jsx(fu,{className:"h-4 w-3/4 mb-3 rounded"}),h.jsx(fu,{className:"h-8 w-1/2 rounded"})]}),yl=()=>h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 h-full flex flex-col",children:[h.jsx(fu,{className:"h-6 w-1/2 mb-4 rounded"}),h.jsx("div",{className:"flex-grow",children:h.jsx(fu,{className:"h-full w-full rounded"})})]}),Wc=({rows:e=5})=>h.jsxs("div",{className:"space-y-2 p-4",children:[h.jsx(fu,{className:"h-8 rounded"}),[...Array(e)].map((t,n)=>h.jsx(fu,{className:"h-12 rounded"},n))]}),lI=({task:e,onUpdateStatus:t,isProcessing:n})=>{var c;const{t:r,locale:o}=Oe(),s=(c=e.createdAt)==null?void 0:c.toDate(),u={year:"numeric",month:"short",day:"numeric"};return h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border shadow-sm transition-all hover:shadow-md",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-zinc-800",children:e.title}),h.jsxs("p",{className:"text-xs text-zinc-500",children:[r("from"),": ",e.senderName," • ",s?s.toLocaleDateString(o,u):""]})]}),e.status==="pending"&&h.jsx("button",{onClick:()=>t(e.id,"completed"),disabled:n,className:"btn-secondary text-xs py-1 px-2",children:r("mark_complete")})]}),h.jsx("p",{className:"mt-2 text-sm text-zinc-700",children:e.message})]})},n5=({tasks:e,onUpdateStatus:t,isProcessing:n})=>{const{t:r}=Oe(),o=e.filter(u=>u.status==="pending"),s=e.filter(u=>u.status==="completed").slice(0,5);return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800 mb-4",children:r("my_tasks_and_alerts")}),e.length===0?h.jsx("p",{className:"text-center text-zinc-500 py-4",children:r("no_tasks")}):h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsxs("h4",{className:"font-semibold text-zinc-700 mb-2",children:[r("pending_tasks")," (",o.length,")"]}),h.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:o.length>0?o.map(u=>h.jsx(lI,{task:u,onUpdateStatus:t,isProcessing:n},u.id)):h.jsx("p",{className:"text-sm text-zinc-500",children:r("all_tasks_completed")})})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-zinc-700 mb-2",children:r("recently_completed")}),h.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:s.length>0?s.map(u=>h.jsx(lI,{task:u,onUpdateStatus:t,isProcessing:n},u.id)):h.jsx("p",{className:"text-sm text-zinc-500",children:r("no_tasks_completed")})})]})]})]})},r5=({kpiData:e,storeSummary:t,employeeSummary:n,productSummary:r,salesPerformance:o,allStores:s,allDateData:u,dateFilter:c,setDateFilter:f,areaStoreFilter:p,setAreaStoreFilter:m,setModalState:v,isRecalculating:y,dashboardPieFilter:w,setDashboardPieFilter:_,profile:S,tasks:C,onUpdateTaskStatus:N,isProcessing:E})=>{const{t:x}=Oe(),j=(S==null?void 0:S.role)==="employee",k=R.useMemo(()=>{if(!j||!(S!=null&&S.employeeId))return null;const M=Object.values(n).flat().find(ee=>ee.employeeId===S.employeeId);return M?{totalSales:M.totalSales,totalTransactions:M.totalTransactions,averageTransactionValue:M.atv,conversionRate:0,salesPerVisitor:0}:{totalSales:0,totalTransactions:0,averageTransactionValue:0,conversionRate:0,salesPerVisitor:0}},[j,S,n]),A=j?k:e,T=R.useMemo(()=>Object.values(n).flat().sort((M,ee)=>ee.achievement-M.achievement).slice(0,10),[n]),L=R.useMemo(()=>({top5:[...r].sort((ee,H)=>H.totalValue-ee.totalValue).slice(0,5)}),[r]),F=M=>{_(ee=>ee===M?null:M)},q=c.month==="all"?x("monthly_sales_performance"):x("daily_sales_performance"),{dailyAvgSales:z,monthlyAvgSales:O}=R.useMemo(()=>{if(c.year==="all")return{dailyAvgSales:0,monthlyAvgSales:0};const M=s.filter(Q=>(p.areaManager==="All"||Q.areaManager===p.areaManager)&&(p.store==="All"||Q.name===p.store)).map(Q=>Q.name),ee=new Set(M),H=u.filter(Q=>Q&&Q.date&&typeof Q.date.toDate=="function"&&Q.store&&ee.has(Q.store)),te=c.year,V=c.month==="all"?"all":c.month,P=c.day==="all"?"all":c.day,X=Array.from({length:12},()=>0);H.forEach(Q=>{const we=Q.date.toDate();we.getUTCFullYear()===te&&(X[we.getUTCMonth()]+=Number(Q.totalSales||0))});let B=0;if(V==="all")B=X.reduce((we,De)=>we+De,0)/12;else{const Q=V,we=X.slice(0,Q+1).reduce((De,xe)=>De+xe,0);B=Q+1>0?we/(Q+1):0}let ae=0;if(V==="all"){const Q=X.reduce((De,xe)=>De+xe,0),we=te%4===0&&te%100!==0||te%400===0;ae=Q/(we?366:365)}else{const Q=new Date(te,V+1,0).getDate(),we=Array.from({length:Q},()=>0);H.forEach(Ve=>{const re=Ve.date.toDate();if(re.getUTCFullYear()!==te||re.getUTCMonth()!==V)return;const Te=re.getUTCDate()-1;Te>=0&&Te<Q&&(we[Te]+=Number(Ve.totalSales||0))});const De=P==="all"?Q:Math.min(P,Q),xe=we.slice(0,De).reduce((Ve,re)=>Ve+re,0);ae=De>0?xe/De:0}return{dailyAvgSales:ae,monthlyAvgSales:B}},[u,s,p,c]);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[h.jsx($s,{dateFilter:c,setDateFilter:f,allData:u}),h.jsx(Nu,{stores:s,filters:p,setFilters:m,profile:S})]}),h.jsx(n5,{tasks:C,onUpdateStatus:N,isProcessing:E}),w&&h.jsxs("div",{className:"p-3 bg-orange-50 text-orange-800 rounded-lg flex justify-between items-center shadow-sm",children:[h.jsxs("span",{children:[x("filtered_by")," ",h.jsx("strong",{children:w})]}),h.jsx("button",{onClick:()=>_(null),className:"font-bold text-lg",children:"×"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:y||!A?[...Array(5)].map((M,ee)=>h.jsx(t5,{},ee)):h.jsxs(h.Fragment,{children:[h.jsx(pn,{title:x("total_sales"),value:A.totalSales,format:M=>M.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0}),icon:h.jsx(Q6,{}),iconBgColor:"bg-orange-100 text-orange-600",onClick:()=>!j&&v({type:"kpiBreakdown",data:{title:x("total_sales"),kpi:"totalSales",data:t}})}),h.jsx(pn,{title:x("total_transactions"),value:A.totalTransactions,format:M=>M.toLocaleString("en-US"),icon:h.jsx(X6,{}),iconBgColor:"bg-blue-100 text-blue-600"}),h.jsx(pn,{title:x("avg_transaction_value"),value:A.averageTransactionValue,format:M=>M.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0}),icon:h.jsx(J6,{}),iconBgColor:"bg-indigo-100 text-indigo-600"}),!j&&h.jsxs(h.Fragment,{children:[h.jsx(pn,{title:x("conversion_rate"),value:A.conversionRate,format:M=>`${M.toFixed(1)}%`,icon:h.jsx(Z6,{}),iconBgColor:"bg-amber-100 text-amber-600"}),h.jsx(pn,{title:x("sales_per_visitor"),value:A.salesPerVisitor,format:M=>M.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0}),icon:h.jsx(AA,{}),iconBgColor:"bg-pink-100 text-pink-600"})]})]})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 mt-6",children:[h.jsx("div",{className:"lg:col-span-3",children:y?h.jsx(yl,{}):h.jsx(Zn,{title:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:q}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsxs("span",{className:"px-3 py-1.5 rounded-full bg-green-50 text-green-700 border border-green-200 font-bold",children:["ADS: ",z.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})]}),h.jsxs("span",{className:"px-3 py-1.5 rounded-full bg-teal-50 text-teal-700 border border-teal-200 font-bold",children:["AMS: ",O.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})]})]})]}),children:h.jsx(IA,{data:o})})}),h.jsx("div",{className:"lg:col-span-2",children:y?h.jsx(yl,{}):h.jsx(Zn,{title:x("sales_by_store"),children:h.jsx(kx,{data:t.map(M=>({name:M.name,value:M.totalSales})),onSliceClick:F})})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[y?h.jsx(yl,{}):h.jsx(Zn,{title:x("top_stores_by_achievement"),children:h.jsx(gs,{data:[...t].sort((M,ee)=>ee.targetAchievement-M.targetAchievement).slice(0,10),dataKey:"targetAchievement",nameKey:"name",format:M=>`${M.toFixed(1)}%`})}),y?h.jsx(yl,{}):h.jsx(Zn,{title:x("top_employees_by_achievement"),children:h.jsx(gs,{data:T,dataKey:"achievement",nameKey:"name",format:M=>`${M.toFixed(1)}%`})})]}),h.jsx("div",{className:"grid grid-cols-1 mt-6",children:y?h.jsx(yl,{}):h.jsx(Zn,{title:x("top_products_by_sales_value"),children:h.jsx(gs,{data:L.top5,dataKey:"totalValue",nameKey:"name",format:M=>M.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})})})]})},i5=(e,t=10,n)=>{const[r,o]=R.useState(1),[s,u]=R.useState(n?{key:n,direction:"desc"}:null),c=R.useMemo(()=>{let v=[...e];return s!==null&&v.sort((y,w)=>{const _=y[s.key],S=w[s.key];return _==null?1:S==null?-1:_<S?s.direction==="asc"?-1:1:_>S?s.direction==="asc"?1:-1:0}),v},[e,s]),f=R.useMemo(()=>{const v=(r-1)*t;return c.slice(v,v+t)},[c,r,t]),p=Math.ceil(e.length/t);return{paginatedData:f,sortConfig:s,requestSort:v=>{let y="asc";s&&s.key===v&&s.direction==="asc"&&(y="desc"),u({key:v,direction:y}),o(1)},currentPage:r,totalPages:p,setCurrentPage:o}},o5=({direction:e})=>e?h.jsx("span",{children:e==="asc"?"▲":"▼"}):h.jsx("span",{className:"text-gray-300",children:"↕"}),Vs=({columns:e,data:t,initialSortKey:n,rowClassName:r,onRowClick:o,renderExpandedRow:s})=>{const{t:u}=Oe(),{paginatedData:c,sortConfig:f,requestSort:p,currentPage:m,totalPages:v,setCurrentPage:y}=i5(t,10,n);return h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-neutral-200 overflow-hidden",children:[h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full",children:[h.jsx("thead",{children:h.jsx("tr",{className:"bg-gradient-to-r from-neutral-50 to-neutral-100 border-b border-neutral-200",children:e.map(w=>h.jsx("th",{className:"th cursor-pointer group transition-colors duration-200 hover:bg-neutral-200/50",onClick:()=>w.sortable&&p(w.key),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"group-hover:text-primary-600 transition-colors duration-200",children:w.label}),w.sortable&&h.jsx("div",{className:"group-hover:text-primary-600 transition-colors duration-200",children:h.jsx(o5,{direction:(f==null?void 0:f.key)===w.key?f.direction:void 0})})]})},String(w.key)))})}),h.jsx("tbody",{className:"divide-y divide-neutral-100",children:c.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:e.length,className:"text-center py-10 text-gray-500",children:u("no_data_to_display")})}):c.map(w=>{const _=s?s(w):null;return h.jsxs($l.Fragment,{children:[h.jsx("tr",{onClick:()=>o&&o(w),className:`transition-all duration-200 ${r?r(w):""} ${o?"cursor-pointer hover:bg-primary-50 hover:shadow-sm":r?"hover:brightness-95":"hover:bg-neutral-50"}`,children:e.map(S=>h.jsx("td",{className:"td",children:S.render?S.render(w[S.key],w):w[S.key]},`${w.id}-${String(S.key)}`))}),_&&h.jsx("tr",{children:h.jsx("td",{colSpan:e.length,className:"p-0 bg-gray-50 border-t-2 border-orange-200",children:_})})]},w.id)})})]})}),v>1&&h.jsxs("div",{className:"px-6 py-4 bg-neutral-50 border-t border-neutral-200 flex justify-between items-center",children:[h.jsx("button",{onClick:()=>y(w=>Math.max(w-1,1)),disabled:m===1,className:"btn-secondary text-sm px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u("previous")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm text-neutral-600",children:u("page_of",{current:m,total:v})}),h.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,v)},(w,_)=>{const S=m-2+_;return S<1||S>v?null:h.jsx("button",{onClick:()=>y(S),className:`w-8 h-8 rounded-lg text-sm font-medium transition-all duration-200 ${m===S?"bg-primary-500 text-white shadow-md":"text-neutral-600 hover:bg-neutral-200 hover:text-neutral-900"}`,children:S},S)})})]}),h.jsx("button",{onClick:()=>y(w=>Math.min(w+1,v)),disabled:m===v,className:"btn-secondary text-sm px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u("next")})]})]})},DA=R.createContext({storeMap:{},employeeMap:{},loading:!0}),RA=()=>R.useContext(DA),s5=(e,t)=>String((e==null?void 0:e.name)??(e==null?void 0:e.store_name)??(e==null?void 0:e.title)??(e==null?void 0:e.store)??(e==null?void 0:e.storeName)??t),a5=(e,t)=>String((e==null?void 0:e.name)??(e==null?void 0:e.employee_name)??(e==null?void 0:e.fullName)??(e==null?void 0:e.displayName)??(e==null?void 0:e.username)??t),u5=({children:e})=>{const[t,n]=R.useState({}),[r,o]=R.useState({}),[s,u]=R.useState(!0),[c,f]=R.useState();R.useEffect(()=>{let m=!1;u(!0);const v=Se.collection("stores").onSnapshot(w=>{const _={};w.docs.map(S=>{const C=S.data(),N=String((C==null?void 0:C.store_id)??(C==null?void 0:C.id)??S.id).trim();return _[N]=s5(C,N),null}),m||n(_),m||u(!1)}),y=Se.collection("employees").onSnapshot(w=>{const _={};w.docs.map(S=>{const C=S.data(),N=String((C==null?void 0:C.employee_id)??(C==null?void 0:C.id)??S.id).trim();return _[N]=a5(C,N),null}),m||o(_),m||u(!1)});return()=>{m=!0,v(),y()}},[]);const p=R.useMemo(()=>({storeMap:t,employeeMap:r,loading:s,error:c}),[t,r,s,c]);return h.jsx(DA.Provider,{value:p,children:e})},l5=({id:e,fallback:t})=>{const{storeMap:n,loading:r}=RA(),o=e!=null?String(e):"",s=o&&n[o]||t;return h.jsx("span",{children:s||(r?"…":"—")})},MA=({id:e,fallback:t})=>{const{employeeMap:n,loading:r}=RA(),o=e!=null?String(e):"",s=o&&n[o]||t;return h.jsx("span",{children:s||(r?"…":"—")})},c5=({storeSummary:e,allStores:t,allDateData:n,dateFilter:r,setDateFilter:o,areaStoreFilter:s,setAreaStoreFilter:u,setModalState:c,onEdit:f,onDelete:p,onSelectStore:m,isRecalculating:v,profile:y})=>{const{t:w}=Oe(),_=(y==null?void 0:y.role)==="admin",S=(y==null?void 0:y.role)==="admin",C=(y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="general_manager",N=["admin","general_manager","area_manager","store_manager"].includes((y==null?void 0:y.role)||""),E=[{key:"name",label:w("store"),sortable:!0,render:(k,A)=>h.jsx("span",{onClick:()=>m(A),className:"cursor-pointer font-medium text-blue-600 hover:underline",children:h.jsx(l5,{id:A.store_id??A.id??A.name,fallback:A.name})})},{key:"totalSales",label:w("total_sales"),sortable:!0,render:k=>k.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"effectiveTarget",label:w("sales_target"),sortable:!0,render:k=>k.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"targetAchievement",label:w("achievement"),sortable:!0,render:(k,A)=>h.jsx(TA,{percentage:A.targetAchievement??0})}];(C||S)&&E.push({key:"actions",label:w("actions"),render:(k,A)=>h.jsxs("div",{className:"flex space-x-2",children:[C&&h.jsx("button",{onClick:T=>{T.stopPropagation(),f(A)},className:"text-blue-600 hover:text-blue-800 p-1",title:w("edit_title"),children:h.jsx(kA,{})}),S&&h.jsx("button",{onClick:T=>{T.stopPropagation(),p(A.id,A.name)},className:"text-red-600 hover:text-red-800 p-1",title:w("delete_title"),children:h.jsx(Cx,{})})]})});const x=R.useMemo(()=>{if(!Array.isArray(e)||e.length===0)return{};const k={};for(const A of e){const T=A.areaManager||w("unassigned");k[T]||(k[T]=[]),k[T].push(A)}return k},[e,w]),j=k=>k.targetAchievement>=100?"bg-green-50":k.targetAchievement<80?"bg-red-50":"";return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[h.jsx($s,{dateFilter:r,setDateFilter:o,allData:n}),h.jsx(Nu,{stores:t,filters:s,setFilters:u,profile:y})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800",children:w("stores_overview")}),h.jsxs("div",{className:"flex items-center gap-2",children:[N&&h.jsxs("button",{onClick:()=>c({type:"visitors"}),className:"btn-secondary flex items-center gap-2",children:[h.jsx(AA,{})," ",w("add_visitors")]}),_&&h.jsxs("button",{onClick:()=>c({type:"store"}),className:"btn-primary flex items-center gap-2",children:[h.jsx(jA,{})," ",w("add_store")]})]})]}),h.jsx("div",{className:"space-y-6",children:v?h.jsx(Wc,{}):Object.keys(x).sort((k,A)=>k.localeCompare(A)).map(k=>{const A=x[k];return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[h.jsx("h4",{className:"text-lg font-bold text-zinc-700 mb-4",children:k}),h.jsx(Vs,{columns:E,data:A,initialSortKey:"totalSales",rowClassName:j})]},k)})})]})},h5=({employee:e,allMetrics:t,salesTransactions:n,kingDuvetSales:r,storeSummary:o,dateFilter:s,setModalState:u,allEmployeeSummaries:c})=>{const{t:f}=Oe(),[p,m]=R.useState(null),v=R.useCallback(S=>S>=199&&S<=399?"Low Value (199-399)":S>=495&&S<=695?"Medium Value (495-695)":S>=795&&S<=999?"High Value (795-999)":null,[]),y=R.useMemo(()=>{var ve,Fe;const S=oe=>{const ye="date"in oe?oe.date:oe["Bill Dt."];if(!ye||typeof ye.toDate!="function")return!1;const je=ye.toDate(),sn=s.year==="all"||je.getUTCFullYear()===s.year,an=s.month==="all"||je.getUTCMonth()===s.month,Oi=s.day==="all"||je.getUTCDate()===s.day;return sn&&an&&Oi},C=t.filter(S),N=n.filter(S),E=r.filter(S),x=C.filter(oe=>oe.employee===e.name),j=x.reduce((oe,ye)=>oe+(ye.totalSales||0),0),k=[...N,...E].filter(oe=>oe["SalesMan Name"]===e.name),A=new Set;k.forEach(oe=>{const ye=oe.bill_no||oe.Bill_No||oe.Invoice||oe["Invoice No"]||oe.Transaction_ID||"";ye&&A.add(String(ye))});const T=A.size||x.reduce((oe,ye)=>oe+(ye.transactionCount||0),0),L=T>0?j/T:0,F=ms(e.targets,s),q=F>0?j/F*100:0,z=k.reduce((oe,ye)=>oe+(ye["Sold Qty"]||0),0),O=T>0?z/T:0,M=o.find(oe=>oe.name===e.store),ee=M!=null&&M.totalSales&&M.totalSales>0?j/M.totalSales*100:0,H=(M==null?void 0:M.atv)||0,te=[...N,...E].filter(oe=>oe["Outlet Name"]===e.store).reduce((oe,ye)=>oe+(ye["Sold Qty"]||0),0),V=new Set;[...N,...E].filter(oe=>oe["Outlet Name"]===e.store).forEach(oe=>{const ye=oe.bill_no||oe.Bill_No||oe.Invoice||oe["Invoice No"]||oe.Transaction_ID||"";ye&&V.add(String(ye))});const P=V.size||(M==null?void 0:M.transactionCount)||0,X=P>0?te/P:0,B=k.reduce((oe,ye)=>{const je={name:ye["Item Name"],alias:ye["Item Alias"]},sn=qd(je);oe[sn]||(oe[sn]={totalSales:0,products:{}});const an=(ye["Sold Qty"]||0)*(ye["Item Rate"]||0);return oe[sn].totalSales+=an,oe[sn].products[ye["Item Name"]]=(oe[sn].products[ye["Item Name"]]||0)+(ye["Sold Qty"]||0),oe},{}),ae=Object.entries(B).map(([oe,ye])=>({name:oe,value:ye.totalSales})),we=E.filter(oe=>oe["SalesMan Name"]===e.name).reduce((oe,ye)=>{const je=v(ye["Item Rate"]);return je&&(oe[je]=(oe[je]||0)+(ye["Sold Qty"]||0)),oe},{"Low Value (199-399)":0,"Medium Value (495-695)":0,"High Value (795-999)":0}),De=Object.values(we).reduce((oe,ye)=>oe+ye,0),xe=[{name:"Low Value (199-399)",count:we["Low Value (199-399)"]},{name:"Medium Value (495-695)",count:we["Medium Value (495-695)"]},{name:"High Value (795-999)",count:we["High Value (795-999)"]}],Ve=new Date,re=Ve.getFullYear(),Te=Ve.getMonth(),Ze=ms(e.targets,{year:re,month:Te,day:"all"}),ft=t.filter(oe=>{if(oe.employee!==e.name||!oe.date||typeof oe.date.toDate!="function")return!1;const ye=oe.date.toDate();return ye.getFullYear()===re&&ye.getMonth()===Te}).reduce((oe,ye)=>oe+(ye.totalSales||0),0),Ce=Ze-ft,ot=new Date(re,Te+1,0).getDate(),Je=Math.max(0,ot-Ve.getDate()+1),st=Je>0?Math.max(0,Ce)/Je:0,dt={salesMTD:ft,monthlyTarget:Ze,remainingTarget:Ce,remainingDays:Je,requiredDailyAverage:st},Dn=((Fe=(ve=e.duvetTargets)==null?void 0:ve[re])==null?void 0:Fe[String(Te+1)])||0,zr=r.filter(oe=>{if(oe["SalesMan Name"]!==e.name||!oe["Bill Dt."]||typeof oe["Bill Dt."].toDate!="function")return!1;const ye=oe["Bill Dt."].toDate();return ye.getFullYear()===re&&ye.getMonth()===Te}).reduce((oe,ye)=>oe+(ye["Sold Qty"]||0),0),Sr=Dn>0?zr/Dn*100:0;return{totalSales:j,atv:L,achievement:q,contributionPercentage:ee,avgItemsPerBill:O,storeAvgAtv:H,storeAvgUpt:X,categoryData:ae,productsByCategory:B,duvetCategories:xe,totalDuvets:De,dynamicTarget:dt,duvetTargetData:{target:Dn,sold:zr,achievement:Sr}}},[e,t,n,r,o,s,v]),w=R.useMemo(()=>{var S;return p?Object.entries(((S=y.productsByCategory[p])==null?void 0:S.products)||{}).sort(([,C],[,N])=>Number(N)-Number(C)).slice(0,5).map(([C,N])=>({name:C,soldQty:N})):[]},[p,y.productsByCategory]),_=()=>{u({type:"aiComparison",data:{item:e,allItems:c,type:"employee"}})};return h.jsx("div",{className:"w-full",children:h.jsxs("div",{className:"bg-gray-50 p-4 m-2 border-l-4 border-orange-500 rounded-r-lg animate-fade-in",children:[h.jsx("div",{className:"flex justify-end mb-4",children:h.jsxs("button",{onClick:_,className:"btn-secondary text-sm flex items-center gap-1 py-1 px-2",children:[h.jsx(Di,{})," ",f("compare_with_ai")]})}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 my-4",children:[h.jsx(pn,{title:f("total_sales"),value:y.totalSales,format:S=>S.toLocaleString("en-US",{style:"currency",currency:"SAR"})}),h.jsx(pn,{title:f("avg_transaction_value"),value:y.atv,format:S=>S.toLocaleString("en-US",{style:"currency",currency:"SAR"}),comparisonValue:y.storeAvgAtv,comparisonLabel:f("store_avg")}),h.jsx(pn,{title:f("items_per_bill"),value:y.avgItemsPerBill,format:S=>S.toFixed(2),comparisonValue:y.storeAvgUpt,comparisonLabel:f("store_avg")}),h.jsx(pn,{title:f("achievement"),value:y.achievement,format:S=>`${S.toFixed(1)}%`}),h.jsx(pn,{title:f("contribution_to_store_sales"),value:y.contributionPercentage,format:S=>`${S.toFixed(1)}%`})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsx(Zn,{title:p?`${f("top_products_in")} ${p}`:f("sales_by_product_category"),children:p?h.jsxs("div",{children:[h.jsx("button",{onClick:()=>m(null),className:"btn-secondary text-sm mb-4",children:f("back_to_categories")}),h.jsx(gs,{data:w,dataKey:"soldQty",nameKey:"name",format:S=>`${S} units`})]}):h.jsx(kx,{data:y.categoryData,onSliceClick:S=>m(C=>C===S?null:S)})}),h.jsx(Zn,{title:"Duvet Sales Analysis by Value",children:h.jsxs("div",{className:"space-y-2 p-1 h-full flex flex-col justify-center",children:[y.totalDuvets>0?y.duvetCategories.map(S=>{const C=y.totalDuvets>0?S.count/y.totalDuvets*100:0;return h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between text-xs font-medium text-zinc-600 mb-1",children:[h.jsx("span",{children:S.name}),h.jsxs("span",{children:[S.count," units (",C.toFixed(1),"%)"]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:h.jsx("div",{className:"bg-sky-500 h-3 rounded-full",style:{width:`${C}%`}})})]},S.name)}):h.jsx("p",{className:"text-center text-zinc-500",children:"No duvet sales data for this period."}),h.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-200",children:[h.jsxs("div",{className:"flex justify-between items-center text-xs",children:[h.jsx("span",{className:"font-semibold text-zinc-700",children:"Monthly Duvet Target:"}),h.jsx("span",{className:"font-bold",children:y.duvetTargetData.target})]}),h.jsxs("div",{className:"flex justify-between items-center text-xs mt-1",children:[h.jsx("span",{className:"font-semibold text-zinc-700",children:"Sold (MTD):"}),h.jsx("span",{className:"font-bold",children:y.duvetTargetData.sold})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[h.jsx("span",{className:"font-bold text-green-700",children:"Achievement (MTD):"}),h.jsxs("span",{className:"font-extrabold text-green-600",children:[y.duvetTargetData.achievement.toFixed(1),"%"]})]})]})]})}),h.jsx(Zn,{title:f("dynamic_daily_target"),children:h.jsx("div",{className:"h-full flex flex-col justify-center",children:h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{children:[f("sales_this_month")," (MTD)"]}),h.jsx("span",{className:"font-semibold",children:y.dynamicTarget.salesMTD.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:f("monthly_target")}),h.jsx("span",{className:"font-semibold",children:y.dynamicTarget.monthlyTarget.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]}),h.jsxs("div",{className:"flex justify-between border-t pt-2 mt-2",children:[h.jsx("span",{className:"font-bold",children:f("remaining_target")}),h.jsx("span",{className:"font-bold text-red-600",children:y.dynamicTarget.remainingTarget>0?y.dynamicTarget.remainingTarget.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0}):f("achieved")})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:f("remaining_days")}),h.jsx("span",{className:"font-semibold",children:y.dynamicTarget.remainingDays})]}),h.jsxs("div",{className:"flex justify-between items-center bg-orange-50 p-2 rounded-lg mt-2",children:[h.jsx("span",{className:"font-bold text-orange-700",children:f("required_daily_avg")}),h.jsx("span",{className:"font-bold text-orange-700 text-md",children:y.dynamicTarget.requiredDailyAverage.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]})]})})})]})]})})},f5=({employeeSummary:e,allStores:t,allDateData:n,dateFilter:r,setDateFilter:o,areaStoreFilter:s,setAreaStoreFilter:u,setModalState:c,onEdit:f,onDelete:p,isRecalculating:m,dailyMetrics:v,salesTransactions:y,kingDuvetSales:w,storeSummary:_,allEmployees:S,profile:C})=>{const{t:N}=Oe(),[E,x]=R.useState(""),[j,k]=R.useState(null),A=(C==null?void 0:C.role)==="admin",T=(C==null?void 0:C.role)==="admin",L=(C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="area_manager",F=(C==null?void 0:C.role)!=="employee",q=R.useMemo(()=>{const H=Object.values(e);return Array.isArray(H)?H.flat():[]},[e]),z=R.useMemo(()=>{const H=S.find(V=>(C==null?void 0:C.employeeId)&&V.employeeId===C.employeeId||V.userEmail&&(C==null?void 0:C.email)&&V.userEmail===C.email),te=(C==null?void 0:C.store)||(H==null?void 0:H.currentStore)||"";return Object.entries(e).reduce((V,[P,X])=>{if((C==null?void 0:C.role)==="store_manager"&&P!==te)return V;const B=Array.isArray(X)?X:[];if(!E)return V[P]=B,V;const ae=B.filter(Q=>(Q.name||"").toLowerCase().includes(E.toLowerCase()));return ae.length>0&&(V[P]=ae),V},{})},[e,E]),O=H=>H.achievement>=100?"bg-green-50":H.achievement<80?"bg-red-50":"",M=H=>{k(te=>te===H.id?null:H.id)},ee=[{key:"name",label:N("employee"),sortable:!0,render:(H,te)=>h.jsx("span",{className:"font-medium text-blue-600",children:h.jsx(MA,{id:te.employeeId??te.id??te.name,fallback:te.name})})},{key:"totalSales",label:N("total_sales"),sortable:!0,render:H=>H.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"atv",label:N("avg_transaction_value"),sortable:!0,render:H=>H.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"effectiveTarget",label:N("sales_target"),sortable:!0,render:H=>H.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"achievement",label:N("achievement"),sortable:!0,render:(H,te)=>h.jsx(TA,{percentage:te.achievement??0})},{key:"actions",label:N("actions"),render:(H,te)=>h.jsxs("div",{className:"flex space-x-1",children:[h.jsx("button",{onClick:V=>{V.stopPropagation(),c({type:"aiCoaching",data:te})},className:"text-orange-500 p-1",title:N("ai_coaching_title"),children:h.jsx(Di,{})}),F&&h.jsx("button",{onClick:V=>{V.stopPropagation(),c({type:"task",data:te})},className:"text-gray-600 p-1",title:N("send_task_title"),children:h.jsx(Y6,{})}),L&&h.jsx("button",{onClick:V=>{V.stopPropagation(),c({type:"dailyMetric",data:{mode:"employee",employee:te.name,store:te.store}})},className:"text-green-600 p-1",title:N("add_kpi_title"),children:h.jsx(P6,{})}),L&&h.jsx("button",{onClick:V=>{V.stopPropagation(),f(te)},className:"text-blue-600 p-1",title:N("edit_title"),children:h.jsx(kA,{})}),T&&h.jsx("button",{onClick:V=>{V.stopPropagation(),p(te.id,te.name)},className:"text-red-600 p-1",title:N("delete_title"),children:h.jsx(Cx,{})})]})}];return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[h.jsx($s,{dateFilter:r,setDateFilter:o,allData:n}),h.jsx(Nu,{stores:t,filters:s,setFilters:u,profile:C})]}),h.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-sm border border-gray-200 flex justify-between items-center",children:[h.jsx("input",{type:"text",placeholder:N("search_employee_placeholder"),value:E,onChange:H=>x(H.target.value),className:"input w-full max-w-sm"}),A&&h.jsxs("button",{onClick:()=>c({type:"employee"}),className:"btn-primary flex items-center gap-2",children:[h.jsx(jA,{})," ",N("add_employee")]})]}),h.jsx("div",{className:"space-y-6",children:m?h.jsx(Wc,{}):Object.keys(z).length===0?h.jsx("div",{className:"text-center p-10 bg-white rounded-lg shadow",children:h.jsx("p",{children:N("no_employee_data")})}):Object.entries(z).sort(([H],[te])=>H.localeCompare(te)).map(([H,te])=>h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800 mb-4",children:H}),h.jsx(Vs,{columns:ee,data:te,initialSortKey:"totalSales",rowClassName:O,onRowClick:M,renderExpandedRow:V=>j===V.id&&h.jsx("div",{className:"p-4",children:h.jsx(h5,{employee:V,allMetrics:v,salesTransactions:y,kingDuvetSales:w,storeSummary:_,dateFilter:r,setModalState:c,allEmployeeSummaries:q})})})]},H))})]})},d5=({productSummary:e,allStores:t,allDateData:n,dateFilter:r,setDateFilter:o,areaStoreFilter:s,setAreaStoreFilter:u,setModalState:c,isRecalculating:f,profile:p})=>{var L,F,q,z;const[m,v]=R.useState({name:"",alias:"",category:"All",priceRange:"All"}),y=R.useMemo(()=>e.filter(O=>{var P,X;const M=(P=O.name)==null?void 0:P.toLowerCase().includes(m.name.toLowerCase()),ee=(X=O.alias)==null?void 0:X.toLowerCase().includes(m.alias.toLowerCase()),H=m.category==="All"||qd(O)===m.category,te=O.price||0,V=m.priceRange==="All"||m.priceRange==="<150"&&te<150||m.priceRange==="150-500"&&te>=150&&te<=500||m.priceRange===">500"&&te>500;return M&&ee&&H&&V}),[e,m]),w=R.useMemo(()=>{let O=0,M=0;for(const ee of y)O+=ee.soldQty||0,M+=ee.totalValue||0;return{qty:O,value:M}},[y]),_=R.useMemo(()=>{const O=r.year==="all"?new Date().getUTCFullYear():r.year,M=r.month==="all"?new Date().getUTCMonth():r.month,ee=r.day==="all"?"all":r.day,H=t.filter(ve=>(s.areaManager==="All"||ve.areaManager===s.areaManager)&&(s.store==="All"||ve.name===s.store)).map(ve=>ve.name),te=new Set(H),V=ve=>ve&&ve["Bill Dt."]&&typeof ve["Bill Dt."].toDate=="function"&&ve["Outlet Name"],P=n.filter(V).filter(ve=>te.has(ve["Outlet Name"])),X=new Date(O,M+1,0).getDate(),B=ee==="all"?X:Math.min(ee,X),ae=P.filter(ve=>{const Fe=ve["Bill Dt."].toDate();return Fe.getUTCFullYear()===O&&Fe.getUTCMonth()===M&&Fe.getUTCDate()<=B}),Q=new Date(Date.UTC(O,M-1,1)),we=Q.getUTCFullYear(),De=Q.getUTCMonth(),xe=P.filter(ve=>{const Fe=ve["Bill Dt."].toDate();return Fe.getUTCFullYear()===we&&Fe.getUTCMonth()===De}),Ve=ve=>{const Fe=new Map;for(const oe of ve){const ye=String(oe["Item Alias"]||oe.alias||oe["Item Name"]||""),je=String(oe["Item Name"]||ye),sn=Number(oe["Sold Qty"]||0),an=Number(oe["Item Rate"]||0),Oi=sn*an,_r=Fe.get(ye)||{name:je,qty:0,value:0,rate:an};_r.qty+=sn,_r.value+=Oi,_r.rate=an||_r.rate,Fe.set(ye,_r)}return Fe},re=Ve(ae),Te=Ve(xe);let Ze=0,ft=0;for(const{qty:ve,value:Fe}of re.values())Ze+=ve,ft+=Fe;let Ce=null,ot=null;re.forEach((ve,Fe)=>{var je;const oe=((je=Te.get(Fe))==null?void 0:je.value)||0,ye=oe===0?ve.value>0?100:0:(ve.value-oe)/oe*100;(!Ce||ve.value>Ce.value)&&(Ce={name:ve.name,value:ve.value,growth:ye}),ve.value>0&&(!ot||ve.value<ot.value)&&(ot={name:ve.name,value:ve.value,growth:ye})});const Je=B>0?ft/B:0,st=Array.from(Te.values()).reduce((ve,Fe)=>ve+Fe.value,0),dt=st===0?ft>0?100:0:(ft-st)/st*100,Dn=Array.from(re.values()).sort((ve,Fe)=>Fe.qty-ve.qty).slice(0,10).map(ve=>({name:ve.name,value:ve.qty})),zr=Array.from({length:12},(ve,Fe)=>({name:new Date(0,Fe).toLocaleString("en-US",{month:"short"}),value:0}));P.forEach(ve=>{const Fe=ve["Bill Dt."].toDate();if(Fe.getUTCFullYear()!==O)return;const oe=Fe.getUTCMonth();zr[oe].value+=Number(ve["Sold Qty"]||0)*Number(ve["Item Rate"]||0)});const Sr=new Map;y.forEach(ve=>{const Fe=qd(ve)||"Other";Sr.set(Fe,(Sr.get(Fe)||0)+(ve.totalValue||0))});const Bs=Array.from(Sr.entries()).map(([ve,Fe])=>({name:ve,value:Fe}));return{totalQty:Ze,totalValue:ft,best:Ce,weak:ot,avgDaily:Je,monthlyGrowth:dt,charts:{top10:Dn,monthlyTrend:zr,categoryShare:Bs}}},[n,t,s,r,y]),S=R.useMemo(()=>{const O=r.year==="all"?new Date().getUTCFullYear():r.year,M=r.month==="all"?new Date().getUTCMonth():r.month,ee=t.filter(re=>(s.areaManager==="All"||re.areaManager===s.areaManager)&&(s.store==="All"||re.name===s.store)).map(re=>re.name),H=new Set(ee),te=n.filter(re=>re&&re["Bill Dt."]&&typeof re["Bill Dt."].toDate=="function"&&re["Outlet Name"]&&H.has(re["Outlet Name"])),V=new Map;for(const re of te){const Te=re["Bill Dt."].toDate();if(Te.getUTCFullYear()!==O||r.month!=="all"&&Te.getUTCMonth()!==M)continue;const Ze=(re.bill_no||re.Bill_No||re.Invoice||re.Transaction_ID||re["Bill Number"]||re["Invoice No"]||"").toString(),ft=Ze?String(Ze):`${Te.getUTCFullYear()}-${Te.getUTCMonth()}-${Te.getUTCDate()}|${re["Outlet Name"]}|${re["SalesMan Name"]||""}`;Ze||console.warn("⚠ Missing Bill_No, using fallback mode");const Ce=String(re["Item Name"]||re["Item Alias"]||"");if(!Ce)continue;const ot=V.get(ft)||[];ot.push({name:Ce}),V.set(ft,ot)}const P=new Map;V.forEach(re=>{const Te=Array.from(new Set(re.map(Ze=>Ze.name)));for(let Ze=0;Ze<Te.length;Ze++)for(let ft=Ze+1;ft<Te.length;ft++){const Ce=Te[Ze],ot=Te[ft],Je=`${Ce}__::__${ot}`,st=P.get(Je)||{a:Ce,b:ot,count:0};st.count+=1,P.set(Je,st)}});const X=Array.from(P.values()).sort((re,Te)=>Te.count-re.count).slice(0,20),B=Array.from(new Set(X.flatMap(re=>[re.a,re.b]))).slice(0,12),ae=new Map(B.map((re,Te)=>[re,Te])),Q=B.length,we=Array.from({length:Q},()=>Array.from({length:Q},()=>0));X.forEach(re=>{const Te=ae.get(re.a),Ze=ae.get(re.b);Te===void 0||Ze===void 0||(we[Te][Ze]+=re.count,we[Ze][Te]+=re.count)});const De=B.map(re=>({id:re,name:re,value:1})),xe=new Set(B),Ve=X.filter(re=>xe.has(re.a)&&xe.has(re.b)).map(re=>({source:re.a,target:re.b,value:re.count}));return{topPairs:X,uniqueItems:B,matrix:we,nodes:De,links:Ve}},[n,t,s,r]),[C,N]=R.useState(!1),[E,x]=R.useState(!1),[j,k]=R.useState(null),A=async()=>{try{x(!0);const O={contents:[{role:"user",parts:[{text:`You are a retail analyst. Compare current month vs previous month performance for products.
Current Month (upto selected day):
${JSON.stringify(_,null,2)}

Provide 3-5 concise bullet insights like:
- Product X increased by +24% compared to last month.
- Product Y dropped by -15% — check stock or display.
- Product Z often sells with Product W.
Use short sentences. Output in Arabic.`}]}],systemInstruction:"Keep answers concise and organized as bullets. No long paragraphs."},M=await li(O,"gemini-2.5-flash");k(M)}catch(O){k(`تعذر توليد التحليلات الآن: ${(O==null?void 0:O.message)||O}`)}finally{x(!1)}},T=[{key:"name",label:"Product Name",sortable:!0,render:O=>O??""},{key:"alias",label:"Code",sortable:!0,render:O=>O??""},{key:"soldQty",label:"Sold Qty",sortable:!0,render:O=>O.toLocaleString("en-US")},{key:"price",label:"Price",sortable:!0,render:O=>O.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"totalValue",label:"Total Sales Value",sortable:!0,render:O=>O.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"actions",label:"Actions",render:(O,M)=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>c({type:"salesPitch",data:M}),className:"text-orange-500 hover:text-orange-700",title:"Get AI Sales Pitch",children:h.jsx(Di,{})}),h.jsx("button",{onClick:()=>c({type:"productDetails",data:{product:M,allData:n,stores:t}}),className:"text-zinc-600 hover:text-zinc-900",title:"Product Details",children:"⚙"})]})}];return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[h.jsx($s,{dateFilter:r,setDateFilter:o,allData:n}),h.jsx(Nu,{stores:t,filters:s,setFilters:u,profile:p})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[h.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Total Products Sold (MTD)"}),h.jsx("div",{className:"text-2xl font-bold",children:_.totalQty.toLocaleString("en-US")})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[h.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Total Sales Value (MTD)"}),h.jsx("div",{className:"text-2xl font-bold",children:_.totalValue.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[h.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Best Performing Product"}),h.jsx("div",{className:"text-sm font-semibold truncate",title:((L=_.best)==null?void 0:L.name)||"",children:((F=_.best)==null?void 0:F.name)||"-"}),h.jsx("div",{className:"text-green-600 text-xs",children:_.best?`${_.best.growth.toFixed(1)}%`:"-"})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[h.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Weakest Performing Product"}),h.jsx("div",{className:"text-sm font-semibold truncate",title:((q=_.weak)==null?void 0:q.name)||"",children:((z=_.weak)==null?void 0:z.name)||"-"}),h.jsx("div",{className:"text-red-600 text-xs",children:_.weak?`${_.weak.growth.toFixed(1)}%`:"-"})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[h.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Average Daily Sales"}),h.jsx("div",{className:"text-2xl font-bold",children:_.avgDaily.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[h.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Monthly Growth Rate"}),h.jsx("div",{className:`text-2xl font-bold ${_.monthlyGrowth>=0?"text-green-600":"text-red-600"}`,children:`${_.monthlyGrowth.toFixed(1)}%`})]})]}),h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[h.jsx("div",{className:"xl:col-span-1",children:h.jsx(Zn,{title:"Top 10 Selling Products",children:h.jsx(gs,{data:_.charts.top10,dataKey:"value",nameKey:"name",format:O=>O.toLocaleString("en-US")})})}),h.jsx("div",{className:"xl:col-span-1",children:h.jsx(Zn,{title:"Category Share",children:h.jsx(kx,{data:_.charts.categoryShare})})}),h.jsx("div",{className:"xl:col-span-1",children:h.jsx(Zn,{title:"Monthly Sales Trend",children:h.jsx(IA,{data:_.charts.monthlyTrend.map(O=>({name:O.name,Sales:O.value,Target:0}))})})})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800 mb-4",children:"Products Overview"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[h.jsx("input",{type:"text",placeholder:"Filter by Product Name...",value:m.name,onChange:O=>v(M=>({...M,name:O.target.value})),className:"input"}),h.jsx("input",{type:"text",placeholder:"Filter by Code...",value:m.alias,onChange:O=>v(M=>({...M,alias:O.target.value})),className:"input"}),h.jsxs("select",{value:m.category,onChange:O=>v(M=>({...M,category:O.target.value})),className:"input",children:[h.jsx("option",{value:"All",children:"All Categories"}),h.jsx("option",{value:"Duvets",children:"Duvets"}),h.jsx("option",{value:"Duvets Full",children:"Duvets Full"}),h.jsx("option",{value:"Pillows",children:"Pillows"}),h.jsx("option",{value:"Toppers",children:"Toppers"}),h.jsx("option",{value:"Other",children:"Other"})]}),h.jsxs("select",{value:m.priceRange,onChange:O=>v(M=>({...M,priceRange:O.target.value})),className:"input",children:[h.jsx("option",{value:"All",children:"All Prices"}),h.jsx("option",{value:"<150",children:"< 150 SAR"}),h.jsx("option",{value:"150-500",children:"150 - 500 SAR"}),h.jsx("option",{value:">500",children:"> 500 SAR"})]})]}),f?h.jsx(Wc,{}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-3 text-sm text-zinc-700",children:[h.jsxs("div",{className:"px-3 py-1.5 rounded-md bg-zinc-100 border",children:[h.jsx("span",{className:"font-semibold",children:"Sold Qty:"})," ",w.qty.toLocaleString("en-US")]}),h.jsxs("div",{className:"px-3 py-1.5 rounded-md bg-zinc-100 border",children:[h.jsx("span",{className:"font-semibold",children:"Total Value:"})," ",w.value.toLocaleString("en-US",{style:"currency",currency:"SAR"})]})]}),h.jsx(Vs,{columns:T,data:y,initialSortKey:"totalValue"})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800",children:"AI Insights"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>N(!C),className:"px-3 py-1.5 rounded-md border text-sm",children:C?"إخفاء":"إظهار"}),h.jsx("button",{onClick:A,disabled:E,className:"btn-primary text-sm",children:E?"تحليل...":"🔁 Reanalyze with AI"})]})]}),C&&h.jsx("div",{className:"mt-4 p-4 rounded-lg bg-blue-50 border border-blue-200 text-blue-900 whitespace-pre-wrap text-sm",children:j||"انقر على زر إعادة التحليل لتوليد الرؤى."})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800",children:"Frequently Sold Together"}),h.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border overflow-auto",children:h.jsx("div",{className:"min-w-[640px]",children:h.jsxs("div",{className:"grid",style:{gridTemplateColumns:`200px repeat(${S.uniqueItems.length}, minmax(48px, 1fr))`},children:[h.jsx("div",{}),S.uniqueItems.map(O=>h.jsx("div",{className:"text-[10px] text-zinc-500 text-center truncate px-1",children:O},`col-${O}`)),S.uniqueItems.map((O,M)=>h.jsxs($l.Fragment,{children:[h.jsx("div",{className:"text-[10px] text-zinc-600 truncate px-1 py-1",children:O}),S.uniqueItems.map((ee,H)=>{var X;const te=S.matrix[M][H],P=`rgba(34,197,94,${.1+Math.min(1,te/Math.max(1,((X=S.topPairs[0])==null?void 0:X.count)||1))*.6})`;return h.jsx("div",{className:"h-8 m-0.5 rounded",style:{backgroundColor:M===H?"#f1f5f9":P},title:`${te}`},`cell-${M}-${H}`)})]},`row-${O}`))]})})}),h.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:h.jsx("svg",{width:"100%",height:"560",viewBox:"0 0 1200 560",children:(()=>{const te=Math.min(1200,560)/2-60,V=S.nodes.length||1,P=new Map;S.nodes.forEach((B,ae)=>{const Q=ae/V*Math.PI*2;P.set(B.id,{x:600+te*Math.cos(Q),y:280+te*Math.sin(Q)})});const X=Math.max(1,...S.links.map(B=>B.value));return h.jsxs("g",{children:[S.links.map((B,ae)=>{const Q=P.get(B.source),we=P.get(B.target);if(!Q||!we)return null;const De=.2+.6*(B.value/X);return h.jsx("line",{x1:Q.x,y1:Q.y,x2:we.x,y2:we.y,stroke:"#0ea5e9",strokeOpacity:De,strokeWidth:2},`link-${ae}`)}),S.nodes.map((B,ae)=>{const Q=P.get(B.id);return Q?h.jsxs("g",{children:[h.jsx("circle",{cx:Q.x,cy:Q.y,r:12,fill:"#34d399",stroke:"#047857"}),h.jsx("text",{x:Q.x+14,y:Q.y+4,fontSize:12,fill:"#334155",children:B.name})]},`node-${ae}`):null})]})})()})})]})]})]})},p5=({duvetSummary:e,allStores:t,allDateData:n,dateFilter:r,setDateFilter:o,areaStoreFilter:s,setAreaStoreFilter:u,isRecalculating:c,profile:f})=>{const p=R.useMemo(()=>Object.values(e).map(v=>({...v,id:v.name})).sort((v,y)=>y.total-v.total),[e]),m=[{key:"name",label:"Store",sortable:!0},{key:"Low Value (199-399)",label:"Low Value",sortable:!0},{key:"Medium Value (495-695)",label:"Medium Value",sortable:!0},{key:"High Value (795-999)",label:"High Value",sortable:!0},{key:"total",label:"Total Units",sortable:!0}];return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[h.jsx($s,{dateFilter:r,setDateFilter:o,allData:n}),h.jsx(Nu,{stores:t,filters:s,setFilters:u,profile:f})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800 mb-4",children:"Duvet Sales Overview by Store"}),c?h.jsx(Wc,{}):h.jsx(Vs,{columns:m,data:p,initialSortKey:"total"})]})]})},m5=({commissionData:e,allStores:t,allDateData:n,dateFilter:r,setDateFilter:o,areaStoreFilter:s,setAreaStoreFilter:u,isRecalculating:c,profile:f})=>{const[p,m]=R.useState(e.length>0?e[0].name:null),v=[{key:"name",label:"Employee",sortable:!0,render:(w,_)=>h.jsx(MA,{id:_.employeeId??_.id??_.name,fallback:_.name})},{key:"totalSales",label:"Total Sales",sortable:!0,render:w=>w.toLocaleString("en-US",{style:"currency",currency:"SAR"})},{key:"achievement",label:"Employee Achievement",sortable:!0,render:w=>`${w.toFixed(1)}%`},{key:"finalCommissionRate",label:"Final Commission Rate",sortable:!0,render:w=>h.jsx("span",{className:"font-semibold text-blue-600",children:`${w.toFixed(2)}%`})},{key:"commissionAmount",label:"Commission Amount",sortable:!0,render:w=>h.jsx("span",{className:"font-semibold text-green-600",children:w.toLocaleString("en-US",{style:"currency",currency:"SAR"})})}],y=(f==null?void 0:f.store)||"";return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[h.jsx($s,{dateFilter:r,setDateFilter:o,allData:n}),h.jsx(Nu,{stores:t,filters:s,setFilters:u,profile:f})]}),c?h.jsx(Wc,{rows:10}):e.length===0?h.jsx("div",{className:"text-center p-10 bg-white rounded-lg shadow",children:h.jsx("p",{children:"No commission data available for the selected period."})}):h.jsx("div",{className:"space-y-4",children:Array.isArray(e)?e.sort((w,_)=>(w.name||"").localeCompare(_.name||"")).map(w=>h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[h.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>m(_=>_===w.name?null:w.name),children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800",children:w.name}),h.jsx("span",{className:"text-xl",children:p===w.name?"−":"+"})]}),h.jsxs("p",{className:"text-sm text-zinc-500 mt-1",children:["Store Achievement: ",w.achievement.toFixed(1),"% | Applicable Commission Rate: ",h.jsxs("strong",{children:[w.commissionRate.toFixed(1),"%"]})]})]}),p===w.name&&h.jsx("div",{className:"p-4 border-t border-gray-200",children:h.jsx(Vs,{columns:v,data:(f==null?void 0:f.role)==="store_manager"&&y?w.employees.filter(_=>_.store===y):w.employees,initialSortKey:"commissionAmount"})})]},w.name)):[]})]})},If=(e,t)=>{if(typeof XLSX>"u"){alert("File library is still loading...");return}const n=XLSX.utils.json_to_sheet([],{header:t}),r=XLSX.utils.book_new();XLSX.utils.book_append_sheet(r,n,"Template"),XLSX.writeFile(r,`${e}.xlsx`)},g5=({onUpload:e,isProcessing:t,uploadResult:n,onClearResult:r})=>{const[o,s]=R.useState(null),[u,c]=R.useState(0),f=m=>{m.target.files&&(s(m.target.files[0]),r(),c(0))},p=()=>{if(!o)return;const m=new FileReader;m.onload=v=>{try{const y=new Uint8Array(v.target.result),w=XLSX.read(y,{type:"array"}),_=w.SheetNames[0],S=w.Sheets[_],C=XLSX.utils.sheet_to_json(S,{raw:!1});e(C,c)}catch(y){alert(`File processing failed: ${y.message}`)}},m.readAsArrayBuffer(o)};return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 space-y-6 max-w-3xl mx-auto",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700",children:"Smart Data Uploader"}),h.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:"Upload an XLSX file. The system will automatically detect the file type and import the data."})]}),h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[h.jsx("h4",{className:"font-semibold text-zinc-600 mb-2",children:"Download Templates"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx("button",{onClick:()=>If("Sales_Summary_Template",["Sales Man Name","Outlet Name","Bill Date","Net Amount","Total Sales Bills"]),className:"btn-secondary text-sm",children:"Sales Summary"}),h.jsx("button",{onClick:()=>If("Item_Wise_Sales_Template",["Outlet Name","SalesMan Name","Bill Dt.","Item Name","Item Alias","Sold Qty","Item Rate"]),className:"btn-secondary text-sm",children:"Item-wise Sales"}),h.jsx("button",{onClick:()=>If("Install_Template",["Type","Store Name","Area Manager","Employee Name","Employee Store","Year","Month","Store Target","Employee Sales Target","Employee Duvet Target"]),className:"btn-secondary text-sm",children:"Install File"}),h.jsx("button",{onClick:()=>If("Visitors_Template",["Date","Store Name","Visitors"]),className:"btn-secondary text-sm",children:"Visitors"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label font-semibold",children:"Upload Your File"}),h.jsx("input",{type:"file",onChange:f,accept:".xlsx, .xls",className:"input mt-2"})]}),o&&h.jsx("button",{onClick:p,disabled:t,className:"btn-primary w-full",children:t?"Uploading...":"Upload Data"}),t&&h.jsxs("div",{children:[h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-4",children:h.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${u}%`}})}),h.jsxs("p",{className:"text-center text-sm text-zinc-600 mt-1",children:[Math.round(u),"% Complete"]})]}),n&&h.jsxs("div",{className:"p-4 rounded-lg bg-green-100 text-green-700",children:[h.jsx("h4",{className:"font-bold",children:"Upload Complete"}),h.jsxs("p",{children:["Successfully processed ",n.successful.length," records. ",n.skipped," rows skipped."]}),h.jsx("button",{onClick:r,className:"btn-secondary mt-2 text-sm",children:"Clear"})]})]})},v5=({value:e,onChange:t})=>{const n=[{id:"daily",label:"Daily"},{id:"mtd",label:"Month-to-Date"},{id:"ytd",label:"Year-to-Date"},{id:"monthly",label:"Full Month"}];return h.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1 border",children:n.map(r=>h.jsx("button",{onClick:()=>t(r.id),className:`flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all duration-200 ${e===r.id?"bg-white shadow-sm text-orange-600":"text-zinc-600 hover:bg-gray-200"}`,children:r.label},r.id))})},y5=({allStores:e,allMetrics:t,profile:n})=>{const[r,o]=R.useState("All"),[s,u]=R.useState(new Date().getMonth()),[c,f]=R.useState(()=>new Date().toISOString().split("T")[0]),[p,m]=R.useState("daily"),v=R.useMemo(()=>{if(!n)return[];if(n.role==="admin"||n.role==="general_manager")return e;const{role:x,areaManager:j,store:k}=n;if(x==="area_manager")return e.filter(A=>A.areaManager===j);if(x==="store_manager"){const A=e.find(T=>T.name===k);return A?e.filter(T=>T.areaManager===A.areaManager):[]}return x==="employee"?e.filter(A=>A.name===k):[]},[e,n]),y=R.useMemo(()=>{const x=(re,Te,Ze)=>{const ft=re.filter(st=>{if(!st.date||typeof st.date.toDate!="function")return!1;const dt=st.date.toDate(),Dn=new Date(Date.UTC(dt.getUTCFullYear(),dt.getUTCMonth(),dt.getUTCDate()));return Dn>=Te&&Dn<=Ze}),Ce=ft.reduce((st,dt)=>st+(dt.totalSales||0),0),ot=ft.reduce((st,dt)=>st+(dt.visitors||0),0),Je=ft.reduce((st,dt)=>st+(dt.transactionCount||0),0);return{totalSales:Ce,totalTransactions:Je,totalVisitors:ot,atv:Je>0?Ce/Je:0,visitorRate:ot>0?Je/ot*100:0}},j=new Date,k=j.getUTCFullYear(),A=j.getUTCMonth(),T=j.getUTCDate(),L=k-1,F=r==="All"?t:t.filter(re=>re.store===r),q=c.split("-").map(Number),z=new Date(Date.UTC(q[0],q[1]-1,q[2])),O=new Date(Date.UTC(z.getUTCFullYear()-1,z.getUTCMonth(),z.getUTCDate())),M={current:x(F,z,z),previous:x(F,O,O)},ee=new Date(Date.UTC(k,A,1)),H=new Date(Date.UTC(k,A,T-1)),te=new Date(Date.UTC(L,A,1)),V=new Date(Date.UTC(L,A,T-1)),P={current:x(F,ee,H),previous:x(F,te,V)},X=new Date(Date.UTC(k,0,1)),B=new Date(Date.UTC(L,0,1)),ae={current:x(F,X,H),previous:x(F,B,V)},Q=new Date(Date.UTC(k,s,1)),we=new Date(Date.UTC(k,s+1,0)),De=new Date(Date.UTC(L,s,1)),xe=new Date(Date.UTC(L,s+1,0)),Ve={current:x(F,Q,we),previous:x(F,De,xe)};return{daily:M,mtd:P,ytd:ae,monthly:Ve}},[t,r,s,c]),w=["January","February","March","April","May","June","July","August","September","October","November","December"],_=new Date().getFullYear(),S=_-1,C=(x,j)=>h.jsxs("div",{className:"mt-6 bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-800 mb-4",children:x}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[h.jsx(ga,{title:"Sales",current:j.current.totalSales,previous:j.previous.totalSales}),h.jsx(ga,{title:"Visitors",current:j.current.totalVisitors,previous:j.previous.totalVisitors}),h.jsx(ga,{title:"ATV",current:j.current.atv,previous:j.previous.atv}),h.jsx(ga,{title:"Transactions",current:j.current.totalTransactions,previous:j.previous.totalTransactions}),h.jsx(ga,{title:"Visitor Conversion Rate",current:j.current.visitorRate,previous:j.previous.visitorRate,isPercentage:!0}),h.jsx(ga,{title:"Sales per Visitor",current:j.current.totalVisitors>0?j.current.totalSales/j.current.totalVisitors:0,previous:j.previous.totalVisitors>0?j.previous.totalSales/j.previous.totalVisitors:0})]})]}),N=new Date(c),E=()=>{switch(p){case"daily":return C(`Daily Comparison (${N.toLocaleDateString("en-CA")} vs Same Day Last Year)`,y.daily);case"mtd":return C("Month-to-Date Comparison (MTD vs MTD Last Year)",y.mtd);case"ytd":return C("Year-to-Date Comparison (YTD vs YTD Last Year)",y.ytd);case"monthly":return C(`Full Month Comparison (${w[s]} ${_} vs ${S})`,y.monthly);default:return null}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:"Filter by Store:"}),h.jsxs("select",{value:r,onChange:x=>o(x.target.value),className:"input",disabled:(n==null?void 0:n.role)==="employee",children:[h.jsx("option",{value:"All",children:"All Stores"}),v.map(x=>h.jsx("option",{value:x.name,children:x.name},x.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:"Select Comparison Type:"}),h.jsx(v5,{value:p,onChange:m})]})]}),p==="daily"&&h.jsxs("div",{children:[h.jsx("label",{className:"label",children:"Select Day for Daily Comparison:"}),h.jsx("input",{type:"date",value:c,onChange:x=>f(x.target.value),className:"input"})]}),p==="monthly"&&h.jsxs("div",{children:[h.jsx("label",{className:"label",children:"Select Month for Full Month Comparison:"}),h.jsx("select",{value:s,onChange:x=>u(Number(x.target.value)),className:"input",children:w.map((x,j)=>h.jsx("option",{value:j,children:x},j))})]})]}),E()]})},w5=({employeeSummary:e,storeSummary:t,kingDuvetSales:n})=>{const r=(u,c)=>{if(typeof XLSX>"u"){alert("File library is still loading...");return}const f=XLSX.utils.json_to_sheet(u),p=XLSX.utils.book_new();XLSX.utils.book_append_sheet(p,f,"Report"),XLSX.writeFile(p,`${c}.xlsx`)},o=()=>{const u=e.map(c=>({Name:c.name,Store:c.store,"Total Sales":c.totalSales,Target:c.effectiveTarget,"Achievement %":c.achievement.toFixed(2)}));r(u,"Employees_Report")},s=()=>{const u=t.map(c=>({Name:c.name,"Area Manager":c.areaManager,"Total Sales":c.totalSales,Target:c.effectiveTarget,"Achievement %":c.targetAchievement.toFixed(2),Visitors:c.visitors,Transactions:c.transactionCount}));r(u,"Stores_Report")};return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700 mb-4",children:"Data Export"}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsx("button",{onClick:o,className:"btn-secondary flex-1",children:"Export Employees Report"}),h.jsx("button",{onClick:s,className:"btn-secondary flex-1",children:"Export Stores Report"})]})]})},x5=({rules:e,onSave:t,onDelete:n,isProcessing:r})=>{const[o,s]=R.useState(""),u=()=>{o.trim()&&(t(o),s(""))};return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700 mb-2",children:"Custom Business Rules"}),h.jsx("p",{className:"text-sm text-zinc-500 mb-4",children:`Add rules for the AI assistant 'Hassan' to remember across all conversations. (e.g., "The ATV target for Al-Noor Mall is 300 SAR")`}),h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsx("input",{type:"text",value:o,onChange:c=>s(c.target.value),placeholder:"Enter a new business rule...",className:"input flex-grow"}),h.jsx("button",{onClick:u,disabled:r,className:"btn-primary",children:r?"Saving...":"Save Rule"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"font-semibold text-zinc-600",children:"Saved Rules:"}),e.length===0?h.jsx("p",{className:"text-sm text-zinc-400",children:"No custom rules saved yet."}):h.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(c=>h.jsxs("li",{className:"py-2 flex justify-between items-center",children:[h.jsx("span",{className:"text-sm text-zinc-800",children:c.rule}),h.jsx("button",{onClick:()=>n(c.id),className:"text-red-500 hover:text-red-700",children:h.jsx(Cx,{})})]},c.id))})]})]})},b5=async()=>{try{console.log("🔄 بدء تحديث الموظفين...");const e=await Se.collection("employees").get();if(e.empty)return console.log("❌ لا يوجد موظفين في قاعدة البيانات"),{success:!1,message:"لا يوجد موظفين في قاعدة البيانات"};console.log(`📊 تم العثور على ${e.size} موظف`);const t=Se.batch();let n=0;return e.forEach(r=>{const o=r.data();o.hasOwnProperty("linkedAccount")?console.log(`⏭️ الموظف ${o.name||r.id} محدث مسبقاً`):(t.update(r.ref,{linkedAccount:!1,updatedAt:de.firestore.FieldValue.serverTimestamp()}),n++,console.log(`✅ تم تحديث الموظف: ${o.name||r.id}`))}),n>0?(await t.commit(),console.log(`🎉 تم تحديث ${n} موظف بنجاح!`),{success:!0,message:`تم تحديث ${n} موظف بنجاح!`,updatedCount:n}):(console.log("ℹ️ جميع الموظفين محدثين مسبقاً"),{success:!0,message:"جميع الموظفين محدثين مسبقاً",updatedCount:0})}catch(e){return console.error("❌ خطأ في تحديث الموظفين:",e),{success:!1,message:`خطأ في تحديث الموظفين: ${e.message}`,error:e}}},cI=e=>{if(!e)return null;const t=String(e).match(/unknown[\s_\-]*(\d{1,10})/i)||String(e).match(/(\d{2,10})$/);return t?t[1]:null},S5=e=>{if(!e)return null;const t=String(e).trim(),n=t.match(/^(\d{3,4})\b/);if(n)return n[1];const r=t.match(/unknown[\s_\-]*(\d{3,4})/i);if(r)return r[1];const o=t.match(/(\d{3,4})\s*$/);return o?o[1]:null},_5=async()=>{let e=0,t=0,n=0;const r=await Se.collection("employees").get();for(const u of r.docs){const c=u.data(),f=c==null?void 0:c.employeeId,p=cI(c==null?void 0:c.name);!f&&p&&(await Se.collection("employees").doc(u.id).set({employeeId:p,name:`Unknown ${p}`},{merge:!0}),e++)}const o=await Se.collection("dailyMetrics").get();for(const u of o.docs){const c=u.data();if(c!=null&&c.employeeId)continue;const f=cI(c==null?void 0:c.employee);f&&(await Se.collection("dailyMetrics").doc(u.id).set({employeeId:f},{merge:!0}),t++)}const s=async u=>{const c=await Se.collection(u).get();for(const f of c.docs){const p=f.data();if(p!=null&&p.employeeId)continue;const m=S5((p==null?void 0:p["SalesMan Name"])||(p==null?void 0:p.employee));m&&(await Se.collection(u).doc(f.id).set({employeeId:m},{merge:!0}),n++)}};return await s("salesTransactions"),await s("kingDuvetSales"),{employeesUpdated:e,metricsUpdated:t,salesUpdated:n}},N5=({onSelectiveDelete:e,isProcessing:t})=>{const{t:n}=Oe(),[r,o]=R.useState("visitors"),[s,u]=R.useState(new Date().getFullYear()),[c,f]=R.useState(new Date().getMonth()),p=R.useMemo(()=>Array.from({length:5},(y,w)=>new Date().getFullYear()-w),[]),m=R.useMemo(()=>Array.from({length:12},(y,w)=>new Date(0,w).toLocaleString("en-US",{month:"long"})),[]),v=()=>{e(r,s,c)};return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700 mb-2",children:n("selective_data_deletion_title")}),h.jsx("p",{className:"text-sm text-zinc-500 mb-4",children:n("selective_data_deletion_desc")}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end p-4 border border-red-200 bg-red-50 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:n("data_type")}),h.jsxs("select",{value:r,onChange:y=>o(y.target.value),className:"input",children:[h.jsx("option",{value:"visitors",children:n("visitors")}),h.jsx("option",{value:"sales",children:n("sales")})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:n("year")}),h.jsx("select",{value:s,onChange:y=>u(Number(y.target.value)),className:"input",children:p.map(y=>h.jsx("option",{value:y,children:y},y))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:n("month")}),h.jsx("select",{value:c,onChange:y=>f(Number(y.target.value)),className:"input",children:m.map((y,w)=>h.jsx("option",{value:w,children:y},w))})]}),h.jsx("button",{onClick:v,disabled:t,className:"btn-danger w-full",children:n(t?"deleting":"delete_data_button")})]})]})},E5=()=>{const{t:e}=Oe(),[t,n]=R.useState(!1),[r,o]=R.useState(null),s=async()=>{if(confirm(e("confirm_update_employees"))){n(!0),o(null);try{const u=await b5();o(u)}catch(u){o({success:!1,message:`${e("error_updating_employees")}: ${u}`})}finally{n(!1)}}};return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700 mb-2",children:e("update_employees")}),h.jsx("p",{className:"text-sm text-zinc-500 mb-4",children:e("update_employees_desc")}),h.jsxs("div",{className:"p-4 border border-orange-200 bg-orange-50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-orange-600 text-lg",children:"👥"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-orange-800",children:e("update_employees")}),h.jsx("p",{className:"text-orange-700 text-sm",children:e("update_employees_desc")})]})]}),h.jsx("button",{onClick:s,disabled:t,className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e("updating")]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"🔄"}),e("update_all_employees")]})}),r&&h.jsxs("div",{className:`mt-4 p-3 rounded-lg ${r.success?"bg-green-100 border border-green-200":"bg-red-100 border border-red-200"}`,children:[h.jsx("p",{className:`font-medium ${r.success?"text-green-800":"text-red-800"}`,children:r.message}),r.updatedCount!==void 0&&r.updatedCount>0&&h.jsxs("p",{className:"text-green-700 text-sm mt-1",children:[e("employees_updated_successfully"),": ",r.updatedCount]})]})]})]})},I5=({employeeSummary:e,storeSummary:t,kingDuvetSales:n,onAddMonthlyData:r,onDeleteAllData:o,onSelectiveDelete:s,isProcessing:u,businessRules:c,onSaveRule:f,onDeleteRule:p,profile:m})=>{const v=(m==null?void 0:m.role)==="admin",y=(m==null?void 0:m.role)==="general_manager";return h.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[v&&h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700 mb-4",children:"Administrative Tools"}),h.jsx("button",{onClick:r,className:"btn-primary",children:"Add Historical Monthly Data"}),h.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:"Use this to enter aggregated data for a full month retrospectively."})]}),v&&h.jsx(x5,{rules:c,onSave:f,onDelete:p,isProcessing:u}),v&&h.jsx(E5,{}),v&&h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700 mb-2",children:"Fix Unknown Employees"}),h.jsx("p",{className:"text-sm text-zinc-500 mb-4",children:'Extract numeric IDs from names like "Unknown 2792" and backfill missing employeeId in employees and dailyMetrics.'}),h.jsx(T5,{})]}),(v||y)&&h.jsx(w5,{employeeSummary:e,storeSummary:t,kingDuvetSales:n}),v&&h.jsxs("div",{className:"space-y-6",children:[h.jsx(N5,{onSelectiveDelete:s,isProcessing:u}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"text-xl font-semibold text-zinc-700 mb-4",children:"Data Management"}),h.jsxs("div",{className:"p-4 border border-red-300 rounded-lg bg-red-50",children:[h.jsx("h4",{className:"font-bold text-red-800",children:"Danger Zone"}),h.jsx("p",{className:"text-red-700 mt-1 text-sm",children:"This action will permanently delete all data in the database. This cannot be undone."}),h.jsx("div",{className:"mt-4",children:h.jsx("button",{onClick:o,disabled:u,className:"btn-danger",children:u?"Deleting...":"Delete All Data"})})]})]})]})]})},T5=()=>{const{t:e}=Oe(),[t,n]=$l.useState(!1),[r,o]=$l.useState(null),s=async()=>{n(!0),o(null);try{const u=await _5();o(u)}finally{n(!1)}};return h.jsxs("div",{className:"p-4 border border-blue-200 bg-blue-50 rounded-lg",children:[h.jsx("button",{onClick:s,disabled:t,className:"btn-primary",children:t?"Processing...":"Fix Unknown Employees & Metrics"}),r&&h.jsxs("p",{className:"text-sm text-blue-800 mt-2",children:["Employees updated: ",r.employeesUpdated," — Metrics updated: ",r.metricsUpdated]})]})},j5=({store:e,allMetrics:t,onBack:n,allStores:r,setModalState:o,allDateData:s,profile:u})=>{const{t:c,locale:f}=Oe(),[p,m]=R.useState(""),[v,y]=R.useState(!1),[w,_]=R.useState({year:new Date().getFullYear(),month:new Date().getMonth(),day:"all"}),S=R.useMemo(()=>t.filter(j=>{if(j.store!==e.name)return!1;const k=j.date;if(!k||typeof k.toDate!="function")return!1;const A=k.toDate(),T=w.year==="all"||A.getUTCFullYear()===w.year,L=w.month==="all"||A.getUTCMonth()===w.month,F=w.day==="all"||A.getUTCDate()===w.day;return T&&L&&F}),[e.name,t,w]),C=R.useMemo(()=>{const j=S.reduce((T,L)=>T+(L.totalSales||0),0),k=S.reduce((T,L)=>T+(L.visitors||0),0),A=S.reduce((T,L)=>T+(L.transactionCount||0),0);return{totalSales:j,totalVisitors:k,totalTransactions:A,atv:A>0?j/A:0,visitorRate:k>0?A/k*100:0,salesPerVisitor:k>0?j/k:0}},[S]),N=R.useMemo(()=>{const j=new Date,k=j.getFullYear(),A=j.getMonth(),T=j.getDate(),L=new Date(k,A+1,0).getDate(),F=Math.max(0,L-T+1),q=t.filter(M=>{if(M.store!==e.name||!M.date||typeof M.date.toDate!="function")return!1;const ee=M.date.toDate();return ee.getFullYear()===k&&ee.getMonth()===A}).reduce((M,ee)=>M+(ee.totalSales||0),0),O=ms(e.targets,{year:k,month:A,day:"all"})-q;return{salesMTD:q,remainingTarget:O,remainingDays:F,requiredDailyAverage:F>0?Math.max(0,O)/F:0}},[e.name,e.targets,t]),E=async()=>{y(!0),m("");try{const j=f==="ar"?"Provide the response in Arabic.":"",k=`Analyze the performance for store "${e.name}". Data: ${JSON.stringify(C)}. Provide a brief summary, 2 strengths, 1 area for improvement, and 2 actionable steps. ${j}`,A=await li({model:"gemini-2.5-flash",contents:[{parts:[{text:k}]}]});m(A)}catch(j){m(`Error: ${j.message}`)}finally{y(!1)}},x=()=>{o({type:"aiComparison",data:{item:e,allItems:r,type:"store"}})};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("button",{onClick:n,className:"btn-secondary flex items-center gap-2",children:[h.jsx(z6,{})," ",c("back_to_all_stores")]}),h.jsxs("button",{onClick:x,className:"btn-secondary flex items-center gap-2",children:[h.jsx(Di,{})," ",c("compare_with_ai")]})]}),h.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-sm border",children:[h.jsx("h2",{className:"text-3xl font-bold text-zinc-800",children:e.name}),h.jsxs("p",{className:"text-zinc-500",children:[c("monthly_target"),": ",ms(e.targets,{year:new Date().getFullYear(),month:new Date().getMonth(),day:"all"}).toLocaleString("en-US",{style:"currency",currency:"SAR"})]})]}),h.jsx($s,{dateFilter:w,setDateFilter:_,allData:s}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsx(pn,{title:c("total_sales"),value:C.totalSales,format:j=>j.toLocaleString("en-US",{style:"currency",currency:"SAR"})}),h.jsx(pn,{title:c("visitors"),value:C.totalVisitors}),h.jsx(pn,{title:c("total_transactions"),value:C.totalTransactions}),h.jsx(pn,{title:c("avg_transaction_value"),value:C.atv,format:j=>j.toLocaleString("en-US",{style:"currency",currency:"SAR"})}),h.jsx(pn,{title:c("conversion_rate"),value:C.visitorRate,format:j=>`${j.toFixed(1)}%`}),h.jsx(pn,{title:c("sales_per_visitor"),value:C.salesPerVisitor,format:j=>j.toLocaleString("en-US",{style:"currency",currency:"SAR"})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"font-semibold text-lg text-zinc-700 mb-3",children:c("ai_performance_review")}),h.jsxs("button",{onClick:E,disabled:v,className:"btn-primary flex items-center gap-2",children:[h.jsx(Di,{})," ",c(v?"analyzing":"generate_ai_analysis")]}),v&&h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}),p&&h.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:p.replace(/\n/g,"<br />")}})]}),h.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"font-semibold text-lg text-zinc-700 mb-3",children:c("dynamic_daily_target")}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:c("sales_this_month")}),h.jsx("span",{className:"font-semibold",children:N.salesMTD.toLocaleString("en-US",{style:"currency",currency:"SAR"})})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:c("remaining_target")}),h.jsx("span",{className:"font-semibold text-red-600",children:N.remainingTarget>0?N.remainingTarget.toLocaleString("en-US",{style:"currency",currency:"SAR"}):c("achieved")})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:c("remaining_days")}),h.jsx("span",{className:"font-semibold",children:N.remainingDays})]}),h.jsxs("div",{className:"flex justify-between items-center bg-orange-50 p-2 rounded-lg mt-2",children:[h.jsx("span",{className:"font-bold text-orange-700",children:c("required_daily_avg")}),h.jsx("span",{className:"font-bold text-orange-700 text-lg",children:N.requiredDailyAverage.toLocaleString("en-US",{style:"currency",currency:"SAR"})})]})]})]})]})]})},k5=({fullData:e,currentPage:t,businessRules:n})=>{const[r,o]=R.useState(!1),[s,u]=R.useState([{role:"model",parts:[{text:"أهلاً بك! أنا حسن مساعدك الذكي. كيف يمكنني مساعدتك اليوم؟"}]}]),[c,f]=R.useState(""),[p,m]=R.useState(!1),v=R.useRef(null);R.useEffect(()=>{var w;(w=v.current)==null||w.scrollIntoView({behavior:"smooth"})},[s]);const y=async w=>{if(w.preventDefault(),!c.trim()||p)return;const _={role:"user",parts:[{text:c}]};u(C=>[...C,_]);const S=c;f(""),m(!0);try{const C=n.length>0?`--- IMPORTANT BUSINESS RULES (Follow these in all answers) ---
${n.map(k=>`- ${k.rule}`).join(`
`)}
--- END RULES ---`:"",N=`--- REAL-TIME DATA SNAPSHOT ---
${JSON.stringify(e,null,2)}
--- END DATA ---`,E=`You are 'Hassan', an expert retail analyst and business advisor. Your answers must be based strictly on the provided REAL-TIME DATA SNAPSHOT and you must always follow the IMPORTANT BUSINESS RULES. The user is currently on the '${t}' page; use this context for more relevant answers. Be concise, actionable, and use markdown for formatting. All responses must be in Arabic.`,x=`User Query: "${S}"`,j=await li({model:"gemini-2.5-flash",contents:[...s,{role:"user",parts:[{text:`${C}

${N}

${x}`}]}],config:{systemInstruction:E}});u(k=>[...k,{role:"model",parts:[{text:j}]}])}catch(C){u(N=>[...N,{role:"model",parts:[{text:`عذراً، حدث خطأ: ${C.message}`}]}])}finally{m(!1)}};return h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>o(!r),className:"fixed bottom-6 right-6 bg-orange-600 text-white rounded-full p-4 shadow-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-transform transform hover:scale-110 z-40","aria-label":"Open AI Assistant",children:h.jsx(Di,{})}),r&&h.jsxs("div",{className:"fixed bottom-20 right-6 w-96 h-[60vh] bg-white rounded-2xl shadow-2xl flex flex-col z-40",children:[h.jsxs("header",{className:"flex items-center justify-between p-4 border-b bg-gray-50 rounded-t-2xl",children:[h.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"المساعد الذكي: حسن"}),h.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-800",children:h.jsx(K6,{})})]}),h.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:h.jsxs("div",{className:"space-y-4",children:[s.map((w,_)=>h.jsx("div",{className:`flex ${w.role==="user"?"justify-end":"justify-start"}`,children:h.jsx("div",{className:`p-3 rounded-lg max-w-xs prose prose-sm ${w.role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-zinc-800"}`,dangerouslySetInnerHTML:{__html:w.parts[0].text.replace(/\n/g,"<br />").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})},_)),p&&h.jsx("div",{className:"flex justify-start",children:h.jsx("div",{className:"p-3 rounded-lg bg-gray-100 text-sm",children:"حسن يفكر..."})}),h.jsx("div",{ref:v})]})}),h.jsx("div",{className:"p-4 border-t",children:h.jsxs("form",{onSubmit:y,className:"flex gap-2",children:[h.jsx("input",{type:"text",value:c,onChange:w=>f(w.target.value),placeholder:"اسأل حسن...",className:"input flex-grow",disabled:p}),h.jsx("button",{type:"submit",className:"btn-primary",disabled:p||!c.trim(),children:"إرسال"})]})})]})]})},C5=({onLogout:e})=>{const{t}=Oe();return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:h.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-white rounded-xl shadow-lg",children:[h.jsx("div",{className:"mx-auto w-16 h-16 mb-4 flex items-center justify-center rounded-full bg-orange-100 text-orange-600",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("pending_approval_title")}),h.jsx("p",{className:"mt-2 text-gray-600",children:t("pending_approval_message")}),h.jsxs("button",{onClick:e,className:"mt-6 btn-secondary flex items-center gap-2 mx-auto",children:[h.jsx(CA,{})," ",t("logout")]})]})})},Ax={employee:"موظف",store_manager:"مدير معرض",area_manager:"مدير منطقة",general_manager:"مدير عام",admin:"مدير النظام"},OA={employee:"bg-blue-100 text-blue-800",store_manager:"bg-green-100 text-green-800",area_manager:"bg-purple-100 text-purple-800",general_manager:"bg-orange-100 text-orange-800",admin:"bg-red-100 text-red-800"},A5=()=>{const{t:e}=Oe(),[t,n]=R.useState([]),[r,o]=R.useState(!0),[s,u]=R.useState(null);R.useEffect(()=>{const m=Se.collection("pendingEmployees").where("status","==","pending").onSnapshot(y=>{const w=y.docs.map(_=>{const S=_.data();return{id:_.id,employeeId:S.employeeId??"",email:S.email??"",name:S.name??"",role:S.role??"employee",status:S.status??"pending",createdAt:S.createdAt,userId:S.userId??"",source:"pendingEmployees",...S}});n(_=>{const S=_.filter(N=>N.source==="users"),C=[...w,...S];return C.sort((N,E)=>{var k,A;const x=(k=N.createdAt)!=null&&k.toDate?N.createdAt.toDate():new Date(N.createdAt);return((A=E.createdAt)!=null&&A.toDate?E.createdAt.toDate():new Date(E.createdAt)).getTime()-x.getTime()}),C}),o(!1)}),v=Se.collection("users").where("status","==","pending").onSnapshot(y=>{const w=y.docs.map(_=>{const S=_.data();return{id:_.id,employeeId:S.employeeId??"",email:S.email??"",name:S.name??"",role:S.role??"employee",status:S.status??"pending",createdAt:S.createdAt||S.approvedAt||new Date,userId:_.id,source:"users",...S}});n(_=>{const C=[..._.filter(N=>N.source==="pendingEmployees"),...w];return C.sort((N,E)=>{var k,A;const x=(k=N.createdAt)!=null&&k.toDate?N.createdAt.toDate():new Date(N.createdAt);return((A=E.createdAt)!=null&&A.toDate?E.createdAt.toDate():new Date(E.createdAt)).getTime()-x.getTime()}),C}),o(!1)});return()=>{m(),v()}},[]);const c=async m=>{u(m.id);try{const v=async()=>{if(!m.employeeId)return;const y=String(m.employeeId).trim(),w=Se.collection("employees"),_=w.doc(y);if(!(await _.get()).exists){const C=await w.where("employeeId","==",y).limit(1).get();if(!C.empty){await C.docs[0].ref.update({linkedAccount:!0,userEmail:m.email,userId:m.userId,role:m.role,approvedAt:de.firestore.FieldValue.serverTimestamp(),status:"active"});return}await _.set({employeeId:y,name:m.name,userEmail:m.email,userId:m.userId,role:m.role,linkedAccount:!0,approvedAt:de.firestore.FieldValue.serverTimestamp(),status:"active"},{merge:!0});return}await _.update({linkedAccount:!0,userEmail:m.email,userId:m.userId,role:m.role,approvedAt:de.firestore.FieldValue.serverTimestamp(),status:"active"})};m.source==="users"?(await Se.collection("users").doc(m.userId).update({status:"approved",approvedAt:de.firestore.FieldValue.serverTimestamp(),approvedBy:"admin"}),await v()):(await Se.collection("users").doc(m.userId).set({id:m.userId,name:m.name,email:m.email,employeeId:m.employeeId,role:m.role,status:"approved",approvedAt:de.firestore.FieldValue.serverTimestamp(),approvedBy:"admin"}),await v(),await Se.collection("pendingEmployees").doc(m.id).delete()),alert("تم قبول الطلب بنجاح")}catch(v){console.error("Error approving employee:",v),alert("حدث خطأ أثناء قبول الطلب")}finally{u(null)}},f=async m=>{if(confirm("هل أنت متأكد من رفض هذا الطلب؟")){u(m.id);try{m.source==="users"?await Se.collection("users").doc(m.userId).update({status:"rejected"}):await Se.collection("pendingEmployees").doc(m.id).delete(),alert("تم رفض الطلب")}catch(v){console.error("Error rejecting employee:",v),alert("حدث خطأ أثناء رفض الطلب")}finally{u(null)}}},p=[{key:"employeeId",label:"رقم الموظف",render:m=>h.jsx("span",{className:"font-mono font-semibold text-blue-600",children:m})},{key:"name",label:"اسم الموظف",render:m=>h.jsx("span",{className:"font-medium text-gray-900",children:m})},{key:"email",label:"البريد الإلكتروني",render:m=>h.jsx("span",{className:"text-gray-600",children:m})},{key:"role",label:"الدور",render:m=>h.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${OA[m]||"bg-gray-100 text-gray-800"}`,children:Ax[m]||m})},{key:"createdAt",label:"تاريخ الطلب",render:m=>{var v,y;return h.jsx("span",{className:"text-sm text-gray-500",children:((y=(v=m==null?void 0:m.toDate)==null?void 0:v.call(m))==null?void 0:y.toLocaleDateString("ar-SA"))||"غير محدد"})}},{key:"actions",label:"الإجراءات",render:(m,v)=>h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>c(v),disabled:s===v.id,className:"px-3 py-1 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed text-sm flex items-center gap-1",children:s===v.id?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري..."]}):h.jsx(h.Fragment,{children:"✅ قبول"})}),h.jsx("button",{onClick:()=>f(v),disabled:s===v.id,className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-sm flex items-center gap-1",children:"❌ رفض"})]})}];return r?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"جاري تحميل الطلبات..."})]})}):h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-neutral-200 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e("pending_approvals")}),h.jsx("p",{className:"text-gray-600 mt-1",children:e("manage_new_registration_requests")})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-sm text-gray-500",children:e("total_requests")}),h.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.length})]}),h.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-orange-600 text-xl",children:"⏳"})})]})]}),t.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"text-green-600 text-2xl",children:"✅"})}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e("no_pending_requests")}),h.jsx("p",{className:"text-gray-600",children:e("all_requests_processed")})]}):h.jsx("div",{className:"overflow-hidden",children:h.jsx(Vs,{data:t,columns:p,getRowClassName:(m,v)=>v%2===0?"bg-white":"bg-gray-50"})})]})})},Jo=({role:e,size:t="md",showIcon:n=!0})=>{const r={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-2 text-base"},o={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},s=u=>{switch(u){case"admin":return"👑";case"general_manager":return"🎯";case"area_manager":return"🏢";case"store_manager":return"🏪";case"employee":return"👤";default:return"👤"}};return h.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full font-medium ${r[t]} ${OA[e]}`,children:[n&&h.jsx("span",{className:`${o[t]} flex items-center justify-center`,children:s(e)}),Ax[e]]})},D5=()=>{const{t:e}=Oe(),[t,n]=R.useState([]),[r,o]=R.useState(!0),[s,u]=R.useState(null);R.useEffect(()=>{c()},[]);const c=async()=>{try{const w=(await Se.collection("users").get()).docs.map(_=>{const S=_.data();return{id:_.id,name:S.name??"",email:S.email??"",employeeId:S.employeeId??"",role:S.role??"employee",status:S.status??"pending",...S}}).filter(_=>_.status==="approved"||_.status==="active"||_.role==="admin"&&!_.status);n(w)}catch(v){console.error("Error loading users:",v)}finally{o(!1)}},f=async(v,y)=>{u(v);try{await Se.collection("users").doc(v).update({role:y,updatedAt:new Date,updatedBy:"admin"});const w=t.find(_=>_.id===v);w!=null&&w.employeeId&&await Se.collection("employees").doc(w.employeeId).update({role:y,updatedAt:new Date}),n(_=>_.map(S=>S.id===v?{...S,role:y}:S)),alert(e("role_updated"))}catch(w){console.error("Error updating role:",w),alert(e("role_failed"))}finally{u(null)}},p=[{key:"name",label:e("user_name"),render:(v,y)=>{var w;return h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-orange-600 font-bold text-lg",children:((w=v==null?void 0:v.charAt(0))==null?void 0:w.toUpperCase())??"U"})}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900",children:v??""}),h.jsx("p",{className:"text-sm text-gray-500",children:y.email??""})]})]})}},{key:"employeeId",label:e("employee_id"),render:v=>h.jsx("span",{className:"font-mono font-semibold text-blue-600",children:v??""})},{key:"role",label:e("current_role"),render:v=>h.jsx(Jo,{role:v,size:"md"})},{key:"status",label:e("status"),render:v=>h.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v==="approved"||v==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e(v==="approved"||v==="active"?"approved":"pending")})},{key:"actions",label:e("change_role"),render:(v,y)=>h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("select",{value:y.role,onChange:w=>f(y.id,w.target.value),disabled:s===y.id,className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50",children:[h.jsxs("option",{value:"employee",children:["👤 ",e("employee")]}),h.jsxs("option",{value:"store_manager",children:["🏬 ",e("store_manager")]}),h.jsxs("option",{value:"area_manager",children:["📍 ",e("area_manager")]}),h.jsxs("option",{value:"general_manager",children:["🎯 ",e("general_manager")]}),h.jsxs("option",{value:"admin",children:["👑 ",e("admin")]})]}),s===y.id&&h.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})]})}],m=t.reduce((v,y)=>(v[y.role]=(v[y.role]||0)+1,v),{});return r?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:e("loading")})]})}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:Object.entries(Ax).map(([v,y])=>h.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-neutral-200 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-gray-600",children:y}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m[v]||0})]}),h.jsx(Jo,{role:v,size:"sm"})]})},v))}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-neutral-200 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e("roles_management")}),h.jsx("p",{className:"text-gray-600 mt-1",children:e("modify_roles")}),h.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[h.jsxs("p",{className:"text-blue-800 font-medium",children:["🧭 ",e("roles_guide")]}),h.jsx("p",{className:"text-blue-700 text-sm mt-1",children:e("roles_description")})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-sm text-gray-500",children:e("total_users")}),h.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.length})]}),h.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-orange-600 text-xl",children:"👥"})})]})]}),t.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"text-gray-400 text-2xl",children:"👥"})}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e("no_users_found")}),h.jsx("p",{className:"text-gray-600",children:e("check_firebase_or_signup")})]}):h.jsx("div",{className:"overflow-hidden",children:h.jsx(Vs,{data:t,columns:p,getRowClassName:(v,y)=>y%2===0?"bg-white":"bg-gray-50"})})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-neutral-200 p-6",children:[h.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:e("roles_guide")}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx(Jo,{role:"employee",size:"sm"})}),h.jsx("p",{className:"text-sm text-gray-600",children:e("view_own_sales_only")})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx(Jo,{role:"store_manager",size:"sm"})}),h.jsx("p",{className:"text-sm text-gray-600",children:e("manage_branch_employees")})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx(Jo,{role:"area_manager",size:"sm"})}),h.jsx("p",{className:"text-sm text-gray-600",children:e("edit_employee_targets")})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx(Jo,{role:"general_manager",size:"sm"})}),h.jsx("p",{className:"text-sm text-gray-600",children:e("view_all_areas")})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx(Jo,{role:"admin",size:"sm"})}),h.jsx("p",{className:"text-sm text-gray-600",children:e("full_permissions")})]})]})]})]})},R5=({onSave:e,onClose:t,isProcessing:n,stores:r,profile:o})=>{var _;const{t:s}=Oe(),[u,c]=R.useState(new Date().toISOString().split("T")[0]),f=(o==null?void 0:o.role)==="store_manager"?o.store:(_=r[0])==null?void 0:_.name,[p,m]=R.useState(f||""),[v,y]=R.useState(""),w=S=>{S.preventDefault(),!(!p||!u||!v||Number(v)<0)&&e({date:u,store:p,visitors:Number(v)})};return h.jsxs("div",{className:"modal-content",children:[h.jsx("h2",{className:"modal-title",children:s("add_visitors")}),h.jsxs("form",{onSubmit:w,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("store")}),h.jsxs("select",{value:p,onChange:S=>m(S.target.value),required:!0,className:"input",children:[h.jsx("option",{value:"",children:s("select_store")}),r.map(S=>h.jsx("option",{value:S.name,children:S.name},S.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("date")}),h.jsx("input",{type:"date",value:u,onChange:S=>c(S.target.value),required:!0,className:"input"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("visitors_count")}),h.jsx("input",{type:"number",value:v,onChange:S=>y(S.target.value),required:!0,className:"input",placeholder:"e.g., 150",min:"0"})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",onClick:t,disabled:n,className:"btn-secondary",children:s("cancel")}),h.jsx("button",{type:"submit",disabled:n||!p||!v,className:"btn-primary",children:s(n?"saving":"save")})]})]})]})},M5=({data:e,onSave:t,onClose:n,isProcessing:r,stores:o,profile:s})=>{var z;const{t:u}=Oe(),[c,f]=R.useState((e==null?void 0:e.name)||""),[p,m]=R.useState((e==null?void 0:e.currentStore)||""),[v,y]=R.useState(((z=o.find(O=>O.name===((e==null?void 0:e.currentStore)||"")))==null?void 0:z.areaManager)||""),[w,_]=R.useState(new Date().getFullYear()),[S,C]=R.useState(new Date().getMonth()+1),[N,E]=R.useState(0),[x,j]=R.useState(0),k=(s==null?void 0:s.role)==="area_manager",A=R.useMemo(()=>v?o.filter(O=>O.areaManager===v):o,[v,o]);R.useEffect(()=>{var ee,H,te,V;const O=((H=(ee=e==null?void 0:e.targets)==null?void 0:ee[w])==null?void 0:H[S])||0,M=((V=(te=e==null?void 0:e.duvetTargets)==null?void 0:te[w])==null?void 0:V[S])||0;E(O),j(M)},[e,w,S]);const T=O=>{var ee;O.preventDefault();const M=((ee=String(c).match(/^\d+/))==null?void 0:ee[0])||(e==null?void 0:e.employeeId)||null;t({id:e==null?void 0:e.id,name:c,store:p,employeeId:M,targetUpdate:{year:w,month:S,salesTarget:N,duvetTarget:x}})},L=[...new Set(o.map(O=>O.areaManager))],F=[new Date().getFullYear()-1,new Date().getFullYear(),new Date().getFullYear()+1],q=Array.from({length:12},(O,M)=>M+1);return h.jsxs("div",{className:"modal-content",children:[h.jsx("h2",{className:"modal-title",children:u(e?"edit_employee":"add_employee")}),h.jsxs("form",{onSubmit:T,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("employee_name")}),h.jsx("input",{type:"text",value:c,onChange:O=>f(O.target.value),required:!0,className:"input",disabled:k})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("area_manager")}),h.jsxs("select",{value:v,onChange:O=>{y(O.target.value),m("")},required:!0,className:"input",disabled:k,children:[h.jsx("option",{value:"",children:u("select_area")}),L.map(O=>h.jsx("option",{value:O,children:O},O))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("store")}),h.jsxs("select",{value:p,onChange:O=>m(O.target.value),required:!0,className:"input",disabled:!v||k,children:[h.jsx("option",{value:"",children:u("select_store")}),A.map(O=>h.jsx("option",{value:O.name,children:O.name},O.id))]})]}),h.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[h.jsx("h3",{className:"font-semibold",children:u("monthly_targets")}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("select",{value:w,onChange:O=>_(Number(O.target.value)),className:"input",children:[h.jsx("option",{value:"",children:u("year")}),F.map(O=>h.jsx("option",{value:O,children:O},O))]}),h.jsxs("select",{value:S,onChange:O=>C(Number(O.target.value)),className:"input",children:[h.jsx("option",{value:"",children:u("month")}),q.map(O=>h.jsx("option",{value:O,children:O},O))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("sales_target")}),h.jsx("input",{type:"number",value:N,onChange:O=>E(Number(O.target.value)),className:"input"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("duvet_unit_target")}),h.jsx("input",{type:"number",value:x,onChange:O=>j(Number(O.target.value)),className:"input"})]})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",onClick:n,disabled:r,className:"btn-secondary",children:u("cancel")}),h.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:u(r?"saving":"save")})]})]})]})},O5=({data:e,onSave:t,onClose:n,isProcessing:r,profile:o})=>{const{t:s}=Oe(),[u,c]=R.useState((e==null?void 0:e.name)||""),[f,p]=R.useState((e==null?void 0:e.areaManager)||""),[m,v]=R.useState(new Date().getFullYear()),[y,w]=R.useState(new Date().getMonth()+1),[_,S]=R.useState(0),C=(o==null?void 0:o.role)==="admin"||(o==null?void 0:o.role)==="general_manager";R.useEffect(()=>{var j,k;if(e){c(e.name||""),p(e.areaManager||"");const A=((k=(j=e.targets)==null?void 0:j[m])==null?void 0:k[y])||0;S(A)}else c(""),p(""),S(0)},[e,m,y]);const N=j=>{j.preventDefault(),t({id:e==null?void 0:e.id,name:u,areaManager:f,targetUpdate:{year:m,month:y,salesTarget:_}})},E=[new Date().getFullYear()-1,new Date().getFullYear(),new Date().getFullYear()+1],x=Array.from({length:12},(j,k)=>k+1);return h.jsxs("div",{className:"modal-content",children:[h.jsx("h2",{className:"modal-title",children:s(e?"edit_store":"add_store")}),h.jsxs("form",{onSubmit:N,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("store_name")}),h.jsx("input",{type:"text",value:u,onChange:j=>c(j.target.value),required:!0,className:"input",disabled:!C})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("area_manager")}),h.jsx("input",{type:"text",value:f,onChange:j=>p(j.target.value),required:!0,className:"input",placeholder:"e.g., Central Region",disabled:!C})]}),h.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[h.jsx("h3",{className:"font-semibold",children:s("monthly_sales_target")}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("select",{value:m,onChange:j=>v(Number(j.target.value)),className:"input",children:E.map(j=>h.jsx("option",{value:j,children:j},j))}),h.jsx("select",{value:y,onChange:j=>w(Number(j.target.value)),className:"input",children:x.map(j=>h.jsx("option",{value:j,children:j},j))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("sales_target")}),h.jsx("input",{type:"number",value:_,onChange:j=>S(Number(j.target.value)),className:"input"})]})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",onClick:n,disabled:r,className:"btn-secondary",children:s("cancel")}),h.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:s(r?"saving":"save")})]})]})]})},L5=({data:e,onSave:t,onClose:n,isProcessing:r,stores:o})=>{const{t:s}=Oe(),[u,c]=R.useState(new Date().toISOString().split("T")[0]),[f,p]=R.useState(e.store||""),[m,v]=R.useState(""),[y,w]=R.useState(""),[_,S]=R.useState(""),C=N=>{var j;N.preventDefault();const E=e.employee&&((j=String(e.employee).match(/^\d+/))==null?void 0:j[0])||null,x={date:u,store:f,employeeId:E,totalSales:Number(m),transactionCount:Number(_)};e.mode==="store"?x.visitors=Number(y):x.employee=e.employee,t(x)};return h.jsxs("div",{className:"modal-content",children:[h.jsx("h2",{className:"modal-title",children:s("add_daily_kpis")}),h.jsxs("form",{onSubmit:C,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("date")}),h.jsx("input",{type:"date",value:u,onChange:N=>c(N.target.value),required:!0,className:"input"})]}),e.mode==="employee"?h.jsxs("p",{children:["For: ",h.jsx("strong",{children:e.employee})]}):h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("store")}),h.jsxs("select",{value:f,onChange:N=>p(N.target.value),required:!0,className:"input",children:[h.jsx("option",{value:"",children:s("select_store")}),o.map(N=>h.jsx("option",{value:N.name,children:N.name},N.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("total_sales")}),h.jsx("input",{type:"number",value:m,onChange:N=>v(N.target.value),required:!0,className:"input"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("number_of_bills")}),h.jsx("input",{type:"number",value:_,onChange:N=>S(N.target.value),required:!0,className:"input"})]}),e.mode==="store"&&h.jsxs("div",{children:[h.jsx("label",{className:"label",children:s("total_visitors")}),h.jsx("input",{type:"number",value:y,onChange:N=>w(N.target.value),required:!0,className:"input"})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:s("cancel")}),h.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:s(r?"saving":"save_kpis")})]})]})]})},P5=({onSave:e,onClose:t,isProcessing:n,stores:r})=>{const{t:o}=Oe(),[s,u]=R.useState(new Date().getFullYear()),[c,f]=R.useState(new Date().getMonth()+1),[p,m]=R.useState(""),[v,y]=R.useState(""),[w,_]=R.useState(""),[S,C]=R.useState(""),N=j=>{j.preventDefault();const k=Number(v),A=Number(S),T=Number(w);e({year:s,month:c,store:p,totalSales:k,visitors:T,transactionCount:A,atv:A>0?k/A:0,visitorRate:T>0?A/T*100:0})},E=[new Date().getFullYear()-2,new Date().getFullYear()-1,new Date().getFullYear()],x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return h.jsxs("div",{className:"modal-content",children:[h.jsx("h2",{className:"modal-title",children:o("add_historical_monthly_data")}),h.jsxs("form",{onSubmit:N,className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("year")}),h.jsx("select",{value:s,onChange:j=>u(Number(j.target.value)),className:"input",children:E.map(j=>h.jsx("option",{value:j,children:j},j))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("month")}),h.jsx("select",{value:c,onChange:j=>f(Number(j.target.value)),className:"input",children:x.map((j,k)=>h.jsx("option",{value:k+1,children:j},k+1))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("store")}),h.jsxs("select",{value:p,onChange:j=>m(j.target.value),required:!0,className:"input",children:[h.jsx("option",{value:"",children:o("select_store")}),r.map(j=>h.jsx("option",{value:j.name,children:j.name},j.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("total_monthly_sales")}),h.jsx("input",{type:"number",value:v,onChange:j=>y(j.target.value),required:!0,className:"input"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("total_monthly_bills")}),h.jsx("input",{type:"number",value:S,onChange:j=>C(j.target.value),required:!0,className:"input"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("total_monthly_visitors")}),h.jsx("input",{type:"number",value:w,onChange:j=>_(j.target.value),required:!0,className:"input"})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:o("cancel")}),h.jsx("button",{type:"submit",disabled:n,className:"btn-primary",children:o(n?"saving":"save_data")})]})]})]})},F5=({data:e,onSave:t,onClose:n,isProcessing:r,stores:o,allEmployees:s})=>{const{t:u}=Oe(),[c,f]=R.useState(e.role||"employee"),[p,m]=R.useState(""),[v,y]=R.useState("");R.useEffect(()=>{var E;if(e.status==="pending"&&e.employeeId){const x=s.find(j=>j.employeeId===e.employeeId);if(x!=null&&x.currentStore){const j=x.currentStore;y(j);const k=o.find(A=>A.name===j);k!=null&&k.areaManager&&m(k.areaManager)}}else y(e.store||""),m(e.areaManager||((E=o.find(x=>x.name===e.store))==null?void 0:E.areaManager)||"")},[e,s,o]);const w=R.useMemo(()=>[...new Set(o.map(E=>E.areaManager))],[o]),_=R.useMemo(()=>p?o.filter(E=>E.areaManager===p):o,[p,o]),S=["admin","general_manager","area_manager","store_manager","employee"],C=E=>{E.preventDefault();const x={role:c,status:"active"};c==="area_manager"?(x.areaManager=p,x.store=""):(c==="store_manager"||c==="employee")&&(x.areaManager=p,x.store=v),t(e.id,x)},N=e.status==="pending"?u("approve_and_save"):u("save_changes");return h.jsxs("div",{className:"modal-content",children:[h.jsxs("h2",{className:"modal-title",children:[u("edit_user"),": ",e.name]}),h.jsxs("p",{className:"text-sm text-gray-500 -mt-2 mb-4",children:[e.email," (",u("employee_id"),": ",e.employeeId,")"]}),h.jsxs("form",{onSubmit:C,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("role")}),h.jsx("select",{value:c,onChange:E=>f(E.target.value),className:"input",children:S.map(E=>h.jsx("option",{value:E,children:E.replace(/_/g," ")},E))})]}),(c==="area_manager"||c==="store_manager"||c==="employee")&&h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("area_manager")}),h.jsxs("select",{value:p,onChange:E=>{m(E.target.value),y("")},required:!0,className:"input",children:[h.jsx("option",{value:"",children:u("select_area")}),w.map(E=>h.jsx("option",{value:E,children:E},E))]})]}),(c==="store_manager"||c==="employee")&&h.jsxs("div",{children:[h.jsx("label",{className:"label",children:u("store")}),h.jsxs("select",{value:v,onChange:E=>y(E.target.value),required:!0,disabled:!p,className:"input",children:[h.jsx("option",{value:"",children:u("select_store")}),_.map(E=>h.jsx("option",{value:E.name,children:E.name},E.id))]})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:u("cancel")}),h.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?u("saving"):N})]})]})]})},U5=({message:e,onClose:t})=>{const{t:n}=Oe();return h.jsx("div",{className:"modal-backdrop",children:h.jsxs("div",{className:"modal-content text-center",children:[h.jsx("h3",{className:"modal-title",children:e.type==="confirm"?n("confirmation"):n("alert")}),h.jsx("p",{children:e.text}),h.jsxs("div",{className:"modal-actions justify-center",children:[e.type==="confirm"&&e.onConfirm&&h.jsx("button",{onClick:()=>{e.onConfirm(),t()},className:"btn-danger",children:n("confirm")}),h.jsx("button",{onClick:t,className:"btn-secondary",children:n("close")})]})]})})},$5=({data:e,onSave:t,onClose:n,isProcessing:r})=>{const{t:o}=Oe(),[s,u]=R.useState(""),[c,f]=R.useState(""),p=m=>{m.preventDefault(),!(!s.trim()||!c.trim())&&t({recipientId:e.employeeId||"",recipientName:e.name,title:s,message:c})};return h.jsxs("div",{className:"modal-content",children:[h.jsx("h2",{className:"modal-title",children:o("send_task_alert_to",{name:e.name})}),h.jsxs("form",{onSubmit:p,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("title")}),h.jsx("input",{type:"text",value:s,onChange:m=>u(m.target.value),required:!0,className:"input",placeholder:"e.g., Follow up on VIP customer"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("message_instructions")}),h.jsx("textarea",{value:c,onChange:m=>f(m.target.value),required:!0,className:"input h-32",placeholder:"Provide details about the task..."})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",onClick:n,disabled:r,className:"btn-secondary",children:o("cancel")}),h.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:o(r?"sending":"send_task")})]})]})]})},Up=({title:e,children:t,onClose:n,isLoading:r})=>{const{t:o}=Oe();return h.jsxs("div",{className:"modal-content max-w-2xl",children:[h.jsxs("h2",{className:"modal-title flex items-center gap-2",children:[h.jsx(Di,{})," ",e]}),h.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:r?h.jsxs("div",{className:"text-center p-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),h.jsx("p",{className:"mt-2 text-zinc-600",children:o("generating_insights")})]}):h.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:String(t).replace(/\n/g,"<br />").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")}})}),h.jsx("div",{className:"modal-actions",children:h.jsx("button",{onClick:n,className:"btn-secondary",children:o("close")})})]})},V5=({data:e,onClose:t})=>{const{t:n,locale:r}=Oe(),[o,s]=R.useState(""),[u,c]=R.useState(!0);return R.useEffect(()=>{(async()=>{const p=r==="ar"?"Provide the response in Arabic.":"",m=`Generate a short, motivational coaching message for a retail employee named ${e.name}. Their current performance data is provided. Focus on one key area for improvement and provide two practical tips. Keep it positive and encouraging. ${p} Data: ${JSON.stringify(e)}`;try{const v=await li({model:"gemini-2.5-flash",contents:[{parts:[{text:m}]}]});s(v)}catch(v){s(`Error: ${v.message}`)}finally{c(!1)}})()},[e,r]),h.jsx(Up,{title:n("coaching_for",{name:e.name}),onClose:t,isLoading:u,children:o})},B5=({salesData:e,onClose:t})=>{const{t:n,locale:r}=Oe(),[o,s]=R.useState(""),[u,c]=R.useState(!0);return R.useEffect(()=>{(async()=>{const m=`Based on the following daily sales data, provide a brief trend analysis and a simple sales forecast for the next 7 days. ${r==="ar"?"Provide the response in Arabic.":""} Data: ${JSON.stringify(e.slice(-30))}`;try{const v=await li({model:"gemini-2.5-flash",contents:[{parts:[{text:m}]}]});s(v)}catch(v){s(`Error: ${v.message}`)}finally{c(!1)}})()},[e,r]),h.jsx(Up,{title:n("sales_forecast_analysis"),onClose:t,isLoading:u,children:o})},z5=({product:e,onClose:t})=>{const{t:n,locale:r}=Oe(),[o,s]=R.useState(""),[u,c]=R.useState(!0);return R.useEffect(()=>{(async()=>{const m=`Create a short, compelling sales pitch for a retail salesperson to sell the following product. Focus on 2 key benefits. ${r==="ar"?"Provide the response in Arabic.":""} Product Name: ${e.name}, Category: ${qd(e)}, Price: ${e.price} SAR.`;try{const v=await li({model:"gemini-2.5-flash",contents:[{parts:[{text:m}]}]});s(v)}catch(v){s(`Error: ${v.message}`)}finally{c(!1)}})()},[e,r]),h.jsx(Up,{title:n("sales_pitch_for",{name:e.name}),onClose:t,isLoading:u,children:o})},q5=({query:e,fullData:t,onClose:n})=>{const{t:r,locale:o}=Oe(),[s,u]=R.useState(""),[c,f]=R.useState(!0);return R.useEffect(()=>{(async()=>{const m=o==="ar"?"All responses must be in Arabic.":"",v=`--- DATA SNAPSHOT ---
${JSON.stringify(t,null,2)}
--- END DATA ---`,y=`You are an expert retail analyst. Your answers must be based strictly on the provided DATA SNAPSHOT. Provide concise, actionable insights in response to the user's query. Use markdown for formatting. ${m}`,w=`User Query: "${e}"`;try{const _=await li({model:"gemini-2.5-flash",contents:[{role:"user",parts:[{text:`${v}

${w}`}]}],config:{systemInstruction:y}});u(_)}catch(_){u(`Sorry, an error occurred: ${_.message}`)}finally{f(!1)}})()},[e,t,o]),h.jsx(Up,{title:r("results_for",{query:e}),onClose:n,isLoading:c,children:s})},K5=({data:e,allItems:t,type:n,onClose:r})=>{const{t:o,locale:s}=Oe(),[u,c]=R.useState(""),[f,p]=R.useState(""),[m,v]=R.useState(!1),y=R.useMemo(()=>t.filter(_=>_.id!==e.id),[t,e.id]),w=async()=>{if(!u)return;const _=t.find(N=>N.id===u);if(!_)return;v(!0),p("");const C=`You are a retail performance analyst. Provide a detailed comparison between these two ${n}s. Analyze their key metrics, identify the main differences in performance, and suggest reasons for these differences. Conclude with a specific recommendation for each. Use markdown formatting. ${s==="ar"?"Provide the response in Arabic.":""}
        
        **${n==="store"?"Store 1":"Employee 1"}:**
        ${JSON.stringify(e,null,2)}

        **${n==="store"?"Store 2":"Employee 2"}:**
        ${JSON.stringify(_,null,2)}`;try{const N=await li({model:"gemini-2.5-flash",contents:[{parts:[{text:C}]}]});p(N)}catch(N){p(`Error generating comparison: ${N.message}`)}finally{v(!1)}};return h.jsxs("div",{className:"modal-content max-w-2xl",children:[h.jsxs("h2",{className:"modal-title flex items-center gap-2",children:[h.jsx(Di,{})," ",o("ai_comparison")]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("comparing")}),h.jsx("p",{className:"font-bold text-lg",children:e.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"label",children:o("with")}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("select",{value:u,onChange:_=>c(_.target.value),className:"input flex-grow",children:[h.jsx("option",{value:"",children:o(n==="store"?"select_store":"add_employee")}),y.map(_=>h.jsx("option",{value:_.id,children:_.name},_.id))]}),h.jsx("button",{onClick:w,disabled:!u||m,className:"btn-primary",children:o("compare")})]})]}),(m||f)&&h.jsx("div",{className:"mt-4 border-t pt-4",children:m?h.jsxs("div",{className:"text-center p-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),h.jsx("p",{className:"mt-2 text-zinc-600",children:o("generating_comparison")})]}):h.jsx("div",{className:"max-h-[40vh] overflow-y-auto pr-2 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:f.replace(/\n/g,"<br />").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})})]}),h.jsx("div",{className:"modal-actions",children:h.jsx("button",{onClick:r,className:"btn-secondary",children:o("close")})})]})},H5=({data:e,onClose:t})=>{const{t:n,locale:r}=Oe(),{store:o,allMetrics:s}=e,[u,c]=R.useState(null),[f,p]=R.useState(null),[m,v]=R.useState(!0);R.useEffect(()=>{(async()=>{v(!0),p(null);try{const _=await j6(o,s,r);c(_)}catch(_){p(_.message||"An unknown error occurred during prediction."),console.error(_)}finally{v(!1)}})()},[o,s,r]);const y=w=>w>60?"text-red-600":w>30?"text-yellow-600":"text-green-600";return h.jsxs("div",{className:"modal-content max-w-lg",children:[h.jsxs("h2",{className:"modal-title flex items-center gap-2",children:[h.jsx(Di,{})," ",n("predictive_analysis_for")," ",o.name]}),m?h.jsxs("div",{className:"text-center p-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),h.jsx("p",{className:"mt-2 text-zinc-600",children:n("generating_prediction")})]}):f?h.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:[h.jsx("h4",{className:"font-bold",children:n("error")}),h.jsx("p",{children:f})]}):u&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[h.jsx("p",{className:"text-sm font-semibold text-zinc-500",children:n("risk_score_target")}),h.jsxs("p",{className:`text-6xl font-bold ${y(u.riskScore)}`,children:[u.riskScore,h.jsx("span",{className:"text-2xl",children:"%"})]})]}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between p-2 rounded bg-gray-50",children:[h.jsx("span",{className:"font-semibold text-zinc-600",children:n("ai_predicted_sales")}),h.jsx("span",{className:"font-bold",children:u.predictedSales.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]}),h.jsxs("div",{className:"flex justify-between p-2 rounded bg-gray-50",children:[h.jsx("span",{className:"font-semibold text-zinc-600",children:n("current_month_target")}),h.jsx("span",{className:"font-bold",children:o.effectiveTarget.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-semibold text-zinc-600 mb-1",children:n("ai_justification")}),h.jsx("p",{className:"p-3 bg-blue-50 text-blue-800 rounded-lg text-sm",children:u.justification})]})]}),h.jsx("div",{className:"modal-actions",children:h.jsx("button",{onClick:t,className:"btn-secondary",children:n("close")})})]})},G5=({data:e,onClose:t})=>{var u;const{t:n}=Oe(),{title:r,kpi:o,data:s}=e;return o==="totalSales"&&((u=s[0])!=null&&u.areaManager)?h.jsxs("div",{className:"modal-content max-w-2xl",children:[h.jsxs("h2",{className:"modal-title",children:[r," Breakdown"]}),h.jsx("div",{className:"h-96",children:h.jsx(Zn,{title:n("sales_by_store"),children:h.jsx(gs,{data:s,dataKey:"totalSales",nameKey:"name",format:c=>c.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})})}),h.jsx("div",{className:"modal-actions",children:h.jsx("button",{onClick:t,className:"btn-secondary",children:n("close")})})]}):h.jsxs("div",{className:"modal-content",children:[h.jsx("h2",{className:"modal-title",children:r}),h.jsx("p",{children:"Detailed breakdown for this KPI is not yet available."}),h.jsx("div",{className:"modal-actions",children:h.jsx("button",{onClick:t,className:"btn-secondary",children:n("close")})})]})},W5=({data:e,onClose:t})=>{const{product:n,allData:r,stores:o}=e,[s,u]=R.useState("All"),[c,f]=R.useState(""),[p,m]=R.useState(!1),v=E=>String(E??"").trim().toUpperCase();R.useEffect(()=>{console.log("✅ Stage 4 Completed — Ready for Next Step")},[]);const y=R.useMemo(()=>{const E=new Set(o.filter(k=>s==="All"||k.name===s).map(k=>k.name)),x=v(n.alias),j=v(n.name);return r.filter(k=>{if(!k||!E.has(k["Outlet Name"]))return!1;const A=v(k["Item Alias"]),T=v(k["Item Name"]);return A===x||T===j})},[r,n.alias,n.name,o,s]),w=R.useMemo(()=>{var j,k,A,T,L;const E=Array.from({length:12},(F,q)=>({name:new Date(0,q).toLocaleString("en-US",{month:"short"}),Sales:0,Target:0})),x=((L=(T=(A=(k=(j=y[0])==null?void 0:j["Bill Dt."])==null?void 0:k.toDate)==null?void 0:A.call(k))==null?void 0:T.getUTCFullYear)==null?void 0:L.call(T))??new Date().getUTCFullYear();return y.forEach(F=>{const q=F["Bill Dt."].toDate();if(q.getUTCFullYear()!==x)return;const z=Number(F["Sold Qty"]||0)*Number(F["Item Rate"]||0);E[q.getUTCMonth()].Sales+=z}),E},[y]),_=R.useMemo(()=>{const E=y.reduce((j,k)=>j+Number(k["Sold Qty"]||0),0),x=y.reduce((j,k)=>j+Number(k["Sold Qty"]||0)*Number(k["Item Rate"]||0),0);return{qty:E,value:x}},[y]),S=R.useMemo(()=>{const E=new Map,x=new Map;r.forEach(F=>{var P,X;const q=(X=(P=F["Bill Dt."])==null?void 0:P.toDate)==null?void 0:X.call(P);if(!q)return;const z=(F.bill_no||F.Bill_No||F.Invoice||F.Transaction_ID||F["Bill Number"]||F["Invoice No"]||"").toString(),O=z?String(z):`${q.getUTCFullYear()}-${q.getUTCMonth()}-${q.getUTCDate()}|${F["Outlet Name"]}|${F["SalesMan Name"]||""}`;z||console.warn("⚠ Missing Bill_No, using fallback mode");const M=String(F["Item Alias"]||F.alias||"").trim(),ee=String(F["Item Name"]||"").trim(),H=v(M),te=v(ee),V=H||te;if(V){x.has(V)||x.set(V,{alias:M,name:ee});const B=E.get(O)||[];B.push({key:V,aliasRaw:M,nameRaw:ee}),E.set(O,B)}});const j=v(n.alias),k=v(n.name),A=new Map;let T=0;return E.forEach(F=>{const q=Array.from(new Set(F.map(O=>O.key)));(q.includes(j)||q.includes(k))&&(T++,q.forEach(O=>{O===j||O===k||A.set(O,(A.get(O)||0)+1)}))}),{top:Array.from(A.entries()).map(([F,q])=>{var z,O;return{key:F,count:q,alias:((z=x.get(F))==null?void 0:z.alias)||"",name:((O=x.get(F))==null?void 0:O.name)||""}}).sort((F,q)=>q.count-F.count).slice(0,3),invoicesWithTarget:T}},[r,n]),C=async()=>{m(!0);try{const{top:E,invoicesWithTarget:x}=S;if(!x||x<3||E.length===0)f("لا توجد بيانات كافية لإصدار توصية دقيقة.");else{const j=E.map(L=>({key:L.key,count:L.count,pct:Math.round(L.count/x*100)})),k=`يعتمد هذا التحليل على bill_no فقط. عدد الفواتير التي ظهر فيها المنتج: ${x}.
أفضل ارتباطات: ${j.map(L=>`${L.key}: ${L.count} (${L.pct}%)`).join(", ")}`,A=`أنت نظام توصية يعتمد بالكامل على رقم الفاتورة bill_no.
المنتج: ${n.name} (الكود ${n.alias}).
${k}
اكتب 2-3 توصيات عملية ومباشرة بالعربية، مثل: "ينباع عادةً مع X بناءً على بيانات الفواتير"، واذكر النِسَب %. تجنب أي استدلالات لا تعتمد على bill_no.`,T=await li({model:"gemini-2.5-flash",contents:[{parts:[{text:A}]}]});f(T)}}catch(E){f(`تعذر توليد التوصية: ${(E==null?void 0:E.message)||E}`)}finally{m(!1)}},N=()=>{const x=[["Product",n.name],["Code",n.alias],["Unit Price",String(n.price)],[],["Month","Sales Value"],...w.map(T=>[T.name,String(T.Sales)])].map(T=>T.map(L=>`"${String(L).replace(/"/g,'""')}"`).join(",")).join(`
`),j=new Blob([x],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(j),A=document.createElement("a");A.href=k,A.download=`${n.alias}_insights.csv`,A.click(),URL.revokeObjectURL(k)};return h.jsxs("div",{className:"modal-content max-w-3xl",children:[h.jsxs("h2",{className:"modal-title flex items-center gap-2",children:["Product Details — ",n.name]}),h.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 bg-gray-50 p-4 rounded-lg border",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Code"}),h.jsx("div",{className:"font-semibold",children:n.alias})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Unit Price"}),h.jsx("div",{className:"font-semibold",children:n.price.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Total Qty"}),h.jsx("div",{className:"font-semibold",children:_.qty.toLocaleString("en-US")})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-zinc-500",children:"Total Value"}),h.jsx("div",{className:"font-semibold",children:_.value.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"label",children:"Branch"}),h.jsxs("select",{value:s,onChange:E=>u(E.target.value),className:"input w-56",children:[h.jsx("option",{value:"All",children:"All"}),o.map(E=>h.jsx("option",{value:E.name,children:E.name},E.id))]})]}),h.jsx(Zn,{title:"Monthly Trend (This Year)",children:h.jsx(gs,{data:w,dataKey:"Sales",nameKey:"name",format:E=>E.toLocaleString("en-US",{style:"currency",currency:"SAR",maximumFractionDigits:0})})}),h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Sold With (Top 3)"}),h.jsxs("ul",{className:"list-disc ms-5 text-sm text-zinc-700",children:[S.top.length===0&&h.jsx("li",{children:"لا يوجد بيانات كافية"}),S.top.map(E=>h.jsxs("li",{children:[E.alias||E.key," — ",E.name," (",E.count,")"]},E.key))]})]}),h.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200 text-blue-900",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"font-semibold",children:"AI Recommendation"}),h.jsx("button",{onClick:C,className:"btn-primary text-sm",disabled:p,children:p?"Generating...":"Generate"})]}),c&&h.jsx("div",{className:"mt-2 whitespace-pre-wrap text-sm",children:c})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{onClick:N,className:"btn-secondary",children:"📤 Export Insights"})})]}),h.jsx("div",{className:"modal-actions",children:h.jsx("button",{onClick:t,className:"btn-secondary",children:"Close"})})]})},{Timestamp:Zr}=de.firestore,Y5=({icon:e,label:t,name:n,activeTab:r,setActiveTab:o,setIsSidebarOpen:s})=>{const u=r===n,c=()=>{o(n),s(!1)};return h.jsxs("li",{onClick:c,className:`group relative flex items-center p-3 rounded-xl cursor-pointer transition-all duration-300 ${u?"bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold shadow-lg":"text-neutral-600 hover:bg-orange-50 hover:text-orange-600 hover:shadow-md"}`,children:[h.jsxs("div",{className:"relative z-10 flex items-center w-full",children:[h.jsx("div",{className:`p-2 rounded-lg transition-all duration-200 flex-shrink-0 ${u?"bg-white/20":"bg-neutral-100 group-hover:bg-orange-100"}`,children:e}),h.jsx("span",{className:"ms-3 font-medium text-sm whitespace-nowrap",children:t})]}),u&&h.jsx("div",{className:"absolute right-3 w-2 h-2 bg-white rounded-full shadow-sm"})]})},Q5=({notifications:e,onNotificationClick:t})=>{const{t:n}=Oe(),[r,o]=R.useState(!1),s=e.filter(u=>!u.read).length;return h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>o(!r),className:"relative p-2 text-zinc-600 hover:bg-gray-100 rounded-full",children:[h.jsx(W6,{}),s>0&&h.jsx("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white"})]}),r&&h.jsxs("div",{className:"absolute top-full mt-2 end-0 w-80 bg-white rounded-lg shadow-xl border z-10",onMouseLeave:()=>o(!1),children:[h.jsx("div",{className:"p-3 font-semibold text-sm border-b",children:n("notifications")}),e.length===0?h.jsx("p",{className:"p-4 text-sm text-gray-500",children:n("no_notifications")}):h.jsx("ul",{className:"max-h-80 overflow-y-auto",children:e.map(u=>h.jsxs("li",{onClick:()=>t(u.id),className:`p-3 text-sm border-b hover:bg-gray-50 cursor-pointer ${u.read?"":"bg-blue-50"}`,children:[h.jsx("p",{className:"font-semibold",children:n("new_user_registered")}),h.jsx("p",{className:"text-gray-600",children:n("user_awaits_approval",{name:u.userName})})]},u.id))})]})]})},X5=({user:e,profile:t,onLogout:n})=>{const{t:r}=Oe(),[o,s]=R.useState(!1),[u,c]=R.useState({greeting:"",Icon:sI});R.useEffect(()=>{const p=new Date().getHours(),m=p>=4&&p<12?"greeting_morning":"greeting_evening";c({greeting:r(m),Icon:p>=4&&p<12?sI:H6})},[r]);const f=R.useMemo(()=>{var m;if(t!=null&&t.name)return t.name;if(e.displayName)return e.displayName;if(!e.email)return"User";const p=e.email.split("@")[0];return((m=p==null?void 0:p.charAt(0))==null?void 0:m.toUpperCase())+(p==null?void 0:p.slice(1))||"User"},[e,t]);return h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>s(!o),className:"flex items-center gap-2 text-sm text-zinc-700 font-medium greeting-fade-in p-2 rounded-lg hover:bg-gray-100",children:[h.jsx(u.Icon,{}),h.jsxs("span",{children:[u.greeting,", ",f]}),h.jsx(G6,{})]}),o&&h.jsx("div",{className:"absolute top-full mt-2 end-0 w-48 bg-white rounded-lg shadow-xl border z-10",onMouseLeave:()=>s(!1),children:h.jsx("ul",{className:"p-2 text-sm text-gray-700",children:h.jsx("li",{children:h.jsxs("button",{onClick:n,className:"w-full text-start flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-red-600",children:[h.jsx(CA,{})," ",r("logout")]})})})})]})},J5=({user:e,profile:t})=>{var Yt,Eu;const{t:n,locale:r,setLocale:o}=Oe(),[s,u]=R.useState("dashboard"),[c,f]=R.useState(!1),[p,m]=R.useState([]),[v,y]=R.useState([]),[w,_]=R.useState([]),[S,C]=R.useState([]),[N,E]=R.useState([]),[x,j]=R.useState([]),[k,A]=R.useState([]),[T,L]=R.useState([]),[F,q]=R.useState(!0),[z,O]=R.useState({year:new Date().getFullYear(),month:new Date().getMonth(),day:"all"}),[M,ee]=R.useState({areaManager:((t==null?void 0:t.role)==="area_manager"||(t==null?void 0:t.role)==="store_manager")&&t.areaManager||"All",store:((t==null?void 0:t.role)==="store_manager"||(t==null?void 0:t.role)==="employee")&&t.store||"All"}),[H,te]=R.useState(null),[V,P]=R.useState({type:null,data:null}),[X,B]=R.useState({isOpen:!1,text:"",type:"alert"}),[ae,Q]=R.useState(!1),[we,De]=R.useState(!1),[xe,Ve]=R.useState(null),[re,Te]=R.useState([]);R.useEffect(()=>{if(!t)return;const se={stores:m,employees:y,dailyMetrics:_,kingDuvetSales:C,salesTransactions:E,businessRules:j};((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="general_manager")&&(se.users=A);const ie=Object.keys(se);let Ne=0;const Ge=Object.entries(se).map(([wt,Ue])=>Se.collection(wt).onSnapshot(Nt=>{const Et=Nt.docs.map(Nr=>({id:Nr.id,...Nr.data()}));Ue(Et),Ge.length>0&&Ne<ie.length&&(Ne++,Ne===ie.length&&q(!1))},Nt=>{console.error(`Error fetching ${wt}:`,Nt),Ge.length>0&&Ne<ie.length&&(Ne++,Ne===ie.length&&q(!1))}));let Ct=()=>{};return t!=null&&t.employeeId&&(Ct=Se.collection("tasks").where("recipientId","==",t.employeeId).orderBy("createdAt","desc").onSnapshot(Ue=>{const Nt=Ue.docs.map(Et=>({id:Et.id,...Et.data()}));L(Nt)},Ue=>{console.error("Error fetching tasks:",Ue)})),()=>{Ge.forEach(wt=>wt()),Ct()}},[t]),R.useEffect(()=>{if((t==null?void 0:t.role)!=="admin"&&(t==null?void 0:t.role)!=="general_manager")return;const ie=Se.collection("users").where("status","==","pending").onSnapshot(Ne=>{const Ge=[],Ct=new Set;Ne.forEach(wt=>{const Ue=wt.data();Ct.add(Ue.id),re.some(Et=>Et.id===Ue.id)||Ge.push({id:Ue.id,userName:Ue.name,message:`New user "${Ue.name}" is awaiting approval.`,type:"newUser",timestamp:Zr.now(),read:!1})}),Te(wt=>[...Ge,...wt.filter(Ue=>Ct.has(Ue.id))].sort((Ue,Nt)=>Nt.timestamp.toMillis()-Ue.timestamp.toMillis()))});return()=>ie()},[t,re]);const Ze=se=>{Te(ie=>ie.map(Ne=>Ne.id===se?{...Ne,read:!0}:Ne)),u("pendingApprovals")},ft=R.useMemo(()=>{if(H){const se=p.find(ie=>ie.name===H);return{areaManager:(se==null?void 0:se.areaManager)||"All",store:H}}return M},[H,M,p]),Ce=YV({stores:p,employees:v,dailyMetrics:w,kingDuvetSales:S,salesTransactions:N,dateFilter:z,areaStoreFilter:ft,profile:t}),ot=R.useMemo(()=>[...w,...N,...S],[w,N,S]),{handleSmartUpload:Je,uploadResult:st,clearUploadResult:dt}=k6(Se,B,Q,v,p),Dn=R.useCallback((se,ie)=>{De(!0),se(ie),setTimeout(()=>De(!1),50)},[]),zr=async(se,ie)=>{if(!ie.id&&(t==null?void 0:t.role)!=="admin"){B({isOpen:!0,text:"You do not have permission to add new items.",type:"alert"});return}if(se==="employees"&&(t==null?void 0:t.role)!=="admin"&&(t==null?void 0:t.role)!=="area_manager"){B({isOpen:!0,text:"You do not have permission to modify employees.",type:"alert"});return}if(se==="stores"&&(t==null?void 0:t.role)!=="admin"&&(t==null?void 0:t.role)!=="general_manager"){B({isOpen:!0,text:"You do not have permission to modify stores.",type:"alert"});return}Q(!0);try{const Ge=ie.id||ie.name.replace(/\s+/g,"_"),Ct=Se.collection(se).doc(Ge),wt={name:ie.name};if("store"in ie&&(wt.currentStore=ie.store),"areaManager"in ie&&(wt.areaManager=ie.areaManager),await Ct.set(wt,{merge:!0}),ie.targetUpdate){const{year:Ue,month:Nt,salesTarget:Et,duvetTarget:Nr}=ie.targetUpdate,lr={};Et!==void 0&&(lr[`targets.${Ue}.${Nt}`]=Et),Nr!==void 0&&(lr[`duvetTargets.${Ue}.${Nt}`]=Nr),Object.keys(lr).length>0&&await Ct.update(lr)}B({isOpen:!0,text:n("save_success",{item:n(se.slice(0,-1))}),type:"alert"})}catch(Ge){B({isOpen:!0,text:`${n("error")}: ${Ge.message}`,type:"alert"})}finally{Q(!1),P({type:null})}},Sr=(se,ie,Ne)=>{if((t==null?void 0:t.role)!=="admin"){B({isOpen:!0,text:"You do not have permission to delete items.",type:"alert"});return}B({isOpen:!0,text:n("confirm_delete",{name:Ne}),type:"confirm",onConfirm:async()=>{Q(!0);try{await Se.collection(se).doc(ie).delete(),B({isOpen:!0,text:n("delete_success",{name:Ne}),type:"alert"})}catch(Ge){B({isOpen:!0,text:`${n("error")}: ${Ge.message}`,type:"alert"})}finally{Q(!1)}}})},Bs=async se=>{Q(!0);try{const ie=new Date(se.date),Ne=Zr.fromDate(ie);await Se.collection("dailyMetrics").add({...se,date:Ne}),B({isOpen:!0,text:n("daily_metric_success"),type:"alert"})}catch(ie){B({isOpen:!0,text:`${n("error")}: ${ie.message}`,type:"alert"})}finally{Q(!1),P({type:null})}},ve=async se=>{Q(!0);try{const{date:ie,store:Ne,visitors:Ge}=se,Ct=Zr.fromDate(new Date(ie)),wt=`${ie}_${Ne.replace(/\s+/g,"-")}`;await Se.collection("dailyMetrics").doc(wt).set({date:Ct,store:Ne,visitors:Ge},{merge:!0}),B({isOpen:!0,text:n("add_visitors_success"),type:"alert"})}catch(ie){B({isOpen:!0,text:`${n("error")}: ${ie.message}`,type:"alert"})}finally{Q(!1),P({type:null})}},Fe=async se=>{Q(!0);try{const{year:ie,month:Ne,store:Ge,totalSales:Ct,visitors:wt,transactionCount:Ue,atv:Nt,visitorRate:Et}=se,Nr=new Date(ie,Ne,0).getDate(),lr=`${ie}-${String(Ne).padStart(2,"0")}-${String(Nr).padStart(2,"0")}`,Li=new Date(lr),hi=Zr.fromDate(Li);await Se.collection("dailyMetrics").add({date:hi,store:Ge,totalSales:Ct,visitors:wt,transactionCount:Ue,atv:Nt,visitorRate:Et,isMonthlySummary:!0}),B({isOpen:!0,text:n("monthly_metric_success"),type:"alert"})}catch(ie){B({isOpen:!0,text:`${n("error")}: ${ie.message}`,type:"alert"})}finally{Q(!1),P({type:null})}},oe=()=>{B({isOpen:!0,text:n("confirm_delete_all"),type:"confirm",onConfirm:async()=>{Q(!0);const se=["dailyMetrics","kingDuvetSales","salesTransactions","employees","stores","businessRules"];try{for(const ie of se){const Ne=await Se.collection(ie).get(),Ge=Se.batch();Ne.docs.forEach(Ct=>Ge.delete(Ct.ref)),await Ge.commit()}B({isOpen:!0,text:n("delete_all_success"),type:"alert"})}catch(ie){B({isOpen:!0,text:`${n("error_deleting_data")}: ${ie.message}`,type:"alert"})}finally{Q(!1)}}})},ye=async(se,ie,Ne)=>{const Ge=new Date(ie,Ne).toLocaleString(r,{month:"long"}),wt=n(se==="visitors"?"confirm_delete_visitors_data":se==="sales"?"confirm_delete_sales_data":"confirm_delete_products_data",{month:Ge,year:ie.toString()});B({isOpen:!0,text:wt,type:"confirm",onConfirm:async()=>{Q(!0);try{const Ue=Zr.fromDate(new Date(ie,Ne,1)),Nt=Zr.fromDate(new Date(ie,Ne+1,0,23,59,59)),Et=Se.batch();if(se==="visitors")(await Se.collection("dailyMetrics").where("date",">=",Ue).where("date","<=",Nt).get()).forEach(hi=>{Et.update(hi.ref,{visitors:de.firestore.FieldValue.delete()})});else if(se==="sales")(await Se.collection("dailyMetrics").where("date",">=",Ue).where("date","<=",Nt).get()).forEach(cr=>{Et.update(cr.ref,{totalSales:de.firestore.FieldValue.delete(),transactionCount:de.firestore.FieldValue.delete(),employee:de.firestore.FieldValue.delete(),employeeId:de.firestore.FieldValue.delete()})}),(await Se.collection("salesTransactions").where("Bill Dt.",">=",Ue).where("Bill Dt.","<=",Nt).get()).forEach(cr=>Et.delete(cr.ref)),(await Se.collection("kingDuvetSales").where("Bill Dt.",">=",Ue).where("Bill Dt.","<=",Nt).get()).forEach(cr=>Et.delete(cr.ref));else if(se==="products"){const lr=Zr.fromDate(new Date(ie,Ne,1)),Li=Zr.fromDate(new Date(ie,Ne+1,0,23,59,59)),hi=async At=>{const Pi=await Se.collection(At).where("Bill Dt.",">=",lr).where("Bill Dt.","<=",Li).get();console.log(`[SelectiveDelete] ${At} matched:`,Pi.size);let zs=0,cr=Se.batch();for(const Xc of Pi.docs)cr.delete(Xc.ref),zs++,zs%400===0&&(await cr.commit(),console.log(`[SelectiveDelete] ${At} committed 400 deletes`),cr=Se.batch());await cr.commit(),console.log(`[SelectiveDelete] ${At} final commit; total deleted: ${zs}`)};await hi("salesTransactions"),await hi("kingDuvetSales")}await Et.commit();const Nr=n("delete_success_for_period",{dataType:n(se),month:Ge,year:ie.toString()});B({isOpen:!0,text:Nr,type:"alert"})}catch(Ue){B({isOpen:!0,text:`${n("error")}: ${Ue.message}`,type:"alert"})}finally{Q(!1)}}})},je=async se=>{if(se.trim()){Q(!0);try{await Se.collection("businessRules").add({rule:se}),B({isOpen:!0,text:n("rule_saved_success"),type:"alert"})}catch(ie){B({isOpen:!0,text:`${n("error")}: ${ie.message}`,type:"alert"})}finally{Q(!1)}}},sn=async(se,ie)=>{Q(!0);try{await Se.collection("users").doc(se).update(ie),B({isOpen:!0,text:n("user_updated_success"),type:"alert"})}catch(Ne){B({isOpen:!0,text:`${n("error")}: ${Ne.message}`,type:"alert"})}finally{Q(!1),P({type:null})}},an=async se=>{if(!(!e||!t)){Q(!0);try{const ie={...se,senderId:e.uid,senderName:t.name,status:"pending",createdAt:Zr.now()};await Se.collection("tasks").add(ie),B({isOpen:!0,text:`Task sent to ${se.recipientName}.`,type:"alert"})}catch(ie){B({isOpen:!0,text:`${n("error")}: ${ie.message}`,type:"alert"})}finally{Q(!1),P({type:null})}}},Oi=async(se,ie)=>{try{const Ne=Se.collection("tasks").doc(se),Ge={status:ie};ie==="completed"&&(Ge.completedAt=Zr.now()),await Ne.update(Ge)}catch(Ne){B({isOpen:!0,text:`Error updating task: ${Ne.message}`,type:"alert"})}},_r=async()=>{await Sc.signOut()},at=R.useMemo(()=>{const se=(t==null?void 0:t.role)||"employee";return[{icon:h.jsx(R6,{}),label:n("dashboard"),name:"dashboard",roles:["admin","general_manager","area_manager","store_manager","employee"]},{icon:h.jsx(U6,{}),label:n("lfl_comparison"),name:"lfl",roles:["admin","general_manager","area_manager","store_manager","employee"]},{icon:h.jsx(M6,{}),label:n("stores"),name:"stores",roles:["admin","general_manager","area_manager","store_manager","employee"]},{icon:h.jsx(O6,{}),label:n("employees"),name:"employees",roles:["admin","general_manager","area_manager","store_manager","employee"]},{icon:h.jsx(V6,{}),label:n("commissions"),name:"commissions",roles:["admin","general_manager","area_manager","store_manager"]},{icon:h.jsx(L6,{}),label:n("products"),name:"products",roles:["admin","general_manager","area_manager","store_manager","employee"]},{icon:h.jsx($6,{}),label:n("duvets"),name:"duvets",roles:["admin","general_manager","area_manager","store_manager","employee"]},{icon:h.jsx(F6,{}),label:n("smart_upload"),name:"uploads",roles:["admin","general_manager","area_manager"]},{icon:h.jsx(B6,{}),label:n("settings"),name:"settings",roles:["admin","general_manager"]},{icon:h.jsx("span",{children:"⏳"}),label:n("pending_approvals"),name:"pendingApprovals",roles:["admin"]},{icon:h.jsx("span",{children:"👥"}),label:n("roles_management"),name:"rolesManagement",roles:["admin"]}].filter(Ne=>Ne.roles.includes(se))},[t,n]);if(R.useEffect(()=>{var se;t&&!at.find(ie=>ie.name===s)&&u(((se=at[0])==null?void 0:se.name)||"dashboard")},[at,s,t]),(t==null?void 0:t.status)==="pending")return h.jsx(C5,{onLogout:_r});const Yc=()=>{if(F)return h.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})});if(s==="stores"&&xe)return h.jsx(j5,{store:xe,allMetrics:w,onBack:()=>Ve(null),allStores:Ce.storeSummary,setModalState:P,allDateData:ot,profile:t});const se={dateFilter:z,setDateFilter:ie=>Dn(O,ie),areaStoreFilter:M,setAreaStoreFilter:ie=>Dn(ee,ie),allStores:p,allDateData:ot,setModalState:P,isRecalculating:we,profile:t};switch(s){case"dashboard":return h.jsx(r5,{...Ce,...se,dashboardPieFilter:H,setDashboardPieFilter:te,tasks:T,onUpdateTaskStatus:Oi,isProcessing:ae});case"stores":return h.jsx(c5,{...Ce,...se,onEdit:ie=>P({type:"store",data:ie}),onDelete:(ie,Ne)=>Sr("stores",ie,Ne),onSelectStore:Ve,allMetrics:w});case"employees":return h.jsx(f5,{...Ce,...se,onEdit:ie=>P({type:"employee",data:ie}),onDelete:(ie,Ne)=>Sr("employees",ie,Ne),dailyMetrics:w,salesTransactions:N,kingDuvetSales:S,allEmployees:v,storeSummary:Ce.storeSummary});case"products":return h.jsx(d5,{...Ce,...se});case"duvets":return h.jsx(p5,{...Ce,...se});case"commissions":return h.jsx(m5,{...Ce,...se});case"uploads":return h.jsx(g5,{onUpload:Je,isProcessing:ae,uploadResult:st,onClearResult:dt});case"lfl":return h.jsx(y5,{allStores:p,allMetrics:w,profile:t});case"settings":return h.jsx(I5,{employeeSummary:Object.values(Ce.employeeSummary).flat(),storeSummary:Ce.storeSummary,kingDuvetSales:S,onAddMonthlyData:()=>P({type:"monthlyStoreMetric"}),onDeleteAllData:oe,onSelectiveDelete:ye,isProcessing:ae,businessRules:x,onSaveRule:je,onDeleteRule:ie=>Sr("businessRules",ie,"this rule"),profile:t});case"pendingApprovals":return h.jsx(A5,{});case"rolesManagement":return h.jsx(D5,{});default:return h.jsxs("div",{className:"text-center p-10 bg-white rounded-lg shadow",children:[h.jsx("h2",{className:"text-2xl font-bold text-zinc-800",children:n("page_not_found_title")}),h.jsx("p",{className:"text-zinc-500 mt-2",children:n("page_not_found_message")})]})}},ci={...Ce,salesTransactions:N,kingDuvetSales:S},qr=r==="ar"?"translate-x-full":"-translate-x-full",Qc=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="general_manager";return h.jsxs("div",{className:"relative md:flex",children:[c&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:()=>f(!1)}),h.jsxs("aside",{className:`w-64 sm:w-72 bg-white border-r border-primary-100 h-screen flex flex-col fixed inset-y-0 ltr:left-0 rtl:right-0 transform ${c?"translate-x-0":qr} md:translate-x-0 transition-all duration-300 ease-in-out z-30 shadow-xl`,children:[h.jsx("div",{className:"p-4 sm:p-6 border-b border-primary-100",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-lg",children:h.jsx("span",{className:"text-white font-bold text-lg",children:"K.A"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold text-neutral-900",children:"COCKPIT"}),h.jsx("p",{className:"text-sm text-neutral-500",children:"Management Dashboard"})]})]})}),h.jsx("nav",{className:"flex-grow overflow-y-auto p-3 sm:p-4",children:h.jsx("ul",{className:"space-y-2",children:at.map(se=>h.jsx(Y5,{...se,activeTab:s,setActiveTab:u,setIsSidebarOpen:f},se.name))})}),h.jsxs("div",{className:"p-3 sm:p-4 border-t border-primary-100 bg-white",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center",children:h.jsx("span",{className:"text-white text-sm font-bold",children:((Eu=(Yt=t==null?void 0:t.name)==null?void 0:Yt.charAt(0))==null?void 0:Eu.toUpperCase())||"U"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-semibold text-neutral-900 truncate",children:(t==null?void 0:t.name)||"User"}),h.jsx("p",{className:"text-xs text-neutral-500 capitalize",children:(t==null?void 0:t.role)||"employee"})]})]}),h.jsx("div",{className:"text-center text-xs text-neutral-400",children:"Developed by K.A Team"})]})]}),h.jsxs("main",{className:"flex-1 p-2 sm:p-4 md:p-6 md:ltr:ml-64 md:rtl:mr-64 lg:ltr:ml-72 lg:rtl:mr-72 bg-neutral-50 min-h-screen",children:[h.jsx("header",{className:"bg-white rounded-2xl shadow-lg border border-neutral-200 p-4 sm:p-6 mb-4 sm:mb-6",children:h.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-3",children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsx("button",{className:"md:hidden p-3 text-neutral-600 hover:bg-neutral-100 rounded-xl transition-all duration-200",onClick:()=>f(!0),children:h.jsx(q6,{})}),h.jsx("div",{className:"min-w-0",children:h.jsx("h2",{className:"text-2xl font-bold text-neutral-900 capitalize truncate max-w-[70vw] sm:max-w-none",children:n(s.replace(/([A-Z])/g," $1").replace("ai","AI"))})})]}),h.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[Qc&&h.jsx(Q5,{notifications:re,onNotificationClick:Ze}),h.jsxs("button",{onClick:()=>o(r==="en"?"ar":"en"),className:"px-3 py-1.5 text-xs font-semibold rounded-full border border-zinc-300 hover:bg-gray-100 text-zinc-700",title:r==="en"?"العربية":"English",children:[r==="en"?"A":"ع"," - ",r==="en"?"ع":"A"]}),h.jsx(X5,{user:e,profile:t,onLogout:_r})]})]})}),Yc()]}),h.jsx(k5,{fullData:ci,currentPage:s,businessRules:x}),V.type&&h.jsxs("div",{className:"modal-backdrop",children:[V.type==="visitors"&&h.jsx(R5,{onSave:ve,onClose:()=>P({type:null}),isProcessing:ae,stores:Ce.storeSummary,profile:t}),V.type==="employee"&&h.jsx(M5,{profile:t,data:V.data,onSave:se=>zr("employees",se),onClose:()=>P({type:null}),isProcessing:ae,stores:p}),V.type==="store"&&h.jsx(O5,{profile:t,data:V.data,onSave:se=>zr("stores",se),onClose:()=>P({type:null}),isProcessing:ae}),V.type==="dailyMetric"&&h.jsx(L5,{data:V.data,onSave:Bs,onClose:()=>P({type:null}),isProcessing:ae,stores:p}),V.type==="monthlyStoreMetric"&&h.jsx(P5,{onSave:Fe,onClose:()=>P({type:null}),isProcessing:ae,stores:p}),V.type==="userEdit"&&h.jsx(F5,{data:V.data,onSave:sn,onClose:()=>P({type:null}),isProcessing:ae,stores:p,allEmployees:v}),V.type==="aiCoaching"&&h.jsx(V5,{data:V.data,onClose:()=>P({type:null})}),V.type==="salesForecast"&&h.jsx(B5,{salesData:V.data,onClose:()=>P({type:null})}),V.type==="salesPitch"&&h.jsx(z5,{product:V.data,onClose:()=>P({type:null})}),V.type==="naturalLanguageSearch"&&h.jsx(q5,{query:V.data.query,fullData:Ce,onClose:()=>P({type:null})}),V.type==="aiComparison"&&h.jsx(K5,{data:V.data.item,allItems:V.data.allItems,type:V.data.type,onClose:()=>P({type:null})}),V.type==="aiPrediction"&&h.jsx(H5,{data:V.data,onClose:()=>P({type:null})}),V.type==="kpiBreakdown"&&h.jsx(G5,{data:V.data,onClose:()=>P({type:null})}),V.type==="productDetails"&&h.jsx(W5,{data:V.data,onClose:()=>P({type:null})}),V.type==="task"&&h.jsx($5,{data:V.data,onSave:an,onClose:()=>P({type:null}),isProcessing:ae})]}),X.isOpen&&h.jsx(U5,{message:X,onClose:()=>B({isOpen:!1,text:"",type:"alert"})})]})},Z5=()=>{const{t:e}=Oe(),[t,n]=R.useState("login"),[r,o]=R.useState(""),[s,u]=R.useState(""),[c,f]=R.useState(""),[p,m]=R.useState(""),[v,y]=R.useState(""),[w,_]=R.useState(""),[S,C]=R.useState(""),[N,E]=R.useState(null),[x,j]=R.useState(null),[k,A]=R.useState(!1),T=async z=>{z.preventDefault(),A(!0),E(null);try{let O=r;if(!r.includes("@")){const H=await Se.collection("users").where("employeeId","==",r).limit(1).get();if(H.empty)throw new Error(e("error_no_user_id"));const te=H.docs[0].data();if(!(te!=null&&te.email))throw new Error(e("error_no_user_email"));O=te.email}await Sc.signInWithEmailAndPassword(O,s)}catch(O){E(O.message||e("error_login_failed"))}finally{A(!1)}},L=async z=>{z.preventDefault(),A(!0),E(null),j(null);try{if(w!==S)throw new Error(e("passwords_do_not_match"));const M=(await Sc.createUserWithEmailAndPassword(v,w)).user;M&&(await M.updateProfile({displayName:c}),await Se.collection("users").doc(M.uid).set({id:M.uid,name:c,employeeId:p,email:v,role:"employee",status:"pending"}),j(e("sign_up_success")),setTimeout(()=>{n("login"),j(null)},2e3))}catch(O){E(O.message)}finally{A(!1)}},F=h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:h.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8",children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"mx-auto mb-4 w-14 h-14 rounded-xl bg-orange-600 text-white flex items-center justify-center font-bold text-xl",children:"K.A"}),h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cockpit"}),h.jsx("p",{className:"mt-1 text-gray-600",children:e("please_sign_in")})]}),h.jsxs("form",{className:"space-y-4",onSubmit:T,children:[h.jsxs("div",{className:"auth-input-container",children:[h.jsx("span",{className:"auth-input-icon",children:h.jsx(uI,{})}),h.jsx("input",{className:"auth-input",type:"text",placeholder:e("email_or_id"),value:r,onChange:z=>o(z.target.value),required:!0})]}),h.jsxs("div",{className:"auth-input-container",children:[h.jsx("span",{className:"auth-input-icon",children:h.jsx(Jv,{})}),h.jsx("input",{className:"auth-input",type:"password",placeholder:e("password"),value:s,onChange:z=>u(z.target.value),required:!0})]}),N&&h.jsx("p",{className:"text-sm text-red-500",children:N}),h.jsx("button",{className:"auth-button w-full",type:"submit",disabled:k,children:e(k?"signing_in":"sign_in")})]}),h.jsxs("div",{className:"text-center mt-4 text-sm text-gray-600",children:[e("no_account")," ",h.jsx("button",{onClick:()=>{n("signup"),E(null)},className:"font-medium text-orange-600 hover:underline",children:e("sign_up")})]})]})}),q=h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:h.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-lg p-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-6",children:e("create_your_account")}),h.jsxs("form",{className:"grid grid-cols-1 gap-4",onSubmit:L,children:[h.jsxs("div",{className:"auth-input-container",children:[h.jsx("span",{className:"auth-input-icon",children:h.jsx(aI,{})}),h.jsx("input",{className:"auth-input",type:"text",placeholder:e("name"),value:c,onChange:z=>f(z.target.value),required:!0})]}),h.jsxs("div",{className:"auth-input-container",children:[h.jsx("span",{className:"auth-input-icon",children:h.jsx(aI,{})}),h.jsx("input",{className:"auth-input",type:"text",placeholder:e("employee_id"),value:p,onChange:z=>m(z.target.value),required:!0})]}),h.jsxs("div",{className:"auth-input-container",children:[h.jsx("span",{className:"auth-input-icon",children:h.jsx(uI,{})}),h.jsx("input",{className:"auth-input",type:"email",placeholder:e("email"),value:v,onChange:z=>y(z.target.value),required:!0})]}),h.jsxs("div",{className:"auth-input-container",children:[h.jsx("span",{className:"auth-input-icon",children:h.jsx(Jv,{})}),h.jsx("input",{className:"auth-input",type:"password",placeholder:e("password"),value:w,onChange:z=>_(z.target.value),required:!0})]}),h.jsxs("div",{className:"auth-input-container",children:[h.jsx("span",{className:"auth-input-icon",children:h.jsx(Jv,{})}),h.jsx("input",{className:"auth-input",type:"password",placeholder:e("confirm_password"),value:S,onChange:z=>C(z.target.value),required:!0})]}),N&&h.jsx("p",{className:"text-sm text-red-500",children:N}),x&&h.jsx("p",{className:"text-sm text-green-600",children:x}),h.jsx("button",{className:"auth-button w-full mt-2",type:"submit",disabled:k,children:e(k?"signing_in":"sign_up")})]}),h.jsxs("div",{className:"text-center mt-4 text-sm text-gray-600",children:[e("already_have_account")," ",h.jsx("button",{onClick:()=>{n("login"),E(null)},className:"font-medium text-orange-600 hover:underline",children:e("sign_in")})]})]})});return t==="login"?F:q},eB=()=>h.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),h.jsx("p",{className:"mt-4 text-xl font-semibold text-zinc-700",children:"Initializing..."})]})}),tB=()=>{const{user:e,profile:t,loading:n}=KV(),{locale:r}=Oe();return R.useEffect(()=>{document.documentElement.lang=r,document.documentElement.dir=r==="ar"?"rtl":"ltr"},[r]),n?h.jsx(eB,{}):h.jsx("div",{className:"bg-gray-50 min-h-screen font-sans",children:e&&t?h.jsx(J5,{user:e,profile:t}):h.jsx(Z5,{})})},LA=document.getElementById("root");if(!LA)throw new Error("Could not find root element to mount to");const nB=Zv.createRoot(LA);nB.render(h.jsx($l.StrictMode,{children:h.jsx(HV,{children:h.jsx(u5,{children:h.jsx(tB,{})})})}));
